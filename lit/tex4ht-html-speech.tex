% $Id$
% Compile 3 times: latex tex4ht-html-speech
%           or   xhlatex tex4ht-html-speech "html,3,sections+"
% (html4*.4ht must be up to date.)
%
% Copyright 2009-2015 TeX Users Group
% Copyright 2006-2009 Eitan M. Gurari
% Released under LPPL 1.3c+.
% See tex4ht-cpright.tex for license text.

\ifx \HTML\UnDef
   \def\HTML{html-speech,html-speech-math,emacspeak} 
   \def\CONFIG{\jobname}
   \def\MAKETITLE{\author{Eitan M. Gurari}}
   \def\OPTIONS{xhtml,3,sections+}
   \def\PREAMBLE{\usepackage{url}}
   \def\next{\input mktex4ht.4ht  \endinput}
   \expandafter\next
\fi

\input{common-code}
\input{common}
\input{tex4ht-cpright}

\def\.{\string\a:mathml:\space}


\TocAt{section,subsection,likesubsection}  

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Needs{"ls -l tex4ht-*.tex > ls-links.log"}
\openin15=ls-links.log
\ifeof15 \else \closein15
\bgroup
   \catcode`\-=13
   \def-#1tex4ht-{\bgroup \catcode`\-=12  
      \def-##1.tex{\egroup
           [\Link[tex4ht\string-##1.html]{}{}##1\EndLink]}
      -}   
  \input ls\string-links.log
\egroup
\fi


%%%%%%%%%%%%%%%%%%
\section{General}
%%%%%%%%%%%%%%%%%%




\begin{center}
\tt htlatex file "html,emspk" " -cemspkhtf -s4css -s4es" "-cemspk"
\end{center}

%%%%%%%%%%%%%%%%%%
\section{Root}
%%%%%%%%%%%%%%%%%%


\<html-speech\><<<
% html-speech.4ht (|version), generated from |jobname.tex
% Copyright 2009-2015 TeX Users Group
% Copyright |CopyYear.1997. Eitan M. Gurari
|<TeX4ht copywrite|>
>>>

\<html-speech-math\><<<
% html-speech-math.4ht (|version), generated from |jobname.tex
% Copyright 2009-2015 TeX Users Group
% Copyright |CopyYear.2006. Eitan M. Gurari
|<TeX4ht copywrite|>
>>>

\<emacspeak\><<<
% emacspeak.4ht (|version), generated from |jobname.tex
% Copyright 2009-2015 TeX Users Group
% Copyright |CopyYear.2006. Eitan M. Gurari
|<TeX4ht copywrite|>
>>>


\<par del\><<<
!*?: >>>
\<tag of Tag\><<<
 cw:>>>


\<addr for Tag and Ref of Sec\><<<
\xdef\:cursec{|<section html addr|>}%
>>>


%%%%%%%%%%%%%%%%%%
\section{Preamble}
%%%%%%%%%%%%%%%%%%


\<configure html-speech tex4ht\><<<
\Configure{VERSION}
    {\HCode{<?xml version="1.0" |<xml encoding|> ?>\Hnewline
            <?xtpipes file="htspk.4xt" ?>\Hnewline}}          
>>>

\<xml encoding\><<<
encoding="\expandafter\ifx \csname a:charset\endcsname\relax
         \expandafter\:encoding\A:charset
   \else \expandafter\:encoding\a:charset\fi"
>>>

\<configure html-speech Preamble\><<<
\:CheckOption{math-}     \if:Option 
    \edef\Preamble{\Preamble,mathml-}
\else
   \Log:Note{for sources failing to produce
       clean math code, try the command line option `math-'}%
\fi
>>>


\<configure html-speech Preamble\><<<
\def\CssSpeech#1{\Css{@media speech{#1}}}
\def\add:description#1#2{<span class="#1"
           title="speech-extra" >\Hnewline #2\Hnewline</span>}
\def\add:vdescription#1#2{<div class="#1"
           title="speech-extra" >\Hnewline #2\Hnewline</div>}
>>>


The attribute `{\tt title="speech-extra"}' is useful when there is
a need to check just the content provided to the translation.



\<configure html-speech tex4ht\><<<
\Css{.begin-math, .end-math                    {color:red;}}
\Css{span.semi-math            {color:red;font-style:italic;}} 
\Css{span[title="ch-verbose"]                    {color:red;}} 
\Css{.added-description                        {color:green;}} 
\Css{.begin-end                                {color:green;}}
\Css{.begin-root, .end-root, .mid-root         {color:green;}}
\Css{.begin-stack, .end-stack, .mid-stack      {color:green;}}
\Css{.capital-description                      {color:green;}} 
>>>


\<configure emacspeak tex4ht\><<<
\CssSpeech{.begin-end                    {stress:4; richness:4;}}
\CssSpeech{.begin-math, .end-math        {stress:3; richness:5;}}
\CssSpeech{.semi-math     {pitch: 8; pitch-range: 7; volume: 5;}}
\CssSpeech{.begin-root, .end-root, .mid-root         {stress:3;}}
\CssSpeech{.begin-stack, .end-stack, .mid-stack      {stress:3;}}
\CssSpeech{.char-del                                 {stress:4;}}
\CssSpeech{.capital-description                      {stress:4;}}
\CssSpeech{body {speak-punctuation: none}}
>>>

% 

\<show input line no\><<<
<!--l. \the\inputlineno-->%
>>>




\<configure html-speech Preamble\><<<
\edef\Preamble{\Preamble,xhtml}
>>>

\<configure html-speech tex4ht\><<<
\Configure{DOCTYPE}
  {\HCode{% <!DOCTYPE html \xhtml:DOCTYPE>            \Hnewline
          <!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->
          \Hnewline}}
\def\xhtml:DOCTYPE{PUBLIC
     "-//W3C//DTD XHTML 1.0 Transitional//|<dtd lang|>"\Hnewline
    \space\space "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"}
>>>

The DOCTYPE is not provided since we don't know how to hide it from
Java SAX in stpipes.


%%%%%%%%%%%%%%%%%%
\section{Outline}
%%%%%%%%%%%%%%%%%%


\<configure html-speech-math tex4ht\><<<
|<sub, sup, subsup|>            
|<limits sub, sup, subsup|>     
|<tex compiler mathml|>
>>>



\<configure html-speech latex\><<<
|<latex verbatim|>
|<latex footnotes|>
|<array and tabular|>
>>>


\<configure html-speech-math latex\><<<
|<plain,latex mathml|>
|<config array|>
|<mathml latex|>
>>>

\<configure html-speech-math array\><<<
|<config array|>
>>>

\<configure html-speech book\><<<
|<config book-report-article|>
>>>

\<configure html-speech report\><<<
|<config book-report-article|>
|<config report-article|>
>>>

\<configure html-speech article\><<<
|<config book-report-article|>
|<config report-article|>
>>>

\<configure html-speech letter\><<< 
|<description lists|>
|<quote config|>
|<roman enumeiii|>
>>>

\<configure html-speech-math fontmath\><<<
|<plain,fontmath math|>
>>>

\<config book-report-article\><<<
|<latex shared section config|>
|<latex shared subsection config|>
|<latex shared subsubsection config|>
|<latex shared paragraph config|>
|<config captions|>
|<description lists|>
|<quote config|>
|<roman enumeiii|>
>>>


\<configure html-speech JHEP\><<<
|<latex shared part config|>
|<latex shared section config|>
|<latex shared subsection config|>
|<latex shared subsubsection config|>
>>>

\<configure html-speech acm-proc-article-sp\><<<
|<latex shared part config|>
|<latex shared section config|>
|<latex shared subsection config|>
|<latex shared subsubsection config|>
>>>

\<configure html-speech aa\><<<   
|<latex shared section config|>
|<latex shared subsection config|>
|<latex shared subsubsection config|>
|<latex shared paragraph config|>
|<config captions|>
>>>

\<configure html-speech amsbook\><<<
|<ams art,proc,book div|>
|<ams art,proc,book toc|>  |%should appear before TocAt|%
>>>

\<configure html-speech amsproc\><<<
|<ams art,proc,book|>
>>>

\<configure html-speech-math amsmath\><<<
|<amsmath equation|>
>>>

\<configure html-speech amsart\><<<
|<ams art,proc,book|>
>>>


\<configure html-speech-math plain\><<<
|<mathml plain|>
|<plain,fontmath math|>
|<plain,latex mathml|>
>>>

\<ams art,proc,book\><<<
|<config captions|>
|<description lists|>
>>>


\<configure html-speech scrbook\><<<
|<description lists|>
>>>


\<configure html-speech scrreprt\><<<
|<description lists|>
>>>


\<configure html-speech slides\><<<
|<description lists|>
|<roman enumeiii|>
>>>



\<configure emacspeak book\><<<
|<emacspeak book-report-article|>
|<emacspeak latex shared|>
>>>

\<configure emacspeak report\><<<
|<emacspeak book-report-article|>
|<emacspeak latex shared|>
>>>

\<configure emacspeak article\><<<
|<emacspeak book-report-article|>
|<emacspeak latex shared|>
>>>

\<configure html-speech JHEP\><<<
|<emacspeak latex shared|>
>>>

\<configure html-speech acm-proc-article-sp\><<<
|<emacspeak latex shared|>
>>>

\<configure html-speech aa\><<<   
|<emacspeak latex shared|>
>>>

\<configure emacspeak fontmath\><<<
|<emacspeak plain,fontmath|>
>>>


\<configure emacspeak plain\><<<
|<emacspeak plain,fontmath|>
|<emacspeak plain,latex|>
>>>



\<configure emacspeak latex\><<<
|<emacspeak plain,latex|>
>>>

%%%%%%%%%%%%%%%%%%
\section{HTML Head}
%%%%%%%%%%%%%%%%%%

\<configure html-speech tex4ht\><<<
\let\Link\M:Link        \let\M:Link\:UnDef
\let\EndLink\M:EndLink  \let\M:EndLink\:UnDef
>>>




\<configure html-speech tex4ht\><<<
\Configure{@HEAD}{}
|<meta tags|>
\:CheckOption{css-in} \if:Option
   \Log:Note{the inline CSS code is extracted from the input of the
       previous compilation, so an extra compilation might be needed}
   \Configure{@HEAD}{|<css inline|>}
\else
   \Log:Note{for inline CSS code, use the command line option `css-in'}
   \Configure{@HEAD}{\HCode{<link
      rel="stylesheet" type="text/css"
      href="\aa:CssFile"></link>\Hnewline}}
\fi
>>>

\<meta tags\><<<
\:CheckOption{xht} \if:Option  
   \:CheckOption{xhtml}\if:Option \else \:CheckOption{xml}\fi   
\fi
|<html extension file name|>
\def\:gobbleM#1->{} 
|<meta generator / originator|>
\immediate\write-1{TeX4ht package options:
    \expandafter\:gobbleM\meaning\Preamble}
\Configure{@HEAD}
   {\HCode{<meta name="src" content="\jobname.tex"></meta>\Hnewline}} 
\Configure{@HEAD}
   {\HCode{<meta name="date" content="\:today"></meta>\Hnewline}} 
>>>

\<html extension file name\><<<
\Log:Note{for file extension name xht, use the command line option `xht'}%
\Configure{@HEAD}{\HCode{<meta  
   http-equiv="Content-Type" content="text/html;
   \expandafter\ifx \csname a:charset\endcsname\relax\A:charset
   \else \a:charset\fi"></meta>\Hnewline}}
>>>

\<meta generator / originator\><<<
\Configure{@HEAD}{\HCode{<meta  
    name="generator" content="TeX4ht
      (http://www.cse.ohio-state.edu/\string
       ~gurari/TeX4ht/)"></meta>\Hnewline}}
\Configure{@HEAD}{\HCode{<meta  
    name="originator" content="TeX4ht
      (http://www.cse.ohio-state.edu/\string
       ~gurari/TeX4ht/)"></meta>\Hnewline
       <!--\space\expandafter\:gobbleM\meaning
               \Preamble\space-->\Hnewline}}
>>>


%%%%%%%%%%%%%%%%%%
\part{Prose}
%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%
\section{Bibliography and Equation References}
%%%%%%%%%%%%%%%%%%



\<configure html-speech latex\><<<
\def\@cite#1#2{%
   \HCode{\add:description{added-description}{\a:speak:citation}}%
   {#1\if@tempswa , #2\fi}}
\def\@biblabel#1{%
   \HCode{\add:description{added-description}{\a:speak:bib}}%
   #1}
>>>

\<configure html-speech latex\><<<
\NewConfigure{speak:citation}{1}
\Configure{speak:citation}{citation }
\NewConfigure{speak:bib}{1}
\Configure{speak:bib}{Bibliography entry }
>>>




\<configure html-speech-math amsmath\><<<
\Configure{eqref}
   {\bgroup\let\tagform@\empty
    \HCode{<span class="eqref" >
       \add:description{added-description}{\a:speak:eqref}}}
   {\HCode{</span>}\egroup}
>>>

\<configure html-speech-math amsmath\><<<
\NewConfigure{speak:eqref}{1}
\Configure{speak:eqref}{ equation }
>>>


\<configure emacspeak latex\><<<
\CssSpeech{@media speech{.cite, .biblabel
       {pitch: 5 ; pitch-range: 6; stress: 6; richness: 5;}}}
>>>


\<configure emacspeak amsmath\><<<
\CssSpeech{@media speech{.eqref
       {pitch: 5 ; pitch-range: 6; stress: 6; richness: 5;}}}
>>>






%%%%%%%%%%%%%%%%%%
\section{Cross Links}
%%%%%%%%%%%%%%%%%%


\<configure html-speech tex4ht\><<<
\Configure{crosslinks}{ }{ }{next}{previous}{previous-tail}{front}{tail}{up}
\Configure{crosslinks+}
   {\IgnorePar\EndP\HCode{|<show input line no|>%
                          <div class="crosslinks"><p class="noindent">
        \add:vdescription{begin-end}{\a:speak:crosslinks}}}
   {\HCode{\add:vdescription{begin-end}{\b:speak:crosslinks}
           </p></div>}\par\ShowPar}
   {\IgnorePar\EndP\HCode{|<show input line no|>%
                          <div class="crosslinks"><p class="noindent">
        \add:vdescription{begin-end}{\a:speak:crosslinks}}}
   {\HCode{\add:vdescription{begin-end}{\b:speak:crosslinks}
           </p></div>}\par\ShowPar}
\:CheckOption{next}     \if:Option   
   \Configure{next+}
     {\ShowPar\par\noindent \HCode{<span class="next">
      \add:description{added-description}{\c:speak:crosslinks}}}
     {\HCode{</span>}}
\fi
>>>


\<configure html-speech tex4ht\><<<
\NewConfigure{speak:crosslinks}{3}
\Configure{speak:crosslinks}
   {Navigation links}
   {End navigation links}
   {Navigation link}
>>>

\<configure emacspeak tex4ht\><<<
\CssSpeech{@media speech{.crosslinks a, .next a
        { pitch: 9; pitch-range: 4; volume: 5;
                      stress:1; pause-after: 1000ms }}}
>>>

%%%%%%%%%%%%%%%%%%
\section{Front Matter}
%%%%%%%%%%%%%%%%%%


\<emacspeak book-report-article\><<<
\CssSpeech{
  .titleHead {pitch: 3; 
              pitch-range: 4;
              richness: 8;
              stress: 3;
              volume: |<loud|>}}
\CssSpeech{  .author, .date {pitch: 5;
                  pitch-range: 4; 
                  richness: 7; 
                  stress: 1;
                  volume: |<medium|>}}
\CssSpeech{  .date {speak-date: dmy}}
\CssSpeech{  div.abstract { pitch: 4;
                 pitch-range: 3; 
                 speed: x-fast;
                 volume: |<x-loud|>}}
>>>


\<config report-article\><<<
\ConfigureEnv{abstract}
   {\IgnorePar\EndP
    \HCode{<div class="abstract"\Hnewline>}\par\ShowPar} 
   {\ifvmode \IgnorePar\fi \EndP\HCode{</div>}}
   {}{}
>>>




%%%%%%%%%%%%%%%%%%
\section{Sections}
%%%%%%%%%%%%%%%%%%


\<latex shared section config\><<<
\ConfigureMark{section}
   {\ifnum \c:secnumdepth>\c@secnumdepth \expandafter\:gobble
    \else
       \HCode{<span class="titlemark">\add:description{added-description}
                              {\a:speak:section}}\@seccntformat{section}%
       \HCode{</span>}\fi }
\ConfigureMark{subsection}
   {\ifnum \c:secnumdepth>\c@secnumdepth  \expandafter\:gobble
    \else 
       \HCode{<span class="titlemark">\add:description{added-description}
                              {\a:speak:subsection}}\@seccntformat{subsection}%
       \HCode{</span>}\fi }
|<latex speak section|>
>>>



\<ams art,proc,book div\><<<
\ConfigureMark{subsection}
  {\ifnum \c:secnumdepth>\c@secnumdepth \expandafter\:gobble
    \else
       \HCode{<span class="titlemark">\add:description{added-description}
                     {\a:speak:section}}\@ifundefined{sectionname}{}{%
          \ignorespaces\sectionname\space}%
          \@seccntformat{section}%
       \HCode{</span>}\fi }
|<latex speak section|>
>>>



\<latex speak section\><<<
\NewConfigure{speak:section}{1}
\Configure{speak:section}{section}
\NewConfigure{speak:subsection}{1}
\Configure{speak:subsection}{subsection}
>>>


\<emacspeak latex shared\><<<
\CssSpeech{
   .sectionHead {pitch: 4;
                 pitch-range: 7:
                 richness: 9; 
                 speed: slow;
                 volume: |<loud|>;}}
\CssSpeech{   .subsectionHead {pitch: 5;
                    pitch-range: 7;
                    richness: 9; 
                    speed: slow;
                    volume: |<medium|>;}}
>>>




%%%%%%%%%%%%%%%%%%
\section{Tables}
%%%%%%%%%%%%%%%%%%



\<configure html-speech array\><<<
|<array and tabular|>
>>>

\<array and tabular\><<<
\ConfigureEnv{tabular}
  {|<configure tabular noalign|>%
   \IgnorePar|<inline comment|>\EndP
  }
  {\ShowPar
   |<configure clear noalign|>%
   |<try env inline par|>%
  }{}{}
>>>

\<configure tabular noalign\><<<
\Configure{noalign}%
  {\f:tabular\d:tabular \HCode{<tr><td colspan="\ar:cnt">}}
  {\HCode{</td></tr>}\pend:def\TableNo{0}\c:tabular\e:tabular}%
>>>


\<configure clear noalign\><<<
\Configure{noalign}{}{}%
>>>


\<inline comment\><<<
\ifvmode\else\HCode{<!--tex4ht:inline-->}\fi
>>>



\<array and tabular\><<<
\Configure{tabular}
      {\ifvmode \IgnorePar\fi \EndP 
       \HCode{<div class="table" title="tabular" >}|<begin tabular note|>}
      {|<end tabular note|>\HCode{</div>}}
      {\HCode{<div class="tr"><!--row \HRow-->}%
       |<begin table row note|>}
      {|<end table row note|>\HCode{</div>}}
      {\HCode{<div  class="td"><!--entry \HRow-\HCol\ifnum 
             \HMultispan>1 \, span \HMultispan\fi-->}%
         |<begin table cell note|>\HCode{<div>}\SaveEndP 
         \par  \ShowPar}
      {\IgnorePar \EndP \ifvmode \IgnorePar \fi \EndP
       \HCode{</div>}|<end table cell note|>%
       \HCode{</div>\Hnewline}\RecallEndP }
>>>


\<begin tabular note\><<<
\HCode{\add:vdescription{begin-end}{begin table}}%
>>>

\<end tabular note\><<<
\HCode{|<show input line no|>\add:vdescription{begin-end}{end table}}%
>>>

\<begin table row note\><<<
\HCode{\add:vdescription{begin-end}{|<ord row|> row}}%
>>>


\<begin table cell note\><<<
\HCode{%
   \add:vdescription{added-description}{%
      \ifnum \HMultispan>1 |<ord col|> cell, spans
                           \HMultispan \space columns
      \else
         \ifnum \HCol>1 |<ord col|> cell \fi
      \fi
}}%
>>>

\<end table cell note\><<<
>>>






\<try env inline par\><<<
\ShowPar 
>>>

\<try inline par\><<<
\ShowPar \par{\HCondtrue\noindent}%
>>>

%%%%%%%%%%%%%
\subsection{Numbering}
%%%%%%%%%%%%%


\<configure html-speech tex4ht\><<<
\HAssign\HRow=0
>>>

\<advance table number\><<<
\PushStack\Table:Stck\TableNo
\gHAdvance\Next:TableNo by 1 
\global\let\TableNo=\Next:TableNo 
>>>

\<return to prev table number\><<<
\PopStack\Table:Stck\TableNo 
>>>

\<new row counter\><<<
\PushStack\Row:Stck\HRow     \HAssign\HRow=0\relax
>>>

\<return to prev row counter\><<<
\PopStack\Row:Stck\HRow
>>>

\<new col counter\><<<
\PushStack\Col:Stck\Prev:Col
>>>

\<return to prev col counter\><<<
\PopStack\Col:Stck\Prev:Col
>>>
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Matrices}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%
\subsection{Aligned}
%%%%%%%%%%%%%



\<configure html-speech-math amsmath\><<<
\Configure{aligned}  
   {|<advance table number|>%
    |<new row counter|>%
    \HCode{<div class="aligned">}%
    \HCode{\add:vdescription{begin-array}{\a:speak:aligned}}}
   {\Tag{aligned-\TableNo}{\hrow:s}%
    \HCode{|<show input line no|>%
           \add:vdescription{end-array}{\b:speak:aligned}}%
    \ifvmode \IgnorePar\fi \Tg</div>%
    |<return to prev row counter|>%
    |<return to prev table number|>}
   {\HCode{<div class="tr">}\c:speak:aligned}%
   {\xdef\hrow:s{\HRow}\HCode{</div>}}%
   {\HCode{<div  class="td" >}%
    \e:speak:aligned \HCode{<div>}}
   {\HCode{</div>}\f:speak:aligned
    \HCode{</div>\Hnewline}}
>>>

\<configure html-speech-math amsmath\><<<
\NewConfigure{speak:aligned}{6}
\Configure{speak:aligned}
   {begin 
       \ifTag{aligned-\TableNo}{\LikeRef{aligned-\TableNo}}{}
       aligned equations}
   {end  equations}
   {|<begin table row note|>}
   {|<end table row note|>}
   {|<begin table cell note|>}
   {|<end table cell note|>}
>>>



\<configure html-speech-math amsmath\><<<
\Configure{alignedat}  
   {|<advance table number|>%
    |<new row counter|>%
    \HCode{<div class="aligned">}%
    \HCode{\add:vdescription{begin-array}{\a:speak:aligned}}}
   {\Tag{aligned-\TableNo}{\hrow:s}%
    \HCode{|<show input line no|>%
           \add:vdescription{end-array}{\b:speak:aligned}}%
    \ifvmode \IgnorePar\fi \Tg</div>%
    |<return to prev row counter|>%
    |<return to prev table number|>}
   {\HCode{<div class="tr">}\c:speak:aligned}%
   {\xdef\hrow:s{\HRow}\HCode{</div>}}%
   {\HCode{<div  class="td" >}%
    \e:speak:aligned \HCode{<div>}}
   {\HCode{</div>}\f:speak:aligned
    \HCode{</div>\Hnewline}}
>>>


%%%%%%%%%%%%%%%%%%%%
\subsection{Cases}
%%%%%%%%%%%%%%%%%

\<plain,latex mathml\><<<
\Configure{cases}
    {}{} {\Tg<mtable>}{\Tg</mtable>}
    {\Tg<mtr>}{\Tg</mtr>}
    {\Tg<mtd class="cases">}{\Tg</mtd>}
>>>


\<configure html-speech-math amsmath\><<<
\ConfigureEnv{cases}
   {|<advance table number|>%
    |<new row counter|>%
    \HCode{<div class="cases">}%
    \bgroup
       |<save left/right config|>%
       |<config amsmath cases|>%
       |<cases left/right|>%
   }
   {\egroup\HCode{</div>}%
    |<return to prev row counter|>%
    |<return to prev table number|>}
   {}{}
>>>






\<config amsmath cases\><<<
\Configure{array} 
   {\HCode{<div class="table" title="cases">%
           \add:vdescription{begin-array}{begin 
      \ifTag{cases-\TableNo}{\LikeRef{cases-\TableNo}}{}  cases}}} %
   {\Tag{cases-\TableNo}{\HRow}%
    \HCode{|<show input line no|>%
           \add:vdescription{end-array}{end cases}}%
    \ifvmode \IgnorePar\fi \Tg</div>}
   {\HCode{<div class="tr">%
      \add:vdescription{begin-end}{Case \HRow}}}
   {\HCode{</div>}}%
   {\HCode{<div  class="sub-case-\HCol" >}%
    \bgroup
       |<config array|>%
       |<recall left/right config|>%
   }
   {\egroup \HCode{</div>\Hnewline}}
>>>






\<cases left/right\><<<
\Configure{left}
   {}
   {\bgroup}
\Configure{right}
   {\egroup}
   {}
>>>


\<save left/right config\><<<
\let\sv:a:left=\a:left
\let\sv:b:left=\b:left
\let\sv:a:right=\a:right
\let\sv:b:right=\b:right
>>>


\<recall left/right config\><<<
\let\a:left=\sv:a:left
\let\b:left=\sv:b:left
\let\a:right=\sv:a:right
\let\b:right=\sv:b:right
>>>




%%%%%%%%%%%%%%%%%%%%
\subsection{matrix}
%%%%%%%%%%%%%%%%%%%%

\<plain,latex mathml\><<<
\Configure{matrix}
   {|<advance table number|>%
    |<new row counter|>%
    \HCode{<div class="array">}%
    \HCode{\add:vdescription{begin-array}{\a:speak:array}}}
   {\Tag{array-\TableNo}{\hrow:s}%
    \HCode{|<show input line no|>%
           \add:vdescription{end-array}{\b:speak:array}}%
    \ifvmode \IgnorePar\fi \Tg</div>%
    |<return to prev row counter|>%
    |<return to prev table number|>}
   {\HCode{<div class="tr">}\c:speak:array}%
   {\xdef\hrow:s{\HRow}\HCode{</div>}}%
   {\HCode{<div  class="td" >}%
    \e:speak:array\HCode{<div>}}
   {\HCode{</div>}\f:speak:array
    \HCode{</div>\Hnewline}}
>>>

\<mtd matrix\><<<
\HCode{<mtd\Hnewline class="matrix" 
   \ifnum 1<\HMultispan columnspan="\HMultispan"\fi}%
   \halignTD    \HCode{>}%
>>>



The grouping below is handle the case that the matrix is a base of an exponent.


\<plain,latex mathml\><<<
\Configure{pmatrix}
  {\bgroup\Tg<div class="pmatrix">}
  {\Tg</div>\egroup}
>>>




\<plain,latex mathml\><<<
\NewConfigure{speak:array}{6}
\Configure{speak:array}
   {begin array with
       \ifTag{array-\TableNo}{\LikeRef{array-\TableNo}}{}
       rows}
   {end array}
   {|<begin table row note|>}
   {|<end table row note|>}
   {|<begin table cell note|>}
   {|<end table cell note|>}
>>>



%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Math}
%%%%%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech plain\><<<
|<TABLE eqalign shared Configure 4.0t|>
>>>
\<TABLE eqalign shared Configure 4.0t\><<<
\Configure{eqalign}
   {\:xhtml{\IgnorePar\EndP}\HCode
      {<div class="eqalign"><table class="eqalign">}}
   {\HCode{</table></div>}}
   {\HCode{<tr \Hnewline class="eqalign"
         valign="middle">}}{\IgnorePar\HCode{</tr>}}
   {\HCode{<td align="\ifnum \HCol=2
         left\else right\fi"\Hnewline  class="eqalign\HCol" 
         style="white-space:nowrap;">}}
   {\HCode{</td>}}
\def\:eqalign:{\Configure{noalign}
  {\HCode{<tr><td class="noalign" colspan="2">}}%
  {\HCode{</td></tr>}}}
\Css{td.eqalign3 { text-align:right; margin-left:10em;}}
\Css{.eqalign td { white-space: nowrap; }}
\Css{div.eqalign {text-align:center;}}
>>>





\<TABLE eqalign shared Configure 4.0t\><<<
\Configure{eqalignno}
   {\:xhtml{\IgnorePar\EndP}\HCode{<table class="eqalignno">}}
   {\HCode{</table>}}
   {\HCode{<tr\Hnewline class="eqalignno">}}{\IgnorePar\HCode{</tr>}}
   {\HCode{\ifnum \HCol=3 <td\Hnewline width="10"
           class="eqalignno-sp"></td>\fi
           <td align="\ifnum \HCol=2 left\else right\fi"\Hnewline
           class="eqalignno\HCol">}}
   {\HCode{</td>}}
\def\:eqalignno:{\Configure{noalign}
  {\HCode{<tr><td class="noalign" colspan="2">}}%
  {\HCode{</td></tr>}}}
\Css{td.eqalignno3, td.leqalignno3
       { text-align:right; margin-left:10em;}}
\Css{.leqalignno td, .eqalignno td
       { white-space: nowrap; }}
\Css{.leqalignno td.noalign, .eqalignno td.noalign
       { width:5\%; white-space: normal; }}
\Css{table.leqalignno, table.eqalignno {width:100\%;}}
>>>

\<TABLE eqalign shared Configure 4.0t\><<<
\Configure{leqalignno}
   {\:xhtml{\IgnorePar\EndP}\HCode{<table class="leqalignno">}}
   {\HCode{</table>}}
   {\HCode{<tr \Hnewline 
           class="leqalignno">}}{\IgnorePar\HCode{</tr>}}
   {\HCode{\ifnum \HCol=3 <td\Hnewline width="30"
           class="eqalignno-sp"></td>\fi
           <td align="\ifnum \HCol=2 left\else right\fi"\Hnewline
           class="leqalignno\HCol">}}
   {\HCode{</td>}}
\def\:leqalignno:{\Configure{noalign}
  {\HCode{<tr><td class="noalign" colspan="2">}}%
  {\HCode{</td></tr>}}}
>>>




\<config array\><<<
\Configure{array} 
   {|<advance table number|>%
    |<new row counter|>%
    \HCode{<div class="array">}%
    \HCode{\add:vdescription{begin-array}{\a:speak:array}}}
   {\Tag{array-\TableNo}{\hrow:s}%
    \HCode{|<show input line no|>%
           \add:vdescription{end-array}{\b:speak:array}}%
    \ifvmode \IgnorePar\fi |<insert Clr|>\Tg</div>%
    |<return to prev row counter|>%
    |<return to prev table number|>}
   {\HCode{<div class="tr">}\c:speak:array}%
   {\xdef\hrow:s{\HRow}\HCode{</div>}}%
   {\HCode{<div  class="td" >}%
    \e:speak:array\HCode{<div>}}
   {\HCode{</div>}\f:speak:array
    \HCode{</div>\Hnewline}}
\ConfigureEnv{array}
   {\bgroup\Configure{$}{}{}{}} 
   {\egroup}
   {}{}
>>>




\<configure html-speech latex\><<<
\Css{.begin-array, .end-array                   {color:green;}}
>>>

\<configure emacspeak latex\><<<
\CssSpeech{.begin-array, .end-array    {stress:4; richness:4;}}
>>>


\<begin array row note\><<<
\HCode{\add:vdescription{begin-end}{Row \HRow}}%
>>>




\<configure html-speech-math latex\><<<
\ConfigureEnv{array}
   {\PushStack\Col:Marg\AllColMargins
    \bgroup\Configure{$}{}{}{}} 
   {\egroup \PopStack\Col:Marg\AllColMargins}
   {}{}
>>>

\<configure html-mml array\><<<
\ConfigureEnv{array}
   {\PushStack\Col:Marg\AllColMargins
    \bgroup\Configure{$}{}{}{}} 
   {\egroup \PopStack\Col:Marg\AllColMargins}
   {}{}
>>>






\<insert Clr\><<<
\expandafter\tmp:toks\expandafter{\Clr}%
\HCode{<!--\the\tmp:toks-->}%
>>>





\<mathml latex\><<<
\def\:MM{m}
\Configure{HBorder}
   {<mtr\Hnewline class="hline">} 
   {|<mml hline|>}
   {</mtr>}
   {<mtr\Hnewline class="cline">}
   {<mtd></mtd>}
   {|<mml hline|>}
   {</mtr>}
   {<mtr\Hnewline class="vspace" style="font-size:\HBorderspace">}
   {<mtd\Hnewline></mtd>}
   {</mtr>}
>>>

\<configure html-speech-math latex\><<<
\def\:MM{\ifmathml m\fi}
\Configure{HBorder}
   {<\:MM tr\Hnewline 
       \ifmathml \expandafterclass\else class\fi="hline">} 
   {\ifmathml|<mml hline|>\else
            <td><hr\xml:empty></td>\fi} 
   {</\:MM tr>}
   {<\:MM tr\Hnewline
       \ifmathml \expandafterclass\else class\fi ="cline">}
   {<\:MM td></\:MM td>}
   {\ifmathml|<mml hline|>\else
            <td><hr\xml:empty></td>\fi}
   {</\:MM tr>}
   {<\:MM tr\Hnewline
         \ifmathml \expandafterclass\else  class\fi="vspace"
         style="font-size:\HBorderspace">}
   {<\:MM td\Hnewline>\ifmathml\else\string&\#x00A0;\fi
      </\:MM td>}
   {</\:MM tr>}
\Configure{halign}
   {\EndP\halignTB{halign}}   \t:HA
   \R:HA\r:HA\D:HA\d:HA
>>>



\<mml hline\><<<
<mtd><mo> \string&\#x0332; </mo></mtd>
>>>

%%%%%%%%%%%%%
\subsection{Small Matrix}
%%%%%%%%%%%%%



\<configure html-speech-math latex\><<<
|<config multicolumn|>
>>>


\<configure html-speech-math array\><<<
|<config multicolumn|>
>>>


\<config multicolumn\><<<
\Configure{multicolumn}
   {\let\sv:VBorder\VBorder
    \let\VBorder\empty
    \Configure{VBorder}{}{}{}{}%
   }
   {\let\VBorder\sv:VBorder}   
   {\ifmmode \else
       \ifvmode\IgnorePar\fi
    \fi   \HCode{<div class="multicolumn" title="\HMultispan">}}
   {\ifmmode \else
       \ifvmode\IgnorePar\fi \EndP\fi \HCode{</div>} }
\def\gob:sp#1{#1}
>>>





%%%%%%%%%%%%%%%%%%%%
\section{TeX}
%%%%%%%%%%%%%%%%%%%%


\<mathml plain\><<<
\Configure{eqalignno}
   {\HCode{<mtable class="eqalignno">}}
   {\HCode{</mtable>}}
   {\HCode{<mtr\Hnewline class="eqalignno">}}
   {\HCode{</mtr>}}
   {\HCode{<mtd \Hnewline class="eqalignno-\HCol">}}
   {\HCode{</mtd>}}
\def\:eqalignno:{\Configure{noalign}
  {\HCode{<mtr><mtd class="noalign" colspan="2">}}%
  {\HCode{</mtd></mtr>}}}
>>>


\<mathml plain\><<<
\Configure{leqalignno}
   {\HCode{<mtable class="leqalignno">}}
   {\HCode{</mtable>}}
   {\HCode{<mtr\Hnewline class="leqalignno">}}
   {\HCode{</mtr>}}
   {\HCode{<mtd \Hnewline class="leqalignno-\HCol">}}
   {\HCode{</mtd>}}
\def\:leqalignno:{\Configure{noalign}
  {\HCode{<mtr><mtd class="noalign" colspan="2">}}%
  {\HCode{</mtd></mtr>}}}
>>>










%%%%%%%%%%%%%%%%%%
\section{Lists}
%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%
\subsection{Shared}
%%%%%%%%%%%%%




\<configure html-speech latex\><<<
|<latex lists|>
>>>

\<configure emacspeak latex\><<<
\CssSpeech{
    .itemize, .enumerate, .description {pitch: 8;
                                  pitch-range: 4;
                                  volume: |<medium|>;
                                  pause-after: 1000ms}
}
\CssSpeech{.added-list-description 
   { pitch: 8; pitch-range: 4; volume: 5; pause-after: 1000ms }}
\CssSpeech{.li-itemize, .li-enumerate, .li-description
    { pitch: 3; pitch-range: 6; volume: 5 }}
>>>


\<latex lists\><<<
\ConfigureList{trivlist}%
   {\EndP\HCode{<dl \a:LRdir class="trivlist">}%
       |<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\EndP\HCode{</dd></dl>}\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</dd>}\HCode{<dt
        class="trivlist">}\bgroup \bf}
   {\egroup\HCode{</dt><dd\Hnewline class="trivlist">}}
>>>

\<latex lists\><<<
\ConfigureList{list}%
   {\EndP\HCode{<dl \a:LRdir class="list\expandafter\the
         \csname @listdepth\endcsname">}%
    |<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\EndP\HCode{</dd></dl>}\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</dd>}\HCode{<dt
        class="list">}\bgroup \bf}
   {\egroup\HCode{</dt><dd\Hnewline class="list">}}
>>>

%%%%%%%%%%%%%
\subsection{Itemized}
%%%%%%%%%%%%%



\<latex lists\><<<
\ConfigureList{itemize}%
   {\EndP|<begin itemize note|>\HCode{<div
           \a:LRdir class="ul-itemize\expandafter\the
          \csname @itemdepth\endcsname">}%
       |<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\ifvmode \IgnorePar\fi 
    \EndP\HCode{</div></div>}|<end itemize note|>\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</div>}%
    \HCode{<div class="li-itemize">}|<itemize item|>\DeleteMark
   }
   {\HCode{}}
>>>

\<begin itemize note\><<<
\HCode{<div class="itemize">%
      <div class="added-list-description">%
     \add:description{added-description}{\a:speak:itemize}</div>}%
>>>

\<end itemize note\><<<
\HCode{<div class="added-list-description">%
     \add:description{added-description}{\b:speak:itemize}</div></div>}%
>>>

\<itemize item\><<<
\HCode{<span class="added-list-description">%
    \add:description{added-description}{\c:speak:itemize}</span>}%
>>>



\<latex lists\><<<
\NewConfigure{speak:itemize}{3}
\Configure{speak:itemize}
   {begin \ifcase\csname @listdepth\endcsname
          \or \or sub \or sub sub \or sub sub sub \else\fi
       list}
   {end \ifcase\csname @listdepth\endcsname
         \or sub \or sub sub \or sub sub sub \else\fi
       list}
   {|%\ifcase\csname @listdepth\endcsname
          \or \or sub \or sub sub \or sub sub sub \else\fi|%
       item}
>>>






%%%%%%%%%%%%%
\subsection{Enumerate}
%%%%%%%%%%%%%




\<latex lists\><<<
\ConfigureList{enumerate}%
      {|<enumerate I|>}
      {|<enumerate II|>}
      {|<enumerate III|>}
      {|<enumerate IV|>}
>>>


\<enumerate I\><<<
\EndP|<begin enumerate note|>\HCode{<div \a:enumerate:\space 
      class="ol-enumerate\expandafter\the\csname @enumdepth\endcsname"
      \a:LRdir
     >}|<save end:itm|>\global\let\end:itm=\empty
>>>

\<enumerate II\><<<
|<recall end:itm|>%
\EndP\HCode{</div></div>}|<end enumerate note|>\ShowPar
>>>


\<enumerate III\><<<
\end:itm \gdef\end:itm{\EndP\Tg</div>}%
\HCode{<div class="li-enumerate" \Hnewline><span 
                    class="ol-mark">}|<enumerate item|>%\DeleteMark
>>>

\<enumerate IV\><<<
\HCode{}\HCode{</span>}%\AnchorLabel
>>>



\<save end:itm\><<<
\PushMacro\end:itm
>>>


\<recall end:itm\><<<
\PopMacro\end:itm \global\let\end:itm \end:itm 
>>>




\<begin enumerate note\><<<
\HCode{<div class="enumerate">%
   <div class="added-list-description">%
   \add:description{added-description}{\a:speak:enumerate}</div>}%
>>>


\<end enumerate note\><<<
\HCode{<div class="added-list-description">%
   \add:description{added-description}{\b:speak:enumerate}</div></div>}%
>>>

\<enumerate item\><<<
\HCode{<span class="added-list-description">%
       \add:description{added-description}{\c:speak:enumerate}</span>}%
>>>



\<roman enumeiii\><<<
\Configure{enumiii}
    {\HCode{<span class="roman-numeral">}%
     Roman numeral \HCode{}\the\c@enumiii 
     \HCode{}\:gobbleII}
    {\HCode{</span>}}
\long\def\:tempc{(\theenumii)}
\ifx \labelenumii\:tempc
   \def\:tempc{(\HCode{}\theenumii\HCode{})}
   \HLet\labelenumii\:tempc
\fi
>>>



\<latex lists\><<<
\NewConfigure{speak:enumerate}{3}
\Configure{speak:enumerate}
   {begin \ifcase\csname @listdepth\endcsname
          \or \or sub \or sub sub \or sub sub sub \else\fi
      list}
   {end \ifcase\csname @listdepth\endcsname
         \or sub \or sub sub \or sub sub sub \else\fi
      list}
   {|%\ifcase\csname @listdepth\endcsname
          \or \or sub \or sub sub \or sub sub sub \else\fi|%
       item}
>>>

%%%%%%%%%%%%%
\subsection{Description}
%%%%%%%%%%%%%


\<description lists\><<<
\ConfigureList{description}%
   {\EndP|<begin description note|>%
    \HCode{<div \a:LRdir class="dl-description">}%
      |<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\EndP\HCode{</div></div>}%
    |<end description note|>\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</div>}\HCode{<div 
        class="dt-description">}|<description item|>\bgroup \bf}
   {\egroup\EndP\HCode{</div><div\Hnewline class="dd-description">}}
>>>







\<begin description note\><<<
\HCode{<div class="description">%
   <div class="added-list-description">%
   \add:description{added-description}{\a:speak:description}</div>}%
>>>


\<end description note\><<<
\HCode{<div class="added-list-description">%
    \add:description{added-description}{\b:speak:description}</div></div>}%
>>>

\<description item\><<<
\HCode{<span class="added-list-description">%
   \add:description{added-description}{\c:speak:description}%
   </span>}%
>>>


\<configure html-speech-math tex4ht\><<<
\NewConfigure{speak:description}{3}
\Configure{speak:description}
   {begin \ifcase\csname @listdepth\endcsname
          \or \or sub \or sub sub \or sub sub sub \else\fi
       list}
   {end \ifcase\csname @listdepth\endcsname
         \or sub \or sub sub \or sub sub sub \else\fi
       list}
   {|%\ifcase\csname @listdepth\endcsname
          \or \or sub \or sub sub \or sub sub sub \else\fi|%
       item}
>>>





%%%%%%%%%%%%%%%%%%
\section{Verbatim}
%%%%%%%%%%%%%%%%%%


\<latex verbatim\><<<
\Configure{verbatim} {} {\a:sp}
\def\env:verb#1{\ifinner\else \vfill\break\fi
  \IgnorePar\EndP  \HAssign\Verb:N=0
  \HCode{\add:description{added-description}{begin verbatim}%
         <pre class="#1"\a:LRdir>}\EndNoFonts}
\def\endenv:verb{\NoFonts
  \EndP \ht:special{t4ht=</pre>%
     \add:description{added-description}{end verbatim}%
     }|<try inline par|>}
\def\start:fenv#1{\:xhtml{\IgnorePar
              \EndP}\HCode{<div align="#1"\Hnewline\a:LRdir>}}
\def\end:fenv{\IgnorePar\HCode{</div>}\IgnorePar}
>>>


\<configure emacspeak latex\><<<
\CssSpeech{ pre.verbatim { pitch: |<medium|>; 
                          pitch-range: 0; 
                               stress: 0; 
                            richness: 8
 }}
>>>


h1, h2, h3, 
h4, h5, h6    { voice-family: paul, male; stress: 20; richness: 90 }
h1            { pitch: x-low; pitch-range: 90 }
h2            { pitch: x-low; pitch-range: 80 }
h3            { pitch: low; pitch-range: 70 }
h4            { pitch: medium; pitch-range: 60 }
h5            { pitch: medium; pitch-range: 50 }
h6            { pitch: medium; pitch-range: 40 }
li, dt, dd    { pitch: medium; richness: 60 }
dt            { stress: 80 }
pre, code, tt { pitch: medium; pitch-range: 0; stress: 0; richness: 80 }
em            { pitch: medium; pitch-range: 60; stress: 60; richness: 50 }
strong        { pitch: medium; pitch-range: 60; stress: 90; richness: 90 }
dfn           { pitch: high; pitch-range: 60; stress: 60 }
s, strike     { richness: 0 }
i             { pitch: medium; pitch-range: 60; stress: 60; richness: 50 }
b             { pitch: medium; pitch-range: 60; stress: 90; richness: 90 }
u             { richness: 0 }
a:link        { voice-family: harry, male }
a:visited     { voice-family: betty, female }
a:active      { voice-family: betty, female; pitch-range: 80; pitch: x-high }



%%%%%%%%%%%%%%%%%%
\section{Figures}
%%%%%%%%%%%%%%%%%%





\<configure html-speech latex\><<<
\Configure{float}
   {\ifOption{refcaption}{}{\csname par\endcsname\ShowPar \leavevmode}}
   {\:xhtml{\IgnorePar\EndP}\HCode{<div class="float"\Hnewline>}}
   {\ifvmode \IgnorePar \fi\EndP
    \HCode{</div>}\csname par\endcsname\ShowPar}
\ConfigureEnv{figure}
   {\:xhtml{\IgnorePar\EndP}%
     \HCode{<div class="figure"\Hnewline>|<begin figure note|>}%
    \bgroup \Configure{float}{\ShowPar}{}{}%    
   }
   {\egroup
    \:xhtml{\IgnorePar\EndP}\HCode{|<end figure note|></div>}%
    |<try env inline par|>\par}
   {}{}
>>>

% \<configure emacspeak latex\><<<
% \CssSpeech{ .caption {pitch: 5;
%                       pitch-range: 9; 
%                      richness: 5; 
%                      volume: |<medium|>; 
%                      voice-family: betty
%   } }
% >>>
% 

\<config captions\><<<
\Configure{caption}{\HCode{\if:nopar  \else <br />\fi}
   \:xhtml{\IgnorePar\EndP}\HCode{<div class="caption"><span class="mark">}%
        |<caption of fig|>}
   {: } {|<end caption|>\HCode{</span>%
      <span \Hnewline class="content">%
        \add:description{added-description}{\a:speak:caption}}} 
   {\HCode{\add:description{added-description}{\b:speak:caption}%
         </span></div>}|<caption label comment|>}
>>>


\<begin figure note\><<<
<div>\add:description{begin-end}{\a:speak:figure}</div>%
>>>


\<end figure note\><<<
<div>\add:description{begin-end}{\b:speak:figure}</div>%
>>>

\<caption of fig\><<<
\HCode{\add:description{added-description}{\c:speak:caption}}%
>>>

\<end caption\><<<
\HCode{}%
>>>

\<configure html-speech latex\><<<
\NewConfigure{speak:caption}{3}
\Configure{speak:caption}
   {begin caption}
   {end caption}
   {caption of}
\NewConfigure{speak:figure}{2}
\Configure{speak:figure}
   {begin figure environment}
   {end figure environment}
>>>

%%%%%%%%%%%%%%%%%%
\section{Footnotes}
%%%%%%%%%%%%%%%%%%



\<latex footnotes\><<<
\Configure{footnote-mark}
   {|<begin footnote note|>\HCode{<span class="footnote-mark">}}
   {\HCode{</span>}|<end footnote note|>}  
>>>



\<begin footnote note\><<<
\HCode{\add:description{added-description}{\a:speak:footnote}}%
>>>


\<end footnote note\><<<
\HCode{}%
>>>


\<latex footnotes\><<<
\NewConfigure{speak:footnote}{1}
\Configure{speak:footnote}
   {footnote}
>>>


%%%%%%%%%%%%%
\section{Margin Notes}
%%%%%%%%%%%%%



\<configure html-speech latex\><<<
\Configure{marginpar}
   {\ifvmode
      \IgnorePar\EndP\HCode{<div class="marginpar">}%
         |<begin ver marginpar|>%
      \def\end:margp{\ifvmode \IgnorePar\fi \EndP 
         |<end ver marginpar|>\HCode{</div>}}%
      \par
    \else
      \SaveEndP
      \HCode{<span class="marginpar">}|<begin hor marginpar|>%
      \bgroup
         \Configure{HtmlPar}
             {<br />}
             {\HCode{<br />}}
             {}{}%
      \def\end:margp{\egroup
             |<end hor marginpar|>\HCode{</span>}\RecallEndP}%
    \fi
   }
   {\end:margp}
>>>

\<configure emacspeak latex\><<<
\CssSpeech{.marginpar {pitch: 7;
                       pitch-range: 4;
                       richness: 3; 
                       stress: 2; 
                       volume: 4}}
>>>

\<begin ver marginpar\><<<
\HCode{<div>
     \add:description{begin-end}{\a:speak:marginpar}</div><div>}%
>>>

\<end ver marginpar\><<<
\HCode{</div><div>
    \add:description{begin-end}{\b:speak:marginpar}</div>}%
>>>


\<begin hor marginpar\><<<
\HCode{\add:description{begin-end}{\a:speak:marginpar}}%
>>>

\<end hor marginpar\><<<
\HCode{\add:description{begin-end}{\b:speak:marginpar}}%
>>>



\<configure html-speech latex\><<<
\NewConfigure{speak:marginpar}{2}
\Configure{speak:marginpar}
   {begin margin note}
   {end margin note}
>>>

%%%%%%%%%%%%%%%%%%
\part{Math}
%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{The equation Environment}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{LaTeX}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech-math latex\><<<
\Configure{equation}
  {\IgnorePar|<inline end-par comment|>\EndP
   |<advance table number|>%
   \HCode{<div class="display-math">%
      \add:description{begin-math}{\a:speak:equation}%
      <div class="equation">}\IgnorePar
     |<math display in equation|>}
  {\ifvmode \IgnorePar\fi\EndP
   \HCode{</div>}%
   \let\@eqnnum\empty
  }
  {\HCode{%
       \add:description{end-math}{\b:speak:equation}%
      </div>}%
   \Tag{eq-\TableNo-num}{\theequation}%
   |<try inline par|>}
>>>



\<configure html-speech-math latex\><<<
\NewConfigure{speak:equation}{2}
\Configure{speak:equation}
   {begin equation 
         \ifTag{eq-\TableNo-num}{\LikeRef{eq-\TableNo-num}}{}%
   }
   {end equation \theequation}
>>>



\<inline end-par comment\><<<
\ifvmode\else \HCode{<!--tex4ht:inline-->}\fi
>>>



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{AmsMath}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%






\<amsmath equation\><<<
\ifx \mathdisplay@@pop\:UnDef
   \ifx \emdf@La\:UnDef
      |<amsmath html-mml pre 2000|>
   \else
      |<amsmath html-mml jan 2000|>
   \fi
\else
   |<amsmath html-mml july 2000|>
\fi
>>>


\<amsmath html-mml july 2000\><<<
\Configure{equation}
  {\ifvmode \IgnorePar\fi\EndP
   |<advance table number|>%
   \HCode{<div class="display-math">%
      \add:description{begin-math}{\a:speak:equation}%
   <div class="equation">}%
   |<amsmath equation july 2000|>%
   |<math display in equation|>%
  }
  {\ifvmode \IgnorePar\fi\EndP
   \HCode{</div>}%
   \let\@eqnnum\empty
  }
  {\ifvmode \IgnorePar\fi\EndP
    \HCode{%
       \add:description{end-math}{\b:speak:equation}%
       </div>}%
    \Tag{eq-\TableNo-num}{\theequation}%
    |<return to prev table number|>%
    \ShowPar\IgnoreIndent\par}
>>>



\<amsmath html-mml july 2000\><<<
\Configure{equation*}
  {\ifvmode \IgnorePar\fi\EndP
   |<advance table number|>%
   \HCode{<div class="display-math">%
      \add:description{begin-math}{\csname 
                               a:speak:equation*\endcsname}}%
   |<amsmath equation-star july 2000|>%
   |<math display in equation|>%
  }
  {\ifvmode \IgnorePar\fi\EndP 
   \HCode{\add:description{end-math}{\csname 
                         b:speak:equation*\endcsname}</div>}%
   |<return to prev table number|>%
   \ShowPar\IgnoreIndent\par}
>>>


\<amsmath html-mml july 2000\><<<
\Configure{speak:equation}
   {begin equation 
         \ifTag{eq-\TableNo-num}{\LikeRef{eq-\TableNo-num}}{}%
   }
   {end equation \theequation}
\NewConfigure{speak:equation*}{2}
\Configure{speak:equation*}
   {begin equation}
   {end equation}
>>>



\<amsmath equation july 2000\><<<
\Configure{gather}
     {\HCode{<div\Hnewline class="equation"><div
                                       class="gather">}\IgnorePar 
         |<math display in equation|>}
     {\HCode{</div></div>}}
     {}
     {}
     {\ifnum\HCol=2 \IgnorePar
         \HCode{</div><div>}\fi }
     {}
>>>


\<amsmath equation-star july 2000\><<<
\Configure{gather*}
     {\HCode{<div\Hnewline class="equation-star"><div
                                  class="gather-star">}\IgnorePar 
         |<math display in equation|>}
     {\HCode{</div></div>}}
     {}
     {}
     {\ifnum\HCol=2 \IgnorePar
         \HCode{</div><div>}\fi }
     {}
>>>


\<math display in equation\><<<
\Configure{$$}
   {\Configure{@math}{|<block display|>%
                       class="equation"}\IgnorePar\EndP\DviMath}
   {\EndDviMath\EndP}
   {\DisplayMathtrue}%
>>>











\<configure html-mml amsmath\><<<
\Configure{@begin}
  {split}
  {\let\tagform@=\:gobble }
>>>





\<configure html-speech-math amsmath\><<<
\Configure{split}
   {|<advance table number|>%
    \HCode{<div class="split">%
      \add:vdescription{begin-array}{begin 
          \ifTag{split-\TableNo}{\LikeRef{split-\TableNo}}{}
          sub equations}}}
   {\ifvmode\IgnorePar\fi 
    \Tag{split-\TableNo}{\HRow:s}%      
    \HCode{\add:vdescription{end-array}{end sub equations}</div>}%
    |<return to prev table number|>%
   }
   {\HCode{<div\Hnewline class="tr">}%
    \xdef\HRow:s{\HRow}%
   } 
   {\HCode{</div>}}
   {\HCode{<div\Hnewline class="split-side" 
                         title="implicit-baseline" >%
    \add:vdescription{begin-end}{%
      \ifnum \HCol=1 left \else right  \fi
      |<ord row|> sub equation}}%
   }
   {\HCode{</div>}}
>>>


\<configure html-speech-math amsmath\><<<
\ConfigureEnv{multline}
   {\bgroup |<math display in equation|>}
   {\egroup}
   {}{}  
\ConfigureEnv{multline*}
   {\bgroup |<math display in equation|>}
   {\egroup}
   {}{}  
>>>

\<configure html-speech-math amsmath\><<<
\Configure{multline}
   {|<advance table number|>%
    |<new row counter|>%
    \HCode{<div\Hnewline  class="display-math">%
    |<multline begin note|>}}
   {\Tag{multline-\TableNo}{\hrow:s}%
    \HCode{|<multline end note|></div>}%
    |<return to prev row counter|>%
    |<return to prev table number|>}
   {\HCode{<div class="tr" ><div\Hnewline class="multline-1">%
    |<multline row note|>}}
   {\xdef\hrow:s{\HRow}\HCode{</div></div>}} 
   {\HCode{</div><div class="multline-2">}} 
   {}
\Configure{multline-num}
   {\Tag{multline-\TableNo-num}{\theequation}\let\tagform@\:gobble}
   {}
>>>


\<configure html-speech-math amsmath\><<<
\Configure{multline*}
   {|<advance table number|>%
    |<new row counter|>%
    \HCode{<div\Hnewline class="display-math">%
        |<multline-star begin note|>}}
   {\Tag{multline-\TableNo}{\hrow:s}%
    \HCode{|<multline-star end note|></div>}%
    |<return to prev row counter|>%
    |<return to prev table number|>}
   {\HCode{<div\Hnewline class="tr">%
            |<multline row note|>}} 
   {\xdef\hrow:s{\HRow}\HCode{</div>}} 
\Css{.begin-multline, .end-multline {color:red;}}
>>>



\<configure emacspeak amsmath\><<<
\CssSpeech{.begin-multline, .end-multline  {stress:3; richness:5;}}
>>>


\<multline begin note\><<<
\add:vdescription{begin-math}{begin equation 
   \ifTag{multline-\TableNo-num}{\LikeRef{multline-\TableNo-num}}{}
   with
   \ifTag{multline-\TableNo}{\LikeRef{multline-\TableNo}}{}
   lines}%
<div class="multline">%
>>>

\<multline-star begin note\><<<
\add:vdescription{begin-math}{begin equation with
   \ifTag{multline-\TableNo}{\LikeRef{multline-\TableNo}}{}
   lines}%
<div class="multline-star">%
>>>


\<multline end note\><<<
</div>%
\add:vdescription{end-math}{end equation
   \ifTag{multline-\TableNo-num}{\LikeRef{multline-\TableNo-num}}{}%
}%
>>>          

\<multline-star end note\><<<
</div>%
\add:vdescription{end-math}{end equation}%
>>>          


\<multline row note\><<<
\add:vdescription{begin-end}{|<ord row|> line}%
>>>

\<advance multline count\><<<
\HAdvance\HRow by 1
>>>




\<configure html-speech-math amsmath\><<<
\ConfigureEnv{gather}
   {\bgroup |<math display in equation|>}
   {\egroup}
   {}{}  
\ConfigureEnv{gather*}
   {\bgroup |<math display in equation|>}
   {\egroup}
   {}{}  
\Css{.begin-gather, .end-gather {color:red;}}
>>>


\<configure emacspeak amsmath\><<<
\CssSpeech{.begin-gather, .end-gather  {stress:3; richness:5;}}
>>>


\<configure html-speech-math amsmath\><<<
\Configure{gather}
   {|<advance table number|>%
    |<new row counter|>%
    \HCode{<div\Hnewline class="display-math">%
       \add:vdescription{begin-math}{begin group of
         \ifTag{gather-\TableNo}{\LikeRef{gather-\TableNo}}{}
         equations}%
       <div class="gather">%
   }}
   {\HCode{</div>\add:vdescription{end-math}{end equations}%
           </div>}%
    \Tag{gather-\TableNo}{\hrow:s}%
    |<return to prev row counter|>%
    |<return to prev table number|>}
   {\HCode{<div class="tr">%
    \add:vdescription{begin-end}{|<ord row|> equation}%
   }}
   {\xdef\hrow:s{\HRow}\HCode{</div>}} 
   {\HCode{\Hnewline<div |<gather td class|> >}%
    \ifnum \HCol>1 \let\tagform@\:gobble \fi
   } 
   {\HCode{</div>}}
>>>

\<configure html-speech-math amsmath\><<<
\Configure{gather*}
   {|<advance table number|>%
    |<new row counter|>%
    \HCode{<div\Hnewline class="display-math">%
       \add:vdescription{begin-math}{begin group of
         \ifTag{gather-\TableNo}{\LikeRef{gather-\TableNo}}{}
         equations}%
         <div class="gather-star">%
    }}
   {\HCode{</div>\add:vdescription{end-math}{end equations}%
           </div>}%
    \Tag{gather-\TableNo}{\hrow:s}%
    |<return to prev row counter|>%
    |<return to prev table number|>}
   {\HCode{<div class="tr">%
    \add:vdescription{begin-math}{|<ord row|> equation}%
   }}
   {\xdef\hrow:s{\HRow}\HCode{</div>}} 
   {\HCode{\Hnewline<div |<gather td class|> >}}
   {\HCode{</div>}}
>>>




\<configure html-speech-math amsmath\><<<
\Configure{gathered}
   {|<advance table number|>%
    |<new row counter|>%
    \HCode{<div\Hnewline class="display-math">%
       \add:vdescription{begin-math}{begin group of
         \ifTag{gather-\TableNo}{\LikeRef{gather-\TableNo}}{}
         equations}%
       <div class="gather">%
   }}
   {\HCode{</div>\add:vdescription{end-math}{end equations}%
           </div>}%
    \Tag{gather-\TableNo}{\hrow:s}%
    |<return to prev row counter|>%
    |<return to prev table number|>}
   {\HCode{<div class="tr">%
    \add:vdescription{begin-end}{|<ord row|> equation}%
   }}
   {\xdef\hrow:s{\HRow}\HCode{</div>}} 
   {\HCode{\Hnewline<div |<gather td class|> >}%
    \ifnum \HCol>1 \let\tagform@\:gobble \fi
   } 
   {\HCode{</div>}}
>>>


\<gather td class\><<< 
\ifnum \HCol=1   class="col-\HCol"
\else            class="content-less" title="col-\HCol"
\fi
>>>

     
\<ord row\><<<
<span class="ord-row">\ord:pos{\HRow}</span>%
>>>

\<ord col\><<<
\ord:pos{\HCol}%
>>>


\<configure html-speech tex4ht\><<<
\def\ord:pos#1{%
   \ifcase #1
   \or first
   \or second
   \or third
   \or fourth
   \or fifth
   \or sixth
   \or seventh
   \or eighth
   \or nineth
   \else #1th
   \fi
}
>>>


\<configure html-speech tex4ht\><<<
\Css{.ord-row {color:red;}}
>>>

\<configure html-speech-math amsmath\><<<
\Configure{subarray}
   {|<advance table number|>%
    |<new row counter|>%
    \HCode{<div class="subarray\if c\Hlcr-c\fi">%
       \add:vdescription{begin-array}{\a:speak:subarray}%
    }}
   {\HCode{\add:vdescription{end-array}{\b:speak:subarray}%
           </div>}%
    \Tag{subarray-\TableNo}{\hrow:s}%
    |<return to prev row counter|>%
    |<return to prev table number|>}
   {\HCode{<div class="tr">%
    \add:vdescription{begin-end}{\c:speak:subarray}%
   }} 
   {\xdef\hrow:s{\HRow}\HCode{</div>}}
>>>

\<configure html-speech-math amsmath\><<<
\NewConfigure{speak:subarray}{3}
|<config speak:subarray|>
>>>

\<config speak:subarray\><<<
\Configure{speak:subarray}
   {begin sub array with
         \ifTag{subarray-\TableNo}{\LikeRef{subarray-\TableNo}}{}
         rows}
   {end sub array}
   {|<ord row|> row}
>>>


\<configure html-speech-math amsmath\><<<
\Configure{substack}
   {\bgroup
    \Configure{speak:subarray}
      {begin sub stack with
         \ifTag{subarray-\TableNo}{\LikeRef{subarray-\TableNo}}{}
         entries}
      {end sub stack}
      {|<ord row|> entry}
   }
   {\egroup} 
>>>

\<configure html-speech-math amsmath\><<<
\Configure{smallmatrix}
   {|<advance table number|>%
    |<new row counter|>%
    \HCode{<div class="smallmatrix">}%
    \HCode{\add:vdescription{begin-array}{\a:speak:smallmatrix}}}
   {\Tag{smallmatrix-\TableNo}{\hrow:s}%
    \HCode{|<show input line no|>%
           \add:vdescription{end-array}{\b:speak:smallmatrix}}%
    \ifvmode \IgnorePar\fi \Tg</div>%
    |<return to prev row counter|>%
    |<return to prev table number|>}
   {\HCode{<div class="tr">}\c:speak:smallmatrix}%
   {\xdef\hrow:s{\HRow}\HCode{</div>}}%
   {\HCode{<div  class="td" >}%
    \e:speak:smallmatrix \HCode{<div>}}
   {\HCode{</div>}\f:speak:smallmatrix
    \HCode{</div>\Hnewline}}
>>>


\<plain,latex mathml\><<<
\NewConfigure{speak:smallmatrix}{6}
\Configure{speak:smallmatrix}
   {begin matrix with
       \ifTag{smallmatrix-\TableNo}{\LikeRef{smallmatrix-\TableNo}}{}
       rows}
   {end  matrix}
   {|<begin table row note|>}
   {|<end table row note|>}
   {|<begin table cell note|>}
   {|<end table cell note|>}
>>>

\<configure html-speech-math amsmath\><<<
\def\:tempc#1#2{%
   \ConfigureEnv{#1}
     {\def\end:al:env{}\ifmmode\else 
       \ifvmode\else \def\end:al:env{\par\ShowPar\IgnoreIndent}\fi\fi}
     {\end:al:env }
     {}{}%
   \Configure{#1}
   {\IgnorePar
    \ifvmode \EndP  \else \EndP  \HCode{<!--tex4ht:inline-->}\fi    
    \ifmathml
       \Tg<span class="mrow">\def\end:mathalign{\Tg</span>}%
    \else
       \DviMath
       \def\end:mathalign{\EndDviMath \DisplayMathfalse}%
       \DisplayMathtrue
    \fi
    |<advance table number|>%
    |<new row counter|>%
    \HCode{<div\Hnewline class="display-math"><div class="display-math">%
        \add:description{begin-array}{\a:speak:align}%
       }}
   {\HCode{%
        \add:description{end-array}{\b:speak:align}%
       </div></div>}%
    \Tag{align-\TableNo}{\hrow:s}%
    |<return to prev row counter|>%
    |<return to prev table number|>\end:mathalign }
   {\HCode{<div class="tr">|<align eq note|>}}    
   {\HCode{</div>}\ifst@rred\else 
        \Tag{align-\TableNo-\HRow}{\theequation}%
    \fi \xdef\hrow:s{\HRow}}
   {\HCode{<div\Hnewline 
      class="align-\ifnum \HCol>\maxfields@ label\else 
         \ifodd\HCol\space  odd\else     even\fi 
       \fi">}%
    \ifnum \HCol>\maxfields@ \let\tagform@\:gobble \fi
   }
   {\HCode{</div>}}
}
\:tempc{align}{align}
\:tempc{alignat}{alignat}
\:tempc{xalignat}{xalignat}
\:tempc{xxalignat}{xxalignat}
\:tempc{flalign}{flalign}
\:tempc{align*}{align-star}
\:tempc{alignat*}{alignat-star}
\:tempc{xalignat*}{xalignat-star}
\:tempc{flalign*}{flalign-star}
\Css{.begin-aligned, .end-aligned {color:red;}}
>>>


\<configure emacspeak amsmath\><<<
\CssSpeech{.begin-aligned, .end-aligned  {stress:3; richness:5;}}
>>>

\<align eq note\><<<
\add:description{begin-end}{\c:speak:align}%
>>>   


\<configure html-speech-math amsmath\><<<
\NewConfigure{speak:align}{3}
\Configure{speak:align}
   {begin 
           \ifTag{align-\TableNo}{\LikeRef{align-\TableNo}}{}
           aligned equations}
   {end aligned equations}
   {\ifst@rred  |<ord row|> equation
    \else
       equation number \ifst@rred\else 
          \ifTag{align-\TableNo-\HRow}{\LikeRef{align-\TableNo-\HRow}}{}
       \fi
    \fi
   }
>>>


%%%%%%%%%%%%%%%%%%
\section{Math Delimiters}
%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%
\subsection{Full Expressions}
%%%%%%%%%%%%%




\<configure html-speech-math tex4ht\><<<
\Configure{DviMath}
    {\a:DviMathSpk \mathmltrue
       \ifOption{mml-fonts}{}{|%\mml:htfsym|%\NoFonts}%
       \IgnoreRule \HCode{<!--l.
       \the\inputlineno-->}\a:math
       |<sv dvimath par|>\IgnorePar}
    {\EndIgnoreRule
     \mathmlfalse \b:DviMathSpk |<recall dvimath par|>}
\NewConfigure{DviMathSpk}{2}
>>>



\<sv dvimath par\><<<
\edef\sv:ignore{\if:nopar  
    \noexpand\IgnorePar\else \noexpand\ShowPar\fi}%
>>>


\<recall dvimath par\><<<
\sv:ignore
>>>



\<configure html-speech-math tex4ht\><<<
\Configure{math}{}
\Configure{$}
   {|<conf inline math|>\DviMath}
   {\EndDviMath}{}
\Configure{$$} 
   {|<conf display math|>\DviMath}
   {\EndDviMath
       \ShowPar\par{\csname HCondtrue\endcsname\noindent}}
   {\DisplayMathtrue}
>>>


\<configure html-speech-math latex\><<<
\Configure{[]}
  {|<conf display math|>\DviMath $$\DisplayMathtrue }
  {$$\EndDviMath}
\Configure{()}
  {|<conf inline math|>\DviMath $}
  {$\EndDviMath}
>>>


\<conf inline math\><<<
\Configure{DviMathSpk}
      {\HCode{<span class="inline-math">%
              \add:description{begin-math}{\a:speak:math}}}
      {\HCode{\add:description{end-math}{\b:speak:math}</span>}}%
>>>     


\<conf display math\><<<
\Configure{@math}{div}\IgnorePar
    |<inline end-par comment|>\EndP
    \Configure{DviMathSpk}
      {\HCode{<div class="display-math">%
              \add:description{begin-math}{\a:speak:math}}}
      {\HCode{\add:description{end-math}{\b:speak:math}</div>}}%
>>>   


\<configure html-speech-math tex4ht\><<<
\NewConfigure{speak:math}{2}
\Configure{speak:math}
   {begin math}
   {end math}
>>>


\<configure emacspeak tex4ht\><<<
\CssSpeech{.inline-math,  .display-math
    { pitch: 8; pitch-range: 7; stress:7; richness: 7; }}
\CssSpeech{.space {pitch:0; pitch-range:0; richness:0; stress:0;}}
>>>


%%%%%%%%%%%%%
\subsection{Left and Right}
%%%%%%%%%%%%%



\<plain,latex mathml\><<<
\Configure{left}
   {}
   {\HCode{<span class="mfenced-open">%
           <span>|<lr del 1|></span>}\bgroup}
\Configure{right}
   {\egroup}
   {\HCode{<span class="mfenced-close">%
    |<lr del 1|></span></span>}}
>>>

\<plain,fontmath math\><<<
\Configure{big}
   {}{}
   {}
   {}
\Configure{Big}
   {}{}
   {}
   {}
\Configure{bigg}
   {}{}
   {}
   {}
\Configure{Bigg}
   {}{}
   {}
   {}
>>>







\<plain,fontmath math\><<<
|<big common|>
\:CheckOption{mathml-}     \if:Option 
   |<big mathml-|>
\else
   |<big mathml|>
\fi
>>>

\<big mathml\><<<
\Configure{Biggl}
   {\bgroup
       \Configure{Bigg}{}{}{}{}%
       \Configure{mathopen}{*}
          {<span class="Biggl"><span class="MathClass-open" >}
          {</span><span>}
          {\Configure{mathopen}{}{}{}{}}%
   }
   {\egroup}
\Configure{Biggr}
   {\bgroup
       \Configure{Bigg}{}{}{}{}%
       \Configure{mathclose}{*}
          {</span><span class="MathClass-close" >}
          {</span></span>}
          {\Configure{mathclose}{}{}{}{}}%
   }
   {\egroup}
\Configure{Bigl}
   {\bgroup
       \Configure{Big}{}{}{}{}%
       \Configure{mathopen}{*}
          {<span class="Bigl"><span class="MathClass-open">}
          {</span><span>}
          {\Configure{mathopen}{}{}{}{}}%
   }
   {\egroup}
\Configure{Bigr}
   {\bgroup
       \Configure{Big}{}{}{}{}%
       \Configure{mathclose}{*}
          {</span><span class="MathClass-close" >}
          {</span></span>}
          {\Configure{mathclose}{}{}{}{}}%
   }
   {\egroup}
\Configure{biggl}
   {\bgroup
       \Configure{bigg}{}{}{}{}%
       \Configure{mathopen}{*}
          {<span class="biggl"><span class="MathClass-open">}
          {</span><span>}
          {\Configure{mathopen}{}{}{}{}}%
   }
   {\egroup}
\Configure{biggr}
   {\bgroup
       \Configure{bigg}{}{}{}{}%
       \Configure{mathclose}{*}
          {</span><span class="MathClass-close" >}
          {</span></span>}
          {\Configure{mathclose}{}{}{}{}}%
   }
   {\egroup}
\Configure{bigl}
   {\bgroup
       \Configure{big}{}{}{}{}%
       \Configure{mathopen}{*}
          {<span class="bigl"><span class="MathClass-open">}
          {</span><span>}
          {\Configure{mathopen}{}{}{}{}}%
   }
   {\egroup}
\Configure{bigr}
   {\bgroup
       \Configure{big}{}{}{}{}%
       \Configure{mathclose}{*}
          {</span><span class="MathClass-close" >}
          {</span></span>}
          {\Configure{mathclose}{}{}{}{}}%
   }
   {\egroup}
>>>




\<big mathml-\><<<
\Configure{Biggl}
   {\bgroup
       \Configure{Bigg}{}{}{}{}%
       \Configure{mathopen}{*}
          {<span class="MathClass-open" title="Bigg" >}
          {</span>}
          {\Configure{mathopen}{}{}{}{}}%
   }
   {\egroup}
\Configure{Biggr}
   {\bgroup
       \Configure{Bigg}{}{}{}{}%
       \Configure{mathclose}{*}
          {<span class="MathClass-close" title="Bigg" >}
          {</span>}
          {\Configure{mathclose}{}{}{}{}}%
   }
   {\egroup}
\Configure{Bigl}
   {\bgroup
       \Configure{Big}{}{}{}{}%
       \Configure{mathopen}{*}
          {<span class="MathClass-open" title="Big" >}
          {</span>}
          {\Configure{mathopen}{}{}{}{}}%
   }
   {\egroup}
\Configure{Bigr}
   {\bgroup
       \Configure{Big}{}{}{}{}%
       \Configure{mathclose}{*}
          {<span class="MathClass-close" title="Big" >}
          {</span>}
          {\Configure{mathclose}{}{}{}{}}%
   }
   {\egroup}
\Configure{biggl}
   {\bgroup
       \Configure{bigg}{}{}{}{}%
       \Configure{mathopen}{*}
          {<span class="MathClass-open" title="bigg" >}
          {</span>}
          {\Configure{mathopen}{}{}{}{}}%
   }
   {\egroup}
\Configure{biggr}
   {\bgroup
       \Configure{bigg}{}{}{}{}%
       \Configure{mathclose}{*}
          {<span class="MathClass-close" title="bigg" >}
          {</span>}
          {\Configure{mathclose}{}{}{}{}}%
   }
   {\egroup}
\Configure{bigl}
   {\bgroup
       \Configure{big}{}{}{}{}%
       \Configure{mathopen}{*}
          {<span class="MathClass-open" title="big" >}
          {</span>}
          {\Configure{mathopen}{}{}{}{}}%
   }
   {\egroup}
\Configure{bigr}
   {\bgroup
       \Configure{big}{}{}{}{}%
       \Configure{mathclose}{*}
          {<span class="MathClass-close" title="big" >}
          {</span>}
          {\Configure{mathclose}{}{}{}{}}%
   }
   {\egroup}
>>>



\<big common\><<<
\Configure{Biggm}
   {\bgroup
       \Configure{Bigg}{}{}{}{}%
       \Configure{mathrel}{*}
          {<span class="MathClass-rel" title="Bigg" >}
          {</span>}
          {\Configure{mathrel}{}{}{}{}}%
   }
   {\egroup}
\Configure{Bigm}
   {\bgroup
       \Configure{Big}{}{}{}{}%
       \Configure{mathrel}{*}
          {<span class="MathClass-rel" title="Big" >}
          {</span>}
          {\Configure{mathrel}{}{}{}{}}%
   }
   {\egroup}
\Configure{biggm}
   {\bgroup
       \Configure{bigg}{}{}{}{}%
       \Configure{mathrel}{*}
          {<span class="MathClass-rel" title="bigg" >}
          {</span>}
          {\Configure{mathrel}{}{}{}{}}%
   }
   {\egroup}
\Configure{bigm}
   {\bgroup
       \Configure{big}{}{}{}{}%
       \Configure{mathrel}{*}
          {<span class="MathClass-rel" title="big" >}
          {</span>}
          {\Configure{mathrel}{}{}{}{}}%
   }
   {\egroup}
>>>

\<plain,latex mathml\><<<
\Configure{mfenced}{\vert}{||}
\edef\:temp{\noexpand\Configure{mfenced}{\noexpand\{}{\string&\#x007B;}}\:temp
\edef\:temp{\noexpand\Configure{mfenced}{\noexpand\}}{\string&\#x007D;}}\:temp
\edef\:temp{\noexpand
   \Configure{mfenced}{\noexpand\lbrace}{\string&\#x007B;}}\:temp
\edef\:temp{\noexpand
   \Configure{mfenced}{\noexpand\rbrace}{\string&\#x007D;}}\:temp
>>>


%%%%%%%%%%%%%
\subsection{Math Inner}
%%%%%%%%%%%%%


\<plain,latex mathml\><<<
\def\mathinner#1{\Tg<span
   class="mathinner">#1\Tg</span>}
>>>



%%%%%%%%%%%%%
\subsection{Tokens}
%%%%%%%%%%%%%



\<plain,fontmath math\><<<
\Configure{MathClass}{0}{*}{<span class="mi"\Hnewline>}%
                                    {</span>}{}
\Configure{MathClass}{1}{*}{<span class="before-mo-op" 
                                  title="speech-extra">
            </span><span class="mo-op"\Hnewline
                       >}{</span><span class="after-mo-op"
                                       title="speech-extra"> </span>}{}
\Configure{MathClass}{2}{*}{<span class="mo-bin">}{</span>}{}
\Configure{MathClass}{3}{*}{<span class="mo-rel">}{</span>}{}
\:CheckOption{mathml-}     \if:Option 
   \Configure{MathClass}{4}{*}{<span class="mo-open">}
                           {</span>}{}
   \Configure{MathClass}{5}{*}{<span class="mo-close">}
                           {</span>}{}
\else
   \Log:Note{for sources failing to produce
       clean mathml code, try the command line option `mathml-'}%
   \Configure{MathClass}{4}{*}{<span class="mrow"><span class="mo-open">}
                           {</span><span class="mrow">}{}
   \Configure{MathClass}{5}{*}{</span><span class="mo-close">}
                           {</span></span>}{}
\fi
\Configure{MathClass}{6}{*}{<span class="mo-punc">}{</span>}{}
\Configure{MathClass}{7}{*}{<span class="mn">}{</span>}
                           {0123456789}      
\Configure{FormulaClass}{0}{}{}{}
\Configure{FormulaClass}{1}{}{}{}
\Configure{FormulaClass}{2}{}{}{}
\Configure{FormulaClass}{3}{}{}{}
\Configure{FormulaClass}{4}{}{}{}
\Configure{FormulaClass}{5}{}{}{}
\Configure{FormulaClass}{6}{}{}{}
>>>





\<configure html-speech-math amsopn\><<<
\Configure{qopname}
   {\Configure{mathop}{*}
      {<span class="mo-qopname"> <span>}
      {</span> </span>}
      {}}
>>>


\<emacspeak plain,fontmath\><<<
\CssSpeech{ .mo-open, .mo-close{ stress:3; }}
\CssSpeech{ .mo-rel, .mo-bin { stress:4; }}
\CssSpeech{ .mo-op { stress:4; }}
\CssSpeech{ .mo-punc { stress:4; }}
\CssSpeech{ .mo-qopname { stress:4; }}
>>>


%%%%%%%%%%%%%
\subsection{Embedded Text}
%%%%%%%%%%%%%



\<configure html-speech-math latex\><<<
\def\AA:text#1{|<config start mtext|>}
\def\BB:text{|<config end mtext|>}
>>>


\<config start mtext\><<<
\mtexttrue
\HCode{ <span\Hnewline class="mstyle-#1">}%
         |<start mtext space|>\PauseMathClass
   |<config math within mtext|>%
>>>


\<config end mtext\><<<
\mtextfalse\EndPauseMathClass|<end mtext space|>\HCode
     {</span>}%
>>>

\<config math within mtext\><<<
\Configure{$}%
  {\EndPauseMathClass \HCode{<span \Hnewline 
                             class="text-math">}\mtextfalse
      |<end mtext space|>}%
  {\HCode{</span>}|<start mtext space|>\PauseMathClass \mtexttrue}%
  {}%
>>>



\<start mtext space\><<<
\ht:special{t4ht@,&\#x00A0;}%
>>>
\<end mtext space\><<<
\ht:special{t4ht@,}%
>>>


%%%%%%%%%%%%%%%%%%
\section{Fonts}
%%%%%%%%%%%%%%%%%%



\<configure html-speech-math fontmath\><<<
\def\bold:version{bold}
\Configure{mathbf}%
  {\bgroup \Tg<span class="mathvariant-bold">}%
  {\Tg</span>\egroup }%
\Configure{mathit}%
  {\bgroup \Tg<span 
     class="mathvariant-\ifx \bold:version\math@version bold-\fi italic">}%
  {\Tg</span>\egroup }%
\Configure{mathrm}%
  {\bgroup \Tg<span class="mathvariant-normal">}%
  {\Tg</span>\egroup }%
\Configure{mathsf}%
  {\bgroup \Tg<span
     class="mathvariant-\ifx \bold:version\math@version bold-\fi sans-serif">}%
  {\Tg</span>\egroup }%
\Configure{mathtt}%
  {\bgroup \Tg<span class="mathvariant-monospace">}%
  {\Tg</span>\egroup }%
>>>


\<configure html-speech-math fontmath\><<<
\def\:tempd#1#2{%
   \expandafter\def\csname #1\endcsname{\mathchar"13#2\relax}%
   \MathSymbol\mathop{#1}%
   \expandafter\def\csname #1:limits\endcsname{\expandafter
                    \:same \math:sym\mathop{#1}\limits}%
   \expandafter\def\csname #1:nolimits\endcsname{\expandafter
                  \:same \math:sym\mathop{#1}\nolimits}%
   \expandafter\edef\csname n:#1:\endcsname{\noexpand\ifDisplayMath
          \noexpand\expandafter \expandafter\noexpand \csname #1:limits\endcsname
          \noexpand\else \noexpand\expandafter
                         \expandafter\noexpand 
                         \csname #1:nolimits\endcsname\noexpand\fi}%
   \expandafter\pend:def\csname n:#1:\endcsname{\ifDisplayMath
          \mathop:prefix{mathsize-big}\fi}%
}
\:tempd{bigcap}{54} 
\:tempd{bigcup}{53} 
\:tempd{bigodot}{4A} 
\:tempd{bigoplus}{4C} 
\:tempd{bigotimes}{4E} 
\:tempd{bigsqcup}{46} 
\:tempd{biguplus}{55} 
\:tempd{bigvee}{57} 
\:tempd{bigwedge}{56} 
\:tempd{coprod}{60} 
\:tempd{intop}{52} 
\:tempd{ointop}{48} 
\:tempd{prod}{51} 
\:tempd{sum}{50}
>>>

\<plain,latex mathml\><<<
\def\mathop:prefix#1{%
   \Configure{mathop}{*}{<span class="mo-op"
                               title="#1"\Hnewline>}{</span>}%
    {\Configure{mathop}{*}{<span class="mo-op">}{</span>}{}}}
>>>

\begin{verbatim}
<mo mathsize="big">
  <span class="char" title="ch-verbose">
    <span class="ch 2211" title="ch-verbose">sum</span>
  </span>
</mo>
\end{verbatim}


%%%%%%%%%%%%%%%%%%
\section{Symbols}
%%%%%%%%%%%%%%%%%%


\<configure html-speech-math amsmath\><<<
\def\:tempc{\HCode{<mspace width="0.2em"/>}\mathbin{mod} }
\HLet\bmod\:tempc
\def\:tempc#1{ (#1)}
\HLet\pod=\:tempc
\def\:tempc#1{\pod{\mathop{mod} #1}}
\HLet\pmod=\:tempc
\def\:tempc#1{ \mathop{mod} #1}
\HLet\mod=\:tempc
>>>



\<configure html-speech-math amsmath\><<<
\def\:tempc{\ifDisplayMath\mathop:prefix{big}\fi\o:n:iint::}
\HLet\n:iint:\:tempc
\def\:tempc{\ifDisplayMath\mathop:prefix{big}\fi\o:n:iiint::}
\HLet\n:iiint:\:tempc
\def\:tempc{\ifDisplayMath\mathop:prefix{big}\fi\o:n:idotsint::}
\HLet\n:idotsint:\:tempc
>>>


\<configure html-speech-math amsopn\><<<
\def\:tempc{\mathop{\underrightarrow\lim}\displaylimits}  \HLet\varinjlim\:tempc
\def\:tempc{\mathop{\underleftarrow\lim}\displaylimits}   \HLet\varprojlim\:tempc
\def\:tempc{\mathop{\overline\lim}\displaylimits}         \HLet\varlimsup\:tempc
\def\:tempc{\mathop{\underline\lim}\displaylimits}        \HLet\varliminf\:tempc
>>>


\<\><<<
\HRestore\varinjlim
\HRestore\varprojlim
\HRestore\varlimsup
\HRestore\varliminf
>>>



\<configure jsml-math amsmath\><<<
\Configure{hdotsfor}{\dots}
>>>



\<plain,fontmath math\><<<
\def\:tempc{\HCode{\add:description{added-description}{real part
                    symbol capital }}\o:Re:}
\HLet\Re\:tempc
\def\:tempc{\HCode{\add:description{added-description}{real part
                    symbol capital }}\o:Im:}
\HLet\Im\:tempc
>>>


%%%%%%%%%%%%%%%%%%
\section{Spaces}
%%%%%%%%%%%%%%%%%%




\<plain,latex mathml\><<<
\Configure{quad}{\HCode{|<space element|>}}
\Configure{qquad}{\HCode{|<space element|>}}
\Configure{,}{\HCode{|<space element|>}}
\Configure{ }{\:nbsp} 
>>>


\<configure html-speech-math latex\><<<
\Configure{hspace}{ }{}{ }
>>>


\<configure html-speech-math amsmath\><<<
\Configure{tmspace}
   {\HCode{|<space element|>}}
>>>

\<plain,latex mathml\><<<
\def\:nbsp{\leavevmode\special{t4ht@+\string&{35}x00A0{59}}x}
>>>



\<configure html-speech frenchb\><<<
\Configure{frenchb-nbsp}
   {\leavevmode\special{t4ht@+\string&{35}x00A0{59}}x%
    \setbox\tmp:bx=\hbox\bgroup}
   {\egroup}
>>>  



\<space element\><<<
<span class="space"> </span>%
>>>


%%%%%%%%%%%%%%%%%%
\section{Fractions and Stacks}
%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%
\subsection{Regular Ones}
%%%%%%%%%%%%%



\<configure html-speech-math tex4ht\><<<
\Configure{over}
   {\Send{GROUP}{0}{|<start mfrac|>}|<end frac numerator|>}
   {|<frac enumerator|>\Send{EndGROUP}{0}{|<end mfrac|>}}
\Configure{atop}
   {\Send{GROUP}{0}{|<start atop|>}|<end atop over|>}
   {|<start atop under|>\Send{EndGROUP}{0}{|<end atop|>}}
\Configure{above}
   {\Send{GROUP}{0}{|<start above|>}%
    |<end above over|>\o:over:\:gobbleII}
   {|<start above under|>\Send{EndGROUP}{0}{|<end above|>}}
>>>



\<mathml latex\><<<
\Configure{frac}
   {\HCode{|<start mfrac|>}}
   {|<end frac numerator|>\Configure{over}{}{}}
   {|<frac enumerator|>}
   {\HCode{|<end mfrac|>}}
>>>



\<configure html-speech-math amsmath\><<<
\Configure{above}
   {\Send{GROUP}{0}{|<start above|>}%
                    |<end above over|>\o:@@over:\:gobbleII}
   {|<start above under|>\Send{EndGROUP}{0}{|<end above|>}}
>>>


\<plain,latex mathml\><<<
\Configure{choose}
   {\Send{GROUP}{0}{<span class="choose">%
       \add:description{begin-stack}{\a:speak:choose}%
       <span class="mrow-upper">}%
    \HCode{</span>}\o:atop:
    \HCode{\add:description{added-description}%
       {\c:speak:choose}<span class="mrow-under">}%
    \Send{EndGROUP}{0}%
      {</span>\add:description{end-stack}{\b:speak:choose}</span>}%
   }
>>>



\<plain,latex mathml\><<<
\NewConfigure{speak:choose}{3}
\Configure{speak:choose}
   {begin binomial coefficient}
   {end binomial coefficient}
   {choose}
>>>


\<configure html-speech-math amsmath\><<<
\Configure{tbinom}
 {\Send{GROUP}{0}{<span class="tbinom">%
       \add:description{begin-stack}{\a:speak:choose}%
       <span class="mrow-upper">}%
    \HCode{</span>}\o:@@abovewithdelims: ..\z@{}%
    \HCode{\add:description{added-description}%
       {\c:speak:choose}<span class="mrow-under">}%
    \Send{EndGROUP}{0}%
      {</span>\add:description{end-stack}{\b:speak:choose}</span>}%
   }
>>>

\<configure html-speech-math amsmath\><<<
\Configure{dbinom}
 {\Send{GROUP}{0}{<span class="dbinom">%
       \add:description{begin-stack}{\a:speak:choose}%
       <span class="mrow-upper">}%
    \HCode{</span>}\o:@@abovewithdelims: ..\z@{}%
    \HCode{\add:description{added-description}{\c:speak:choose}<span class="mrow-under">}%
    \Send{EndGROUP}{0}%
      {</span>\add:description{end-stack}{\b:speak:choose}</span>}%
   }
>>>




\<configure html-speech-math amsmath\><<<
\Configure{binom}
 {\Send{GROUP}{0}{<span class="binom">%
       \add:description{begin-stack}{\a:speak:choose}%
       <span class="mrow-upper">}%
    \HCode{</span>}\o:@@abovewithdelims: ..\z@{}%
    \HCode{\add:description{added-description}{\c:speak:choose}<span class="mrow-under">}%
    \Send{EndGROUP}{0}%
      {</span>\add:description{end-stack}{\b:speak:choose}</span>}%
   }
>>>

%%%%%%%%%%%%%
\subsection{With Delimiters}
%%%%%%%%%%%%%





\<configure html-speech-math tex4ht\><<<
\def\abovewithdelims:III#1#2#3{%
   \def\:temp{#2#3}\def\:tempa{..}\ifx \:temp\:tempa
      \Send{GROUP}{0}{|<start above|>}%
      |<end above over|>\o:over:
      |<start above under|>\Send{EndGROUP}{0}{|<end above|>}
   \else
      \Send{GROUP}{0}%
         {<span class="mfenced-open">|<lr del 2|></span>%
          |<start above|>}%
      |<end above over|>\o:over:
      |<start above under|>\Send{EndGROUP}{0}{|<end above|>%
         <span class="mfenced-close">|<lr del 3|></span>}
   \fi  
   \tmp:dim
 }
>>>



\<configure html-speech-math tex4ht\><<<
\def\atopwithdelims:III#1#2#3{%
   \def\:temp{#2#3}\def\:tempa{..}\ifx \:temp\:tempa
      \Send{GROUP}{0}{|<start atop|>}%
      |<end atop over|>\o:atop:
      |<start atop under|>\Send{EndGROUP}{0}{|<end atop|>}
   \else
      \Send{GROUP}{0}%
         {<span class="mfenced-open">|<lr del 2|></span>%
          |<start atop|>}%
      |<end atop over|>\o:atop:
      |<start atop under|>%
      \Send{EndGROUP}{0}{|<end atop|>%
         <span class="mfenced-close">|<lr del 3|></span>}
   \fi
 }
>>>

\<configure html-speech-math tex4ht\><<<
\def\overwithdelims:III#1#2#3{%
   \def\:temp{#2#3}\def\:tempa{..}\ifx \:temp\:tempa
      \Send{GROUP}{0}{|<start mfrac|>}|<end frac numerator|>\o:over:
      |<frac enumerator|>\Send{EndGROUP}{0}{|<end mfrac|>}
   \else
      \Send{GROUP}{0}%
         {<span class="mfenced-open">|<lr del 2|></span>%
          |<start mfrac|>}%
      |<end frac numerator|>\o:over:
      |<frac enumerator|>\Send{EndGROUP}{0}{|<end mfrac|>%
             <span class="mfenced-close">|<lr del 3|></span>}
   \fi
 }
>>>



\<configure html-speech-math amsmath\><<<
\def\abovewithdelims:III#1#2#3{%
   \def\:temp{#2#3}\def\:tempa{..}\ifx \:temp\:tempa
      \Send{GROUP}{0}{|<start above|>}%
      |<end above over|>\o:@@over:
      |<start above under|>\Send{EndGROUP}{0}{|<end above|>}
   \else
      \Send{GROUP}{0}%
         {<span class="mfenced-open">|<lr del 2|></span>%
          |<start above|>}%
      |<end above over|>\o:@@over:
      |<start above under|>\Send{EndGROUP}{0}{|<end above|>%
         <span class="mfenced-close">|<lr del 3|></span>}
   \fi  
   \tmp:dim
 }
>>>


\<configure html-speech-math amsmath\><<<
\def\atopwithdelims:III#1#2#3{%
   \def\:temp{#2#3}\def\:tempa{..}\ifx \:temp\:tempa
      \Send{GROUP}{0}{|<start atop|>}%
      |<end atop over|>\o:@@atop:
      |<start atop under|>\Send{EndGROUP}{0}{|<end atop|>}
   \else
      \Send{GROUP}{0}%
         {<span class="mfenced-open">|<lr del 2|></span>%
          |<start atop|>}%
      |<end atop over|>\o:@@atop:
      |<start atop under|>\Send{EndGROUP}{0}{|<end atop|>%
             <span class="mfenced-close">|<lr del 3|></span>}
   \fi
 }
>>>



\<configure html-speech-math amsmath\><<<
\def\overwithdelims:III#1#2#3{%
   \def\:temp{#2#3}\def\:tempa{..}\ifx \:temp\:tempa
      \Send{GROUP}{0}{|<start mfrac|>}%
      |<end frac numerator|>\o:over:
      |<frac enumerator|>\Send{EndGROUP}{0}{|<end mfrac|>}
   \else
      \Send{GROUP}{0}%
         {<span class="mfenced-open">|<lr del 2|></span>%
          |<start mfrac|>}%
      |<end frac numerator|>\o:@@over:
      |<frac enumerator|>\Send{EndGROUP}{0}{|<end mfrac|>%
         <span class="mfenced-close">|<lr del 3|></span>}
   \fi
 }
>>>



%%%%%%%%%%%%%
\subsection{Code Assignments}
%%%%%%%%%%%%%



\<start mfrac\><<<
<span class="mfrac">\add:description{begin-end}{\a:speak:fraction}%
<span class="mrow-numerator"\Hnewline>%
>>>


\<end frac numerator\><<<
\HCode{</span>}%
>>>



\<frac enumerator\><<<
\HCode{\add:description{begin-end}{\c:speak:fraction}
       <span class="mrow-enumerator"\Hnewline>}%
>>>

\<end mfrac\><<<
</span>\add:description{begin-end}{\b:speak:fraction}</span>%
>>>


\<start atop\><<<
<span class="atop">%
\add:description{begin-stack}{\a:speak:atop}%
<span class="mrow-upper">%
>>>




\<end atop over\><<<
\HCode{</span>}%
>>>


\<start atop under\><<<
\HCode{\add:description{added-description}{\c:speak:atop}<span class="mrow-under">}%
>>>


\<end atop\><<<
</span>\add:description{end-stack}{\b:speak:atop}</span>%
>>>




\<start above\><<<
|<start mfrac|>%
>>>


\<end above over\><<<
|<end frac numerator|>%
>>>


\<start above under\><<<
|<frac enumerator|>%
>>>     

\<end above\><<<
|<end mfrac|>%
>>>



\<lr del 1\><<<
\expandafter
\ifx \csname \string#1:lr del\endcsname\relax #1\else 
     \csname \string#1:lr del\endcsname\fi
>>>

\<lr del 2\><<<
\expandafter
\ifx \csname \string#2:lr del\endcsname\relax #2\else 
     \csname \string#2:lr del\endcsname\fi
>>>


\<lr del 3\><<<
\expandafter
\ifx \csname \string#3:lr del\endcsname\relax #3\else 
     \csname \string#3:lr del\endcsname\fi
>>>


The following cases in mathml are translated directly 
to explicit caharacters and so donn't get there the 
speech interpretation provided in unicode.4hf.

\<plain,latex mathml\><<<
\Configure{mfenced}{\vert}{\string&\#x007C;}
\Configure{mfenced}{\{}{\string&\#x007B;}
\Configure{mfenced}{\}}{\string&\#x007D;}
\Configure{mfenced}{\lbrace}{\string&\#x007B;}
\Configure{mfenced}{\rbrace}{\string&\#x007D;}
\Configure{mfenced}{\rgroup}{\string&\#x0028;}
\Configure{mfenced}{\lgroup}{\string&\#x0029;}
\Configure{mfenced}{(}{\string&\#x0028;}
\Configure{mfenced}{)}{\string&\#x0029;}
\Configure{mfenced}{[}{\string&\#x0058;}
\Configure{mfenced}{]}{\string&\#x0059;}
\Configure{mfenced}{||}{\string&\#x007C;}
\Configure{mfenced}{\bracevert}{\string&\#x007C;}
\Configure{mfenced}{\bracevert}{\string&\#x007C;}
>>>




\<configure html-speech-math tex4ht\><<<
\NewConfigure{speak:fraction}{3}
\Configure{speak:fraction}
   {begin fraction}
   {end fraction}
   {over}
>>>


\<configure emacspeak tex4ht\><<<
\CssSpeech{.mfrac{ 
    pitch:7; pitch-range: 1; richness: 9; stress:4;}}
>>>




\<configure html-speech-math tex4ht\><<<
\NewConfigure{speak:atop}{3}
\Configure{speak:atop}
   {begin stack}
   {end stack}
   {over}
>>>




%%%%%%%%%%%%%%%%%%
\section{Theorems}
%%%%%%%%%%%%%%%%%%


\<configure html-speech latex\><<<
\Configure{newtheorem}
   {\ifvmode\IgnorePar\fi\EndP
     \HCode{<div class="newtheorem">}\par\noindent
     \HCode{<span class="theorem-head">}}
   {\HCode{</span>}}
   {\EndP\IgnorePar\HCode{</div>}\ShowPar\par}
\Css{span.theorem-head { font-weight:bold; }}
>>>

\<configure html-speech acm-proc-article-sp\><<<
\Configure{proof}
   {\ifvmode\IgnorePar\fi\EndP
     \HCode{<div class="newtheorem" title="proof">}\par\noindent
     \HCode{<span  class="theorem-head">}}
   {\HCode{</span>}}
   {\EndP\IgnorePar\HCode{</div>}\ShowPar\par}
>>>


\<configure html-speech amsthm\><<<
|<shared ams thm/cls|>
>>>

\<ams art,proc,book\><<<
\ifx \deferred@thm@head\:UnDef\else   
   |<shared ams thm/cls|>
\fi
>>>


\<shared ams thm/cls\><<<
\Configure{proof}
   {\ifvmode \IgnorePar \fi \EndP
    \HCode{<div class="newtheorem" title="proof">}\par\ShowPar
    \HCode{<span class="theorem-head">}\IgnorePar}
   {\HCode{</span>}\ShowPar}
   {\ifvmode \IgnorePar \fi \EndP \HCode{</div>}\par}
>>>


%%%%%%%%%%%%%%%%%%
\section{Others}
%%%%%%%%%%%%%%%%%%


\<tex compiler mathml\><<<
\Configure{radical}
  {\HCode{<span class="msqrt">%
          \add:description{begin-root}{\a:speak:radical}}%
   \special{t4ht\string~!e<<span>}%
   \special{t4ht\string~!e></span>%
          \add:description{end-root}{\b:speak:radical}</span>}%
   \special{t4ht\string~!ee/}%
   \special{t4ht\string~!ese-}%
  }
>>>

\<tex compiler mathml\><<<
\NewConfigure{speak:radical}{2}
\Configure{speak:radical}
   {begin root}
   {end root}
>>>





\<plain,latex mathml\><<<
\Configure{root}
    {\HCode{<span class="root">%
       \add:description{begin-root}{\a:speak:root}<span class="root-index">}}
    {\HCode{</span>\add:description{mid-root}{\b:speak:root}%
            <span class="root-base">}}
    {\HCode{</span>\add:description{end-root}{\c:speak:root}</span>}}
>>>


\<plain,latex mathml\><<<
\NewConfigure{speak:root}{3}
\Configure{speak:root}
   {root index}
   {begin root}
   {end root}
>>>



%%%%%%%%%%%%%%%%%%
\section{Boxed}
%%%%%%%%%%%%%%%%%%

\<configure html-speech-math amsmath\><<<
\Configure{boxed}
   {\HCode{<span class="boxed">%
    \add:description{begin-end}{\a:speak:boxed}}}
   {\HCode{\add:description{begin-end}{\b:speak:boxed}</span>}}
>>>


\<configure html-speech-math amsmath\><<<
\NewConfigure{speak:boxed}{2}
\Configure{speak:boxed}
   {begin boxed}
   {end boxed}
>>>


%%%%%%%%%%%%%%%%%%
\chapter{Over and Under}
%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%
\section{Subscrips and Superscripts (sub and super)}
%%%%%%%%%%%%%



\<sub, sup, subsup\><<<
\Configure{SUB} 
   {\Send{BACK}
     {|<start msub base|>}|<msub sub|>}
   {|<close msub|>}
\Configure{SUP}
   {\Send{BACK}
   {|<start msup base|>}|<msup super|>}
   {|<close msup|>}
\Configure{SUBSUP}
   {\Send{BACK}
   {|<start msubsup base|>}|<msubsup sub|>}
   {|<msubsup sup|>}
   {|<close msubsup|>}
\def\trap:base{{\HCode{}}}
>>>



\<start msup base\><<<
<span class="msup"><span class="mrow-base"\Hnewline>%
>>>

\<msup super\><<<
\HCode{</span><span class="mrow-super"\Hnewline
          >\add:description{begin-script}{\b:speak:subsup}}\trap:base
>>>

\<close msup\><<<
\HCode{\add:description{end-script}{\c:speak:subsup}</span></span\Hnewline>}%
>>>



\<start msub base\><<<
<span class="msub"><span class="mrow-base"\Hnewline>%
>>>

\<msub sub\><<<
\HCode{</span><span class="mrow-sub"\Hnewline
          >\add:description{begin-script}{\a:speak:subsup}}\trap:base
>>>

\<close msub\><<<
\HCode{\add:description{end-script}{\c:speak:subsup}</span></span\Hnewline>}%
>>>



\<start msubsup base\><<<
<span class="msubsup"><span class="mrow-base"\Hnewline>%
>>>

\<msubsup sub\><<<
\HCode{</span><span class="mrow-sub"\Hnewline
              >\add:description{begin-script}{\a:speak:subsup}}\trap:base
>>>


\<msubsup sup\><<<
\HCode{</span><span class="mrow-super"\Hnewline
      >\add:description{mid-script}{\b:speak:subsup}}\trap:base
>>>


\<close msubsup\><<<
\HCode{\add:description{end-script}{\c:speak:subsup}</span></span\Hnewline>}%
>>>

\<configure html-speech-math tex4ht\><<<
\NewConfigure{speak:subsup}{3}
\Configure{speak:subsup}
   {subscript}
   {superscript}
   {baseline}
>>>

\<configure emacspeak tex4ht\><<<
\CssSpeech{.mrow-super{ pitch:9; pitch-range:4; richness:9; stress:9;}} 
\CssSpeech{.mrow-base{ pitch:9;  pitch-range:4; richness:5; stress:5;}} 
\CssSpeech{.mrow-sub{ pitch:9; pitch-range:0; richness:1; stress:1;}} 
>>>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Limits of Sub- snd Super- Scripts (over/under - end - scripts)}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Outline}
%%%%%%%%%%%%%%%%%%%%%%%%%


\<limits sub, sup, subsup\><<<
\Configure{limits}{|<limit scripts|>}
\def\disp:limits{|<limit scripts|>}  
>>>


\<limit scripts\><<<
\let|<restore SUB|>=\:UnDef
\let|<restore SUP|>=\:UnDef
\ifx \:temp\sp |<conf limits SUP|>\else
\ifx \:temp\sb |<conf limits SUB|>\fi\fi
|<conf limits SUBSUP|>%
>>>



\begin{verbatim}
<span class="limits-msub-msup">
  <span class="limits-mrow-base">
    <span class="mo-op">a</span>
  </span>
  <span class="limits-mrow-sub">
    <span class="begin-limits-script" title="speech-extra"> under script </s\pan>
    <span class="mi">b</span>
    <span class="end-limits-script" title="speech-extra"> end script </span>
  </span>
</span>
\end{verbatim}

\begin{verbatim}
<span class="limits-msub-msup">
  <span class="limits-mrow-base">
            <span class="mo-op"> a</span>
  </span>
  <span class="limits-mrow-super">
    <span class="begin-limits-script" title="speech-extra"> over script </spa\n>
    <span class="mi">b</span>
    <span class="end-limits-script" title="speech-extra"> end script </span>
  </span>
</span>
\end{verbatim}

\begin{verbatim}
<span class="limits-msub-msup">
  <span class="limits-mrow-base">
    <span class="mo-op"> a</span>
  </span>
  <span class="limits-mrow-sub">
    <span class="begin-limits-script" title="speech-extra"> under script </\span>
    <span class="mi">b</span>
  </span>
  <span class="limits-mrow-super">
    <span class="mid-limits-script" title="speech-extra"> over script </spa\n>
    <span class="mi">c</span>
    <span class="end-limits-script" title="speech-extra"> end scripts </spa\n>
  </span>
</span>
\end{verbatim}


\<configure html-speech tex4ht\><<<
\Css{.begin-limits-script, .end-limits-script, .mid-limits-script {color:green;}}
\Css{.begin-script, .end-script, .mid-script   {color:green;}}
>>>

\<configure emacspeak tex4ht\><<<
\CssSpeech{.begin-limits-script,
           .end-limits-script, .mid-limits-script {stress:3;}}
\CssSpeech{.begin-script, .end-script, .mid-script   {stress:3;}}
>>>

%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Simultaneously Sub- and Super- Scripts}
%%%%%%%%%%%%%%%%%%%%%%%%%


\<conf limits SUBSUP\><<<
|<save pre-limits SUBSUP|>%
\Configure{SUBSUP}
   {\ifx |<restore SUB|>\:UnDef\else  |<restore SUB|>\fi
    \ifx |<restore SUP|>\:UnDef\else  |<restore SUP|>\fi
    |<restore pre-limits SUBSUP|>%
    \Send{BACK}
      {|<start limits msubsup base|>}|<msubsup limits sub|>}
   {|<msubsup limits sup|>}
   {|<close limits script|>}
>>>




\<start limits msubsup base\><<<
<span class="limits-msub-msup"><span class="limits-mrow-base"\Hnewline>%
>>>

\<msubsup limits sub\><<<
\HCode{</span><span class="limits-mrow-sub"\Hnewline
   >\add:description{begin-limits-script}{\a:speak:underover}}\trap:base
>>>


\<msubsup limits sup\><<<
\HCode{</span><span class="limits-mrow-super"\Hnewline
  >\add:description{mid-limits-script}{\b:speak:underover}}\trap:base
>>>


\<close limits script\><<<
\HCode{\add:description{end-limits-script}{\c:speak:underover}</span></span\Hnewline>}%
>>>


\<configure html-speech-math tex4ht\><<<
\NewConfigure{speak:underover}{3}
\Configure{speak:underover}
   {under script}
   {over script}
   {end scripts}
>>>

\<save pre-limits SUBSUP\><<<
\let\pl:SUBSUP=\SUBSUP:
>>>

\<restore pre-limits SUBSUP\><<<
\ifx \pl:SUBSUP\:UnDef \else
   \let\SUBSUP:=\pl:SUBSUP
\fi
>>>

\<limits sub, sup, subsup\><<<
\ifx \a:putSUB\:UnDef \else
   \pend:def\a:putSUB{\ifx \pl:SUBSUP\:UnDef\else 
         \let\SUBSUP:=\pl:SUBSUP
         \let\pl:SUBSUP=\:UnDef
      \fi}%
\fi
\ifx \a:putSUP\:UnDef \else
   \pend:def\a:putSUP{\ifx \pl:SUBSUP\:UnDef\else 
         \let\SUBSUP:=\pl:SUBSUP
         \let\pl:SUBSUP=\:UnDef
      \fi}%
\fi
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Superscripts}
%%%%%%%%%%%%%%%%%%%%%%%%%



\<conf limits SUP\><<<
|<save pre-limits SUP|>%
\Configure{SUP}
   {|<open external limits SUP|>\bgroup
     |<restore pre-limits SUBSUP|>%
     |<conf second limits SUP|>\trap:base}  
   {}%
>>>

\<save pre-limits SUP\><<<
\def\pl:SUP{\Configure{SUP}}%
\expandafter\append:def
   \expandafter\pl:SUP\expandafter{\expandafter{\a:SUP}}%
\expandafter\append:def
   \expandafter\pl:SUP\expandafter{\expandafter{\b:SUP}}%
>>>

\<conf second limits SUP\><<<
\Configure{SUP}
   {|<open intermediate limits SUP|>\bgroup
    |<conf third limit SUP|>\trap:base}                 
   {\egroup|<close external limits SUP|>}%
>>>


\<conf third limit SUP\><<<
\Configure{SUP}
   {|<open internal limits SUP|>\bgroup \trap:base}
   {\egroup |<close internal limits SUP|>}% 
>>>


\<open external limits SUP\><<<
\Send{BACK}{|<msup limits base|>}%
|<msup limits script super|>%
>>>








\<msup limits script super\><<<
\HCode{</span><span class="limits-mrow-super"\Hnewline
    >\add:description{begin-limits-script}{\b:speak:underover}}\trap:base
>>>


\<msup limits base\><<<
<span 
   class="limits-msub-msup"><span
   class="limits-mrow-base"\Hnewline>%
>>>

\<close external limits SUP\><<<
\HCode{\add:description{end-limits-script}{\c:speak:underover}</span></span\Hnewline
                        >}\aftergroup|<restore SUP|>%
>>>

\<restore SUP\><<<
\pl:SUP  >>>

\<open intermediate limits SUP\><<<
\Send{BACK}
{|<start msup base|>}|<msup super|>%
>>>

\<open internal limits SUP\><<<
\Send{BACK}
{|<start msup base|>}|<msup super|>%
>>>

\<close internal limits SUP\><<<
|<close msup|>%
>>>

%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Subscripts}
%%%%%%%%%%%%%%%%%%%%%%%%%





\<conf limits SUB\><<<
|<save pre-limits SUB|>%
\Configure{SUB}
   {|<open external limits SUB|>\bgroup
     |<restore pre-limits SUBSUP|>%
     |<conf second limits SUB|>\trap:base}  
   {}%
>>>

\<save pre-limits SUB\><<<
\def\pl:SUB{\Configure{SUB}}%
\expandafter\append:def
   \expandafter\pl:SUB\expandafter{\expandafter{\a:SUB}}%
\expandafter\append:def
   \expandafter\pl:SUB\expandafter{\expandafter{\b:SUB}}%
>>>

\<conf second limits SUB\><<<
\Configure{SUB}
   {|<open intermediate limits SUB|>\bgroup
    |<conf third limit SUB|>\trap:base}                 
   {\egroup|<close external limits SUB|>}%
>>>


\<conf third limit SUB\><<<
\Configure{SUB}
   {|<open internal limits SUB|>\bgroup \trap:base}
   {\egroup |<close internal limits SUB|>}% 
>>>


\<open external limits SUB\><<<
\Send{BACK}{|<msub limits base|>}%
|<msub limits script sub|>%
>>>



\<msub limits script sub\><<<
\HCode{</span><span class="limits-mrow-sub"\Hnewline
    >\add:description{begin-limits-script}{\a:speak:underover}}\trap:base
>>>




\<msub limits base\><<<
<span 
   class="limits-msub-msup"><span
   class="limits-mrow-base"\Hnewline>%
>>>



\<close external limits SUB\><<<
\HCode{\add:description{end-limits-script}{\c:speak:underover}</span></span\Hnewline
                        >}\aftergroup|<restore SUB|>%
>>>

\<restore SUB\><<<
\pl:SUB >>>

\<open intermediate limits SUB\><<<
\Send{BACK}
{|<start msub base|>}|<msub sub|>%
>>>

\<open internal limits SUB\><<<
\Send{BACK}
{|<start msub base|>}|<msub sub|>%
>>>

\<close internal limits SUB\><<<
|<close msub|>%
>>>




%%%%%%%%%%%%%
\section{On Arrows (over/under - end - scripts)}
%%%%%%%%%%%%%



\<configure html-speech-math amsmath\><<<
\renewcommand{\xrightarrow}[2][]{%
   \if :#1:
      \HCode{|<msup limits base|>}%
        \rightarrow
        |<msup limits script super|>#2%
        |<close limits script|>%
   \else
      \HCode{|<start limits msubsup base|>}%
        \leftarrow
        |<msubsup limits sub|>#1%
        |<msubsup limits sup|>#2%                     
        |<close limits script|>%
   \fi
}
\renewcommand{\xleftarrow}[2][]{%
   \if :#1:
      \HCode{|<msup limits base|>}%
        \leftarrow
        |<msup limits script super|>#2%
        |<close limits script|>%
   \else
      \HCode{|<start limits msubsup base|>}%
        \leftarrow
        |<msubsup limits sub|>#1%
        |<msubsup limits sup|>#2%                     
        |<close limits script|>%
   \fi
}
>>>




%%%%%%%%%%%%%
\section{On Text (over/under - end - scripts)}
%%%%%%%%%%%%%

\<configure html-speech-math amsmath\><<<
\def\overset#1#2{{%
      \HCode{|<msup limits base|>}%
        #2%
        |<msup limits script super|>#1%
        |<close limits script|>%
}}
\def\underset#1#2{{%
      \HCode{|<msub limits base|>}%
        #2%
        |<msub limits script sub|>#1%
        |<close limits script|>%
}}
>>>






\<configure html-speech-math amsmath\><<<
\def\sideset#1#2#3{{\Tg<mrow class="sideset"\Hnewline
        >{\HCode{}}#1{\HCode{}#3}#2\Tg</mrow>}}
>>>



%%%%%%%%%%%%%%%%%%
\section{Accents}
%%%%%%%%%%%%%%%%%%

\<plain,latex mathml\><<<
\:CheckOption{new-accents}     \if:Option \else
  |<config mathml accents|>
\fi
>>>

\<config mathml accents\><<<
\Configure{accents}
  {\ifmmode \expandafter\mathord\fi
     {|<temp hcode accents|>%
   \ht:special{t4ht@[}\if!#1!x\else#2\fi
   \ht:special{t4ht@]}}}
  {\ifmathml
      \ifmtext |<accent in text mode|>%
      \else    \AccentMath{|<under over accents|>}\fi
   \else       |<accent in text mode|>\fi
  }
>>>

\<emacspeak plain,latex\><<<
\CssSpeech{.accented-char { pitch-range: 4; }}
\CssSpeech{.math-over { pitch-range: 4; }}
\CssSpeech{.mover-accent {pitch-range: 7; richness: 9;}}
>>>


\<temp hcode accents\><<<
\leavevmode 
\if !#1!\ht:special{t4ht@+&{35}x#2;}%
\else \expandafter \ifx\csname U#2#1\endcsname\relax
    \ht:special{t4ht@+&{35}x#2;}%
\else
    \ht:special{t4ht@+&{35}x\csname U#2#1\endcsname;}%
\fi \fi x%
>>>

\<accent in text mode\><<<
\expandafter\ifx \csname :#1:over\endcsname\relax
   \expandafter\ifx \csname :#1:under\endcsname\relax
      \AccentMath{|<under over accents|>}%
   \else #3\csname :#1:under\endcsname \fi
\else #3\csname :#1:over\endcsname \fi
>>>


\<under over accents\><<<
\expandafter\ifx \csname :#1:over\endcsname\relax
  |<under accents|>%
\else \expandafter\ifx \csname :#1:under\endcsname\relax
  |<over accents|>%
\else
  |<both accents|>%
\fi \fi
>>>

\<under accents\><<<
\HCode{<munder\Hnewline 
   accent="true"><mrow\Hnewline>}#3\HCode{</mrow>}%
      \csname :#1:under\endcsname
   \HCode{</munder>}%
>>>

\<over accents\><<<
\HCode{<span class="mover-accent"><span 
                 class="mrow"\Hnewline>}#3\HCode{</span>}%
   \csname prefix:#1:over\endcsname
   \csname :#1:over\endcsname
   \HCode{</span>}%
>>>

\<both accents\><<<
\HCode{<munderover\Hnewline 
   accent="true"><mrow\Hnewline>}#3\HCode{</mrow>}%
   \csname :#1:under\endcsname
   \csname :#1:over\endcsname
   \HCode{</munderover>}%
>>>

\<configure html-speech-math latex\><<<
\def\:temp#1#2{\expandafter\def\csname prefix:#1:over\endcsname
      {\HCode{\add:description{added-description}{ #2 }}}}
\:temp{vec}{\b:speak:underover}
\:temp{dddot}{\b:speak:underover}
\:temp{ddddot}{\b:speak:underover}
>>>




%%%%%%%%%%%%%
\section{Lines and Braces (With ...)}
%%%%%%%%%%%%%

\marginpar{See reordeing fix at jslatex}




\<configure html-speech-math latex\><<<
\Configure{overline}
   {\bgroup\ifmathml 
        \HCode{<span class="mover-overline">%
                  \add:description{begin-end}{\b:speak:modified}%
                  <span class="mo-00AF">}%
    \else \HCode{<span class="overline">}\fi}
   {\ifmathml
        \HCode{</span>%
      \add:description{begin-end}{\a:speak:modified:line}</span>}%
    \else \HCode{</span>}\fi\egroup}
\Configure{underline}
   {\bgroup
    \ifmathml 
        \HCode{<span class="munder-underline">%
               \add:description{begin-end}{\a:speak:modified}%
               <span class="mo-0332">}% 
    \else |<nomath underline|>\HCode{<span class="underline">}\fi}
   {\ifmathml \HCode{</span>%
    \add:description{begin-end}{\a:speak:modified:line}</span>}%
    \else \HCode{</span>}\fi \egroup}
>>>

\<nomath underline\><<<
\expandafter\everymath
\expandafter{\expandafter\everymath
             \expandafter{\the\everymath}}%
\let\o::@underline:\o:@@underline:
\def\o:@@underline:{\let\o:@@underline:\o::@underline:}%
>>>



\<plain,fontmath math\><<<
\Configure{overbrace}
   {\Configure{mathop*}{*}
         {<span class="mover-overline">%
                  \add:description{begin-end}{\b:speak:modified}%
                  <span class="mo-FE37">}
         {</span>\add:description{begin-end}{\a:speak:modified:brace}</span>}
         {\Configure{mathop}{}{}{}{}}%
   }
   {\let\o:overbrace:=\displaystyle}
   {}
\Configure{underbrace}
   {\Configure{mathop*}{*}
         {<span class="munder-underline">%
               \add:description{begin-end}{\a:speak:modified}%
               <span class="mo-FE38">}
         {</span>\add:description{begin-end}{\a:speak:modified:brace}</span>}
         {\Configure{mathop}{}{}{}{}}%
   }
   {\let\o:underbrace:=\displaystyle}
   {}
>>>







\<config mathml accents\><<<
\Configure{accent}\widetilde\widetilde{{}{}} 
  {}
  {\HCode{<span class="mover-tilde">%
          \add:description{begin-end}{\b:speak:modified}%
          <span class="mo-0303"\Hnewline>}%
       #2%
   \HCode{</span>\add:description{begin-end}{\a:speak:modified:tilde}</span>}}
\Configure{accent}\widehat\widehat{{}{}} 
  {}
  {\HCode{<span class="mover-hat">%
          \add:description{begin-end}{\a:speak:modified}%
          <span class="mo-0302"\Hnewline>}%
       #2%
   \HCode{</span>\add:description{begin-end}{
                        \a:speak:modified:hat}</span>}} |%circumflex|%
>>>


\<configure html-speech-math latex\><<<
\NewConfigure{speak:modified}{2}
\Configure{speak:modified}
   {modified under}
   {modified above}
\NewConfigure{speak:modified:line}{1}
\Configure{speak:modified:line}{with bar}
\NewConfigure{speak:modified:brace}{1}
\Configure{speak:modified:brace}{with brace}
\NewConfigure{speak:modified:hat}{1}
\Configure{speak:modified:hat}{with wide hat}
\NewConfigure{speak:modified:tilde}{1}
\Configure{speak:modified:tilde}{with wide tilde}
>>>


%%%%%%%%%%%%%
\section{Arrows (With ...)}
%%%%%%%%%%%%%




\<plain,fontmath math\><<<
\Configure{overrightarrow}
  {\HCode{<span class="mover-rightarrow">%
      \add:description{begin-end}{\b:speak:modified}%
      <span class="mo-20D5"\Hnewline>}\:gobble}
  {\HCode{</span>%
          \add:description{begin-end}{\a:speak:modified:rightarrow}</span>}}
\Configure{overleftarrow}
  {\HCode{<span class="mover-leftarrow">%
      \add:description{begin-end}{\b:speak:modified}%
      <span class="mo-20D6"\Hnewline>}\:gobble}
  {\HCode{</span>%
      \add:description{begin-end}{\a:speak:modified:leftarrow}</span>}}
>>>

\<plain,fontmath math\><<<
\NewConfigure{speak:modified:rightarrow}{1}
\Configure{speak:modified:rightarrow}{with right arrow}
\NewConfigure{speak:modified:leftarrow}{1}
\Configure{speak:modified:leftarrow}{with left right arrow}
\NewConfigure{speak:modified:leftrightarrow}{1}
\Configure{speak:modified:leftrightarrow}{with left right arrow}
>>>

\<configure html-speech-math amsmath\><<<
\Configure{underrightarrow}
  {\HCode{<span class="munder-rightarrow">%
      \add:description{begin-end}{\a:speak:modified}%
      <span class="mo-2092"\Hnewline>}\:gobble}
  {\HCode{</span>%
          \add:description{begin-end}{\a:speak:modified:rightarrow}</span>}}
\Configure{underleftarrow}
  {\HCode{<span class="munder-leftarrow">%
      \add:description{begin-end}{\a:speak:modified}%
      <span class="mo-2090"\Hnewline>}\:gobble}
  {\HCode{</span>%
          \add:description{begin-end}{speak:modified:leftarrow}</span>}}
>>>


\<configure html-speech-math amsmath\><<<
\Configure{overleftrightarrow}
  {\HCode{<span class="mover-leftrightarrow">%
      \add:description{begin-end}{\b:speak:modified}%
      <span class="mo-20E1"\Hnewline>}\:gobble}
  {\HCode{</span>%
      \add:description{begin-end}{\a:speak:modified:leftrightarrow}</span>}}
\Configure{underleftrightarrow}
  {\HCode{<span class="munder-leftrightarrow">%
      \add:description{begin-end}{\a:speak:modified}%
      <span class="mo-2194"\Hnewline>}\:gobble}
  {\HCode{</span>%
      \add:description{begin-end}{\a:speak:modified:leftrightarrow}</span>}}
>>>

%%%%%%%%%%%%%%%%%%
\part{Loose Ends}
%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%
\section{halign}
%%%%%%%%%%%%%%%%%%


\<configure html-speech tex4ht2\><<<
\Configure{embedded-halign}{}{}
>>>

%%%%%%%%%%%%%%%%%%
\section{Problems with W3C / Emacspeak}
%%%%%%%%%%%%%%%%%%

\begin{description}
\item[Don't use Shortcuts of Empty Elements]
  
  The W3C browser is getting confused by the slash character, and
  takes the closing delimiter `\verb'+>+' for a content. So use, for
  instance, \verb+<br></br> instead of \verb+<br />+.

\item [Html-Speech Rate] Resets to default whenever a web page is reset.
The default is defined in
\verb+dtk-speak.el+, line 164 (\verb+~/emacspeak-22.0/lisp/dtk-speak.el+).
  
\item [Named Property Values not Recognized] The `loud' and `medium'
  properties are not supported for volume.  (Wrong type argument:
  integerp, medium)




\<loud\><<<
7
>>>

\<x-loud\><<<
9
>>>


\<medium\><<<
5
>>>

See end of \url{http://www.w3.org/TR/CSS21/aural.htm}.  We provide
values also for some unsupported attribute, with the expectation that
at some point they'll be supported.

\item[Delimiters]



 In equation 3, the left parenthsis does not get spoken (The parentheses
around the product: ``( product under script j = 1 over script n end
scripts x circumflex subscript j baseline )''. They should be spoken
automatically by emacspeak, but the problem is that the punctuation mode
for HTML is hardcoded to ``some'', which means that not all punctuation
codes will be spoken.  Convert ( and ) into ``left
parenthesis'' (or ``enlarged left parenthesis'') and ``right parenthesis'' (or
``enlarged right parenthesis'') 


\end{description}


%%%%%%%%%%%%%%%%%%
\section{Baselines in Tables}
%%%%%%%%%%%%%%%%%%


Normalize math tables to facilitate processing, such as
removing `baseline' at end of rows.

\begin{itemize}
\item
Use begin-array and end-array delimiters, to catch unneeded baseline indicators at end of tables
\item
Use `tr' class names to catch baseline indicators at end of non-final rows
\item
Use \verb+<div class="display-math">+ roots, in case math environment is 
needed to be explictly mentioned.
\item
A `title="implicit-baseline"' attribute can aslo help.
\end{itemize}


\begin{verbatim}
<div class="display-math">
        ...............      
    <div class="begin-array" title="speech-extra">
                ...
    </div>
    <div class="env-name" >
        <div class="tr">
            .....
            <span class="end-script" title="speech-extra">
                baseline
            </span>
        </div>
    </div>
    <div class="end-arry" title="speech-extra">
        ...
    </div>
</div>
<div class="end-math" title="speech-extra">
</div>
\end{verbatim}

\begin{verbatim}
\begin{multline}
T=n^{p-2}\prod^p_{i=1}
(n-n_i)^{n_i-1}
\\
T=n^{p-2}\prod^p_{i=1}
(n-n_i)^{n_i-1}
\end{multline}
\end{verbatim}


%%%%%%%%%%%%%%%%%%
\section{Questions}
%%%%%%%%%%%%%%%%%%


\begin{itemize}
\item Emacspeak + w3c on a mac?

\item Emacspeak is being fed by w3c. What it takes to attach
alternative browsaers?

\end{itemize}


%%%%%%%%%%%%%%%%%%
\section{Resources}
%%%%%%%%%%%%%%%%%%


\begin{itemize}
\item
\url{http://www.w3.org/TR/CSS21/aural.html}

\item
MathPlayer on MSIE
(http://www.dessci.com)

\item
Nemeth's MathSpeak,
\url{http://www.gh-mathspeak.com/} (\url{http://www.ghbraille.com/}),
\url{http://www.rit.edu/~easi/easisem/talkmath.htm},
\url{http://www.math.virginia.edu/~arm4r/nemeth/nemeth.htm}


\item
\url{http://www.livemath.com/}
Theorist Interactive, LLC, of Cambridge,  developers of the LiveMath 
>> and
>MathEQ
>> computer algebra software line, introduced this tool with the release 
>> of MathEQ 4.0 for Windows and Macintosh computers.
>>
>> MathSpeak is a set of special HTML tags that all html-speech-to-text screen
>
>> readers can access on a webpage, and correctly read the expression as 
>> spoken html-speech.  Although webpage authors can manually create the such 
>> tags for their math expressions, the task can be
>cumbersome.
>> MathEQ will automatically create the correct MathSpeak tags when used 
>> to create either images or MathML-based math expressions for webpages.

\item
Lawrence A Chang,
Handbook for spoken mathematics: (Larry's speakeasy),
Lawrence Livermore Laboratory (1983)
\item
Parkin, A.J. and Aldrich, F.K. (1987), How can studying from tape be made easier? New Beacon, LXXI, 341, 847342. Tape Recording Manual (3rd Edition) (1979), The National Braille Association, Inc. (Copies available on request from: National Library Service for the Blind and Physically Handicapped, Library of Congress, Washington, DC 20542.) 


\item
\url{http://www.mathspeak.org/}

\item
\url{http://www.w3.org/2000/08/nba-manual/Overview.html}

\item
Richard Fateman,
How can we speak math?,
\url {http://dlp.cs.berkeley.edu/~fateman/papers/speakmath.pdf}

\item
Dave Raggett and
Davy Batsalle, 
Add Math to Web pages with HP EzMath v1.1,
25th Ocober 1998
\url{http://www.w3.org/People/Raggett/EzMath/}

\item
T. V. Raman, Audio System for Technical Readings,
\url{http://emacspeak.sourceforge.net/raman/publications/web-aster/root-thesis.html.html}
(section 4.3)
Demo: \url{http://emacspeak.sourceforge.net/raman/aster/aster-toplevel.html}
\item
DotsPlus  megaDots 

That said, I have developed a computer program which translates math
entered into Megadots into files in which the math symbols have been
translated into words. These can be read by any browser. The advantage is
that a computer is considerably more patient than a human.

 
The MegaDots technology now belongs to Duxbury. I have a special 
arrangement to use MegaDots here at CHPI, so I can use the program here, 
but I can't release it. In addition, it works only with MegaDots files. 
\end{itemize}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\endinput
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%











\<configure html-speech-math amsmathWAIT\><<<
\Configure{equation*}
  {\ifmmode\else\par \IgnorePar\fi \EndP
           \HCode{<\tbl:XV{equation-star 3}><tr><td>}\IgnorePar
  }
  {\end:TTT\ifmmode\else |<try inline par|>\fi}
>>>








\<plain,latex mathml\><<<
\def\AccentMath#1{\relax\ifmmode #1\else $#1$\fi}
>>>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Constructs}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{The equation Environment}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{LaTeX}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<mathml latex\><<<
\let\A:equation|=\a:equation
\let\B:equation|=\b:equation
\let\C:equation|=\c:equation
\Configure{equation}
  {\A:equation|<math display in equation|>}
  {\B:equation}{\C:equation}
>>>





\<block display\><<<
display="block" 
>>>


\<inline display\><<<
display="inline"
>>>




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{MathML}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%
\section{?????}
%%%%%%%%%%%%%%%%%

\Link[http://lists.w3.org/Archives/Public/www-math/]{}{}mailing list\EndLink


\<configure mathml Preamble\><<<
\ifx \a:mathml\:UnDef
   \NewConfigure{mathml}{1}
   \Configure{mathml}{}
\fi 
\defclass{class}
>>>


\<plain,latex mathml\><<<
|<nolimit functions|>
|<limit functions|>
>>>


\<\><<<
\def\mml:prefix#1{%
   \Configure{mathop}{*}{<mo #1\Hnewline>}{</mo>}%
    {\Configure{mathop}{*}{<mo>}{</mo>}{}}}
\def\mml:prefix#1{}
\def\limit:csname{|%form="prefix" |%class="csname-limit"}
\def\nolimit:csname{|%form="prefix" |%class="csname-nolimit"}
>>>


\<nolimit functionsNO\><<<
\def\:tempb#1{%
  \def\:tempc##11->##2///{\if :##2:%
    \pend:def#1{\mml:prefix \nolimit:csname}\fi}%
  \expandafter\:tempc\meaning#11->///%
}
\:tempb\arccos
\:tempb\arcsin
\:tempb\arctan
\:tempb\arg
\:tempb\cosh
\:tempb\cos
\:tempb\coth
\:tempb\cot
\:tempb\csc
\:tempb\deg
\:tempb\dim
\:tempb\exp
\:tempb\hom
\:tempb\ker
\:tempb\lg
\:tempb\ln
\:tempb\log
\:tempb\sec
\:tempb\sinh
\:tempb\sin
\:tempb\tanh
\:tempb\tan
|<lim inf/sup|>
>>>

\<limit functionsNO\><<<
\def\:tempb#1{%
  \def\:tempc##11->##2///{\if :##2:%
    \pend:def#1{\mml:prefix \limit:csname}\fi}%
  \expandafter\:tempc\meaning#11->///%
}
\:tempb\Pr
\:tempb\det
\:tempb\gcd
\:tempb\inf
\:tempb\lim
\:tempb\max
\:tempb\min
\:tempb\sup
>>>

\<lim inf/supNO\><<<
\def\:tempc{\mml:prefix\limit:csname \mathop{\operator@font lim inf}}
\HLet\liminf\:tempc
\def\:tempc{\mml:prefix\limit:csname \mathop{\operator@font lim sup}}
\HLet\limsup\:tempc
>>>


\<plain,latex mathml\><<<
\let\A:displaylines|=\a:displaylines
\let\B:displaylines|=\b:displaylines
\let\C:displaylines|=\c:displaylines
\let\D:displaylines|=\d:displaylines
\Configure{displaylines}
   {\ifmmode
     \def\A:displaylines{\HCode{<mtable 
                                   class="displaylines">}}%
     \def\B:displaylines{\HCode{</mtable>}}%  
     \def\C:displaylines{\HCode{<mtr\Hnewline
                              class="displaylines"><mtd>}}%
     \def\D:displaylines{\HCode{</mtd></mtr>}}%  
    \fi 
    \A:displaylines} 
   {\B:displaylines} {\C:displaylines}{\D:displaylines}
>>>



\<mathml m:env\><<<
\def\m:env#1{\HCode{<mtable
  class="#1"><mtr><mtd>}%
   \def\endm:env{\HCode
      {</mtd></mtr></mtable>}}}
>>>






\<configure mathml tex4ht\><<<
|<tex compiler mathml|>
|<sub, sup, subsup|>            

>>>










\<html4 font decorations\><<<
\Configure{htf}{0}{+}{<span\Hnewline
   class="}{\%s}{-\%s}{x-x-\%d}{}{">}{</span>}%
\Configure{htf}{1}{+}{<img\Hnewline
   src="}{" alt="}{" class="}{\%s}{-\%d}{x-x-\%x}{"\xml:empty>}%
\Configure{htf}{3}{+}{<img\Hnewline                                
   src="}{" alt="}{" class="\%s-}{\%s}{-\%d}{x-x-\%x}%
   {" align="middle"\xml:empty>}%
\Configure{htf}{4}{+}{<small\Hnewline
   class="}{}{}{}{}{small-caps">}{</small>}%
\Configure{htf}{6}{+}{<u\Hnewline
   class="}{}{}{}{}{underline">}{</u>}%
\Configure{htf}{8}{+}
   {<sup class="htf"><strong>}{}{}{}{}{}{</strong></sup>}%
\Configure{htf}{10}{+}
   {<span class="htf-cmbx">}{}{}{}{}{}{</span>}%
\Configure{htf}{12}{+}
   {<span\Hnewline class="htf-calligraphy">}{}{}{}{}{}{</span>}%
>>>

\<no html4 font decorations\><<<
\Configure{htf}{0}{+}{}{}{}{}{}{}{}%
\Configure{htf}{1}{+}{}{}{}{}{}{}{}%
\Configure{htf}{3}{+}{}{}{}{}{}{}{}%
\Configure{htf}{4}{+}{}{}{}{}{}{}{}%
\Configure{htf}{6}{+}{}{}{}{}{}{}{}%
\Configure{htf}{8}{+}{}{}{}{}{}{}{}%
\Configure{htf}{10}{+}{}{}{}{}{}{}{}%
\Configure{htf}{12}{+}{}{}{}{}{}{}{}%
>>>





\<configure mathml tex4ht\><<<
\def\mml:htfsym{\Configure
   {htf}{254}{+}{<mglyph\Hnewline fontfamily="}{\%s"}{ 
   index="\%s"}{ mathsize="\%d\%\%"}{}{ alt="}{"/>}}
\def\ext:htfsym{\Configure{htf}{254}{+}{}{}{}{}{}{}{}}
>>>


\<configure mathml-mml tex4ht\><<<
\append:def\mml:htfsym{|<no html4 font decorations|>}
\append:def\ext:htfsym{|<html4 font decorations|>}
>>>


We reserve code 254 (and 255) for unknown symbols.


\<configure mathml latex\><<<


|<plain,latex mathml|>
>>>

\<configure mathml fontmath\><<<
|<plain,fontmath math|>
>>>

\<plain,fontmath math\><<<
|<rlbabel everypar|>
|<plain,fontmath math classes|>
>>>

\<configure mathml amsmath\><<<
|<arr amsmath, amstex1|>
|<amsmath mathml|>

>>>

\<configure mathml amsmath\><<<
\Configure{intertext}
    {\IgnorePar \ifinalign@   
        \HCode{\ifnum \HRow>0 </mtd></mtr>\fi
          <mtr><mtd 
          columnspan="\ifnum \HRow=0 15\else \HCol\fi"
                                            class="intertext">}%
     \else \ifingather@
        \HCode{<mtr><mtd columnspan="\HCol"
                                            class="intertext">}%
     \fi\fi
     \AA:text{intertext}%
    }
    {\BB:text \ifvmode \IgnorePar \fi \EndP\ifinalign@ 
        \HCode{</mtd></mtr>%
           \ifnum \HRow>0 <mtr><mtd>\fi}%
     \else \ifingather@
         \HCode{</mtd></mtr>}%
     \fi\fi
    }
>>>



\<configure mathml amsmath\><<<
\Configure{maketag}
  {\ifmathml 
     \ifmtext \expandafter\expandafter\expandafter\no:maketag\fi
   \else \expandafter\no:maketag\fi
   \AA:text{maketag}\hbox\bgroup\:gobbleIII :@:}
  {\egroup\BB:text }
\def\no:maketag#1:@:#2\b:maketag{\hbox{#2}}
>>>


\<configure mathml amstext\><<<
\Configure{text}{\AA:text{text}}{\BB:text}
>>>


\<amsmath symbols\><<<
\def\:tempc{\DOTSI\protect\:idotsint}
\HLet\idotsint|=\:tempc
\def\:idotsint{%
  \mathop{\intop\cdotp\cdotp\cdotp\intop }\ilimits@
}
>>>

\<configure mathml amsopn\><<<
|<amsopn / amstex.sty mathml|>
>>>

\<configure mathml amstex1\><<<
% amstex.sty
|<arr amsmath, amstex1|>
|<amstex.sty mathml|>
|<amsopn / amstex.sty mathml|>
  >>>

\<configure mathml amstex\><<<
% amstex.tex
|<mathml m:env|>
|<amstex.tex mathml|>
>>>

  \<configure mathml vanilla\><<<
      |<vanilla mathml|>
  >>>

     



\<mathml latex\><<<
\Configure{romannumeral}
   {\ifmathml\ifmtext\else \HCode{<mrow  class="romannumeral">}\fi\fi}
   {\ifmathml\ifmtext\else \HCode{</mrow>}\fi\fi}
>>>

\<configure html-speech-math latex\><<<
\Configure{romannumeral}
   {\ifmtext\else
      \HCode{<\ifmathml mrow \else span \fi class="romannumeral">}\fi
   }
   {\ifmtext\else \HCode{</\ifmathml mrow\else span\fi>}\fi }
>>>




\<plain,latex html-mml\><<<
\:CheckOption{new-accents}     \if:Option \else
   \ifx \mathml:on\:UnDef
      \Configure{accents}
        {\ifmmode \expandafter\mathord\fi
         {|<temp hcode accents|>%
         \ht:special{t4ht@[}\if!#1!x\else#2\fi\ht:special{t4ht@]}}}
        {\ifmmode 
             \Tg<mrow
                class="accent#1">\mathord{#3}\Tg</mrow>%
          \else \HCode{<span class="accent#1">}#3\HCode{</span>}%
          \fi
        }%
   \fi
\fi
>>>



     \<plain,latex mathml\><<<
\:CheckOption{new-accents}     \if:Option \else
   \ifx \mathml:on\:UnDef
      \Configure{accents}
        {\ifmmode \expandafter\mathord\fi
         {|<temp hcode accents|>%
          \ht:special{t4ht@[}\if!#1!x\else#2\fi\ht:special{t4ht@]}}}
        {\Tg<mrow
                class="accent#1">\mathord{#3}\Tg</mrow>%
        }%
   \fi
\fi
>>>







The special replaces the `x' character.


\<configure mathml Preamble\><<<  
\Configure{PROLOG}{VERSION,DOCTYPE,*XML-STYLESHEET}
\:CheckOption{no-DOCTYPE} \if:Option
   \Configure{PROLOG}{VERSION,*XML-STYLESHEET}
\fi
>>>

%   \Configure{VERSION}
%      {\HCode{<?xml version="1.0"?>\Hnewline}}       


\<configure html-mml tex4ht\><<<
\def\mathml:DOCTYPE{|<xhtml+mathml dtd|>}
\def\:temp{xhtml}
\ifx \:DTD\:temp
   |<mathml dtd|>
\fi
>>>


\<mathml dtd\><<<
\Configure{DOCTYPE}{\HCode
  {<!DOCTYPE html |<xhtml+mathml dtd|>%
   >\Hnewline
}}
>>>

\<xhtml+mathml dtdNO\><<<
PUBLIC
     "-//W3C//DTD XHTML 1.1 plus MathML 2.0//|<dtd lang|>"\Hnewline
   "http://www.w3.org/TR/MathML2/dtd/xhtml-math11-f.dtd"\Hnewline
    [\Hnewline
     <!ENTITY mathml "http://www.w3.org/1998/Math/MathML">\Hnewline
 ]>>>


\<xhtml+mathml dtd\><<<
PUBLIC
     "-//W3C//DTD XHTML 1.1 plus MathML 2.0//|<dtd lang|>"\Hnewline
     "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"
>>>

DTD to be used.

\begin{description}

\item [http://www.w3.org/TR/MathML2/dtd/xhtml-math11-f.dtd]

Declares a  FPI (Formal Public Identifier)
``-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN'' for XHTML+MathML. The DTD is broken
sine it contains a processing instruction
\verb!<?IS10744:arch xhtml ...>!  with a colon in the name. XML 
parsers don't allow it when namespaces are enabled. It carries 
revision id `xhtml-1,v 1.1 2000/10/31 19:52:09 davidc Exp'.

\item[http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd]

Suggested by the MathML 
specification
 http://www.w3.org/TR/2003/REC-MathML2-20031021/appendixa.html.  However, the
DTD incorporates also SVG.  It shows revision id
`xhtml-math11-f.dtd,v 1.16 2003/11/04 13:14:35 davidc Exp'

\item [others]

See SVG specifications
\end{description}

The DTD 
a   "-//W3C//DTD XHTML 1.1 plus MathML 
2.0//EN" is claimed: 





\<dtd lang\><<<
\expandafter
\ifx \csname a:dtd-lang\endcsname\relax EN\else
  \csname a:dtd-lang\endcsname
\fi
>>>


\<xmlns\><<<
xmlns="http://www.w3.org/1999/xhtml"
>>>


\<plain,latex mathml\><<<
\let\mml:TeX|=\TeX
\def\TeX{\ifmathml 
   \HCode{<mtext
      class="TeX">TeX</mtext>}\else \mml:TeX\fi}
>>>


\subsection{TeX Engine}


The \verb'\trap:base' is to catch empty bases of exponents like, e.g.,
in \verb'$a^{^b}$'.







\<tex compiler mathml\><<<
\newif\ifmathml \mathmlfalse
\newif\ifmtext \mtextfalse
|<mathml Link|>
\NewConfigure{math}{1}
\NewConfigure{@math}{1}
\def\IgnoreRule{\ht:special{t4ht@\string_}}
\def\EndIgnoreRule{\ht:special{t4ht@\string_\string_}}
\Configure{$$} 
   {\Configure{@math}{|<block display|>}\IgnorePar
    |<inline end-par comment|>\EndP\DviMath}
   {\EndDviMath\ShowPar\par{\csname HCondtrue\endcsname\noindent}}
   {\DisplayMathtrue}
\Configure{$}
   {\Configure{@math}{|<inline display|>}\DviMath}
   {\EndDviMath}{}
\newif\ifDisplayMath  \DisplayMathfalse
>>>


The \verb+\sqrt+ fanction produces a structure of the following form.

\begin{verbatim}
PUSH
   PUSH
      ......sqrt et al symbols, possibly with PUSH-POP......
   POP
   PUSH
      W3:       655361
      DOWN3:    -1020474
      PUT_RULE: height: 26213
                length: 1091179
      DOWN3:    1020474
      PUSH
         .....body.........
      POP
   POP
POP
\end{verbatim}



The following fails when the root symbol is made up
from multiple characters.

\begin{verbatim}
\Configure{radical}{\Tg<msqrt>%
   \Send{EndGROUP}{2}{}%
   \Send{GROUP}{3}{<mrow>}%
   \Send{EndGROUP}{3}%
        {\tg</mrow>\tg</msqrt>}\special{t4ht@+}}
\end{verbatim}





\<?\><<<
\def\MathRow#1{%
   \Configure{\expandafter\:gobble\string#1*}{*}%
      {<mrow\Hnewline 
         class="\expandafter\:gobble\string#1">}{</mrow>}%
      {\Configure{\expandafter\:gobble\string#1}{}{}{}{}}#1}%
>>>



The \verb'\MathRow' requests a \verb'<mrow\Hnewline>...</mrow>', instead of the contributions
of \verb'\mathop', \verb'\mathrel',...., for the next parameter.


\<tex compiler mathml\><<<
\def\:MT{\ifmathml m\fi}
\Configure{halignTB}{\HCode{<\:MT table }\halignTBL}{\HCode{>}}
\Configure{halignTBL}
   {t}{\ifmathml \HCode{ align="top" }\fi}
   {b}{\ifmathml \HCode{ align="baseline" }\fi}
   {c}{\ifmathml \HCode{ align="axis" }\fi}
   {}
\def\t:HA{\HCode{</\:MT table>}}
\def\R:HA{\HCode{<\:MT tr \Hnewline valign="baseline">}}
\def\r:HA{\HCode{</\:MT tr>}}
\def\D:HA{\HCode{<\:MT td \ifnum \HMultispan>1 colspan="\HMultispan"\fi}%
   \halignTD \HCode{\Hnewline>}}
\def\d:HA{\HCode{</\:MT td>}}
>>>


\subsection{latex.ltx}


MathML: 
\begin{verbatim}
Authors wishing to encode whitespace characters at the start
or end of the content of a token, or in sequences other than a single
space, without having them ignored, must use &nbsp; or other
`whitespace' non-marking entities as described in Section 6.2.4
[Non-Marking Characters].
\end{verbatim}



\<configure html-speech-math latex\><<<
\Configure{newline}
  {\ifmtext |<end mtext space|>\HCode{</mtext><
                                        mtext class="newline">}%
            |<start mtext space|>%
   \else \Tg<br\Hnewline class="newline" />\fi}
>>>

\<mathml latex\><<<
\Configure{newline}
  {|<end mtext space|>\HCode{</mtext><mtext\Hnewline class="newline">}|<start mtext space|>}
>>>



\<mathml latex\><<<
\NewConfigure{mathml[]}{2}
\NewConfigure{mathml()}{2}
>>>

\<configure html-speech-math latex\><<<
\Configure{mathml[]}
  {\edef\MathPar{\ifvmode par-\fi}\IgnorePar\endgraf\EndP
    \HCode{<div class="\MathPar math-display">}}
  {\HCode{</div>}|<try inline par|>}
\Css{div.math-display, div.par-math-display{text-align:center;}}
>>>




\<configure mathml rlbabel\><<<
\Configure{[]}
  {\Configure{@math}{|<block display|>}\csname a:mathml[]\endcsname
   \DviMath\Tg<mrow\Hnewline>$$\DisplayMathtrue }
  {$$\Tg</mrow>\EndDviMath\csname b:mathml[]\endcsname
   \if@rl\else\beginR\fi }
>>>






\<mathml latex\><<<
|<mathml fonts|>
\let\A:fbox=\a:fbox
\let\B:fbox=\b:fbox
\let\OLDf:box=\fbox
\def\fbox{\relax\ifmmode
    \Configure{fbox}{\leavevmode\Configure{HtmlPar}{}{}{}{}\IgnoreRule
                     \AA:text{fbox}}{\BB:text\EndIgnoreRule}\else
    \Configure{fbox}{\leavevmode
                     \IgnoreRule\A:fbox}{\B:fbox\EndIgnoreRule}\fi
    \OLDf:box}
\let\A:mbox|=\a:mbox
\let\B:mbox|=\b:mbox
\let\OLD:mbox|=\mbox
\def\mbox{\relax\ifmmode \Configure{mbox}{\AA:text{mbox}}{\BB:text}\else
                   \Configure{mbox}{\A:mbox}{\B:mbox}\fi\OLD:mbox}
|<mathml text util|>
>>>





\begin{verbatim}
\documentclass{article}
\begin{document}
$  \mbox{is right-continuous at } -r  $
\end{document}

I see the problematic space between

    is right-continuous at

and

    -r

but I don't understand it.  The mathml code currently has there

    <mrow><mtext>is right-continuous at</mtext></mrow>
    <mo>&#x2212;</mo><mi>r</mi>

Replacing mrow with mstyle doesn't make a difference. Removing
the mrow solves the problem of the extra space.

I introduced the above changes to the mathml and mozilla-mathml
configurations, respectively.
\end{verbatim}





\<amstex.tex mathml\><<<
|<mathml text util|>
\Configure{text}{\AA:text{text}}{\BB:text}
\Configure{format}
   {\HCode{<mtable class="format">}}
   {\HCode{</mtable>}}
   {\HCode{<mtr\Hnewline class="format">}}
   {\HCode{</mtr>}}
   {\HCode{<mtd\Hnewline class="format">}}
   {\HCode{</mtd>}}
>>>

\<mathml latex\><<<
\Configure{frac}
   {\Tg<mfrac>\Tg<mrow\Hnewline>}
   {\Tg</mrow>\Configure{over}{}{}}
   {\Tg<mrow\Hnewline>}
   {\Tg</mrow>\Tg</mfrac>}
>>>



\<configure html-mml amsmath\><<<
\ifx \mathdisplay@@pop\:UnDef
   \ifx \emdf@La\:UnDef
      |<amsmath html-mml pre 2000|>
   \else
      |<amsmath html-mml jan 2000|>
   \fi
\else
   |<amsmath html-mml july 2000|>
\fi
>>>


% \Configure{quad}{{\ifmathml \ifmtext \o:quad:\else
%    \fi\else \o:quad: \fi}}
%





\<try inline par\><<<
\ShowPar\par{\HCondtrue\noindent}%
>>>


% \Configure{math}{}

\<mathml fonts\><<<
\Configure{texttt}
   {\ifmathml \Configure{@mtext}{class="texttt"
                      mathvariant="monospace" }\fi}
   {}%
\Configure{textit}
   {\ifmathml \Configure{@mtext}{class="textit"
                      mathvariant="italic" }\fi}
   {}%
\Configure{textrm}
   {\ifmathml \Configure{@mtext}{class="textrm"
                      mathvariant="normal" }\fi}
   {}%
\Configure{textup}
   {\ifmathml \Configure{@mtext}{class="textup"
                      mathvariant="normal" }\fi}
   {}%
\Configure{textsl}
   {\ifmathml \Configure{@mtext}{class="textsl"
                      mathvariant="italic" }\fi}
   {}%
\Configure{textsf}
   {\ifmathml \Configure{@mtext}{class="textsf"
                      mathvariant="sans-serif" }\fi}
   {}%
\Configure{textbf}
   {\ifmathml \Configure{@mtext}{class="textbf"
                      mathvariant="bold" }\fi}
   {}%
\Configure{textsc}
   {\ifmathml \Configure{@mtext}{class="textsc"
                      mathvariant="normal" }\fi}
   {}%
\Configure{emph}
   {\ifmathml \Configure{@mtext}{class="emph"
                      mathvariant="italic" }\fi}
   {}%
>>>




\<configure html-speech-math latex\><<<
\:CheckOption{fonts} \if:Option
\Configure{texttt}
     {\ifmathml \Configure{@mtext}{class="texttt" mathvariant="monospace" }%
      \else     \HCode{<span class="texttt">}\fi}
     {\ifmathml\else \HCode{</span>}\fi}
  \Configure{textit}
     {\ifmathml \Configure{@mtext}{class="textit" mathvariant="italic" }%
      \else     \HCode{<span class="textit">}\fi}
     {\ifmathml\else \HCode{</span>}\fi}
  \Configure{textrm}
     {\ifmathml \Configure{@mtext}{ class="textrm" mathvariant="normal" }%
      \else     \HCode{<span class="textrm">}\fi}
     {\ifmathml\else \HCode{</span>}\fi}
  \Configure{textup}
     {\ifmathml \Configure{@mtext}{ class="textup" mathvariant="normal" }%
      \else     \HCode{<span class="textup">}\fi}
     {\ifmathml\else \HCode{</span>}\fi}
  \Configure{textsl}
     {\ifmathml \Configure{@mtext}{ class="textst" mathvariant="italic" }%
      \else     \HCode{<span class="textsl">}\fi}
     {\ifmathml\else \HCode{</span>}\fi}
  \Configure{textsf}
     {\ifmathml \Configure{@mtext}{ class="textsf" mathvariant="sans-serif" }%
      \else     \HCode{<span class="textsf">}\fi}
     {\ifmathml\else \HCode{</span>}\fi}
  \Configure{textbf}
     {\ifmathml \Configure{@mtext}{ class="textbf" mathvariant="bold" }%
      \else     \HCode{<span class="textbf">}\fi}
     {\ifmathml\else \HCode{</span>}\fi}
  \Configure{textsc}
     {\ifmathml \Configure{@mtext}{ class="textsc" mathvariant="normal" }%
      \else     \HCode{<span class="textsc">}\fi}
     {\ifmathml\else \HCode{</span>}\fi}
  \Configure{emph}
     {\ifmathml \Configure{@mtext}{ class="emph" mathvariant="italic" }%
      \else     \HCode{<span class="emph">}\fi}
     {\ifmathml\else \HCode{</span>}\fi}
\fi
>>>

The \verb+\bgroup...\egroup+ is to handle cases like
\verb+\nathbf{a}^x+.


\<configure mathml amsfonts\><<<  
\Configure{mathbb}{}{}
\Configure{mathfrak}{}{}
>>>



Used to be

\begin{verbatim}
   \Configure{mathrm}{\Tg<mi class="mathrm">\PauseMathClass}%
                     {\EndPauseMathClass\Tg</mi>}%
   \Configure{mathbf}{\Tg<mi class="mathbf"
                             mathvariant="bold">\PauseMathClass}%
                     {\EndPauseMathClass\Tg</mi>}%
\end{verbatim}


\<configure html-speech-math latex\><<<
\Css{math .texttt { font-family: monospace; }}
\Css{math .textit { font-style: italic; }}
\Css{math .textsl { font-style: oblique; }}
\Css{math .textsf { font-family: sans-serif; }}
\Css{math .textbf { font-weight: bold; }}
>>>





\<plain,latex mathml\><<<
\Configure{afterSUB}{'}{\def\SUB:prime{\SUB:SUP}}
\Configure{'}
   {\let\:primes=\empty}
   {\relax \csname SUB:prime\endcsname\sp{%
      \global\let\SUB:prime=\:UnDef
      \def\:tempa{\prime\prime}\ifx \:tempa\:primes
              \mathop{\HCode{\string&\#x2033;}}\else
      \def\:tempa{\prime\prime\prime}\ifx \:tempa\:primes
              \mathop{\HCode{\string&\#x2034;}}\else
              \:primes \fi\fi}%
   }
   {\let\prime=\relax \xdef\:primes{\:primes\prime}}
>>>

LaTeX places the primes within superscript, and mathml seems to follow
suit (maybe because of the use of latex fonts in mozilla). However,
unicode maps already seem to assume raised representation for the
primes.

%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{plain.sty}
%%%%%%%%%%%%%%%%%%%%%%%%%%




\<mathml plain\><<<
 \Configure{eqalign}
   {\HCode{<mtable class="eqalign">}}
   {\HCode{</mtable>}}
   {\HCode{<mtr \Hnewline class="eqalign">}}
   {\IgnorePar\HCode{</mtr>}}
   {\HCode{\ifnum \HCol=3 <mtd\Hnewline
       class="eqalign3"></mtd>\fi
       <mtd \Hnewline  class="eqalign\HCol">}}
   {\HCode{</mtd>}}
>>>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Palin + LaTeX}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%

The default \verb'\left' and \verb'\right' in their default definition
with tex produce multi-part delimiters, from cmex, on large
subformulas. Hence, the `'.' below is needed.

\<plain,latex mathml\><<<
\def\:temp#1{\a:left{#1}\o:left:.\b:left{#1}}   \HLet\left|=\:temp
\def\:temp#1{\a:right{#1}\o:right:.\b:right{#1}}\HLet\right|=\:temp
\Configure{left}
   {}
   {\HCode{<mfenced separators=""\Hnewline 
       open="|<lr del 1|>"\space }\bgroup 
                              \HCode{><mrow>}\bgroup}
\Configure{right}
   {\egroup\Send{GROUP}{0}{ close="|<lr del 1|>"\space}\egroup}
   {\HCode{</mrow></mfenced>}}
\def\def:DEL#1{\def\:DEL{#1}}
\def\check:DEL#1#2{\def\:tempa{#1}\ifx \:tempa\:DEL \def\:DEL{#2}\fi}
\NewConfigure{mfenced}[2]{\append:defI\def:DEL{\check:DEL{#1}{#2}}}


>>>


\<configure mathml etex4ht\><<<
\def\:tempc#1{\a:middle\mathrel{\left:right#1\:EMPTY}\b:middle} 
\HLet\middle=\:tempc 
\NewConfigure{middle}{2}
\Configure{middle} 
   {\bgroup 
        \Configure{mathrel}{*} 
          {<mo class="MathClass-rel" 
                     fence="true" stretchy="true" >} 
          {</mo>} 
        {\Configure{mathrel}{}{}{}{}}% 
        } 
        {\egroup} 
>>>





\<plain,latex mathml\><<<
\NewConfigure{mfenced}[2]{\expandafter
   \def\csname \string#1:lr del\endcsname{#2}}
|<plain,latex mfenced|>
>>>

\<amsmath mathml\><<<
\Configure{mfenced}{\lvert}{\string&\#x007C;} |%vertical line|%
\Configure{mfenced}{\rvert}{\string&\#x007C;} |%double vertical line|%
\Configure{mfenced}{\lVert}{\string&\#x2016;}
\Configure{mfenced}{\rVert}{\string&\#x2016;}
>>>

\<amstex.sty mathml\><<<
\Configure{mfenced}{\lvert}{\string&\#x007C;}
\Configure{mfenced}{\rvert}{\string&\#x007C;}
\Configure{mfenced}{\lVert}{\string&\#x2016;}
\Configure{mfenced}{\rVert}{\string&\#x2016;}
>>>






\<plain,latex mfenced\><<<
\Configure{mfenced}{\||}{\string&\#x2225;}
\Configure{mfenced}{.}{}
\Configure{mfenced}{\langle}{\string&\#x27E8;} |%lang|%
\Configure{mfenced}{\rangle}{\string&\#x27E9;} |%rang|%
\Configure{mfenced}{<}{\string&\#x003C;} |%lt|%
\Configure{mfenced}{>}{\string&\#x003E;} |%gt|%
\Configure{mfenced}{\lceil}{\string&\#x2308;} 
\Configure{mfenced}{\rceil}{\string&\#x2309;} 
\Configure{mfenced}{\lfloor}{\string&\#x230A;} 
\Configure{mfenced}{\rfloor}{\string&\#x230B;} 
\Configure{mfenced}{\Vert}{\string&\#x2016;}
\Configure{mfenced}{\vert}{\string&\#x007C;}
\Configure{mfenced}{\rgroup}{)}
\Configure{mfenced}{\lgroup}{(}
\Configure{mfenced}{\bracevert}{||}
\Configure{mfenced}{\bracevert}{||}
\Configure{mfenced}{\downarrow}{\string&\#x2193;}
\Configure{mfenced}{\uparrow}{\string&\#x2191;}
\Configure{mfenced}{\Uparrow}{\string&\#x21D1;}
\Configure{mfenced}{\updownarrow}{\string&\#x2195;}
\Configure{mfenced}{\Updownarrow}{\string&\#x21D5;}
\Configure{mfenced}{\Downarrow}{\string&\#x21D3;}
\Configure{mfenced}{\backslash}{\string&\#x2216;}
\Configure{mfenced}{\rmoustache}{\string&\#x25DD;}
\Configure{mfenced}{\lmoustache}{\string&\#x25DC;}
\Configure{mfenced}{\Arrowvert}{\string&\#x2225;}
\Configure{mfenced}{\arrowvert}{\string&\#x2223;}
>>>

%    \def\:tempa{\{}\ifx \:tempa\:DEL  \let\:DEL\lbrc: \else
%    \def\:tempa{\}}\ifx \:tempa\:DEL  \let\:DEL\rbrc: \else
%    \def\:tempa{<}\ifx \:tempa\:DEL  \def\:DEL{\string&lt;}\else
%    \def\:tempa{>}\ifx \:tempa\:DEL  \def\:DEL{\string&gt;}%
%    \fi\fi\fi\fi }
% \edef\lbrc:{\string{}     \edef\rbrc:{\string}}

% \HCode{\string&#2#1;}%

%%%%%%%%%%%%%%%%%%%%%
\subsection{Amsmath}
%%%%%%%%%%%%%%%%%%%%%


\<configure html-mml amsmath\><<<
\Css{mtd.align-odd{margin-left:2em;   text-align:right;}}
\Css{mtd.align-even{margin-right:2em; text-align:left;}}
>>>





Setting \verb+#1+ below within mrow is problematic in the sense that
arrows don't stretch over multi-characters content \verb+#2+.
A \verb+accent="true"+ move the arrow lower, but also distribute the
characters further apart.

\<under arrow\><<<
\Tg<munder>%
\Tg<mrow\Hnewline>#2\Tg</mrow>%
#1%
\Tg</munder>%
>>>

\<over arrow\><<<
\Tg<mover class="overarrow">%
\Tg<mrow\Hnewline>{#2#3}\Tg</mrow>%
#1%
\Tg</mover>%
>>>




% \Tg<mrow\Hnewline>#1\Tg</mrow>%
% \Tg<mrow>#1\Tg</mrow>%


\<arr amsmath, amstex1\><<<
\Configure{underarrow@}
   {\Tg<munder>\Tg<mrow\Hnewline>}
   {\Tg</mrow>\Tg<mrow\Hnewline>}
   {\Tg</mrow>\Tg</munder>}
\Configure{overarrow@}
   {\Tg<mover accent="true">\Tg<mrow\Hnewline>}
   {\Tg</mrow>\Tg<mrow>}
   {\Tg</mrow>\Tg</mover>}
\def\:tempc#1#2#3{\a:overarrow@
      \hbox{$\m@th#2#3$}\b:overarrow@
      \hbox{#1#2}\c:overarrow@
   }
\HLet\overarrow@\:tempc
>>>





\<configure mathml amstex1\><<<
\ifx \o:overrightarrow:\:UnDef\else     
   \HRestore\overrightarrow
   \HRestore\overleftarrow
   \HRestore\overleftrightarrow
\fi
>>>



\<amsmath html-mml jan 2000NO\><<<
\HRestore\overrightarrow
\HRestore\overleftarrow
\HRestore\overleftrightarrow
>>>

\<amsmath html-mml july 2000NO\><<<
\HRestore\overrightarrow
\HRestore\overleftarrow
\HRestore\overleftrightarrow
>>>

%   \HRestore\underrightarrow
%   \HRestore\underleftarrow
%   \HRestore\underleftrightarrow




\<\><<<
\def\:tempc{\mathpalette{\overarrow@\rightarrow}}
\HLet\overrightarrow=\:tempc
\def\:tempc{\mathpalette{\overarrow@\leftarrow}}
\HLet\overleftarrow=\:tempc
\def\:tempc{\mathpalette{\overarrow@\leftrightarrow}}
\HLet\overleftrightarrow=\:tempc

\def\:tempc{\mathpalette{\underarrow@\rightarrow}}
\HLet\underrightarrow=\:tempc
\def\:tempc{\mathpalette{\underarrow@\leftarrow}}
\HLet\underleftarrow=\:tempc
\def\:tempc{\mathpalette{\underarrow@\leftrightarrow}}
\HLet\underleftrightarrow=\:tempc
>>>


Replace with
\Link[http://www.unicode.org/charts/PDF/U27F0.pdf]{}{}stretching
arrows\EndLink{} once they work. It was \verb+\rightarrow+ (U-2192)
before going to \verb+\HCode{&\#x20D7;}+. 
(... suggested
to replace it with  
the diacritical one: \verb+&#x20D7+. I t solves two problems.  The arrow is
lower and the the spacing between a subscript and a vector is
reduced.)


\<\><<<
\def\underarrow:#1#2#3{|<under arrow|>}
\def\overarrow:#1#2#3{|<over arrow|>}
\def\:tempc{\mathpalette{\overarrow:\rightarrow}}
\HLet\overrightarrow=\:tempc
\def\:tempc{\mathpalette{\overarrow:\leftarrow}}
\HLet\overleftarrow=\:tempc
\def\:tempc{\mathpalette{\overarrow:\leftrightarrow}}
\HLet\overleftrightarrow=\:tempc
>>>

\<\><<<
\def\:tempc{\mathpalette{\underarrow:\rightarrow}}
\HLet\underrightarrow=\:tempc
\def\:tempc{\mathpalette{\underarrow:\leftarrow}}
\HLet\underleftarrow=\:tempc
\def\:tempc{\mathpalette{\underarrow:\leftrightarrow}}
\HLet\underleftrightarrow=\:tempc
>>>



\<amsmath mathml\><<<
|<mathml m:env|>


\renewcommand{\hdotsfor}[1]{%
  \ifx[#1\@xp\shdots@for\else\hdots@for\@ne{#1}\fi}
\def\shdots@for#1]{\hdots@for{#1}}
\def\hdots@for#1#2{\multicolumn{#2}c%
  {\m@th\dotsspace@1.5mu\mkern-#1\dotsspace@
   \xleaders\hbox{$\m@th\mkern#1\dotsspace@.\mkern#1\dotsspace@$}%
           \hfill
   \mkern-#1\dotsspace@}%
   }
\ConfigureEnv{eqxample}{}{}{}{}
\ConfigureEnv{gather*}{}{}{}{}
\ConfigureEnv{gathered}{}{}{}{}
\ConfigureEnv{matrix}{}{}{}{}
>>>



%%%%%%%%%%%%%%%%%%%%
\subsection{amsopn}
%%%%%%%%%%%%%%%%%%%%


\<amsopn / amstex.sty mathml\><<<
\def\varinjlim{{\underrightarrow\lim}}
\def\varprojlim{{\underleftarrow\lim}}
\def\varlimsup{{\overline\lim}}
\def\varliminf{{\underline\lim}}
\def\:tempc#1#2#3{\hbox{{\mtexttrue
   \HCode{<mrow\Hnewline
       class="text"><mtext 
              \a:@mtext>}|<start mtext space|>\PauseMathClass
   \Configure{$}{\EndPauseMathClass\mtextfalse
      |<end mtext space|>\HCode{</mtext><mrow\Hnewline class="math">}}
        {|<start mtext space|>\HCode{</mrow><mtext
           \a:@mtext>}\mtexttrue\PauseMathClass}{#1}
   \let\f@size#2\selectfont #3}%
   \mtextfalse \EndPauseMathClass |<end mtext space|>\HCode
      {</mtext></mrow>}}}
\HLet\textdef@\:tempc
>>>


The original definitions for the following macros contain small spaces
\verb+\,+ in the names, and the spaces imply improper mathml outcome
of the form \verb+<mo>...<mspace.../>...</mo>+.


\<configure mathml amsopn\><<<
\def\:tempc{\qopname\relax m{lim inf}}
\HLet\liminf=\:tempc
\def\:tempc{\qopname\relax m{lim sup}}
\HLet\limsup=\:tempc
\def\:tempc{\qopname\relax m{proj lim}} 
\HLet\projlim=\:tempc
\def\:tempc{\qopname\relax m{inj lim}}
\HLet\injlim=\:tempc
>>>





Why originally the accents are defined within a group? (knuth answer
this in the texbook.)

\<plain,latex mathml\><<<
\let\A:oalign|=\a:oalign
\let\B:oalign|=\b:oalign
\Configure{oalign}
   {\ifmmode \Configure{$}{\Tg<mrow\Hnewline>}{\Tg</mrow>}{}%
             \let\halign|=\TeXhalign
             \Tg<mrow\Hnewline class="oalign">\else\A:oalign
    \fi}
   {\ifmmode \Tg</mrow>\else\B:oalign\fi}
>>>



\<\><<<
\Configure{qopname}
   {\Configure{mathop*}{*}
      {<mrow class="qopname">}
      {</mrow>}
      {\Configure{mathop}{}{}{}{}}}
>>>



%%%%%%%%%%%%%%%%%%%%
\section{Eqnarray}
%%%%%%%%%%%%%%%%%%%%

Had `BASELINE' before `MIDDLE', but changed to conform with math
in page 252-- in intro to theory book.

\<mathml latex\><<<
\Configure{eqnarray}
   {\HCode{<mtable\Hnewline class="eqnarray\ifx 
       \@seqncr\@eqncr\else-star\fi"
       columnalign="right center left" >}}{\HCode{</mtable>}}
   {\HCode{<mtr>}}  {\HCode{</mtr>}}
   {\Tg<mtd\Hnewline class="eqnarray-\HCol">
      \ifnum \HCol=4
        \Tg<mtext 
             class="eqnarray">|<start mtext space|>\PauseMathClass 
        \mtexttrue
      \fi}
   {\ifnum \HCol=4 \mtextfalse 
      \EndPauseMathClass|<end mtext space|>\Tg</mtext>\fi
      \Tg</mtd>}
>>>




\<attributes of mml multicolumn\><<<
\Configure{halignTD} {}{}
   {<}{\HCode{-left}}
   {-}{\HCode{-center}}
   {>}{\HCode{-right}}
   {p}{\HCode{-left}}
   {}%
>>>


\<configure html-mml tex4ht\><<<
\Configure{halignTD} {}{}
   {<}{\ifmathml \HCode{ columnalign="left"}\else
        \HCode{ align="left" style="white-space:nowrap;"}\fi}
   {-}{\ifmathml \HCode{ columnalign="center"}\else
        \HCode{ align="center" style="white-space:nowrap;"}\fi}
   {>}{\ifmathml \HCode{ columnalign="right"}\else
        \HCode{ align="right" style="white-space:nowrap;"}\fi}
   {^}{\ifmathml \HCode{ rowalign="top"}\else
        \HCode{ valign="top" style="white-space:nowrap;"}\fi}
   {=}{\ifmathml \HCode{ rowalign="baseline"}\else
        \HCode{ valign="baseline" style="white-space:nowrap;"}\fi}
   {||}{\ifmathml \HCode{ rowalign="center"}\else
        \HCode{ valign="middle" style="white-space:nowrap;"}\fi}
   {_}{\ifmathml \HCode{ rowalign="bottom"}\else
        \HCode{ valign="bottom" style="white-space:nowrap;"}\fi}
   {p}{\ifmathml \HCode{ columnalign="left"}\else
        \HCode{ align="left"}\fi}
   {}
>>>




\<configure mathml tex4ht\><<<
\Configure{halignTD} {}{}
   {<}{\HCode{ columnalign="left"}}
   {-}{\HCode{ columnalign="center"}}
   {>}{\HCode{ columnalign="right"}}
   {^}{\HCode{ rowalign="top"}}
   {=}{\HCode{ rowalign="baseline"}}
   {||}{\HCode{ rowalign="center"}}
   {_}{\HCode{ rowalign="bottom"}}
   {p}{\HCode{ columnalign="left"}}
   {}
>>>

%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Big, BIG, ....}
%%%%%%%%%%%%%%%%%%%%%%%%%

The 
\verb'\special{t4ht@[}...\special{t4ht@]}' gobble the enclosed stuff.
The external pair is provided as grouping mechanism for
sub/super-scripts cases like \verb'\bigl(...\bigr)^x' within dvimath
mode. The \verb'{\HCode{}}' is neded for creating content delimiters
\verb'.' delimiters like in \verb'$\bigl. a_b \bigr)$'; without that mathml 
gets something wrong there. 


\begin{verbatim}
 > There are some minor problems wit \bigl | corresponding to #x2223 in
 > Mozilla encoding
 > but I eliminted it by using \left | which turned to be a right solution.

The \big... macros decide the dimensions of the delimiters. As is the
case with \sum, also here I don't know how to transport the dimensions
to mozilla.

The \left...\right macros ask latex/mozilla to determine the
dimensions.
\end{verbatim}




\verb+\bigl{.}+ et al produce empty para,etr , hence the \verb+\:EMPTY+ is a ompensation for such cases.


% \R=8.5; \R*1.4; \WriteVal\R
% \R=11.5; \R*1.4; \WriteVal\R
% \R=14.5; \R*1.4; \WriteVal\R
% \R=17.5; \R*1.4; \WriteVal\R

 
\<plain,fontmath math\><<<
\def\:tempc#1{{\hbox{\a:big$\c:big
   \left#1\hbox{}\right.\n@space\d:big$\b:big}}}
\HLet\big=\:tempc
\def\:tempc#1{{\hbox{\a:Big$\c:Big
   \left#1\hbox{}\right.\n@space\d:Big$\b:Big}}}
\HLet\Big=\:tempc
\def\:tempc#1{{\hbox{\a:bigg$\c:bigg
   \left#1\hbox{}\right.\n@space\d:bigg$\b:bigg}}}
\HLet\bigg=\:tempc
\def\:tempc#1{{\hbox{\a:Bigg$\c:Bigg
   \left#1\hbox{}\right.\n@space\d:Bigg$\b:Bigg}}}
\HLet\Bigg=\:tempc
>>>

\<configure mathml amsbsy\><<<
\Configure{pmb} 
   {\ifmmode \HCode{<!--binary math rel, tripple hight-->}\fi} 
   {\ifmmode \HCode{<!--/binary math rel, tripple hight-->}\fi} 
>>>



%%%%%%%%%%%%%%%%%%%%%%%%%
\section{stackrel}
%%%%%%%%%%%%%%%%%%%%%%%%%

\<mathml latex\><<<
\def\:temp#1#2{{\a:stackrel{#1}\b:stackrel {#2}\c:stackrel}}   
\HLet\stackrel|=\:temp
\:CheckOption{stackrel-}     \if:Option
   \Configure{stackrel}
      {\mathrel\bgroup \HCode{<mglyph\Hnewline
          alt="\string\stackrel}\afterassignment\put:arg\tmp:toks}
      {\afterassignment\put:arg\tmp:toks}
      {\HCode{" />}\egroup}
   \def\put:arg{\HCode{{\the\tmp:toks}}}
\else
   \Configure{stackrel}
     {\HCode{<mover\Hnewline
             class="stackrel"><mrow\Hnewline>}\inv:i:iii}
     {\HCode{</mrow><\empty
                           mrow\Hnewline>}|<mathop nested within stackrel|>\mathop}
     {\HCode{</mrow></mover>}}
   \def\inv:i:iii#1#2#3{{#3}#2{#1}}
\fi
>>>

\<mathop nested within stackrel\><<<
\Configure{mathop*}{*}
         {<mrow>}
         {</mrow>}
         {\Configure{mathop}{}{}{}{}}%
>>>

\subsection{fontmath.ltx}


Accent versus underscript: \verb=\underbrace{x+y+z}=
   versus \verb=\underbrace{\strut x+y+z}=

\<\><<<
\def\:temp#1{%
   \Configure{mathop*}{*}{<mrow class="underbrace">}
         {</mrow>}%
         {\Configure{mathop}{}{}{}{}}%
   \mathop{\hbox{$\displaystyle{#1}$}}\limits}
\HLet\underbrace|=\:temp
\def\:temp#1{%
   \Configure{mathop*}{*}{<mrow class="overbrace">}
         {</mrow>}%
         {\Configure{mathop}{}{}{}{}}%
   \mathop{\hbox{$\displaystyle{#1}$}}\limits}
\HLet\overbrace|=\:temp
>>>


\<amsmath mathmlNO\><<<
\def\:temp#1{%
   \Configure{mathop*}{*}{<mrow class="underbrace">}
      {</mrow>}%
      {\Configure{mathop}{}{}{}{}}%
   \mathop{\vtop{$\displaystyle{#1}$}}\limits}
\HLet\underbrace|=\:temp
>>>




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Sized Operations}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%







\<configure mathml fontmath\><<<
\ifx \ilimits@\o:nolimits: 
  \let\ilimits@\nolimits 
\fi 
\ifx \ilimits@\o:nolimits: 
  \let\slimits@\nolimits 
\fi 
>>>





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Underline and Overline}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Choose}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\<plain,latex mathmlNO\><<<
\Configure{choose}
   {\Send{GROUP}{0}{<mfrac linethickness="0" class="choose">\Hnewline
     <mrow class="choose-1">}\HCode{</mrow>}}
   {\HCode{\Hnewline<mrow class="choose-2">}
       \Send{EndGROUP}{0}{</mrow></mfrac>}}
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Footnotes}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech-math latex\><<<
\Configure{footnote-mark}
   {\ifmathml \ifmtext \else
        \HCode{<mrow class="footnote-mark">}\fi
    \else \HCode{<span class="footnote-mark">}\fi }
   {\ifmathml \ifmtext \else \HCode{</mrow>}\fi
    \else \HCode{</span>}\fi }
\Configure{thank-mark}
   {\HCode{<\ifmathml mrow  \expandafterclass\else span class\fi
                                   ="thank-mark">}}
   {\HCode{</\ifmathml mrow\else span\fi>}}  
>>>





The following code segments handle the different listed cases,
with possible exception of the last.

\begin{verbatim}
a\footnote{b c}

$a\footnote{b c}$

$a\footnote{\hbox{b c}}$

$a\footnote{\mbox{b c}}$

$a\mbox{\footnote{b c}}$
\end{verbatim}


We have the following hooks


\begin{verbatim}
\def\@footnotemark{...\a:@makefnmark\@makefnmark
                                           \b:@makefnmark...}
\long\def\@footnotetext#1{...\a:footnote-text\a:@makefntext
                \@makefntext{\b:@makefntext
                                   \a:@makefnbody #1\b:@makefnbody
                            }\c:@makefntext\b:footnote-text...}
\end{verbatim}





\<configure html-speech-math latex\><<<
\:CheckOption{fn-in}\if:Option  \else
   \expandafter\let\csname A:footnote-text\expandafter\endcsname
                     \csname a:footnote-text\endcsname
   \expandafter\let\csname B:footnote-text\expandafter\endcsname
                     \csname b:footnote-text\endcsname
   \NewConfigure{footnote-text}[2]{%
      \expandafter\def\csname a:footnote-text\endcsname{%
         #1%
         \ifmathml
             \HCode{<math\Hnewline
                \csname a:math-xmlns\endcsname \Hnewline \a:@math>%
                \ifmtext <mtext>\fi}
         \fi 
         \ifmathml  \fi
      }%
      \expandafter\def\csname b:footnote-text\endcsname{%
         \ifmathml  
            \HCode{\ifmtext</mtext>\fi </math>}%
         \fi 
         #2%
      }%
   }
   \Configure{footnote-text}
      {\csname A:footnote-text\endcsname}
      {\csname B:footnote-text\endcsname}
\fi
>>>



\<configure html-speech-math latex\><<<
\let\A:footnotetext=\a:footnotetext
\let\B:footnotetext=\b:footnotetext
\let\C:footnotetext=\c:footnotetext
\NewConfigure{footnotetext}[3]{%
   \def\a:footnotetext{%
      \ifmathml \ifmtext  |<end mtext space|>\fi\fi
      #1%
      \ifmathml \ifmtext  |<end mtext space|>\fi\fi
   }%
   \def\b:footnotetext{%
      \ifmathml \ifmtext  |<end mtext space|>\fi\fi
      #2%
      \ifmathml \ifmtext  |<end mtext space|>\fi\fi
   }%
   \def\c:footnotetext{%
      \ifmathml \ifmtext  |<end mtext space|>\fi\fi
      #3%
      \ifmathml \ifmtext  |<start mtext space|>\fi\fi
   }%
}
\Configure{footnotetext}
   {\A:footnotetext}
   {\B:footnotetext}
   {\C:footnotetext}
>>>

\<configure html-speech-math latex\><<<
\Configure{footnotebody}
   {\tmp:toks=}
   {\ifmathml \ifmmode $\mbox{$\the\tmp:toks$}$ 
              \else $\mbox{\the\tmp:toks}$\fi
    \else \the\tmp:toks\fi}
>>>


\<configure html-speech-math latex\><<<
\:CheckOption{mouseover} \if:Option
   \pend:def\js:on{\ifmathml \ifmtext  |<end mtext space|>\fi\fi}
   \append:def\js:on{\ifmathml \ifmtext  |<start mtext space|>\fi\fi}
\fi
>>>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Space Characters}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%





% {\mathchar"0403} % \square
% {\mathchar"0404} % \blacksquare
% {\mathchar"0406} % \lozenge
% {\mathchar"0407} % \blacklozenge
% {\mathchar"0438} % \backprime
% {\mathchar"0446} % \bigstar
% {\mathchar"0448} % \blacktriangledown
% {\mathchar"044E} % \blacktriangle
% {\mathchar"044F} % \triangledown
% {\mathchar"045D} % \measuredangle
% {\mathchar"045E} % \sphericalangle
% {\mathchar"0473} % \circledS
% {\mathchar"047B} % \complement
% {\mathchar"051E} % \diagup
% {\mathchar"051F} % \diagdown
% {\mathchar"053F} % \varnothing
% {\mathchar"0540} % \nexists
% {\mathchar"0560} % \Finv
% {\mathchar"0561} % \Game
% {\mathchar"0567} % \eth
% {\mathchar"0569} % \beth
% {\mathchar"056A} % \gimel
% {\mathchar"056B} % \daleth
% {\mathchar"057A} % \digamma
% {\mathchar"057B} % \varkappa
% {\mathchar"057C} % \Bbbk
% {\mathchar"057D} % \hslash


\<configure mathml amssymb\><<<
\def\:tempa#1"#2#3///{\Configure{MathClass}{#2}}
\def\:temp#1{\:tempa#1///{}{}{}{#1}}
\:temp{\mathchar"2400} |% \boxdot |%
\:temp{\mathchar"2401} |% \boxplus |%
\:temp{\mathchar"2402} |% \boxtimes |%
\:temp{\mathchar"2405} |% \centerdot |%
\:temp{\mathchar"240C} |% \boxminus |%
\:temp{\mathchar"2459} |% \veebar |%
\:temp{\mathchar"245A} |% \barwedge |%
\:temp{\mathchar"245B} |% \doublebarwedge |%
\:temp{\mathchar"2464} |% \Cup |%
\:temp{\mathchar"2465} |% \Cap |%
\:temp{\mathchar"2466} |% \curlywedge |%
\:temp{\mathchar"2467} |% \curlyvee |%
\:temp{\mathchar"2468} |% \leftthreetimes |%
\:temp{\mathchar"2469} |% \rightthreetimes |%
\:temp{\mathchar"2475} |% \dotplus |%
\:temp{\mathchar"247C} |% \intercal |%
\:temp{\mathchar"247D} |% \circledcirc |%
\:temp{\mathchar"247E} |% \circledast |%
\:temp{\mathchar"247F} |% \circleddash |%
\:temp{\mathchar"253E} |% \divideontimes |%
\:temp{\mathchar"256C} |% \lessdot |%
\:temp{\mathchar"256D} |% \gtrdot |%
\:temp{\mathchar"256E} |% \ltimes |%
\:temp{\mathchar"256F} |% \rtimes |%
\:temp{\mathchar"2572} |% \smallsetminus |%
\:temp{\mathchar"3408} |% \circlearrowright |%
\:temp{\mathchar"3409} |% \circlearrowleft |%
\:temp{\mathchar"340A} |% \rightleftharpoons |%
\:temp{\mathchar"340B} |% \leftrightharpoons |%
\:temp{\mathchar"340D} |% \Vdash |%
\:temp{\mathchar"340E} |% \Vvdash |%
\:temp{\mathchar"340F} |% \vDash |%
\:temp{\mathchar"3410} |% \twoheadrightarrow |%
\:temp{\mathchar"3411} |% \twoheadleftarrow |%
\:temp{\mathchar"3412} |% \leftleftarrows |%
\:temp{\mathchar"3413} |% \rightrightarrows |%
\:temp{\mathchar"3414} |% \upuparrows |%
\:temp{\mathchar"3415} |% \downdownarrows |%
\:temp{\mathchar"3416} |% \upharpoonright |%
\:temp{\mathchar"3417} |% \downharpoonright |%
\:temp{\mathchar"3418} |% \upharpoonleft |%
\:temp{\mathchar"3419} |% \downharpoonleft |%
\:temp{\mathchar"341A} |% \rightarrowtail |%
\:temp{\mathchar"341B} |% \leftarrowtail |%
\:temp{\mathchar"341C} |% \leftrightarrows |%
\:temp{\mathchar"341D} |% \rightleftarrows |%
\:temp{\mathchar"341E} |% \Lsh |%
\:temp{\mathchar"341F} |% \Rsh |%
\:temp{\mathchar"3420} |% \rightsquigarrow |%
\:temp{\mathchar"3421} |% \leftrightsquigarrow |%
\:temp{\mathchar"3422} |% \looparrowleft |%
\:temp{\mathchar"3423} |% \looparrowright |%
\:temp{\mathchar"3424} |% \circeq |%
\:temp{\mathchar"3425} |% \succsim |%
\:temp{\mathchar"3426} |% \gtrsim |%
\:temp{\mathchar"3427} |% \gtrapprox |%
\:temp{\mathchar"3428} |% \multimap |%
\:temp{\mathchar"3429} |% \therefore |%
\:temp{\mathchar"342A} |% \because |%
\:temp{\mathchar"342B} |% \doteqdot |%
\:temp{\mathchar"342C} |% \triangleq |%
\:temp{\mathchar"342D} |% \precsim |%
\:temp{\mathchar"342E} |% \lesssim |%
\:temp{\mathchar"342F} |% \lessapprox |%
\:temp{\mathchar"3430} |% \eqslantless |%
\:temp{\mathchar"3431} |% \eqslantgtr |%
\:temp{\mathchar"3432} |% \curlyeqprec |%
\:temp{\mathchar"3433} |% \curlyeqsucc |%
\:temp{\mathchar"3434} |% \preccurlyeq |%
\:temp{\mathchar"3435} |% \leqq |%
\:temp{\mathchar"3436} |% \leqslant |%
\:temp{\mathchar"3437} |% \lessgtr |%
\:temp{\mathchar"343A} |% \risingdotseq |%
\:temp{\mathchar"343B} |% \fallingdotseq |%
\:temp{\mathchar"343C} |% \succcurlyeq |%
\:temp{\mathchar"343D} |% \geqq |%
\:temp{\mathchar"343E} |% \geqslant |%
\:temp{\mathchar"343F} |% \gtrless |%
\:temp{\mathchar"3442} |% \vartriangleright |%
\:temp{\mathchar"3443} |% \vartriangleleft |%
\:temp{\mathchar"3444} |% \trianglerighteq |%
\:temp{\mathchar"3445} |% \trianglelefteq |%
\:temp{\mathchar"3447} |% \between |%
\:temp{\mathchar"3449} |% \blacktriangleright |%
\:temp{\mathchar"344A} |% \blacktriangleleft |%
\:temp{\mathchar"344D} |% \vartriangle |%
\:temp{\mathchar"3450} |% \eqcirc |%
\:temp{\mathchar"3451} |% \lesseqgtr |%
\:temp{\mathchar"3452} |% \gtreqless |%
\:temp{\mathchar"3453} |% \lesseqqgtr |%
\:temp{\mathchar"3454} |% \gtreqqless |%
\:temp{\mathchar"3456} |% \Rrightarrow |%
\:temp{\mathchar"3457} |% \Lleftarrow |%
\:temp{\mathchar"345F} |% \varpropto |%
\:temp{\mathchar"3460} |% \smallsmile |%
\:temp{\mathchar"3461} |% \smallfrown |%
\:temp{\mathchar"3462} |% \Subset |%
\:temp{\mathchar"3463} |% \Supset |%
\:temp{\mathchar"346A} |% \subseteqq |%
\:temp{\mathchar"346B} |% \supseteqq |%
\:temp{\mathchar"346C} |% \bumpeq |%
\:temp{\mathchar"346D} |% \Bumpeq |%
\:temp{\mathchar"346E} |% \lll |%
\:temp{\mathchar"346F} |% \ggg |%
\:temp{\mathchar"3474} |% \pitchfork |%
\:temp{\mathchar"3476} |% \backsim |%
\:temp{\mathchar"3477} |% \backsimeq |%
\:temp{\mathchar"3500} |% \lvertneqq |%
\:temp{\mathchar"3501} |% \gvertneqq |%
\:temp{\mathchar"3502} |% \nleq |%
\:temp{\mathchar"3503} |% \ngeq |%
\:temp{\mathchar"3504} |% \nless |%
\:temp{\mathchar"3505} |% \ngtr |%
\:temp{\mathchar"3506} |% \nprec |%
\:temp{\mathchar"3507} |% \nsucc |%
\:temp{\mathchar"3508} |% \lneqq |%
\:temp{\mathchar"3509} |% \gneqq |%
\:temp{\mathchar"350A} |% \nleqslant |%
\:temp{\mathchar"350B} |% \ngeqslant |%
\:temp{\mathchar"350C} |% \lneq |%
\:temp{\mathchar"350D} |% \gneq |%
\:temp{\mathchar"350E} |% \npreceq |%
\:temp{\mathchar"350F} |% \nsucceq |%
\:temp{\mathchar"3510} |% \precnsim |%
\:temp{\mathchar"3511} |% \succnsim |%
\:temp{\mathchar"3512} |% \lnsim |%
\:temp{\mathchar"3513} |% \gnsim |%
\:temp{\mathchar"3514} |% \nleqq |%
\:temp{\mathchar"3515} |% \ngeqq |%
\:temp{\mathchar"3516} |% \precneqq |%
\:temp{\mathchar"3517} |% \succneqq |%
\:temp{\mathchar"3518} |% \precnapprox |%
\:temp{\mathchar"3519} |% \succnapprox |%
\:temp{\mathchar"351A} |% \lnapprox |%
\:temp{\mathchar"351B} |% \gnapprox |%
\:temp{\mathchar"351C} |% \nsim |%
\:temp{\mathchar"351D} |% \ncong |%
\:temp{\mathchar"3520} |% \varsubsetneq |%
\:temp{\mathchar"3521} |% \varsupsetneq |%
\:temp{\mathchar"3522} |% \nsubseteqq |%
\:temp{\mathchar"3523} |% \nsupseteqq |%
\:temp{\mathchar"3524} |% \subsetneqq |%
\:temp{\mathchar"3525} |% \supsetneqq |%
\:temp{\mathchar"3526} |% \varsubsetneqq |%
\:temp{\mathchar"3527} |% \varsupsetneqq |%
\:temp{\mathchar"3528} |% \subsetneq |%
\:temp{\mathchar"3529} |% \supsetneq |%
\:temp{\mathchar"352A} |% \nsubseteq |%
\:temp{\mathchar"352B} |% \nsupseteq |%
\:temp{\mathchar"352C} |% \nparallel |%
\:temp{\mathchar"352D} |% \nmid |%
\:temp{\mathchar"352E} |% \nshortmid |%
\:temp{\mathchar"352F} |% \nshortparallel |%
\:temp{\mathchar"3530} |% \nvdash |%
\:temp{\mathchar"3531} |% \nVdash |%
\:temp{\mathchar"3532} |% \nvDash |%
\:temp{\mathchar"3533} |% \nVDash |%
\:temp{\mathchar"3534} |% \ntrianglerighteq |%
\:temp{\mathchar"3535} |% \ntrianglelefteq |%
\:temp{\mathchar"3536} |% \ntriangleleft |%
\:temp{\mathchar"3537} |% \ntriangleright |%
\:temp{\mathchar"3538} |% \nleftarrow |%
\:temp{\mathchar"3539} |% \nrightarrow |%
\:temp{\mathchar"353A} |% \nLeftarrow |%
\:temp{\mathchar"353B} |% \nRightarrow |%
\:temp{\mathchar"353C} |% \nLeftrightarrow |%
\:temp{\mathchar"353D} |% \nleftrightarrow |%
\:temp{\mathchar"3568} |% \eqsim |%
\:temp{\mathchar"3570} |% \shortmid |%
\:temp{\mathchar"3571} |% \shortparallel |%
\:temp{\mathchar"3573} |% \thicksim |%
\:temp{\mathchar"3574} |% \thickapprox |%
\:temp{\mathchar"3575} |% \approxeq |%
\:temp{\mathchar"3576} |% \succapprox |%
\:temp{\mathchar"3577} |% \precapprox |%
\:temp{\mathchar"3578} |% \curvearrowleft |%
\:temp{\mathchar"3579} |% \curvearrowright |%
\:temp{\mathchar"357F} |% \backepsilon |%
>>>>


         




\<vanilla mathml\><<<
\Configure{align}
   {\EndP\HCode{<mtable\Hnewline class="align">}} 
   {\HCode{</mtable>}}
   {\HCode{<mtr>}}   {\HCode{</mtr>}}
   {\HCode{<mtd>}}   {\HCode{</mtd>}}
>>>





%%%%%%%%%%%%%%%%%%
\section{Right-to-Left Babel}
%%%%%%%%%%%%%%%%%%



\<rlbabel everypar\><<<
\expandafter\ifx \csname o@everypar\endcsname\relax \else
\expandafter\ifx \csname ht:everypar\endcsname\relax
  \let\ht:everypar\o@everypar
\fi\fi
>>>






\<dir ltr/rtl\><<<
dir="\if@rl rtl\else ltr\fi"
>>>


\<configure html-mml rlbabel\><<<
\Configure{moreL}
  {\ifmathml |<ltr rlbabel mtext|>%
   \else
      \ifvmode \let\end:moreRL=\empty
      \else\HCode{<span dir="ltr" >}%
        \def\end:moreRL{\HCode{</span>}}%
      \fi
   \fi
  }
  {\end:moreRL}
\Configure{moreR}
  {\ifmathml |<rtl rlbabel mtext|>%
   \else
      \ifvmode \let\end:moreRL=\empty 
      \else\HCode{<span dir="rtl" >}\def\end:moreRL{\HCode{</span>}}\fi
   \fi
  }
  {\end:moreRL}
\Css{.rtl {direction: rtl}  
     .ltr {direction: ltr} }
>>>



\<ltr rlbabel mtext\><<<
\ifmtext
    \leavevmode\special{t4ht@+</mtext><mtext{32}class="ltr">}x%
    \def\end:moreRL{\HCode{</mtext><mtext>}}%
\else
   \let\end:moreRL=\empty
\fi
>>>



\<rtl rlbabel mtext\><<<
\ifmtext
    \leavevmode\special{t4ht@+</mtext><mtext{32}class="rtl">}x%
    \def\end:moreRL{\HCode{</mtext><mtext>}}%
\else
    \let\end:moreRL=\empty
\fi
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{openmath}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  

\<itemitem 0.0\><<<
\Configure{itemitem}{}{}{\par\leavevmode}{}
>>>

  


Used to have also a \verb'\special{t4ht@[}...\special{t4ht@]}',
where the specials asked to igore the enclosed
content. It is provided for getting `realistic' measurements in mathml
applets. a candidadte for delition.









%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Shared}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<par del\><<<
!*?: >>>


\<tag of Tag\><<<
 cw:>>>



\<addr for Tag and Ref of Sec\><<<
\xdef\:cursec{|<section html addr|>}%
>>>


\<save catcodes\><<<
\expandafter\edef\csname :RestoreCatcodes\endcsname{%
   \expandafter\ifx \csname :RestoreCatcodes\endcsname\relax\else
      \csname :RestoreCatcodes\endcsname \fi
   \catcode`\noexpand :|=\the\catcode`:%
   \let\expandafter\noexpand\csname :RestoreCatcodes\endcsname|=
                                   \noexpand\UnDefcS}
\catcode`\:|=11 
>>>





%%%%%%%%%%%%%%%%%%
\section{fontmath}
%%%%%%%%%%%%%%%%%%




\<fontmath mathord symbols as ?\><<<
\mathchar"3230 |%\prime|%  
\mathchar"3231 |%\infty|%  
\mathchar"323B |%\emptyset|%  
\mathchar"323C |%\Re|%  
\mathchar"323D |%\Im|%  
\mathchar"3240 |%\aleph|%  
>>>

\<fontmath mathord symbols as op\><<<
\mathchar"3234 |%\triangle|%  
\mathchar"3238 |%\forall|%  
\mathchar"3239 |%\exists|%  
\mathchar"323A |%\neg|%  
\mathchar"323E |%\top|%  
\mathchar"323F |%\bot|%  
\mathchar"3272 |%\nabla|%  
\mathchar"3278 |%\mathsection|%  
\mathchar"327B |%\mathparagraph|%  
\mathchar"327C |%\clubsuit|%  
\mathchar"327D |%\diamondsuit|%  
\mathchar"327E |%\heartsuit|%  
\mathchar"327F |%\spadesuit|%  
>>>



\subsection{1: Large Operators}

\begin{verbatim}
\mathchardef\coprod="1360
\mathchardef\bigvee="1357
\mathchardef\bigwedge="1356
\mathchardef\biguplus="1355
\mathchardef\bigcap="1354
\mathchardef\bigcup="1353
\mathchardef\intop="1352 \def\int{\intop\nolimits}
\mathchardef\prod="1351
\mathchardef\sum="1350
\mathchardef\bigotimes="134E
\mathchardef\bigoplus="134C
\mathchardef\bigodot="134A
\mathchardef\ointop="1348 \def\oint{\ointop\nolimits}
\mathchardef\bigsqcup="1346
\mathchardef\smallint="1273
\end{verbatim}

\<plain,fontmath math classes\><<<
\Configure{MathClass}{1}{}{}{}{
   \mathchar"1360
   \mathchar"1357
   \mathchar"1356
   \mathchar"1355
   \mathchar"1354
   \mathchar"1353
   \mathchar"1352
   \mathchar"1351
   \mathchar"1350
   \mathchar"134E
   \mathchar"134C
   \mathchar"134A
   \mathchar"1348
   \mathchar"1346
   \mathchar"1273
   |<fontmath mathord symbols as op|>%
}
>>>

%    \mathchar"230          |%math prime|%

A prime is typically  placed on letters and digits.


\subsection{2: Binary Operations}

\begin{verbatim}
\mathchardef\triangleleft="212F
\mathchardef\triangleright="212E
\mathchardef\bigtriangleup="2234
\mathchardef\bigtriangledown="2235
\mathchardef\wedge="225E \let\land=\wedge
\mathchardef\vee="225F \let\lor=\vee
\mathchardef\cap="225C
\mathchardef\cup="225B
\mathchardef\ddagger="227A
\mathchardef\dagger="2279
\mathchardef\sqcap="2275
\mathchardef\sqcup="2274
\mathchardef\uplus="225D
\mathchardef\amalg="2271
\mathchardef\diamond="2205
\mathchardef\bullet="220F
\mathchardef\wr="226F
\mathchardef\div="2204
\mathchardef\odot="220C
\mathchardef\oslash="220B
\mathchardef\otimes="220A
\mathchardef\ominus="2209
\mathchardef\oplus="2208
\mathchardef\mp="2207
\mathchardef\pm="2206
\mathchardef\circ="220E
\mathchardef\bigcirc="220D
\mathchardef\setminus="226E % for set difference A\setminus B
\mathchardef\cdot="2201
\mathchardef\ast="2203
\mathchardef\times="2202
\mathchardef\star="213F
\mathcode`\*="2203 % \ast
\mathcode`\+="202B
\mathcode`\-="2200
\end{verbatim}

\<plain,fontmath math classes\><<<
\Configure{MathClass}{2}{}{}{}{
*-+/
\mathchar"212F
\mathchar"212E
\mathchar"2234
\mathchar"2235
\mathchar"225E 
\mathchar"225F 
\mathchar"225C
\mathchar"225B
\mathchar"227A
\mathchar"2279
\mathchar"2275
\mathchar"2274
\mathchar"225D
\mathchar"2271
\mathchar"2205
\mathchar"220F
\mathchar"226F
\mathchar"2204
\mathchar"220C
\mathchar"220B
\mathchar"220A
\mathchar"2209
\mathchar"2208
\mathchar"2207
\mathchar"2206
\mathchar"220E
\mathchar"220D
\mathchar"226E 
\mathchar"2201
\mathchar"2203
\mathchar"2202
\mathchar"213F
}
>>>


\subsection{3: Relational Operations}

The catcode is needed because 303A is \verb':'.

\<plain,fontmath math classes\><<<
\Configure{MathClass}{3}{}{}{}{
   \mathchar"3128
   \mathchar"3129
   \mathchar"312A
   \mathchar"312B
   \mathchar"315E
   \mathchar"315F
   \mathchar"3210
   \mathchar"3211
   \mathchar"3212
   \mathchar"3213
   \mathchar"3214
   \mathchar"3215
   \mathchar"3216
   \mathchar"3217
   \mathchar"3218
   \mathchar"3219
   \mathchar"321A
   \mathchar"321B
   \mathchar"321C
   \mathchar"321D
   \mathchar"321E
   \mathchar"321F
   \mathchar"3220
   \mathchar"3221
   \mathchar"3224
   \mathchar"3227
   \mathchar"3232
   \mathchar"3233
   \mathchar"3236
   \mathchar"3237
   \mathchar"323F
   :=><
   \mathchar"322F
   \mathchar"3276
   \mathchar"3277
   \mathchar"326B
   \mathchar"326A
   \mathchar"3261
   \mathchar"3260
   \mathchar"3225
   \mathchar"3226
   \mathchar"322D
   \mathchar"322E
   \mathchar"322C
   \mathchar"3228
   \mathchar"3229 
}
>>>

%    \mathchar"327C  |%clubsuit|%
%    \mathchar"327D  |%diamondsuit|%
%    \mathchar"327E  |%heartsuit|%
%    \mathchar"327F  |%spadesuit|%



%   \mathchar"340A % rightleftharpoons
%   \mathchar"340B % leftrightharpoons
%

\begin{verbatim}
\mathcode`\>="313E
\mathcode`\<="313C
\mathcode`\=="303D
\mathcode`\:="303A
\mathchardef\leq="3214 \let\le=\leq
\mathchardef\geq="3215 \let\ge=\geq
\mathchardef\succ="321F
\mathchardef\prec="321E
\mathchardef\approx="3219
\mathchardef\succeq="3217
\mathchardef\preceq="3216
\mathchardef\supset="321B
\mathchardef\set="321A
\mathchardef\supseteq="3213
\mathchardef\seteq="3212
\mathchardef\in="3232
\mathchardef\ni="3233 \let\owns=\ni
\mathchardef\gg="321D
\mathchardef\ll="321C
\mathchardef\not="3236
\mathchardef\leftrightarrow="3224
\mathchardef\leftarrow="3220 \let\gets=\leftarrow
\mathchardef\rightarrow="3221 \let\to=\rightarrow
\mathchardef\mapstochar="3237 \def\mapsto{\mapstochar\rightarrow}
\mathchardef\sim="3218
\mathchardef\simeq="3227
\mathchardef\perp="323F
\mathchardef\equiv="3211
\mathchardef\asymp="3210
\mathchardef\smile="315E
\mathchardef\frown="315F
\mathchardef\leftharpoonup="3128
\mathchardef\leftharpoondown="3129
\mathchardef\rightharpoonup="312A
\mathchardef\rightharpoondown="312B
\mathchardef\propto="322F
\mathchardef\sqsubseteq="3276
\mathchardef\sqsupseteq="3277
\mathchardef\parallel="326B
\mathchardef\mid="326A
\mathchardef\dashv="3261
\mathchardef\vdash="3260
\mathchardef\nearrow="3225
\mathchardef\searrow="3226
\mathchardef\nwarrow="322D
\mathchardef\swarrow="322E
\mathchardef\Leftrightarrow="322C
\mathchardef\Leftarrow="3228
\mathchardef\Rightarrow="3229
\end{verbatim}


\subsection{4/5: Delimiters}

\begin{verbatim}
\mathcode`\(="4028
\mathcode`\)="5029
\mathcode`\[="405B
\mathcode`\]="505D
\mathcode`\{="4266
\mathcode`\}="5267
\delcode`\(="028300
\delcode`\)="029301
\delcode`\[="05B302
\delcode`\]="05D303
\def\lmoustache{\delimiter"437A340 } % top from (, bottom from )
\def\rmoustache{\delimiter"537B341 } % top from ), bottom from (
\def\lgroup{\delimiter"462833A } % extensible ( with sharper tips
\def\rgroup{\delimiter"562933B } % extensible ) with sharper tips
\def\backslash{\delimiter"26E30F } % for double coset G\backslash H
\def\rangle{\delimiter"526930B }
\def\langle{\delimiter"426830A }
\def\rbrace{\delimiter"5267309 } \let\}=\rbrace
\def\lbrace{\delimiter"4266308 } \let\{=\lbrace
\def\rceil{\delimiter"5265307 }
\def\lceil{\delimiter"4264306 }
\def\rfloor{\delimiter"5263305 }
\def\lfloor{\delimiter"4262304 }
\def\arrowvert{\delimiter"26A33C } % arrow without arrowheads
\def\Arrowvert{\delimiter"26B33D } % double arrow without arrowheads
\def\bracevert{\delimiter"77C33E } % the vertical bar that extends braces
\def\Vert{\delimiter"26B30D } \let\|=\Vert         How should these be treated?
\def\vert{\delimiter"26A30C }                       "   "       "    "   "
\def\uparrow{\delimiter"3222378 }
\def\downarrow{\delimiter"3223379 }
\def\updownarrow{\delimiter"326C33F }
\def\Uparrow{\delimiter"322A37E }
\def\Downarrow{\delimiter"322B37F }
\def\Updownarrow{\delimiter"326D377 }
\end{verbatim}

The comamnds \verb'\Configure{MathClass}{4}...'
and \verb'\Configure{MathClass}{5}...'
are for unmatched delimiters, and the comamnd
\verb'\Configure{MathDelimiters}{(}{)}' is for matched ones.


\<plain,fontmath math classes\><<<
\Configure{MathClass}{4}{}{}{}{}
\Configure{MathDelimiters}{(}{)}
\Configure{MathDelimiters}{[}{]}
\Configure{MathDelimiters}{\mathchar"4262}{\mathchar"5263}
\Configure{MathDelimiters}{\mathchar"4264}{\mathchar"5265}
\Configure{MathDelimiters}{\mathchar"4266}{\mathchar"5267}
\Configure{MathDelimiters}{\mathchar"4268}{\mathchar"5269}
\Configure{MathDelimiters}{\mathchar"4300}{\mathchar"5301}
\Configure{MathDelimiters}{\mathchar"4302}{\mathchar"5303}
\Configure{MathDelimiters}{\mathchar"4304}{\mathchar"5305}
\Configure{MathDelimiters}{\mathchar"4306}{\mathchar"5307}
\Configure{MathDelimiters}{\mathchar"4308}{\mathchar"5309} 
\Configure{MathDelimiters}{\mathchar"430A}{\mathchar"530B}
>>>

\begin{verbatim}
\mathcode`\?="503F
\end{verbatim}


\subsection{6: Punctuation Marks}

\begin{verbatim}
\mathcode`\;="603B
\mathcode`\,="613B
\end{verbatim}

\<plain,fontmath math classes\><<<
\Configure{MathClass}{6}{}{}{}{
\mathchar"613A % ldot
\mathchar"6201 % cdot
\mathchar"603A % colon
?; ,
}
>>>


\subsection{Questions}

\begin{verbatim}


\delcode`\<="26830A
\delcode`\>="26930B
\delcode`\|="26A30C
\delcode`\\="26E30F

% N.B. { and } should NOT get delcodes; otherwise parameter grouping fails!

\def\mathhexbox#1#2#3{\leavevmode
  \hbox{$\m@th \mathchar"#1#2#3$}}
\def\dag{\mathhexbox279}
\def\ddag{\mathhexbox27A}
\def\S{\mathhexbox278}
\def\P{\mathhexbox27B}
\end{verbatim}


\subsection{Type 4: Math Open}


latex.ltx, fontmath.ltx, plain.tex



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Packages}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%
\section{Small Ones}
%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%
\subsubsection{Bm}
%%%%%%%%%%%%%


\<configure mathml bm\><<<
\Configure{bm}
  {\ifmmode \ifmtext \else
     \Tg<mstyle mathvariant="bold">%
     \expandafter\expandafter\expandafter\:gobble
   \fi\fi}
  {\ifmmode \ifmtext \else \Tg</mstyle>\fi\fi}
>>>


The bm commands produces bold printing by overprinting the characters
with small  shifting.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Notes}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{To Do}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{itemize}
  
\item Filter output through SAX/DOM/SAX to allow, e.g., dealing
  globaly with empty elements to accomodate w3 browser. That is,
  xtpipes fed into xtpipes.

\item Fix mathml config for


\begin{itemize}
\item

\verb+$\mathop{\overline{x}} \limits_{a=3}^{b=4}$+
\item Parametric commands as Superscripts or Subscripts:
    \verb+$E^\frac{1}{2}$+  (instead of \verb+$E^{\frac{1}{2}}$+).


\item

\begin{verbatim}
\def\varinjlim{\mathop{\underrightarrow\lim}\displaylimits}
\def\varprojlim{\mathop{\underleftarrow\lim}\displaylimits}

$$\varprojlim_{p}$$
\end{verbatim}


\end{itemize}


\item
 Numbering is not right justified:

\begin{verbatim}
\documentclass{amsart}
 \begin{document}
 
 \begin{eqnarray} 
 A &=& B + C 
 \end{eqnarray} 
 
 \begin{align} 
 A &= B + C \qquad & N &= G + F 
 \end{align} 
 
 \begin{alignat}{2} 
 A &= B + C \qquad \qquad & N & = G + F 
 \end{alignat} 

\begin{gather}
A = B + C \tag{my equation} \\
B = \text{variable unknown} \notag \\
Y = \max X + \log 10
\end{gather}

\end{document}
\end{verbatim}


\item
\begin{verbatim}
\begin{align}
e &= a + b \\
\intertext{this should be located on the left browser hand margin}
a &= u
\end{align}

\end{verbatim}

\end{itemize}



\endinput



































%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{The Calling Tree for 4ht Files}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\<config tex4ht\><<<
\if:latex  |<Hinclude latex|>
\else      |<Hinclude plain|>  \fi
>>>

\<0,32,4 plain\><<<
|<Hinclude plain lib|>
|<Hinclude plain + latex lib|>
>>>

\<0,32,4 latex\><<<
|<Hinclude latex lib|>
|<Hinclude plain + latex lib|>
>>>





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Front part}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%
\section{HTML}
%%%%%%%%%%%%%%%%

\<tex4ht HTML\><<<
\ifx \a:HTML\:UnDef
   \Configure{HTML}
     {\IgnorePar\HCode{<html \a:@HTML
       \:xhtml{|<xmlns|>\Hnewline}>\Hnewline}}
     {\ifvmode\IgnorePar\fi\HCode{</html>\Hnewline}}
\fi
\ifx \a:HEAD\:UnDef
   \Configure{HEAD}
      {\IgnorePar\NoFonts\HCode {<head>}}
      {\HCode{</head>}\EndNoFonts}
\fi
\ifx \a:BODY\:UnDef
   \:CheckOption{frames} \if:Option
      |<frames BODY|>
   \else 
      \Log:Note{for content and toc
           in 2 frames, use the command line option `frames'}
      \Log:Note{for content, toc, and footnotes
           in 3 frames, use the command line option `frames-fn'}
      |<no frame BODY|>
\fi\fi
\ifx \a:TITLE\:UnDef
   \Configure{TITLE}{\Protect\IgnorePar
      \HCode{<title>}}{\HCode{</title>\Hnewline}}
\fi
\ifx \a:@HEAD\relax \let\a:@HEAD=\empty\fi
\ifx \a:@HEAD\empty
   |<meta tags|>
   \:CheckOption{css-in} \if:Option
      \Log:Note{the inline CSS code is extracted from the input of the
          previous compilation, so an extra compilation might be needed}
      \Configure{@HEAD}{|<css inline|>}
   \else
      \Log:Note{for inline CSS code, use the command line option `css-in'}
      \Configure{@HEAD}{\HCode{<link
         rel="stylesheet" type="text/css"
         href="\aa:CssFile"\xml:empty>\Hnewline}}
   \fi
   |<HEAD charset|>
\fi
\:CheckOption{mouseover} \if:Option
  |<onmouseover @HEAD|>
\else 
  \Log:Note{for pop ups on mouse over, 
          use the command line option `mouseover'}
\fi
>>>

\<css inline\><<<
\openin15=\jobname .css 
\ifeof15 \else  \:warning{Missing file: \jobname .css }%
\bgroup 
   \catcode`\{=12  \catcode`\}=12  \catcode`\%=12  \catcode`\#=12 
   \HCode{\Hnewline<style type="text/css">\Hnewline <!-- \Hnewline}% 
   \loop  
      \read15 to \:temp    
      \def\:tempa{\par}\ifx \:temp\:tempa \let\:temp\empty \fi
   \ifeof15\else  
      \expandafter\tmp:toks\expandafter{\:temp}% 
      \HCode{\the\tmp:toks \Hnewline}% 
   \repeat 
   \HCode{\Hnewline-->\Hnewline</style>\Hnewline}% 
\egroup 
\fi 
\closein15 
>>>



\<HEAD charset\><<<
\:CheckOption{uni-emacspeak} \if:Option
   \def\A:charset{charset=utf-8}
\else
   \def\A:charset{charset=iso-8859-1}
\fi
>>>

\verb'\a:charset' can come from a private configuration file, and from
a poackage option. It takes precedence over \verb'\A:charset'.



%%%%%%%%%%%%%%%%
\section{XML Version}
%%%%%%%%%%%%%%%%

\<xhtml dtd xml-version\><<<
|<xml encoding utility|>
\Configure{VERSION}
    {\HCode{<?xml version="1.0" |<xml encoding|> ?>\Hnewline}}          
>>>

%%%%%%%%%%%%%%%%
\section{DOCTYPE}
%%%%%%%%%%%%%%%%

\<tex4ht doctype\><<<
\ifx \a:DOCTYPE\relax
   \:CheckOption{frames}  \if:Option
      |<frames dtd|>
   \else
      |<no frames xhtml DOCTYPE|>
      |<no frames DOCTYPE|>
   \fi
\fi
>>>


\<no frames xhtml DOCTYPE\><<<
\:CheckOption{xhtml}  \if:Option   
   \NewConfigure{@DOCTYPE}[1]{\def\:temp{#1}%
      \ifx \:temp\empty  \let\a:@DOCTYPE|=\empty
      \else \ifx \a:@DOCTYPE\relax  \let\a:@DOCTYPE|=\empty\fi
        \pend:def\a:@DOCTYPE{#1}\fi}
   \let\a:@DOCTYPE|=\relax
\fi
>>>

\<configure html-speech Preamble\><<<  
\Configure{PROLOG}{VERSION,DOCTYPE,*XML-STYLESHEET}
\:CheckOption{mouseover} \if:Option
   |<DOCTYPE in PROLOG under mouseover|>
\fi
\:CheckOption{no-DOCTYPE} \if:Option
   \Configure{PROLOG}{VERSION,*XML-STYLESHEET}
\else
  \Log:Note{to remove the DOCTYPE declaration
          use the command line option `no-DOCTYPE'}   
\fi
>>>



   
\<no frames DOCTYPE\><<<
\:CheckOption{xhtml}  \if:Option
   |<xhtml dtd|>%
   \def\:DTD{xhtml}
\else
   |<html dtd|>%
\fi
>>>



Don't place the full address
 \''http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd' 
within DOCTYPE. It can stop tools like xt when the serves doen't respond


\<xhtml dtd\><<<
|<xhtml dtd xml-version|>%
\Configure{DOCTYPE}
  {\HCode{<!DOCTYPE html \xhtml:DOCTYPE>            \Hnewline
          <!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->
          \Hnewline}}
\def\xhtml:DOCTYPE{PUBLIC
     "-//W3C//DTD XHTML 1.0 Transitional//|<dtd lang|>"\Hnewline
    \space\space "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"}
>>>


\<dtd lang\><<<
\expandafter
\ifx \csname a:dtd-lang\endcsname\relax EN\else
  \csname a:dtd-lang\endcsname
\fi
>>>


\<xhtml dtd\><<<
\Configure{@DOCTYPE}
  {<!ENTITY \% xhtml.dtd \xhtml:DOCTYPE>\Hnewline\%xhtml.dtd; \Hnewline}
>>>

\<html dtd\><<<
\Configure{DOCTYPE}{\IgnorePar\HCode
   {<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//|<dtd lang|>"
    \Hnewline\space\space "http://www.w3.org/TR/emacspeak/loose.dtd">
    \Hnewline}}
>>>


 
\<frames dtd\><<<
\:CheckOption{xhtml} \if:Option  
   \Configure{DOCTYPE}
   {\HCode{<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//|<dtd lang|>"
    \Hnewline "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">\Hnewline}}
\else
   \Configure{DOCTYPE}
   {\HCode{<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Frameset//|<dtd lang|>"
    \Hnewline "http://www.w3.org/TR/emacspeak/frameset.dtd">\Hnewline}}
\fi
>>>






Xerces reqires the following encoding.

\<tex4ht doctype\><<<
\def\:encoding#1={}
>>>

\<xml encoding\><<<
encoding="\expandafter\ifx \csname a:charset\endcsname\relax
         \expandafter\:encoding\A:charset
   \else \expandafter\:encoding\a:charset\fi"
>>>

%%%%%%%%%%%%%%%%
\section{BODY}
%%%%%%%%%%%%%%%%

\<no frame BODY\><<<
\:CheckOption{mouseover} \if:Option
   \Configure{BODY}
      {\:xhtml{\SaveEndP}\IgnorePar\HCode{<body\Hnewline 
         \csname a:!BODY\endcsname >}|<overDiv|>\ShowPar\par}
      {\IgnorePar\:xhtml{\EndP}\HCode{\Hnewline
        </body>}\:xhtml{\RecallEndP}}%
\else
   \Configure{BODY}
      {\:xhtml{\SaveEndP}\IgnorePar\HCode{<body\Hnewline 
         \csname a:!BODY\endcsname >}\ShowPar\par }
      {\IgnorePar\:xhtml{\EndP}\HCode{\Hnewline
        </body>}\:xhtml{\RecallEndP}}%
\fi
>>>

\<frames BODY\><<<
\def\Frame:Name{menu}
|<no frames xhtml DOCTYPE|>%
\Configure{BODY}
   {%
    \a:frames    \NoFrames    \PushStack\BODY:stack{}
    |<sub frames BODY|>%
    |<no frames DOCTYPE|>%
    \HPage[tex4ht-p1]{table of contents}%
       \Link{}{|<tex4ht-toc|>}\EndLink 
       \bgroup
         \Configure{Link}{a}{target="|<tex4ht-main|>"  href=}{ name=}{}
         \b:frames
       \egroup   
       \def\Frame:Name{main}
    \EndHPage{tex4ht-p1} \Tg<br />
    \HPage[tex4ht-p2]{text}\Link{}{|<tex4ht-body|>}\EndLink
    }
  {\EndHPage{tex4ht-p2}}
\NewConfigure{frames}{2}
\Css{body\#|<tex4ht-menu|> {white-space: nowrap; }}
>>>


\<sub frames BODY\><<<
\:CheckOption{mouseover} \if:Option
   \Configure{BODY}
      {\PushStack\BODY:stack{x}%
       \:xhtml{\SaveEndP}\IgnorePar\HCode{<body\Hnewline
       \ifx\Frame:Name\empty\else id="tex4ht-\Frame:Name"\fi
       \csname a:!BODY\endcsname 
         >}|<overDiv|>\ShowPar\par \let\Frame:Name=\empty}
      {\IgnorePar\:xhtml{\EndP}\PopStack\BODY:stack\:temp
        \ifx \:temp\empty \EndFrames \else
                              \HCode{\Hnewline </body>}\fi
        \:xhtml{\RecallEndP}}%
\else
   \Configure{BODY}
      {\PushStack\BODY:stack{x}%
       \:xhtml{\SaveEndP}\IgnorePar\HCode{<body\Hnewline
       \ifx\Frame:Name\empty\else id="tex4ht-\Frame:Name"\fi
       \csname a:!BODY\endcsname >}\ShowPar\par \let\Frame:Name\empty}
      {\IgnorePar\:xhtml{\EndP}\PopStack\BODY:stack\:temp
        \ifx \:temp\empty \EndFrames
                        \else \HCode{\Hnewline </body>}\fi
        \:xhtml{\RecallEndP}}%
\fi
>>>     



\<tex4ht-main\><<<
tex4ht-main>>>


\<tex4ht-fn\><<<
tex4ht-fn>>>

\<tex4ht-menu\><<<
tex4ht-menu>>>


%%%%%%%%%%%%%%%%
\section{Meta}
%%%%%%%%%%%%%%%%


\<meta tags\><<<
\:CheckOption{xht} \if:Option  
   \:CheckOption{xhtml}\if:Option \else \:CheckOption{xml}\fi   
\fi
\if:Option |<xht extension file name|> 
\else      |<html extension file name|>\fi
\def\:gobbleM#1->{} 
|<meta generator / originator|>
\immediate\write-1{TeX4ht package options:
    \expandafter\:gobbleM\meaning\Preamble}
\Configure{@HEAD}
   {\HCode{<meta name="src" content="\jobname.tex"\xml:empty>\Hnewline}} 
\Configure{@HEAD}
   {\HCode{<meta name="date" content="\:today"\xml:empty>\Hnewline}} 
>>>


\<xht extension file name\><<<
\Configure{@HEAD}{\HCode{<meta  
   http-equiv="Content-Type" content="application/xhtml+xml;
   \expandafter\ifx \csname a:charset\endcsname\relax\A:charset
   \else \a:charset\fi"\xml:empty>\Hnewline}}
\Configure{html}{xht}
>>>

\<html extension file name\><<<
\Log:Note{for file extension name xht, use the command line option `xht'}%
\Configure{@HEAD}{\HCode{<meta  
   http-equiv="Content-Type" content="text/html;
   \expandafter\ifx \csname a:charset\endcsname\relax\A:charset
   \else \a:charset\fi"\xml:empty>\Hnewline}}
>>>


\verb'\Hnewline' is needed at end of file to avoid loosing the
last line under some applications.





Tex4ht pages  published through FrontPage loose the generator metas,
but not the originator-metas.




\<meta generator / originator\><<<
\Configure{@HEAD}{\HCode{<meta  
    name="generator" content="TeX4ht
      (http://www.cse.ohio-state.edu/\string
       ~gurari/TeX4ht/)"\xml:empty>\Hnewline}}
\Configure{@HEAD}{\HCode{<meta  
    name="originator" content="TeX4ht
      (http://www.cse.ohio-state.edu/\string
       ~gurari/TeX4ht/)"\xml:empty>\Hnewline
       <!--\space\expandafter\:gobbleM\meaning
               \Preamble\space-->\Hnewline}}
>>>



%%%%%%%%%%%%%%%%
\section{Frames}
%%%%%%%%%%%%%%%%

\<tex4ht-toc\><<<
tex4ht-toc>>>

\<tex4ht-body\><<<
tex4ht-body>>>

\<4 latex\><<<
\:CheckOption{frames}  \if:Option
   \:CheckOption{frames-fn}  \if:Option
      \Configure{frames}
         {\HorFrames[rows="*"]{*,3*}
            \VerFrames[cols="*"]{3*,*}
               \Frame[ name="|<tex4ht-menu|>"
                       frameborder="0" ]{|<tex4ht-toc|>}
               \Frame[ name="|<tex4ht-fn|>" 
                       frameborder="0" ]{}
            \EndFrames
            \Frame[ name="|<tex4ht-main|>"
                    frameborder="0" ]{|<tex4ht-body|>}}
         {\let\contentsname=\empty \tableofcontents}
   \else
      \Configure{frames}
         {\HorFrames[rows="*"]{*,3*}
            \Frame[ name="|<tex4ht-menu|>"
                    frameborder="0" ]{|<tex4ht-toc|>}
            \Frame[ name="|<tex4ht-main|>"
                    frameborder="0" ]{|<tex4ht-body|>}}
         {\let\contentsname=\empty  \tableofcontents}
   \fi 
\fi
>>>

% frameborder="no" 
% border="0"
% framespacing="0"


\<configure html-speech Preamble\><<<
\:CheckOption{frames-fn}  \if:Option
   \edef\Preamble{\Preamble,frames}
\fi
>>>



\<beamer ver frames\><<<
\Configure{frames}
   {\VerFrames[ cols="*"]{4*,*}
      \Frame[ name="|<tex4ht-main|>"
              frameborder="1" ]{|<tex4ht-body|>}
      \Frame[ name="|<tex4ht-menu|>"
              frameborder="1" ]{|<tex4ht-toc|>}}
   {\beamer:bookmarks \tableofcontents}
>>>

\<beamer hor frames\><<<
\Configure{frames}
   {\HorFrames[ rows="*"]{*,3*}
      \Frame[ name="|<tex4ht-menu|>"
              frameborder="1" ]{|<tex4ht-toc|>}
      \Frame[ name="|<tex4ht-main|>"
              frameborder="1" ]{|<tex4ht-body|>}}
   {\beamer:bookmarks \tableofcontents}
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Structures}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Sectioning}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Sub Sections}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\<shared h4 subsection\><<<

|<subsection TITLE+|>
\Configure{subsection}{}{}
   {\ifvmode \IgnorePar\fi
    \EndP\bgroup \IgnorePar\HCode{<h4 class="subsectionHead"\a:LRdir>}%
    \TitleMark\space \HtmlParOff}
   {\HCode{</h4>}\HtmlParOn \IgnoreIndent\egroup\par\ShowPar}
\Configure{likesubsection}{}{}{\EndP\bgroup
   \ifvmode \IgnorePar\fi
   \HCode{<h4 class="likesubsectionHead"\a:LRdir>}\HtmlParOff }
  {\HCode{</h4>}\HtmlParOn \IgnoreIndent\egroup\par\ShowPar}
\Configure{likesubsectionTITLE+}{#1}
>>>


\<configure html-speech emulateapj\><<<
\ConfigureMark{subsection}
   {\ifnum \c:secnumdepth>\c@secnumdepth  \expandafter\:gobble
    \else 
       \HCode{<span class="titlemark">}\@seccntformat{section}%
       \thesubsection\HCode{</span>}\fi}
\Configure{subsection}{}{}
   {\EndP\bgroup \IgnorePar\HCode{<h4 class="subsectionHead"\a:LRdir>}%
    \TitleMark{. \space}}
   {\HCode{</h4>}\IgnoreIndent\egroup}
>>>




\<pre 2005 titlesec\><<<
\ConfigureMark{subsection}
   {\ifnum \c:secnumdepth>\c@secnumdepth  \expandafter\:gobble \else
    \csname thetitlesubsection\endcsname\fi}
\Configure{subsection}{}{}
   {\EndP\bgroup \IgnorePar\HCode{<h4 class="subsectionHead"\a:LRdir>}%
    \TitleMark\space}
   {\HCode{</h4>}\IgnoreIndent\egroup\par}
\Configure{likesubsection}{}{}
   {\EndP\bgroup \IgnorePar\HCode{<h4 class="likesubsectionHead"\a:LRdir>}}
   {\HCode{</h4>}\IgnoreIndent\egroup\par}
>>>


\<mwcls divs\><<<
\ConfigureMark{subsection}
   {\ifHeadingNumbered \HCode{<span class="titlemark">}\mw@seccntformat
    \HeadingNumber \HCode{</span>}\fi}
\Configure{subsection}{}{}
   {\NoFonts \ifvmode \IgnorePar\fi
    \EndP\bgroup \IgnorePar\HCode{<h4 class="subsectionHead"\a:LRdir>}%
    \TitleMark \HtmlParOff}
   {\HCode{</h4>}\HtmlParOn \EndNoFonts \IgnoreIndent\egroup\par}
\Configure{subsectionTITLE+}{\thesubsection \space#1}
>>>

\<mwcls divs\><<<
\Configure{likesubsection}{}{}{\EndP\bgroup
   \ifvmode \IgnorePar\fi
   \HCode{<h4 class="likesubsectionHead"\a:LRdir>}\HtmlParOff }
  {\HCode{</h4>}\HtmlParOn \IgnoreIndent\egroup\par}
\Configure{likesubsectionTITLE+}{#1}
>>>


\<ams art,proc,book div\><<<
\ConfigureMark{subsection}
   {\ifnum \c:secnumdepth>\c@secnumdepth  \expandafter\:gobble
    \else 
       \HCode{<span class="titlemark">}%
          \@ifundefined{subsectionname}{}{%
          \ignorespaces\subsectionname\space}%
          \@seccntformat{subsection}%
       \HCode{</span>}\fi }
|<subsection TITLE+|>
>>>

  
\<ams proc,book\><<<
\Configure{subsection}{}{}
   {\ifvmode \IgnorePar\fi
    \EndP\bgroup \IgnorePar\HCode{<h4 class="subsectionHead"\a:LRdir>}%
    \TitleMark\space \HtmlParOff}
   {\HCode{</h4>}\HtmlParOn \IgnoreIndent\egroup\par}
>>>

\<ams art\><<<
\Configure{subsection}{}{}
  {\ShowPar\noindent
   \HCode{<span class="subsectionHead"\a:LRdir>}\begingroup\bf
   \TitleMark\space}
  {.\endgroup\HCode{</span>}\IgnorePar\par}
>>>

 

\<scr report,book\><<<
\ConfigureMark{subsection}
   {\ifnum \c:secnumdepth>\c@secnumdepth  \expandafter\:gobble
    \else
       \HCode{<span class="titlemark">}\thesubsection
       \HCode{</span>}\fi }
|<subsection TITLE+|>
\Configure{subsection}{}{}
   {\ifvmode \IgnorePar\fi
    \EndP\bgroup \IgnorePar\HCode{<h4 class="subsectionHead"\a:LRdir>}%
    \TitleMark.~~\HtmlParOff}
   {\HCode{</h4>}\HtmlParOn \IgnoreIndent\egroup\par}
\Configure{likesubsection}{}{}{\EndP\bgroup
   \ifvmode \IgnorePar\fi
   \HCode{<h4 class="likesubsectionHead"\a:LRdir>}\HtmlParOff }
  {\HCode{</h4>}\HtmlParOn \IgnoreIndent\egroup\par}
\Configure{likesubsectionTITLE+}{#1}
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Sub Sub Sections}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<ams art,proc,book div\><<<
\ConfigureMark{subsubsection}
   {\ifnum \c:secnumdepth>\c@secnumdepth  \expandafter\:gobble
    \else 
       \HCode{<span class="titlemark">}%
          \@ifundefined{subsubsectionname}{}{%
          \ignorespaces\subsubsectionname\space}%
          \@seccntformat{subsubsection}%
       \HCode{</span>}\fi}
|<subsubsection TITLE+|>
>>>


\<ams proc,book\><<<
\Configure{subsubsection}{}{}
   {\ifvmode \IgnorePar \fi  \EndP
    \bgroup \IgnorePar\HCode{<h5 class="subsubsectionHead"\a:LRdir>}%
    \TitleMark\space \HtmlParOff}
   {\HCode{</h5>}\HtmlParOn \IgnoreIndent\egroup\par\ShowPar}
>>>

\<ams art\><<<
\Configure{subsubsection}{}{}
  {\ShowPar\noindent
   \HCode{<span class="subsubsectionHead"\a:LRdir>}\begingroup\it
   \TitleMark\space}
  {.\endgroup\HCode{</span>}\IgnorePar}
>>>


\<shared h5 subsubsection\><<<
\ConfigureMark{subsubsection}
   {\ifnum \c:secnumdepth>\c@secnumdepth  \expandafter\:gobble
    \else
       \HCode{<span class="titlemark">}\@seccntformat{subsubsection}%
       \HCode{</span>}\fi}
|<subsubsection TITLE+|>
\Configure{subsubsection}{}{}
   {\ifvmode \IgnorePar \fi  \EndP
    \bgroup \IgnorePar\HCode{<h5 class="subsubsectionHead"\a:LRdir>}%
    \TitleMark\space \HtmlParOff}
   {\HCode{</h5>}\HtmlParOn \IgnoreIndent\egroup\par\ShowPar}
\Configure{likesubsubsection}{}{}
   {\ifvmode \IgnorePar\fi \EndP\bgroup\IgnorePar
    \HCode{<h5 class="likesubsubsectionHead"\a:LRdir>}\HtmlParOff}
   {\HCode{</h5>}\HtmlParOn \IgnoreIndent\egroup\par\ShowPar}
>>>



\<mwcls divs\><<<
\ConfigureMark{subsubsection}
   {\ifHeadingNumbered \HCode{<span class="titlemark">}\mw@seccntformat
    \HeadingNumber \HCode{</span>}\fi}
\Configure{subsubsection}{}{}
   {\NoFonts \ifvmode \IgnorePar \fi  \EndP
    \bgroup \IgnorePar\HCode{<h5 class="subsubsectionHead"\a:LRdir>}%
    \TitleMark \HtmlParOff}
   {\HCode{</h5>}\HtmlParOn \EndNoFonts \IgnoreIndent\egroup
    \par\ShowPar}
\Configure{subsubsectionTITLE+}{\thesubsubsection \space#1}
>>>



\<mwcls divs\><<<
\Configure{likesubsubsection}{}{}
   {\ifvmode \IgnorePar\fi \EndP\bgroup\IgnorePar
    \HCode{<h5 class="likesubsubsectionHead"\a:LRdir>}\HtmlParOff}
   {\HCode{</h5>}\HtmlParOn \IgnoreIndent\egroup \par\ShowPar}
>>>




\<pre 2005 titlesec\><<<
\ConfigureMark{subsubsection}
   {\ifnum \c:secnumdepth>\c@secnumdepth   \expandafter\:gobble \else
    \csname thetitlesubsubsection\endcsname\fi}
\Configure{subsubsection}{}{}
   {\EndP\bgroup \IgnorePar\HCode{<h5 class="subsubsectionHead"\a:LRdir>}%
    \TitleMark\space}
   {\HCode{</h5>}\IgnoreIndent\egroup \par\ShowPar}
\Configure{likesubsubsection}{}{}
   {\EndP\bgroup \IgnorePar\HCode{<h5 class="likesubsubsectionHead"\a:LRdir>}%
    \TitleMark\space}
   {\HCode{</h5>}\IgnoreIndent\egroup \par\ShowPar}
>>>



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Sectioning Pagination}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{article,report,book}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<article,report,book options 1, 2, 3\><<<
|<html latex tocs|> |%should appear before TocAt|%
|<cut and toc at for options 1, 2, 3|>
>>>





\<cut and toc at for options 1, 2, 3\><<<
\:CheckOption{7}     \if:Option
    \expandafter\ifx \csname @chapter\endcsname\relax
         |<cut toc: part|>      |%cut toc before cutat|%
         |<cutat: part|>
         |<cut toc: sec|>       
         |<cutat: sec|>    
         |<cut toc: subsec|>  
         |<cutat: subsection|>
         |<cut toc: subsubsec|>  
         |<cutat: subsubsection|>
         |<cut toc: paragraph|>  
         |<cutat: paragraph|>
         |<cut toc: subparagraph|>  
         |<cutat: subparagraph|>
         |<tocat: part, no chapter|>
         |<tocat: section|>
         |<tocat: subsection|>
         |<tocat: subsubsection|>
         |<tocat: paragraph|>
    \else
         |<cut toc: part|>      |%cut toc before cutat|%
         |<cutat: part|>
         |<cut toc: ch|>
         |<cutat: chapter|>
         |<cut toc: sec|>
         |<cutat: sec|>
         |<cut toc: subsec|>
         |<cutat: subsection|>
         |<cut toc: subsubsec|>  
         |<cutat: subsubsection|>
         |<cut toc: paragraph|>  
         |<cutat: paragraph|>
         |<cut toc: subparagraph|>  
         |<cutat: subparagraph|>
         |<tocat: part|>     
         |<tocat: ch|>        
         |<tocat: section|>   
         |<tocat: subsection|>
         |<tocat: subsubsection|>
         |<tocat: paragraph|>
    \fi
\else\:CheckOption{6}     \if:Option
    \expandafter\ifx \csname @chapter\endcsname\relax
         |<cut toc: part|>      |%cut toc before cutat|%
         |<cutat: part|>
         |<cut toc: sec|>       
         |<cutat: sec|>    
         |<cut toc: subsec|>  
         |<cutat: subsection|>
         |<cut toc: subsubsec|>  
         |<cutat: subsubsection|>
         |<cut toc: paragraph|>  
         |<cutat: paragraph|>
         |<tocat: part, no chapter|>
         |<tocat: section|>
         |<tocat: subsection|>
         |<tocat: subsubsection|>
    \else
         |<cut toc: part|>      |%cut toc before cutat|%
         |<cutat: part|>
         |<cut toc: ch|>
         |<cutat: chapter|>
         |<cut toc: sec|>
         |<cutat: sec|>
         |<cut toc: subsec|>
         |<cutat: subsection|>
         |<cut toc: subsubsec|>  
         |<cutat: subsubsection|>
         |<cut toc: paragraph|>  
         |<cutat: paragraph|>
         |<tocat: part|>     
         |<tocat: ch|>        
         |<tocat: section|>   
         |<tocat: subsection|>
         |<tocat: subsubsection|>
    \fi
\else \:CheckOption{5}     \if:Option
    \expandafter\ifx \csname @chapter\endcsname\relax
         |<cut toc: part|>      |%cut toc before cutat|%
         |<cutat: part|>
         |<cut toc: sec|>       
         |<cutat: sec|>    
         |<cut toc: subsec|>  
         |<cutat: subsection|>
         |<cut toc: subsubsec|>  
         |<cutat: subsubsection|>
         |<tocat: part, no chapter|>
         |<tocat: section|>
         |<tocat: subsection|>
    \else
         |<cut toc: part|>      |%cut toc before cutat|%
         |<cutat: part|>
         |<cut toc: ch|>
         |<cutat: chapter|>
         |<cut toc: sec|>
         |<cutat: sec|>
         |<cut toc: subsec|>
         |<cutat: subsection|>
         |<cut toc: subsubsec|>  
         |<cutat: subsubsection|>
         |<tocat: part|>     
         |<tocat: ch|>        
         |<tocat: section|>   
         |<tocat: subsection|>   
    \fi
\else\:CheckOption{4}     \if:Option
    \expandafter\ifx \csname @chapter\endcsname\relax
         |<cut toc: part|>      |%cut toc before cutat|%
         |<cutat: part|>
         |<cut toc: sec|>       
         |<cutat: sec|>    
         |<cut toc: subsec|>  
         |<cutat: subsection|>
         |<tocat: part, no chapter|>
         |<tocat: section|>
    \else
         |<cut toc: part|>      |%cut toc before cutat|%
         |<cutat: part|>
         |<cut toc: ch|>
         |<cutat: chapter|>
         |<cut toc: sec|>
         |<cutat: sec|>
         |<cut toc: subsec|>
         |<cutat: subsection|>
         |<tocat: part|>     
         |<tocat: ch|>        
         |<tocat: section|>   
    \fi
\else\:CheckOption{3}     \if:Option
    \expandafter\ifx \csname @chapter\endcsname\relax
         |<cut toc: part|>      |%cut toc before cutat|%
         |<cutat: part|>
         |<cut toc: sec|>
         |<cut toc: subsec|>
         |<cutat: subsection|>
         |<tocat: part, no chapter|>     
         |<tocat: section|>   
         |<cutat: sec|>
    \else
         |<cut toc: part|>      |%cut toc before cutat|%
         |<cutat: part|>
         |<cut toc: ch|>
         |<cutat: chapter|>
         |<cut toc: sec|>
         |<cutat: sec|>
         |<tocat: part|>      
         |<tocat: ch|>     
    \fi
\else\:CheckOption{2}     \if:Option
    \expandafter\ifx \csname @chapter\endcsname\relax 
         |<cut toc: part|>      |%cut toc before cutat|%
         |<cutat: part|>
         |<cut toc: sec|>
         |<cutat: sec|> 
         |<tocat: part, no chapter|>    
    \else
         |<cut toc: part|>      |%cut toc before cutat|%
         |<cutat: part|>
         |<cut toc: ch|>
         |<cutat: chapter|>
         |<tocat: part|>     
    \fi
\else\:CheckOption{1}     \if:Option
         |<cut toc: part|>      |%cut toc before cutat|%
         |<cutat: part|>                         
\else
    \Log:Note{for automatic sectioning 
        pagination, use the command line option 
                     `1', `2', `3', '4', '5', '6', or '7'}%
\fi \fi \fi \fi \fi \fi  \fi
>>>

%

\<cutat: part\><<<
\CutAt{part}
\CutAt{likepart}
>>>




\<cutat: chapter\><<<
\CutAt{chapter,likechapter,appendix,part}
\CutAt{likechapter,appendix,part}
\CutAt{appendix,chapter,likechapter,part}
>>>



\<cutat: sec\><<<
\CutAt{section,likesection,chapter,likechapter,appendix,part}
\CutAt{likesection,chapter,likechapter,appendix,part}
>>>


\<cutat: subsection\><<<
\CutAt{subsection,section,likesection,%
                  chapter,likechapter,appendix,part}
\CutAt{likesubsection,section,likesection,%
                  chapter,likechapter,appendix,part}
>>>


%%%%%%%%%%%%%%%%%%%
\subsection{AMS}
%%%%%%%%%%%%%%%%%%%



\<ams options 1, 2, 3\><<<
|<cut and toc at for options 1, 2, 3|>
>>>




%%%%%%%%%%%%%
\subsection{File Naming}
%%%%%%%%%%%%%

\<cut and toc at for options 1, 2, 3\><<<
\:CheckOption{sec-filename}   \if:Option \else
    \Log:Note{for files named after section
        titles, use the command line option `sec-filename'}%
\fi
>>>


\<configure html-speech tex4ht\><<<
\:CheckOption{7}     
    \if:Option \else \:CheckOption{6}\fi
    \if:Option \else \:CheckOption{5}\fi
    \if:Option \else \:CheckOption{4}\fi
    \if:Option \else \:CheckOption{3}\fi
    \if:Option \else \:CheckOption{2}\fi
    \if:Option \else \:CheckOption{1}\fi
\if:Option
    \:CheckOption{sec-filename}
    \if:Option
       |<section names for cutat files|>
    \else
       \Log:Note{For section filenames that reflect on
                 their titles use the command line 
                 option `sec-filename'}
    \fi 
\fi
>>>

\<section names for cutat files\><<<
\Configure{CutAt-filename}{%
   \ifx \:NxtNwFN\:Undef
      \tmp:toks={#2}% 
      \immediate\openout15=\jobname .tmp 
      \immediate\write15{\string\next{\the\tmp:toks}}% 
      \immediate\closeout15 
      \bgroup  
        \def\next{\xdef\:temp}% 
        \csname no:catcodes\endcsname{32}{47}{9}% 
        \csname no:catcodes\endcsname{58}{64}{9}% 
        \csname no:catcodes\endcsname{91}{91}{9}% 
        \csname no:catcodes\endcsname{93}{96}{9}% 
        \csname no:catcodes\endcsname{126}{126}{9}% 
        \input \jobname .tmp 
      \egroup        
      \tmp:cnt=0       \uniq:fn 
   \fi
} 
\def\uniq:fn{% 
   \expandafter\ifx  
        \csname ct:fn\:temp 
                \ifnum \tmp:cnt>0 \the\tmp:cnt\fi\endcsname\relax 
      \expandafter\global\expandafter\let 
                  \csname ct:fn\:temp 
                          \ifnum\tmp:cnt>0 \the\tmp:cnt\fi 
                           \endcsname=\def 
      \ifx \:temp\empty \else 
         \NextFile{\:temp 
                   \ifnum \tmp:cnt>0 \the\tmp:cnt\fi .\:html}% 
      \fi 
   \else 
      \advance\tmp:cnt by 1 \expandafter\uniq:fn 
   \fi 
} 
>>>
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Tables of Contents: Choice of Entries}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%





\<toc article,report options 1\><<<
\:CheckOption{notoc*}     \if:Option
   \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
      \TocAt*{part,/likepart,section,subsection}
   \fi
   \Configure{tableofcontents*}{part,section}     
\else
   \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
      \TocAt*{part,/likepart,section,likesection,%
           subsection,likesubsection}
   \fi
   |<notoc* note|>
   \Configure{tableofcontents*}{part,likepart,section,likesection}     
\fi 
>>>

\<toc book options 1\><<<
\:CheckOption{notoc*}     \if:Option
   \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
      \TocAt*{part,/likepart,chapter,appendix,section}
   \fi
\else
   \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
      \TocAt*{part,/likepart,chapter,likechapter,appendix,%
            section,likesection}
   \fi
\fi
>>>





\<cut toc: part\><<<
\:CheckOption{notoc*}     \if:Option
   \Configure{tableofcontents*}
      {part,chapter,appendix}
\else
   |<notoc* note|>
   \Configure{tableofcontents*}
      {part,likepart,chapter,likechapter,appendix}
\fi
>>>


\<tocat: part\><<<
\:CheckOption{notoc*}     \if:Option
\else
  \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
     \TocAt*{part,/likepart,chapter,likechapter,appendix,%
          section,likesection}
     \TocAt*{likepart,/part,chapter,likechapter,appendix,%
          section,likesection}
  \fi
\fi
>>>




\<tocat: part, no chapter\><<<
\:CheckOption{notoc*}     \if:Option
\else
  \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
     \TocAt*{part,/likepart,chapter,%
          section,likesection,subsection,likesubsection}
     \TocAt*{likepart,/part,%
          section,likesection,subsection,likesubsection}
  \fi
\fi
>>>



\<cut toc: ch\><<<
\:CheckOption{notoc*}     \if:Option
  \Configure{tableofcontents*}{part,chapter,%
     appendix,section\expandafter\ifx 
     \csname @chapter\endcsname\relax ,subsection\fi}
\else
  |<notoc* note|>
  \Configure{tableofcontents*}{part,likepart,chapter,likechapter,%
     appendix,section,likesection\expandafter\ifx 
     \csname @chapter\endcsname\relax ,subsection,likesubsection\fi}
\fi
>>>

\<tocat: ch\><<<
\:CheckOption{notoc*}     \if:Option
  \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
     \TocAt*{chapter,/likechapter,/appendix,/part,%
             section,subsection}
     \TocAt*{likechapter,/appendix,/chapter,/part,%
             section,subsection}
     \TocAt*{appendix,/chapter,/likechapter,/part,%
             section,subsection}
   \fi
\else
  \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
     \TocAt*{chapter,/likechapter,/appendix,/part,%
             section,likesection,subsection,likesubsection}
     \TocAt*{likechapter,/appendix,/chapter,/part,%
             section,likesection,subsection,likesubsection}
     \TocAt*{appendix,/chapter,/likechapter,/part,%
             section,likesection,subsection,likesubsection}
   \fi
\fi
>>>

\<cut toc: sec\><<<
\:CheckOption{notoc*}     \if:Option
  \Configure{tableofcontents*}{part,chapter,appendix,section%
        \expandafter\ifx \csname @chapter\endcsname\relax
     ,subsection\fi}
\else
  |<notoc* note|>
  \Configure{tableofcontents*}{part,likepart,chapter,likechapter,%
     appendix,section,likesection%
        \expandafter\ifx \csname @chapter\endcsname\relax
     ,subsection,likesubsection\fi}
\fi
>>>

\<tocat: section\><<<
\:CheckOption{notoc*}     \if:Option
  \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
     \TocAt*{section,/likesection,/chapter,/likechapter,/appendix,/part,%
             subsection,subsubsection}
     \TocAt*{likesection,/section,/chapter,/likechapter,/appendix,/part,%
             subsection,subsubsection}
  \fi
\else
  \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
     \TocAt*{section,/likesection,/chapter,/likechapter,/appendix,/part,%
          subsection,likesubsection,subsubsection,likesubsubsection}
     \TocAt*{likesection,/section,/chapter,/likechapter,/appendix,/part,%
          subsection,likesubsection,subsubsection,likesubsubsection}
  \fi
\fi
>>>


\<cut toc: subsec\><<<
\:CheckOption{notoc*}     \if:Option
  \Configure{tableofcontents*}{part,chapter,%
    appendix,section,subsection}
\else
  |<notoc* note|>
  \Configure{tableofcontents*}{part,likepart,chapter,likechapter,%
    appendix,section,likesection,likesubsection,subsection}
\fi
>>>



\<tocat: subsection\><<<
\:CheckOption{notoc*}     \if:Option
  \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
     \TocAt*{subsection,/likesubsection,/section,/likesection,%
             /chapter,/likechapter,%
             /appendix,/part,%
             subsubsection,paragraph}
     \TocAt*{likesubsection,/subsection,/likesection,%
             /section,/chapter,/likechapter,/appendix,/part,%
             subsubsection,paragraph}
  \fi
\else
  \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
     \TocAt*{subsection,/likesubsection,/section,/likesection,%
          /chapter,/likechapter,/appendix,/part,%
          subsubsection,likesubsubsection,%
          paragraph}
     \TocAt*{likesubsection,/subsection,%
          /likesection,/section,/chapter,/likechapter,/appendix,/part,%
          subsubsection,likesubsubsection,%
          paragraph}
  \fi
\fi
>>>


\<cut toc: subsubsec\><<<
\:CheckOption{notoc*}     \if:Option
  \Configure{tableofcontents*}{part,chapter,%
    appendix,section,subsection,subsubsection}
\else
  |<notoc* note|>
  \Configure{tableofcontents*}{part,likepart,chapter,likechapter,%
    appendix,section,likesection,%
    likesubsection,subsection,likesubsubsection,subsubsection}
\fi
>>>




\<tocat: subsubsection\><<<
\:CheckOption{notoc*}     \if:Option
  \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
     \TocAt*{subsubsection,/likesubsubsection,/subsection,%
             /likesubsection,/section,/likesection,%
             /chapter,/likechapter,%
             /appendix,/part,%
             paragraph,subparagraph}
     \TocAt*{likesubsubsection,/subsubsection,/likesubsection,%
             /subsection,/likesection,%
             /section,/chapter,/likechapter,/appendix,/part,%
             paragraph,subparagraph}
  \fi
\else
  \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
     \TocAt*{subsubsection,/likesubsubsection,%
          /subsection,/likesubsection,/section,/likesection,%
          /chapter,/likechapter,/appendix,/part,%
          paragraph,subparagraph}
     \TocAt*{likesubsubsection,/subsubsection,/likesubsection,/subsection,%
          /likesection,/section,/chapter,/likechapter,/appendix,/part,%
          paragraph,subparagraph}
  \fi
\fi
>>>






\<cut toc: paragraph\><<<
\:CheckOption{notoc*}     \if:Option
  \Configure{tableofcontents*}{part,chapter,%
    appendix,section,subsection,subsubsection,paragraph}
\else
  |<notoc* note|>
  \Configure{tableofcontents*}{part,likepart,chapter,likechapter,%
    appendix,section,likesection,%
    likesubsection,subsection,likesubsubsection,subsubsection,%
    paragraph}
\fi
>>>


\<tocat: paragraph\><<<
\:CheckOption{notoc*}     \if:Option
  \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
     \TocAt*{paragraph,/subsubsection,/likesubsubsection,/subsection,%
             /likesubsection,/section,/likesection,%
             /chapter,/likechapter,%
             /appendix,/part,%
             subparagraph}
  \fi
\else
  \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
     \TocAt*{paragraph,/subsubsection,/likesubsubsection,%
          /subsection,/likesubsection,/section,/likesection,%
          /chapter,/likechapter,/appendix,/part,%
          subparagraph}
  \fi
\fi
>>>








\<cut toc: subparagraph\><<<
\:CheckOption{notoc*}     \if:Option
  \Configure{tableofcontents*}{part,chapter,%
    appendix,section,subsection,subsubsection,%
    paragraph,subparagraph}
\else
  |<notoc* note|>
  \Configure{tableofcontents*}{part,likepart,chapter,likechapter,%
    appendix,section,likesection,%
    likesubsection,subsection,likesubsubsection,subsubsection,%
    paragraph,subparagraph}
\fi
>>>


\<cutat: subsubsection\><<<
\CutAt{subsubsection,subsection,likesubsection,section,likesection,%
                  chapter,likechapter,appendix,part}
\CutAt{likesubsubsection,subsection,likesubsection,section,likesection,%
                  chapter,likechapter,appendix,part}
>>>

\<cutat: paragraph\><<<
\CutAt{paragraph,subsubsection,likesubsubsection,subsection,likesubsection,%
       section,likesection,chapter,likechapter,appendix,part}
>>>

\<cutat: subparagraph\><<<
\CutAt{subparagraph,paragraph,subsubsection,likesubsubsection,%
       subsection,likesubsection,%
       section,likesection,chapter,likechapter,appendix,part}
>>>








\<toc scrbook options 1\><<<
\:CheckOption{notoc*}     \if:Option 
   \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
      \TocAt*{part,/likepart,chapter,addchap,appendix,section}
   \fi
\else
   \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
      \TocAt*{part,/likepart,chapter,likechapter,addchap,appendix,%
            section,likesection}
   \fi
\fi
>>>


\<cut toc scr: part\><<<
\:CheckOption{notoc*}     \if:Option
   \Configure{tableofcontents*}
      {part,chapter,addchap,appendix}
\else
   |<notoc* note|>
   \Configure{tableofcontents*}
      {part,likepart,chapter,likechapter,addchap,appendix}
\fi
>>>



\<tocat scr: part\><<<
\:CheckOption{notoc*}     \if:Option
  \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
     \TocAt*{part,/likepart,chapter,addchap,appendix,section}
     \TocAt*{likepart,/part,chapter,addchap,appendix,section}
  \fi
\else
  \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
     \TocAt*{part,/likepart,chapter,likechapter,addchap,appendix,%
             section,likesection}
     \TocAt*{likepart,/part,chapter,likechapter,addchap,appendix,%
             section,likesection}
  \fi
\fi
>>>

\<tocat scr: ch\><<<
\:CheckOption{notoc*}     \if:Option 
   \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
      \TocAt*{chapter,/likechapter,/addchap,/appendix,/part,%
                section,subsection}
      \TocAt*{likechapter,/addchap,/appendix,/chapter,/part,%
                section,subsection}
      \TocAt*{addchap,/likechapter,/appendix,/chapter,/part,%
                section,subsection}
      \TocAt*{appendix,/chapter,/likechapter,/addchap,/part,%
                section,subsection}
   \fi
\else
   \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
      \TocAt*{chapter,/likechapter,/addchap,/appendix,/part,%
                section,likesection,subsection,likesubsection}
      \TocAt*{likechapter,/addchap,/appendix,/chapter,/part,%
                section,likesection,subsection,likesubsection}
      \TocAt*{addchap,/likechapter,/appendix,/chapter,/part,%
                section,likesection,subsection,likesubsection}
      \TocAt*{appendix,/chapter,/likechapter,/addchap,/part,%
                section,likesection,subsection,likesubsection}
   \fi
\fi
>>>


\<tocat scr: section\><<<
\:CheckOption{notoc*}     \if:Option 
   \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
      \TocAt*{section,/likesection,/chapter,/likechapter,%
                /addchap,/appendix,/part,%
                subsection,subsubsection}
      \TocAt*{likesection,/section,/chapter,/likechapter,%
                /addchap,/appendix,/part,%
                subsection,subsubsection}
   \fi
\else
   \:CheckOption{nominitoc}     \if:Option
   \else
      |<note nominitoc|>
      \TocAt*{section,/likesection,/chapter,/likechapter,%
                /addchap,/appendix,/part,%
                subsection,likesubsection,subsubsection,likesubsubsection}
      \TocAt*{likesection,/section,/chapter,/likechapter,%
                /addchap,/appendix,/part,%
                subsection,likesubsection,subsubsection,likesubsubsection}
   \fi
\fi
>>>


\<tocat scr: subsection\><<<
\:CheckOption{notoc*}     \if:Option 
   \CutAt{subsection,section,chapter,addchap,appendix,part}
   \CutAt{likesubsection,section,chapter,addchap,appendix,part}
\else
   \CutAt{subsection,section,likesection,%
                     chapter,likechapter,addchap,appendix,part}
   \CutAt{likesubsection,section,likesection,%
                     chapter,likechapter,addchap,appendix,part}
\fi
>>>



\<foils toc 1\><<<
\ConfigureToc{foilheads}{}{ *\ }{}{}
\Configure{tableofcontents*}{foilheads}
>>>


The `notoc*' is applicable only to pages that are automatically
decomposed into separate web pages along section divides.  It 
should be used whe addcontentline instructions are present.

\begin{verbatim}
\section*{....}
\addcontentsline{toc}{section}{....}
\end{verbatim}



\<notoc* note\><<<
\Log:Note{for tocs without * entries, use
          command line option `notoc*'}
>>>



\<toc for multind\><<<
\:CheckOption{1}     \if:Option
  \:CheckOption{notoc*}     \if:Option 
      \addcontentsline{toc}{section}{\indexname}%
  \fi 
\else \:CheckOption{2}     \if:Option
  \:CheckOption{notoc*}     \if:Option 
      \addcontentsline{toc}{section}{\indexname}%
  \fi 
\else \:CheckOption{3}     \if:Option
  \:CheckOption{notoc*}     \if:Option 
      \addcontentsline{toc}{section}{\indexname}%
  \fi 
\else \:CheckOption{4}     \if:Option
  \:CheckOption{notoc*}     \if:Option 
      \addcontentsline{toc}{section}{\indexname}%
  \fi 
\else
      \addcontentsline{toc}{section}{\indexname}%
\fi \fi \fi \fi
>>>



\<note nominitoc\><<<
\Log:Note{to eliminate mini tables of
          contents, use the command line option `nominitoc'}
>>>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Tables of Contents: Configurations}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<configure html-speech latex\><<<
\Configure{TocAt}
   {|<save configure tableofcontents|>%
    \Configure{tableofcontents}
       {\IgnorePar\EndP\HCode{<div class="\sec:typ TOCS">}\IgnorePar}
       {}{\IgnorePar\HCode{</div>}\ShowPar}{\HCode{<br\xml:empty>}}{}%
    \ifvmode \IgnorePar\fi \EndP
   }
   {|<recall configure tableofcontents|>\par\ShowPar}
\Configure{TocAt*}
   {|<save configure tableofcontents|>%
    \Configure{tableofcontents}
       {\IgnorePar\EndP\HCode{<div class="\sec:typ TOCS">}\IgnorePar}
       {}{\IgnorePar\HCode{</div>}\ShowPar}{\HCode{<br\xml:empty>}}{}%
    \ifvmode \IgnorePar\fi \EndP
   }
   {|<recall configure tableofcontents|>\par\ShowPar}
>>>




\<configure html-speech latex\><<<
\Configure{tableofcontents}
   {\IgnorePar\EndP\HCode{<div class="tableofcontents">}\IgnorePar}
   {\ifTag{tex4ht-body}{\HCode{<br />}\Link{tex4ht-body}{}Home\EndLink}{}}
   {\IgnorePar\EndP\HCode{</div>}\ShowPar}
   {\HCode{<br\xml:empty>}}   {}
>>>

\<save configure tableofcontents\><<<
\let\sv:atoc|=\a:tableofcontents
\let\sv:btoc|=\b:tableofcontents
\let\sv:ctoc|=\c:tableofcontents
\let\sv:dtoc|=\d:tableofcontents
\let\sv:etoc|=\e:tableofcontents
>>>


\<recall configure tableofcontents\><<<
\let\a:tableofcontents|=\sv:atoc
\let\b:tableofcontents|=\sv:btoc
\let\c:tableofcontents|=\sv:ctoc
\let\d:tableofcontents|=\sv:dtoc
\let\e:tableofcontents|=\sv:etoc
>>>


\<html latex tocs\><<<
\def\tocpart#1#2#3{\par\:SPAN{partToc}{\if !#1!\else  #1~~\fi #2}\par}%
\def\toclikepart#1#2#3{\par\:SPAN{likepartToc}{#2}\par}%
|<part toc css|>%
\expandafter\ifx \csname @chapter\endcsname\relax 
   \def\tocsection#1#2#3{\par
       \:SPAN{sectionToc}{\def\:temp{#1}\ifx \:temp\empty\else
            #1 \fi #2}\par}
   \def\toclikesection#1#2#3{\par\:SPAN{likesectionToc}{#2}\par}%
   \def\tocsubsection#1#2#3{\par\ \toc:num{subsection}{#1}{#2}\par}
   \def\toclikesubsection#1#2#3{\par\ \:SPAN{likesubsectionToc}{#2}\par}
   \def\tocsubsubsection#1#2#3{\par
      \ \ \toc:num{subsubsection}{#1}{#2}\par}
   \def\toclikesubsubsection#1#2#3{\par
      \ \ \:SPAN{likesubsubsectionToc}{#2}\par}
   \def\tocparagraph#1#2#3{\par\ \ \toc:num{paragraph}{#1}{#2}\par}
   \def\toclikeparagraph#1#2#3{\par\ \ \:SPAN{likeparagraphToc}{#2}\par}
   \def\tocsubparagraph#1#2#3{\par
      \ \ \ \ \toc:num{subparagraph}{#1}{#2}\par}
   \def\toclikesubparagraph#1#2#3{\par
      \ \ \ \ \:SPAN{likesubparagraphToc}{#2}\par}
\else
   |<chapter toc css|>%
   \def\tocchapter#1#2#3{\par\:SPAN{chapterToc}{\ifnum \c@secnumdepth >\m@ne 
                                                              #1 \fi #2}\par}
   \def\toclikechapter#1#2#3{\par\:SPAN{likechapterToc}{#2}\par}%
   \def\tocappendix#1#2#3{\par\:SPAN{appendixToc}{#1 #2}\par}
   \def\tocsection#1#2#3{\par\ \toc:num{section}{#1}{#2}\par}
   \def\toclikesection#1#2#3{\par\ \:SPAN{likesectionToc}{#2}\par}
   \def\tocsubsection#1#2#3{\par\ \ \toc:num{subsection}{#1}{#2}\par}
   \def\toclikesubsection#1#2#3{\par
      \ \ \:SPAN{likesubsectionToc}{#2}\par}
   \def\tocsubsubsection#1#2#3{\par
      \ \ \ \toc:num{subsubsection}{#1}{#2}\par}
   \def\toclikesubsubsection#1#2#3{\par
      \ \ \ \:SPAN{likesubsubsectionToc}{#2}\par}
   \def\tocparagraph#1#2#3{\par\ \ \ \toc:num{paragraph}{#1}{#2}\par}
   \def\toclikeparagraph#1#2#3{\par
      \ \ \ \:SPAN{likeparagraphToc}{#2}\par}
   \def\tocsubparagraph#1#2#3{\par
      \ \ \ \ \ \toc:num{subparagraph}{#1}{#2}\par}
   \def\toclikesubparagraph#1#2#3{\par
      \ \ \ \ \ \:SPAN{likesubparagraphToc}{#2}\par}
\fi
\def\toc:num#1#2#3{\def\:temp{#1#2}\:SPAN{#1Toc}{\ifx \:temp\empty \else 
   #2 \fi #3}}
>>>



\<scr report,book\><<<
\def\tocpart#1#2#3{\par\:SPAN{partToc}{\if !#1!\else  #1~~\fi #2}\par}%
\def\toclikepart#1#2#3{\par\:SPAN{likepartToc}{#2}\par}%
\Css{.partToc a, .partToc, .likepartToc a, .likepartToc
        {line-height: 200\%; font-weight:bold; font-size:110\%;}}
   \Css{.chapterToc a, .chapterToc, .likechapterToc a, .likechapterToc,
        .appendixToc a, .appendixToc, .addchapToc a
        {line-height: 200\%; font-weight:bold;}}
   \def\tocchapter#1#2#3{\par\:SPAN{chapterToc}{#1~~#2}\par}
   \def\toclikechapter#1#2#3{\par\:SPAN{likechapterToc}{#2}\par}%
   \def\tocaddchap#1#2#3{\par\:SPAN{addchapToc}{#2}\par}%
   \def\tocappendix#1#2#3{\par\:SPAN{appendixToc}{#1~~#2}\par}
   \def\tocsection#1#2#3{\par\ \toc:num{section}{#1}{#2}\par}
   \def\toclikesection#1#2#3{\par\ \:SPAN{likesectionToc}{#2}\par}
   \def\tocsubsection#1#2#3{\par\ \ \toc:num{subsection}{#1}{#2}\par}
   \def\toclikesubsection#1#2#3{\par
      \ \ \:SPAN{likesubsectionToc}{#2}\par}
   \def\tocsubsubsection#1#2#3{\par
      \ \ \ \toc:num{subsubsection}{#1}{#2}\par}
   \def\toclikesubsubsection#1#2#3{\par
      \ \ \ \:SPAN{likesubsubsectionToc}{#2}\par}
   \def\tocparagraph#1#2#3{\par\ \ \ \toc:num{paragraph}{#1}{#2}\par}
   \def\toclikeparagraph#1#2#3{\par
      \ \ \ \:SPAN{likeparagraphToc}{#2}\par}
   \def\tocsubparagraph#1#2#3{\par
      \ \ \ \ \ \toc:num{subparagraph}{#1}{#2}\par}
   \def\toclikesubparagraph#1#2#3{\par
      \ \ \ \ \ \:SPAN{likesubparagraphToc}{#2}\par}
\def\toc:num#1#2#3{\def\:temp{#1#2}\:SPAN{#1Toc}{\ifx \:temp\empty \else
   #2~~\fi #3}}
>>>


\<revtex sections\><<<
\def\tocpart#1#2#3{\par\:SPAN{partToc}{\if !#1!\else  #1~~\fi #2}\par}%
\def\toclikepart#1#2#3{\par\:SPAN{likepartToc}{#2}\par}%
\Css{.partToc a, .partToc, .likepartToc a, .likepartToc
        {line-height: 200\%; font-weight:bold; font-size:110\%;}}
%
\expandafter\ifx \csname @chapter\endcsname\relax
   \def\tocsection#1#2#3{\par
       \:SPAN{sectionToc}{\def\:temp{#1}\ifx \:temp\empty\else
            #1 \fi #2}\par}
   \def\toclikesection#1#2#3{\par\:SPAN{likesectionToc}{#2}\par}%
   \def\tocsubsection#1#2#3{\par\ \toc:num{subsection}{#1}{#2}\par}
   \def\toclikesubsection#1#2#3{\par\ \:SPAN{likesubsectionToc}{#2}\par}
   \def\tocsubsubsection#1#2#3{\par
      \ \ \toc:num{subsubsection}{#1}{#2}\par}
   \def\toclikesubsubsection#1#2#3{\par
      \ \ \:SPAN{likesubsubsectionToc}{#2}\par}
   \def\tocparagraph#1#2#3{\par\ \ \toc:num{paragraph}{#1}{#2}\par}
   \def\toclikeparagraph#1#2#3{\par\ \ \:SPAN{likeparagraphToc}{#2}\par}
   \def\tocsubparagraph#1#2#3{\par
      \ \ \ \ \toc:num{subparagraph}{#1}{#2}\par}
   \def\toclikesubparagraph#1#2#3{\par
      \ \ \ \ \:SPAN{likesubparagraphToc}{#2}\par}
\else
   \Css{.chapterToc a, .chapterToc, .likechapterToc a, .likechapterToc,
        .appendixToc a, .appendixToc
        {line-height: 200\%; font-weight:bold;}}
%
   \def\tocchapter#1#2#3{\par\:SPAN{chapterToc}{#1 #2}\par}
   \def\toclikechapter#1#2#3{\par\:SPAN{likechapterToc}{#2}\par}%
   \def\tocappendix#1#2#3{\par\:SPAN{appendixToc}{#1 #2}\par}
   \def\tocsection#1#2#3{\par\ \toc:num{section}{#1}{#2}\par}
   \def\toclikesection#1#2#3{\par\ \:SPAN{likesectionToc}{#2}\par}
   \def\tocsubsection#1#2#3{\par\ \ \toc:num{subsection}{#1}{#2}\par}
   \def\toclikesubsection#1#2#3{\par
      \ \ \:SPAN{likesubsectionToc}{#2}\par}
   \def\tocsubsubsection#1#2#3{\par
      \ \ \ \toc:num{subsubsection}{#1}{#2}\par}
   \def\toclikesubsubsection#1#2#3{\par
      \ \ \ \:SPAN{likesubsubsectionToc}{#2}\par}
   \def\tocparagraph#1#2#3{\par\ \ \ \toc:num{paragraph}{#1}{#2}\par}
   \def\toclikeparagraph#1#2#3{\par
      \ \ \ \:SPAN{likeparagraphToc}{#2}\par}
   \def\tocsubparagraph#1#2#3{\par
      \ \ \ \ \ \toc:num{subparagraph}{#1}{#2}\par}
   \def\toclikesubparagraph#1#2#3{\par
      \ \ \ \ \ \:SPAN{likesubparagraphToc}{#2}\par}
\fi
\def\toc:num#1#2#3{\def\:temp{#1#2}\:SPAN{#1Toc}{\ifx \:temp\empty \else
   #2 \fi #3}}
>>>


%%%%%%%%%%%%%%%%%%%
\subsection{Tables of Contents}
%%%%%%%%%%%%%%%%%%%


\<ams art,proc,book toc\><<<
\ConfigureToc{part}
  {\HCode{<span class="partToc">}\toc:Mark{part}}
  {\End:Mark}
  {}
  {\HCode{</span><br\xml:empty>}}
\ConfigureToc{section}
  {\HCode{<span class="sectionToc">}\toc:Mark{section}}
  {\End:Mark}
  {}
  {\HCode{</span><br\xml:empty>}}
\ConfigureToc{subsection}
  {\HCode{<span class="subsectionToc">}~~\toc:Mark{subsection}}
  {\End:Mark}
  {}
  {\HCode{</span><br\xml:empty>}}
\ConfigureToc{subsubsection}
  {\HCode{<span
       class="subsubsectionToc">}~~~~\toc:Mark{subsubsection}}
  {\End:Mark}
  {}
  {\HCode{</span><br\xml:empty>}}
\def\toc:Mark#1#2\End:Mark{\if !#2!\else
   \expandafter\ifx \csname #1name\endcsname\relax\else 
   \csname #1name\endcsname~\fi #2.~~\fi}
>>>


\<ams book\><<<
\ConfigureToc{likepart}
  {\HCode{<span class="likepartToc">}}
  {\empty}
  {}
  {\HCode{</span><br\xml:empty>}}
\ConfigureToc{chapter}
  {\HCode{<span class="chapterToc">}%
   \ifx \chaptername\:UnDef\else \chaptername~\fi}
  {.~~}
  {}
  {\HCode{</span><br\xml:empty>}}
\ConfigureToc{likechapter}
  {\HCode{<span class="likechapterToc">}}
  {~~}
  {}
  {\HCode{</span><br\xml:empty>}}
\ConfigureToc{appendix}
  {\HCode{<span class="appendixToc">}%
   \ifx \appendixname\:UnDef\else \appendixname~\fi}
  {.~~}
  {}
  {\HCode{</span><br\xml:empty>}}
>>>

\<ams book\><<<
\Css{.chapterToc a, .chapterToc, .appendixToc a, .appendixToc
   {line-height: 200\%; font-weight:bold;}}
>>>


\<ams art,proc,book toc\><<<
\Css{.partToc a, .partToc, .likepartToc a, .likepartToc
        {line-height: 200\%; font-weight:bold; font-size:110\%;}}
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Tables and Arrays}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{LaTeX Tabule}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\<article,report,book\><<<
\ConfigureEnv{table}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="table">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}\par\ShowPar}
   {}{}
>>>

%%%%%%%%%%%%%
\subsection{multirow}
%%%%%%%%%%%%%

\<configure html-speech multirow\><<<
\Configure{multirow}
    {\HCode{<div class="multirow"><!-- rows=\the\@tempcnta\space -->}}
    {\HCode{</div>}}
>>>


%%%%%%%%%%%%%
\subsection{tabulary}
%%%%%%%%%%%%%


\<configure html-speech tabulary\><<<
\Configure{halignTD} {}{} 
   {<}{\HCode{ % align="left" 
               style="white-space:nowrap; text-align:left;"}} 
   {-}{\HCode{ % align="center" 
               style="white-space:nowrap; text-align:center;"}} 
   {>}{\HCode{ % align="right" 
               style="white-space:nowrap; text-align:right;"}} 
   {l}{\HCode{ % align="left" 
               style="white-space:nowrap; text-align:left;"}} 
   {c}{\HCode{ % align="center" 
               style="white-space:nowrap; text-align:center;"}} 
   {r}{\HCode{ % align="right" 
               style="white-space:nowrap; text-align:right;"}} 
   {^}{\HCode{ valign="top" style="white-space:nowrap;"}} 
   {=}{\HCode{ valign="baseline" style="white-space:nowrap;"}} 
   {||}{\HCode{ valign="middle" style="white-space:nowrap;"}} 
   {_}{\HCode{ valign="bottom" style="white-space:nowrap;"}} 
   {p}{\HCode{ % align="left" 
               style="white-space:wrap; text-align:left;"}} 
   {m}{\HCode{ % align="left" 
               style="white-space:nowrap; text-align:left;" valign="middle"}} 
   {b}{\HCode{ % align="left" 
               style="white-space:wrap; text-align:left;" valign="baseline"}} 
   {L}{\HCode{ style="white-space:wrap; text-align:left;"}} 
   {R}{\HCode{ style="white-space:wrap; text-align:right;"}} 
   {C}{\HCode{ style="white-space:wrap; text-align:center;"}} 
   {J}{\HCode{ style="white-space:wrap;"}} 
   {} 
>>>

\<configure html-speech tabulary\><<<
\ConfigureEnv{tabulary}
  {|<configure tabular noalign|>%
   \IgnorePar|<inline comment|>\EndP\HCode{<div class="tabular">}%
   \PushStack\Col:Marg\AllColMargins
  }
  {\HCode{</div>}\PopStack\Col:Marg\AllColMargins\ShowPar
      |<configure clear noalign|>%
      |<try env inline par|>%
  }{}{}
>>>


\<configure html-speech tabulary\><<<
   \Configure{tabulary}
      {\ifvmode \IgnorePar\fi \EndP \halignTB{tabulary}\putVBorder }
      {|<insert Clr|>\HCode{</table>}}
      {\HCode{<tr \Hnewline}\halignTR 
                            \HCode{ id="TBL-\TableNo-\HRow-">}}
      {\r:HA}
      {\HCode{<td \ifnum \HMultispan>1 colspan="\HMultispan"\fi}%
         \halignTD \HCode{ id="TBL-\TableNo-\HRow-\HCol"
         \Hnewline class="td}\NoFonts\ColMargins\EndNoFonts
         \HCode{">}|<start array par box|>\PushStack\Table:Stck\TableNo}
      {|<end array par box|>\PopStack\Table:Stck\TableNo \d:HA}
>>>


\<configure html-speech tabulary\><<<
\Configure{halignTB<>}{tabulary}{\HCode{class="tabulary"\Hnewline 
   cellspacing="0" cellpadding="0" \GROUPS\Hnewline 
   frame="\ifx \GROUPS\empty void\else border\fi" id="TBL-\TableNo-" 
   }<>\HAlign} 
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Bibliography}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Cite}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\<onmouseover cite\><<<
\Configure{cite}
  {\HCode{<span class="cite">}}
  {\HCode{</span>}}
  {\Link[ |<mouseover-cite arguments|>]}
  {\EndLink }
\expandafter\def\csname c:mouseover-cite:\endcsname{%
  \def\:tempb{cite}\csname c:mouseover-?:\endcsname}
\Configure{mouseover-cite}{tex4ht.body,FULLHTML}
>>>


\<mouseover-cite arguments\><<<
\mo:args{cite}{\@citeb}{\expandafter
              \jsHash\expandafter{\expandafter X\@citeb}}%
>>>








\<cite in TocLink\><<<
\Configure{cite}{}{}{}{}%
>>>


\<mouseover cite config\><<<
\string\Configure{mouseover-vars}{cite}{Author,Title}%
>>>


\<mouseover cite css\><<<
\string\Configure {mouseover-cite} 
     {tex4ht.body,CAPTION,tex4ht.caption+tex4ht.var,FULLHTML}%
>>>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Bib Item}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<default bibitem\><<<
\Configure{bibitem}{\Link}{\EndLink}
>>>

\<onmouseover bibitem\><<<
\Configure{bibitem}
   {\bibitem:link}
   {\EndLink|<js end skip bib|>}
\def\bibitem:link#1#2{|<js skip bib|>\HCode
   {<!--}|<js mark 1 bib|>\HCode{#2=}|<js mark 2 bib|>\HCode
   {-->}\Link{#1}{#2}}
>>>



\<config bib-p HtmlPar\><<<
\Configure{HtmlPar}
   {\EndP\HCode{<p class="bibitem-p">}}
   {\EndP\HCode{<p class="bibitem-p">}}
   {\Tg</p>} {\Tg</p>}%
>>>      



\<config bib HtmlPar\><<<
\Configure{HtmlPar}
   {\EndP\HCode{<p class="bibitem">}}
   {\EndP\HCode{<p class="bibitem">}}
   {\Tg</p>} {\Tg</p>}%
>>>      


\<bibitem 2\><<< 
   \Configure{bibitem2}
      {|<config bib HtmlPar|>\par\ShowPar
       \HCode{<span class="biblabel">}%
       |<config bib-p HtmlPar|>%
      }
      {\EndP}
      {\HCode{<span class="bibsp">}~~~\HCode{</span></span>}}
>>>


\<js bibitem\><<<
\HCode{<!--}%
|<js from bib|>%
\HCode{<bibitem>}%
|<js skip bib|>%
|<js Set1 bib|>%
|<js end skip bib|>%
|<js Set2 bib|>%
|<js skip bib|>%
|<js end skip bib|>%
\HCode{<div class="js">}%
|<js skip bib|>%
\HCode{-->}%
|<js end skip bib|>%
>>>

\<js /bibitem\><<<
|<js skip bib|>%
\HCode{<!--}%
|<js end skip bib|>%
\HCode{</div></bibitem>\Hnewline}%
|<js Until bib|>%
\HCode{-->}%
>>>

\<js p.bibitem-p css\><<<
.js p.bibitem-p
>>>
 
\<js p.bibitem css\><<<
js p.bibitem
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{The Bibliography}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


The bibliography environment is prooblematic because 
it carries a definition that implies an environment similar
to 

\begin{verbatim}
  \begin{....}
  \section*{...}
  ...
  \end{....}
\end{verbatim}

The \verb+\begin{...}+ has a \verb+\SaveEverypar+, and
  \verb+\end{...}+ has a \verb+\RecallEverypar+. In the case of
paginations across sectioning commands, we have also the saving and
recalling also at the start and end of each section (each page).  In
such a case, we don't have proper nestings of environments.





\<shared bib env\><<<
\ConfigureEnv{thebibliography}{\IgnorePar}{\ShowPar\par}{}{}
>>>

\<foils bib\><<<
\ConfigureEnv{thebibliography}{\par\leavevmode}{\ShowPar}{}{}
>>>






\<ams art,proc,book\><<<
\<config book-report-article\><<<
\<configure html-speech mwbk\><<<
\<configure html-speech scrbook\><<<
\<configure html-speech scrreprt\><<<
\<revtex3 aps.sty\><<<


\<thebib config\><<<
\ConfigureList{thebibliography}%
   {\ifvmode\IgnorePar\fi \EndP \HCode{<div
                   class="thebibliography">}\let\en:bib=\empty} 
   {\en:bib \ifvmode\IgnorePar\fi \EndP \HCode{</div>}}
   {\en:bib\def\en:bib{|<bibliography2|>\EndP}%
   |<config bib HtmlPar|>\par\ShowPar
    \HCode{<span class="biblabel">}|<config bib-p HtmlPar|>} 
   {\HCode{<span class="bibsp">}\:nbsp
      \:nbsp\:nbsp\HCode{</span></span>}}
>>>


\<latex ltbibl\><<<
\:CheckOption{bibtex2} \if:Option
   \Configure{bibliography2}
      {~~[} {more} {]}
   |<bibitem 2|>%
\fi
>>>





\<config bibitem\><<<
\:CheckOption{no-bib} \if:Option\else  
   \:CheckOption{mouseover} \if:Option
      |<onmouseover cite|>
      |<onmouseover bibitem|>
   \else  
      |<default cite|>
      |<default bibitem|>
   \fi
\fi
>>>


\<thebib config\><<<
\:CheckOption{no-bib} \if:Option\else  
   \:CheckOption{mouseover} \if:Option
      |<onmouseover thebibliography|>
   \else  
      |<default thebibliography|>
   \fi
   |<bibitem css|>
\fi
>>>

\<bibliography2\><<<
\csname bibliography2\endcsname
>>>

\<js bibliography2\><<<
|<js skip bib|>\csname bibliography2\endcsname
|<js end skip bib|>%
>>>





%   \HCode{\Hnewline\string\jselement{footnote}%
%                  \string\jselement{bibitem}\Hnewline}%





\<bib in amsppt.sty\><<<
\Configure{vol}{\HCode{<strong>}}{\HCode{</strong>}}
\Configure{book}{\HCode{<em>}}{\HCode{</em>}}
\Configure{paper}{\HCode{<em>}}{\HCode{</em>}}
\Configure{Refs}{\IgnorePar\EndP\HCode{<table class="Refs">}}
                {\HCode{</table>}}
\Configure{ref}{\HCode{<tr valign="top"><td align="right">}}
               {\EndP\HCode{</td></tr>}}{}
\Configure{keyformat}{}{\EndP\HCode{</td><td>}}
>>>


%%%%%%%%%%%%%%%%
\subsection{acm-proc-article-sp}
%%%%%%%%%%%%%%%%

\<acm-proc-article-sp thebib config\><<<
\:CheckOption{no-bib} \if:Option\else  
   \:CheckOption{mouseover} \if:Option
      |<acm-proc-article-sp onmouseover thebibliography|>
   \else  
      |<acm-proc-article-sp default thebibliography|>
   \fi
   |<bibitem css|>
\fi
>>>


\<acm-proc-article-sp default thebibliography\><<<
\ConfigureEnv{thebibliography}%
   {\ifvmode\IgnorePar\fi \EndP \HCode{<div
                   class="thebibliography">}\let\en:bib=\empty} 
   {\en:bib \ifvmode\IgnorePar\fi \EndP \HCode{</div>}}
   {}{}
\ConfigureList{thebibliography}%
   {}{}
   {\en:bib\def\en:bib{|<bibliography2|>\EndP}%
   |<config bib HtmlPar|>\par\ShowPar
    \HCode{<span class="biblabel">}|<config bib-p HtmlPar|>} 
   {\HCode{<span class="bibsp">}\:nbsp
      \:nbsp\:nbsp\HCode{</span></span>}}
>>>


\<acm-proc-article-sp onmouseover thebibliography\><<<
\ConfigureEnv{thebibliography}%
   {\ifvmode\IgnorePar\fi\EndP |<start js|>\HCode{<div
                   class="thebibliography">}\let\en:bib=\empty} 
   {\en:bib \ifvmode\IgnorePar\fi\EndP \HCode{</div>}}
   {}{}
\ConfigureList{thebibliography}%
   {}{}
   {\en:bib\def\en:bib{|<js bibliography2|>%
        \EndP}|<js /bibitem|>|<js bibitem|>%
        |<config bib HtmlPar|>\par\ShowPar
        \leavevmode |<js skip bib|>\HCode{<span
      class="biblabel">}|<config bib-p HtmlPar|>} 
   {\HCode{<span class="bibsp">}\:nbsp
      \:nbsp\:nbsp\HCode{</span></span>}|<js end skip bib|>}
>>>



%%%%%%%%%%%%%%%%
\subsection{JS Contributions}
%%%%%%%%%%%%%%%%



\<js from bib\><<<
\ht:special {t4ht@DCopyTo: \jobname-js.tex From bib }%
>>>

\<js skip bib\><<<
\ht:special {t4ht@DCopyTo: \jobname-js.tex Skip bib }%
>>>

\<js end skip bib\><<<
\ht:special {t4ht@DCopyTo: \jobname-js.tex Cont bib }%
>>>

\<js Until bib\><<<
\ht:special {t4ht@DCopyTo: \jobname-js.tex Until bib }%
>>>

\<js Set1 bib\><<<
\ht:special {t4ht@DCopyTo: \jobname-js.tex Set1 bib }%
>>>

\<js Set2 bib\><<<
\ht:special {t4ht@DCopyTo: \jobname-js.tex Set2 bib }%
>>>

\<js mark 1 bib\><<<
\ht:special {t4ht@DCopyTo: \jobname-js.tex Addr1 bib }% 
>>>

\<js mark 2 bib\><<<
\ht:special {t4ht@DCopyTo: \jobname-js.tex Addr2 bib }% 
>>>




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Lists}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{LaTeX}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\<configure html-speech latex\><<<
\Css{li p.indent { text-indent: 0em }}
\ConfigureEnv{trivlist}
   {}{|<try env inline par|>}{}{}
\ConfigureList{trivlist}%
   {\EndP\HCode{<dl \a:LRdir class="trivlist">}%
       |<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\EndP\HCode{</dd></dl>}\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</dd>}\HCode{<dt
        class="trivlist">}\bgroup \bf}
   {\egroup\HCode{</dt><dd\Hnewline class="trivlist">}}
\ConfigureEnv{list}
   {}{|<try env inline par|>}{}{}
\ConfigureList{list}%
   {\EndP\HCode{<dl \a:LRdir class="list\expandafter\the
         \csname @listdepth\endcsname">}%
    |<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\EndP\HCode{</dd></dl>}\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</dd>}\HCode{<dt
        class="list">}\bgroup \bf}
   {\egroup\HCode{</dt><dd\Hnewline class="list">}}
\ConfigureEnv{itemize}
   {\ifvmode \IgnorePar\fi \EndP}{|<try env inline par|>}
   {}{}
\ConfigureList{itemize}%
   {\EndP\HCode{<ul \a:LRdir class="itemize\expandafter\the
          \csname @itemdepth\endcsname">}%
       |<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\ifvmode \IgnorePar\fi 
    \EndP\HCode{</li></ul>}\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</li>}\DeleteMark}
   {\HCode{<li class="itemize">}}
\ConfigureEnv{enumerate}
   {}{|<try env inline par|>}{}{}
\:CheckOption{li-} \if:Option
   \ConfigureList{enumerate}%
      {|<enumerate I|>}
      {|<enumerate II|>}
      {|<enumerate III|>}
      {|<enumerate IV|>}
\else
   \ConfigureList{enumerate}%
      {|<enumerate I|>}
      {|<enumerate II|>}
      {|<enumerate III|>}
      {|<enumerate IV-|>}
   \Log:Note{for enumerated list elements li's with value attributes,
                      use the command line option `li-'}
\fi
\:CheckOption{css2} \if:Option
   |<css2 itemize|>
\else
   \Log:Note{for CSS2 code, use the command line option `css2'}
\fi
>>>

\<css2 itemize\><<<
\bgroup
   \def\textbullet{&\#x2219;}
   \def\textasteriskcentered{&\#x2217;}
   \Css{ul.itemize1 {list-style-type: none;}} 
   \Css{ul.itemize1 li.itemize:before { display: marker;   
                                  marker-offset: 0.5em;   
                                        content: "\labelitemi\space" }} 
   \Css{ul.itemize2 {list-style-type: none;}} 
   \Css{ul.itemize2 li.itemize:before { display: marker;   
                                  marker-offset: 0.5em;   
                                        content: "\labelitemii\space" }} 
   \Css{ul.itemize3 {list-style-type: none;}} 
   \Css{ul.itemize3 li.itemize:before { display: marker;   
                                  marker-offset: 0.5em;   
                                        content: "\labelitemiii\space" }}
\egroup
>>>

It is better to put the LI in the third field to avoid extra space 
to the following text.

\<configure html-speech latex\><<<
\def\c:enumerate:#1{\c:enu #1|<par del|>}
\def\c:enu#1#2#3#4#5|<par del|>{%
\def\a:enumerate:{\ifcase \@enumdepth \or
         #1\or #2\or #3\or #4\else\fi #5}}
>>>
   
\<configure html-speech latex\><<<
\Configure{enumerate}{{}{}{}{}}
\Css{.enumerate1    {list-style-type:decimal;}}
\Css{.enumerate2    {list-style-type:lower-alpha;}}
\Css{.enumerate3    {list-style-type:lower-roman;}}
\Css{.enumerate4    {list-style-type:upper-alpha;}}
>>>

\<\><<<
\:CheckOption{html+} \if:Option
  \Configure{enumerate}
   {%
    {style="list-style-type:decimal"}%
    {style="list-style-type:lower-alpha"}%
    {style="list-style-type:lower-roman"}%
    {style="list-style-type:upper-alpha"}%
   }   
\else
  \Log:Note{for stricter html code,
                      use the command line option `html+'}
  \Configure{enumerate}{%
    {type="\theenumi"}%
    {type="\theenumii"}%
    {type="\theenumiii"}%
    {type="\theenumiv"}}
\fi
>>>

%  \Configure{enumerate}{{type="1"}{type="a"}{type="i"}{type="A"}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Prosper}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\<prosper lists\><<<
\ConfigureEnv{Itemize}
   {\ifvmode \IgnorePar\fi \EndP}{|<try env inline par|>}
   {}{}
\ConfigureList{Itemize}%
   {\EndP\HCode{<ul \a:LRdir class="itemize\expandafter\the
          \csname @itemdepth\endcsname">}%
       |<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\EndP\HCode{</li></ul>}\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</li>}\DeleteMark}
   {\HCode{<li class="itemize">}}
>>>

\<prosper lists\><<<
\ConfigureEnv{itemstep}
   {\ifvmode \IgnorePar\fi
    \EndP\HCode{<ul \a:LRdir class="itemstep\expandafter\the
          \csname @itemdepth\endcsname">}%
       |<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\ifvmode \IgnorePar\fi\EndP
    \HCode{</li></ul>}\ShowPar}
   {}
   {}
\ConfigureList{itemstep}
   {}
   {}
   {\end:itm \global\def\end:itm{\EndP\Tg</li>}\DeleteMark}
   {\HCode{<li class="itemize\ifnum
                 \c@item@step>\c@overlaysCount -hide\fi">}}
\Css{li.itemize-hide {visibility:hidden;}}
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Jeep}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%




\<configure html-speech jeep\><<<
\ConfigureEnv{outline}
   {}{|<try env inline par|>}{}{}
\ConfigureList{outline}%
   {|<enumerate I jeep|>}
   {|<enumerate II|>}
   {|<enumerate III|>}
   {|<enumerate IV|>}
>>>

\<enumerate I jeep\><<<
\EndP\HCode{<ol type="1"
      class="enumerate\expandafter\the\csname @enumdepth\endcsname"
      \a:LRdir
     >}|<save end:itm|>\global\let\end:itm=\empty
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Description}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<description 4\><<<
\ConfigureList{description}%
   {\EndP\HCode{<dl \a:LRdir class="description">}%
      |<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\EndP\HCode{</dd></dl>}\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</dd>}\HCode{<dt
        class="description">}\bgroup \bf}
   {\egroup\EndP\HCode{</dt><dd\Hnewline class="description">}}
>>>

\<32,4 report,book\><<<
\ConfigureEnv{description}{\IgnorePar}{}{}{}
>>>

\<configure html-speech scrbook\><<<
\ConfigureEnv{description}{\IgnorePar}{}{}{}
>>>

\<configure html-speech scrreprt\><<<
\ConfigureEnv{description}{\IgnorePar}{}{}{}
>>>

\<ams art,proc,book\><<<
|<description 4|>
\ConfigureEnv{description}{\IgnorePar}{}{}{}
>>>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{List Utilities}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



Latex allows groups like the following, so we need  global \verb+\end:itm+

\begin{verbatim}
\begin{enumerate}
{\item Line 1}
{\item Line 2}
\end{enumerate}
\end{verbatim}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{mdwlist}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech mdwlist\><<<
\ConfigureEnv{itemize*}
   {\ifvmode \IgnorePar\fi \EndP}{|<try env inline par|>}
   {}{}
\ConfigureList{itemize*}%
   {\EndP\HCode{<ul \a:LRdir class="itemize\expandafter\the
          \csname @itemdepth\endcsname">}%
       |<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\EndP\HCode{</li></ul>}\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</li>}\DeleteMark}
   {\HCode{<li class="itemize">}}
\ConfigureEnv{enumerate*}
   {}{|<try env inline par|>}{}{}
\ConfigureList{enumerate*}%
   {|<enumerate I|>}
   {|<enumerate II|>}
   {|<enumerate III|>}
   {|<enumerate IV|>}
\ConfigureList{description*}%
   {\EndP\HCode{<dl \a:LRdir class="description">}%
      |<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\EndP\HCode{</dd></dl>}\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</dd>}\HCode{<dt
        class="description">}\bgroup \bf}
   {\egroup\EndP\HCode{</dt><dd\Hnewline class="description">}}
\ConfigureList{basedescript}
   {\EndP\HCode{<dl \a:LRdir class="basedescript">}%
      \PushMacro\end:itm \global\let\end:itm=\empty}
   {\PopMacro\end:itm \global\let\end:itm \end:itm
      \EndP\HCode{</dd></dl>}\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</dd>}\HCode{<dt
      class="basedescript">}\bgroup \bf}
   {\egroup\EndP\HCode{</dt><dd\Hnewline class="basedescript">}}
>>>




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Index}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{LaTeX}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<config book-report-article\><<<
|<book-report-article index|>
>>>



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Scr}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<32,4 report,book\><<<
\Configure{@begin}{theindex}{\ifx \indexname\empty \else
    \chapter*{\indexname}\fi}
>>>

\<configure html-speech article\><<<
\Configure{@begin}{theindex}{\ifx \indexname\empty \else
    \section*{\indexname}\fi}
>>>


\<scr report,book\><<<
\Configure{@begin}{theindex}{\ifx \indexname\empty \else
    \chapter*{\indexname}\fi}
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{multiind}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\<configure html-speech multind\><<<
\Configure{@begin}{theindex}
   {\ifx \indexname\empty \else|<toc for multind|>\fi}
>>>


% \ifx \indexname\empty \else
%       \ifx\chapter\:Undef \section*{\indexname}\else
%                           \chapter*{\indexname}\fi
%       \let\indexname=\empty 
%     \fi
%     


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Index}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<configure html-speech index\><<<
\Configure{NoSection}
  {\let\sv:index|=\p@index \let\sv:label|=\label 
   \let\sv:newline|=\newline \def\newline{ }%
   \def\p@index[##1]{\@gobble}\let\label|=\@gobble 
   |<nolink ref|>%
  }
  {\let\p@index|=\sv:index \let\label|=\sv:label 
   |<restore ref|>%
   \let\newline|=\sv:newline
  }
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{texinfo}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<configure html-speech texinfo\><<<
\Configure{index}
  {\IgnorePar\leavevmode\EndP\Tg<div class="index">}
  {\IgnorePar\EndP\Tg</div>}
  {\leavevmode\Tg<span class="entry">}
  {\Tg</span>\Tg<br />\IgnorePar}
>>>



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{ConTeXt}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%





\<configure html-speech context\><<<
\catcode`\!=11
|<context etc|>
|<context sectioning|>
|<context system|>
|<context toc|>
|<context description|>
|<context item group|>
|<context verbatim|>
|<context spacing|>
|<context floats|>
|<context tabs|>
|<context tables|>
|<context index|>
|<context cross references|>
\catcode`\!=12
>>>

\<context etc\><<<
\NewConfigure{-@@ly}{2}
>>>

\<context cross references\><<<
\Configure{-@@ur}
   {\HCode{<span class="url">}}
   {\HCode{</span>}}
>>>


\<context chapter name\><<<
\v!hoofdstuk 
>>>

\<context section name\><<<
\v!paragraaf 
>>>

\<context subsection name\><<<
\v!sub \v!paragraaf 
>>>

\<context subsubsection name\><<<
\v!sub \v!sub \v!paragraaf
>>>

\<context subsubsubsection name\><<<
\v!sub \v!sub \v!sub \v!paragraaf
>>>

\<context subsubsubsubsection name\><<<
\v!sub \v!sub \v!sub \v!sub \v!paragraaf 
>>>



\<context sectioning\><<<
\Configure{sectie}
   {\gHAdvance \sec:Level by 1\relax
    \ifnum \sec:Level=1 
        \ifvmode \IgnorePar\fi \EndP 
        \HCode{<div class="\cur:Name">}%
    \else
        \HCode{<span class="\cur:Name">}%
    \fi
   }
   {\ifnum \sec:Level=1 
        \ifvmode \IgnorePar\fi \EndP 
        \HCode{</div>}%
    \else
        \HCode{</span>}%
    \fi
    \gHAdvance \sec:Level by -1\relax
   }
\HAssign\sec:Level=0
>>>




\<context sectioning\><<<
\def\:tmp#1#2{%
  \ConfigureMark{#1}
     {\HCode{<span class="titlemark">}\finalsectionnumber
      \HCode{</span>}}
  \Configure{#1}{}{}
     {\ifvmode \IgnorePar\fi \EndP\IgnorePar
      \HCode{<#2 class="#1Head"\a:LRdir>}\NoFonts
      \TitleMark\space\HtmlParOff}
     {\EndNoFonts \HCode{</#2>}\HtmlParOn 
      \IgnoreIndent \par \ShowPar}
  \Configure{chapterTITLE+}{\finalsectionnumber\space##1}
  \ifx \end:secs\empty \else
    \edef\:temp{\noexpand\Configure{end#1}{\end:secs}}\:temp
  \fi
  \edef\end:secs{\end:secs,#1}%
  \NewConfigure{#1-ko}{2}
}
\def\end:secs{}
\def\:tempd#1{\edef\:temp{\noexpand\:tmp{#1}}\:temp}
\:tempd{|<context chapter name|>}{h1}
\:tempd{|<context section name|>}{h2}
\:tempd{|<context subsection name|>}{h3}
\:tempd{|<context subsubsection name|>}{h4}
\:tempd{|<context subsubsubsection name|>}{h5}
\:tempd{|<context subsubsubsubsection name|>}{h5}
>>>

\<context sectioning NO\><<<
\ConfigureMark{part}
   {\HCode{<span class="titlemark">}\finalsectionnumber
    \HCode{</span>}}
\Configure{part}{}{}
   {\ifvmode \IgnorePar\fi \EndP\IgnorePar
    \HCode{<h1 class="partHead"\a:LRdir>}\NoFonts
    \TitleMark\space\HtmlParOff}
   {\EndNoFonts \HCode{</h1>}\HtmlParOn \IgnoreIndent \par}
\Configure{partTITLE+}{\finalsectionnumber\space#1}
>>>

\<context sectioning NO\><<<
\ConfigureMark{chapter}
   {\HCode{<span class="titlemark">}\finalsectionnumber
    \HCode{</span>}}
\Configure{chapter}{}{}
   {\ifvmode \IgnorePar\fi \EndP\IgnorePar
    \HCode{<h2 class="chapterHead"\a:LRdir>}\NoFonts
    \TitleMark\space\HtmlParOff}
   {\EndNoFonts \HCode{</h2>}\HtmlParOn 
    \IgnoreIndent \par \ShowPar}
\Configure{chapterTITLE+}{\finalsectionnumber\space#1}
\Configure{endsection}{part}
>>>



\<context toc\><<<
\Configure{placecontent}
   {\ifvmode \IgnorePar\fi \EndP
    \def\toc:br{\def\toc:br{\HCode{<br\xml:empty>}}}%
    \HCode{<div class="tableofcontents">}\IgnorePar}
   {}
   {\IgnorePar\EndP\HCode{</div>}\ShowPar}
   {} {}
\Configure{contenthead}
    {\ifvmode \IgnorePar\fi \EndP \HCode{<h2>}\NoFonts}
    {\ifvmode \IgnorePar\fi \EndNoFonts \HCode{</h2>}\par}
>>>



\<context toc\><<<
\ConfigureToc{part}
  {\toc:br
   \HCode{<span class="partToc"><span class="toc-mark">}}
  {\HCode{</span>}~}
  {}
  {\HCode{</span>}}
>>>




\<context toc\><<<
\ConfigureToc{chapter}
  {\toc:br
   \HCode{<span class="chapterToc"><span class="toc-mark">}}
  {\HCode{</span>}~}
  {}
  {\HCode{</span>}}
>>>


\<context toc\><<<
\ConfigureToc{section}
  {\toc:br
   \HCode{<span class="sectionToc"><span class="toc-mark">}}
  {\HCode{</span>}~}
  {}
  {\HCode{</span>}}
>>>


\<context toc\><<<
\ConfigureToc{subsection}
  {\toc:br
   \HCode{<span class="subsectionToc"><span class="toc-mark">}}
  {\HCode{</span>}~}
  {}
  {\HCode{</span>}}
>>>


\<context toc\><<<
\ConfigureToc{subsubsection}
  {\toc:br
   \HCode{<span class="subsubsectionToc"><span class="toc-mark">}}
  {\HCode{</span>}~}
  {}
  {\HCode{</span>}}
>>>


\<context toc\><<<
\ConfigureToc{subsubsubsection}
  {\toc:br
   \HCode{<span class="subsubsubsectionToc"><span class="toc-mark">}}
  {\HCode{</span>}~}
  {}
  {\HCode{</span>}}
>>>


\<context toc\><<<
\ConfigureToc{subsubsubsubsection}
  {\toc:br
   \HCode{<span class="subsubsubsubsectionToc"><span class="toc-mark">}}
  {\HCode{</span>}~}
  {}
  {\HCode{</span>}}
>>>



\<context spacing\><<<
\Configure{narrower}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="narrower">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Css{div.narrower {margin-left:2em; margin-right:2em;}}
>>>



\<context spacing\><<<
\Configure{midaligned}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<div class="midaligned">}}
   {\ifvmode \IgnorePar\fi \EndP  \HCode{</div>}\par}
\Configure{leftaligned}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<div class="leftaligned">}}
   {\ifvmode \IgnorePar\fi \EndP  \HCode{</div>}\par}
\Configure{rightaligned}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<div class="rightaligned">}}
   {\ifvmode \IgnorePar\fi \EndP  \HCode{</div>}\par}
\Css{div.midaligned {text-align:center;}}
\Css{div.leftaligned {text-align:left;}}
\Css{div.rightaligned {text-align:right;}}
>>>


\<context system\><<<
\Configure{startstop}
   {\ifvmode \IgnorePar \EndP
       \HCode{<div class="startstop">}\par
       \def\end:startstop{\ifvmode \IgnorePar \EndP \fi
                          \HCode{</div>}\par}%
    \else
       \HCode{<span class="startstop">}%
       \def\end:startstop{\ifvmode \IgnorePar \HCode{</span>}\par
                          \else \HCode{</span>}\fi}%
    \fi}
   {\end:startstop}
>>>


\<context description\><<<
\Configure{description-item}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{<dl class="description-item">
           <dt class="description-dt">}\everypar{}}
   {\HCode{</dt><dd class="description-dd">}\everypar{\HtmlPar}\par}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{</dd></dl>}}
>>>

\<context description\><<<
\Configure{description-word}
   {\HCode{<span class="description-word">}}
   {\ifvmode \IgnorePar \HCode{</span>}\par
                          \else \HCode{</span>}\fi}
>>>



\<context item group\><<<
\Configure{itemgroup}
   {\ifvmode\IgnorePar\fi \EndP
    \HCode{<dl class="\currentitemgroup">}\let\end:dd=\empty}
   {\ifvmode\IgnorePar\fi \EndP \end:dd \HCode{</dl>}}
\Configure{head-listitem}
   {\ifvmode\IgnorePar\fi \EndP
    \end:dd \HCode{<dt class="\currentitemgroup
                              -head">}}
   {\ifvmode\IgnorePar\fi \EndP
    \HCode{</dt><dd class="\currentitemgroup -head%
                               ">}\def\end:dd{\HCode{</dd>}}}
\Configure{symbol-listitem}
   {\ifvmode\IgnorePar\fi \EndP
    \end:dd \HCode{<dt class="\currentitemgroup
                              -symbol">}}
   {\ifvmode\IgnorePar\fi \EndP
    \HCode{</dt><dd class="\currentitemgroup -symbol%
                               ">}\def\end:dd{\HCode{</dd>}}}
\Configure{other-listitem}
   {\ifvmode\IgnorePar\fi \EndP
    \end:dd \HCode{<dt class="\currentitemgroup
                              -other">}}
   {\ifvmode\IgnorePar\fi \EndP
    \HCode{</dt><dd class="\currentitemgroup -other%
                               ">}\def\end:dd{\HCode{</dd>}}}
>>>

\<context verbatim\><<<
\Configure{typing}
   {\ifvmode \IgnorePar\fi \EndP \par \ShowPar
    \def\verb:par{%
      \HCode{<div class="typing">}%
      \gdef\verb:par{\HCode{<br />}}}%
   }
   {\ifvmode \IgnorePar\fi \HCode{</div>}\par}
   {\verb:par}
   {\HCode{\string&}\HChar{-35}\HCode{x00A0;}}
\Css{div.typing
       {font-family: monospace; white-space: nowrap; }}
>>>


\<context floats\><<<
\Configure{plaatsblok}
   {\ifvmode \IgnorePar\fi \EndP\HCode{<div class="float">}}
   {\ifvmode \IgnorePar\fi \EndP\HCode{</div>}}
\Configure{caption}
   {\HCode{<span class="caption-label">}}   {\HCode{</span>}}
   {\HCode{<span class="caption-text">}}   {\HCode{</span>}}
>>>

Q. Where placefigure is declared?

\<context floats\><<<
\NewConfigure{figure}{2}
\Configure{figure}
   {\ifvmode \IgnorePar\fi \EndP\HCode{<div class="figure">}}
   {\ifvmode \IgnorePar\fi \EndP\HCode{</div>}}
>>>


\<context floats\><<<
\Configure{externalfigure}{\Picture[fig]}
>>>

\<context floats\><<<
\Configure{figure-li}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{<div class="entry"><span class="num">}\par\IgnorePar}
   {\HCode{</span><span class="title">}}
   {\HCode{</span><span class="page"><!--}}
   {\HCode{--></span></div>}}
\Configure{-@@kjfigure}
   {\HCode{<span class="figure-caption">}}
   {\HCode{</span>}}
>>>


\<context toc NO\><<<
\Configure{title-ko}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{<div class="toc-title">}%
    \def\end:ko{\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}\bgroup 
      \aftergroup\end:ko
      \Configure{title-ko}{\bgroup}{\egroup}%
   }
   {\egroup }
>>>



\<context tabs\><<<
\Configure{\v!tabulate}
   {\ifvmode \IgnorePar\fi 
    \EndP \HCode{<pre class="\v!tabulate">}}
   {\ifvmode\IgnorePar\fi\HCode{</pre>}\par}
>>>



\<context tables\><<<
\Configure{table}
   {\PushStack\Table:Stck\TableNo
    \PushStack\Row:Stck\HRow     \HAssign\HRow=0\relax
    \PushStack\Col:Stck\Prev:Col
    \gHAdvance\Table:No by 1\relax
    \HAssign\TableNo=\Table:No\relax
    \ifvmode \IgnorePar\fi \EndP\halignTB{table}\putVBorder
}
   {\HCode{</table>}%
    \PopStack\Table:Stck\TableNo
    \PopStack\Row:Stck\HRow
    \PopStack\Col:Stck\Prev:Col
   }
   {\gHAdvance\HRow by 1
    \HCode{<tr class="TBL-\TableNo-\HRow">}%
    \currentTABLEcolumn=0 \gHAssign\Prev:Col=0 }
   {\HCode{</tr>}}
   {\HAssign\HCol=\the\currentTABLEcolumn\relax
    \HAssign\HMultispan=\HCol\relax
    \HAdvance\HMultispan by -\Prev:Col\relax
    \gHAssign\Prev:Col=\HCol\relax
    \HAdvance\HCol by 1\relax
    \ifnum \HMultispan>1  \HAdvance\HCol by 1
                          \HAdvance\HCol by -\HMultispan\relax \fi
    \HCode{\Hnewline<td class="TBL-\TableNo-\HRow-\HCol" }%
    \halignTD
    \HCode{ \ifnum \HMultispan>1  colspan="\HMultispan" \fi >}%
\gdef\dd:table{%
      \gdef\dd:table{}%
      \x:tableCell
      \d:table}%
\def\x:tableCell{\e:tableCell \global\let\x:tableCell=\empty}%
}
   {\HCode{</td>}}

\HAssign\Table:No=0
\HAssign\TableNo=0
\HAssign\Prev:Col=0
\HAssign\HRow=0
>>>


\<context tables\><<<
\Configure{tableCell}
   {\e:table\HCode{<div class="cell-1">}\ShowPar\par}
   {\e:table\HCode{<div class="cell-2">}\ShowPar\par}
   {\e:table\HCode{<div class="cell-3">}\ShowPar\par}
   {\e:table\HCode{<div class="cell-4">}\ShowPar\par}
   {\ifvmode \IgnorePar\fi \EndP\HCode{</div>}\f:table}
>>>


\<context tables\><<<
\let\VBorder\empty   \let\AllColMargins\empty
\Configure{VBorder}
   {\let\VBorder\empty
    \let\AllColMargins\empty
    \global\let\GROUPS\empty
    \HAssign\NewGroup = 0
   }
   {%
      \let\:temp\TableNo \let\TableNo=\relax
      \edef\VBorder{\VBorder\ifnum \NewGroup> 0 </colgroup>\fi}%
      \let\TableNo\:temp
      \HAssign\NewGroup = 0
    \gdef\GROUPS{rules="groups"}%
   }
   {\Advance:\NewGroup by 1
      \let\:temp\TableNo \let\TableNo=\relax
      \ifnum \NewGroup=1 \edef\VBorder{\VBorder<colgroup
          id="TBL-\TableNo-\ar:cnt g">}\fi
      \edef\VBorder{\VBorder<col\Hnewline id="TBL-\TableNo
         -\ar:cnt"\xml:empty>}\xdef\AllColMargins{\AllColMargins1}%
      \let\TableNo\:temp
   }
   {%
      \let\:temp\TableNo \let\TableNo=\relax
      \edef\AllColMargins{\AllColMargins 0}%
      \let\TableNo\:temp
   }

\Css{table.table td {vertical-align:top;}}
>>>

\<context tables\><<<
\Css{table.table td { padding-left:3pt; padding-right:3pt; }}

\Configure{halignTB}{\HCode{<table }}{\HCode{>}}
\Configure{halignTB<>}{table}{\HCode{class="table"\Hnewline
   cellspacing="0" cellpadding="0" \GROUPS\Hnewline
   frame="\ifx \GROUPS\empty void\else border\fi" id="TBL-\TableNo-"
   }<>\HAlign}
>>>

\<context tables\><<<
\Configure{TABLElongrule}{\HCode{<hr />}}
\Configure{TableHL}
  {\TABLEnoalign{%
  \HCode{<tr>}%
\tmp:cnt=\maxTABLEcolumn
\advance\tmp:cnt by 2
\HCode{<td colspan="\the\tmp:cnt"><hr /></td>}%
  \HCode{</tr>}}%
}
>>>


\<context tables\><<<
\Configure{halignTD} {}{}
   {<}{\HCode{ % align="left"
               style="white-space:nowrap; text-align:left;"}}
   {-}{\HCode{ % align="center"
               style="white-space:nowrap; text-align:center;"}}
   {>}{\HCode{ % align="right"
               style="white-space:nowrap; text-align:right;"}}
   {l}{\HCode{ % align="left"
               style="white-space:nowrap; text-align:left;"}}
   {c}{\HCode{ % align="center"
               style="white-space:nowrap; text-align:center;"}}
   {r}{\HCode{ % align="right"
               style="white-space:nowrap; text-align:right;"}}
   {^}{\HCode{ valign="top" style="white-space:nowrap;"}}
   {=}{\HCode{ valign="baseline" style="white-space:nowrap;"}}
   {||}{\HCode{ valign="middle" style="white-space:nowrap;"}}
   {_}{\HCode{ valign="bottom" style="white-space:nowrap;"}}
   {p}{\HCode{ % align="left"
               style="white-space:wrap; text-align:left;"}\Protect\a:HColWidth}
   {m}{\HCode{ % align="left"
               style="white-space:nowrap; text-align:left;" valign="middle"}}
   {b}{\HCode{ % align="left"
               style="white-space:nowrap; text-align:left;" valign="baseline"}}
   {}
>>>


\<context index\><<<
\Configure{index}
   {\Link{}{in-\nextinternalreference}\EndLink}
\Configure{indexpage}{%
   \gHAdvance\Idx:No by 1 #1%
   {#2}%
   {#3}%
   {#4}%
   {\Link{in-#3}{}\Idx:No\EndLink}}
\HAssign\Idx:No = 0
>>>

\<context index\><<<
\Configure{indexchar}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<div class="indexchar">}}
   {\HCode{</div>}\par}
\Css{div.indexchar{margin-top:0.2em; margin-bottom:0.1pt;}}
>>>

\<context index\><<<
\Configure{index-env}
   {\ifvmode \IgnorePar\fi \EndP\HCode{<div class="index-env">}\par}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}\par}
\Css{div.index-env p{margin-top:0em; margin-bottom:0em;}}
\NewConfigure{-@@idindex}{2}
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{letters}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<configure html-speech g-brief\><<<
\Configure{g-brief}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="g-brief">}%
    \let\sv:@imakebox\@imakebox
    \let\sv:br=\\ \def\\{\HCode{</tr><tr>}}%
    \let\:clearpage\clearpage
    \def\clearpage{\let\clearpage\:clearpage
       \ifvmode \IgnorePar\fi \EndP
       \HCode{<table class="date"><tr>}%
       \IgnorePar
    }%
    \let\brf:par\par
    \def\@imakebox[##1][##2]##3{%
      \HCode{<td class="makebox-##2">}%
      \bgroup \let\\=\sv:br \let\@imakebox\sv:@imakebox
              \let\par\sv:par
                ##3%
      \egroup
      \HCode{</td>}%
      \def\par{\let\par\brf:par
         \ifvmode \IgnorePar\fi \EndP
         \HCode{</tr></table>}}%
    }%
   }
   {\let\\=\sv:br \let\@imakebox\sv:@imakebox
    \ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="end-g-brief">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Css{table.date {width:100\%; margin-top:2em;}}
\Css{table.date td{white-space: nowrap;}}
>>>

\<configure html-speech g-brief\><<<
\Configure{letterfoot}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="letterfoot">}}
   {}
   {\HCode{</div>}}  
\Configure{letterhead}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{<div class="letterhead"><table
                           class="from"><tr><td class="name">}}
   {\HCode{</td><td class="address">}}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{</td></tr></table><div class="retouradresse">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div><div class="postage">}}
   {\HCode{</div></div>}}  
\Css{.letterfoot .tabular {text-align: left; margin-top:4em; }}
\Css{table.from {width:100\%; margin-bottom:2em;}}
\Css{table.from .address table {width:100\%;}}
\Css{.makebox-r {text-align:right;}}
>>>

\<configure html-speech g-brief\><<<
\Configure{datumtext}
  {\HCode{<span class="datumtext">}}
  {\HCode{</span>}}
\Configure{datum}
  {\HCode{<span class="datum">}}
  {\HCode{</span>}\IgnorePar}
\Configure{anrede}
  {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="anrede">}}
  {\HCode{</div>}}
\Configure{betreff}
  {\ifvmode \IgnorePar\fi \EndP\HCode{<div class="betreff">}}
  {\HCode{</div>}}
\Css{.betreff{margin-top:2em; margin-bottom:1em;}}
\Configure{gruss}
   {\HCode{<span class="gruss">}}
   {\HCode{</span>}}
\Configure{unterschrift}
   {\HCode{<span class="unterschrift">}}
   {\HCode{</span>}}
\Configure{anlagen}
   {\HCode{<span class="anlagen">}}
   {\HCode{</span>}}
\Configure{verteiler}
   {\HCode{<span class="verteiler">}}
   {\HCode{</span>}}
\Configure{sprache}
  {\HCode{<span class="sprache">}}
  {\HCode{</span>}}
\Configure{telefontex}
  {\HCode{<span class="telefontex">}}
  {\HCode{</span>}}
\Configure{telefaxtext}
  {\HCode{<span class="telefaxtext">}}
  {\HCode{</span>}}
\Configure{telextext}
  {\HCode{<span class="telextext">}}
  {\HCode{</span>}}
\Configure{emailtext}
  {\HCode{<span class="emailtext">}}
  {\HCode{</span>}}
\Configure{httptext}
  {\HCode{<span class="httptext">}}
  {\HCode{</span>}}
\Configure{banktext}
  {\HCode{<span class="banktext">}}
  {\HCode{</span>}}
\Configure{blztext}
  {\HCode{<span class="blztext">}}
  {\HCode{</span>}}
\Configure{betrefftext}
  {\HCode{<span class="betrefftext">}}
  {\HCode{</span>}}
\Configure{ihrzeichentext}
  {\HCode{<span class="ihrzeichentext">}}
  {\HCode{</span>}}
\Configure{ihrschreibentext}
  {\HCode{<span class="ihrschreibentext">}}
  {\HCode{</span>}}
\Configure{meinzeichentext}
  {\HCode{<span class="meinzeichentext">}}
  {\HCode{</span>}}
\Configure{unserzeichentext}
  {\HCode{<span class="unserzeichentext">}}
  {\HCode{</span>}}
\Configure{anlagen}
  {\HCode{<span class="anlagen">}}
  {\HCode{</span>}}
\Configure{adresse}
  {\HCode{<span class="adresse">}}
  {\HCode{</span>}} 
\Configure{bank}
  {\HCode{<span class="bank">}}
  {\HCode{</span>}} 
\Configure{blz}
  {\HCode{<span class="blz">}}
  {\HCode{</span>}} 
\Configure{email}
  {\HCode{<span class="email">}}
  {\HCode{</span>}} 
\Configure{gruss}
  {\HCode{<span class="gruss">}}
  {\HCode{</span>}}
\Configure{grussskip}
  {\HCode{<span class="grussskip">}}
  {\HCode{</span>}}
\Configure{http}
  {\HCode{<span class="http">}}
  {\HCode{</span>}} 
\Configure{ihrschreiben}
  {\HCode{<span class="ihrschreiben">}}
  {\HCode{</span>}} 
\Configure{ihrzeichen}
  {\HCode{<span class="ihrzeichen">}}
  {\HCode{</span>}} 
\Configure{konto}
  {\HCode{<span class="konto">}}
  {\HCode{</span>}} 
\Configure{land}
  {\HCode{<span class="land">}}
  {\HCode{</span>}} 
\Configure{meinzeichen}
  {\HCode{<span class="meinzeichen">}}
  {\HCode{</span>}} 
\Configure{name}
  {\HCode{<span class="name">}}
  {\HCode{</span>}} 
\Configure{ort}
  {\HCode{<span class="ort">}}
  {\HCode{</span>}} 
\Configure{postvermerk}
  {\HCode{<span class="postvermerk">}}
  {\HCode{</span>}} 
\Configure{retouradresse}
  {\HCode{<span class="retouradresse">}}
  {\HCode{</span>}} 
\Css{div.retouradresse { margin-bottom:2em; }}
\Configure{strasse}
  {\HCode{<span class="strasse">}}
  {\HCode{</span>}} 
\Configure{telefax}
  {\HCode{<span class="telefax">}}
  {\HCode{</span>}} 
\Configure{telefon}
  {\HCode{<span class="telefon">}}
  {\HCode{</span>}} 
\Configure{telex}
  {\HCode{<span class="telex">}}
  {\HCode{</span>}} 
\Configure{unterschrift}
  {\HCode{<span class="unterschrift">}}
  {\HCode{</span>}} 
\Configure{verteiler}
  {\HCode{<span class="verteiler">}}
  {\HCode{</span>}} 
\Configure{zusatz}
  {\HCode{<span class="zusatz">}}
  {\HCode{</span>}} 
>>>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{mwcls}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<mwcls index\><<<
\Configure{@begin}{theindex}{\section*{\indexname}}
\Configure{theindex}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<div class="theindex">}\let\end:theidx\empty}
   {\end:theidx\HCode{</div>}}
   {} {\HCode{<br\xml:empty>}\hfil\break}
   {\ \ \ \ } {\HCode{<br\xml:empty>}\hfil\break}
   {\ \ \ \ \ \ \ \ } {\HCode{<br\xml:empty>}\hfil\break}
   {\hbox{\end:theidx\HCode{<p class="theindex">}}%
    \def\end:theidx{\HCode{</p>}}}
>>>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Into Columns}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<book-report-article index\><<<
\def\:temp#1index=#2,#3|<par del|>{%
   \ifnum #2>1 |<conf multi cols|>\fi
   \def\:temp{#2}%
}
\expandafter\:temp\Preamble,index=0,|<par del|>
\ifnum \:temp<2
   |<one-col index|>
\else
   |<mult-col index|>
\fi
>>>


The \verb=\Configure{IndexColumns}= instruction is to allow documents
that have more than one index to employ different number of columns.
The `index=i' provides the initial setting.


\<one-col index\><<<
\Log:Note{for i-columns index,
               use the command line option `index=i' (e.g., index=2)}
\Configure{theindex}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<div class="theindex">}\let\end:theidx|=\empty}
   {\end:theidx\HCode{</div>}}
   {} {\hfil\break\HCode{<br\xml:empty>}}
   {\ \ \ \ } {\hfil\break\HCode{<br\xml:empty>}}
   {\ \ \ \ \ \ \ \ } {\hfil\break\HCode{<br\xml:empty>}}
   {\hbox{\end:theidx\HCode{<p class="theindex">}}%
    \def\end:theidx{\HCode{</p>}}}
>>>

\<conf multi cols\><<<
\NewConfigure{IndexColumns}{1}
\Configure{IndexColumns}{#2}
>>>


\<mult-col index\><<<
\Log:Note{the number of columns    
   requested by the option `index=\a:IndexColumns' can 
   be modified through the command \string\Configure{IndexColumns}{i}}
\Configure{theindex}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<div class="theindex">}%
    |<index mult cols|>\let\end:theidx|=\empty}
   {\end:theidx
    |<end index mult cols|>\HCode{</div>}}
   {} {\hfil\break\HCode{<br\xml:empty>}}
   {\ \ \ \ } {\hfil\break\HCode{<br\xml:empty>}}
   {\ \ \ \ \ \ \ \ } {\hfil\break\HCode{<br\xml:empty>}}
   {%\ifvmode \EndP\fi
    % \hbox{\end:theidx\HCode{<p class="theindex">}}%
    % \def\end:theidx{\HCode{</p>}}
    \parindent=0pt
   }%
>>>


%   {} 
%   {\ifvmode \else \hfil\HCode{<br\xml:empty>}\break\fi}
%   {\ \ \ \ } {\hfil\HCode{<br\xml:empty>}\break}
%   {\ \ \ \ \ \ \ \ } {\hfil\HCode{<br\xml:empty>}\break}

\<index mult cols\><<<
\Configure{HColumns}
     {\IgnorePar\EndP
         \HCode{<table \Hnewline class="index" width="100\%"
                     cellspacing="15"><tr valign="top">}}
     {\HCode{</tr></table>}}
     {\HCode{<td>}\ColMag{1.1}}
     {\IgnorePar\EndP\HCode{</td>}}
  \HColumns{\a:IndexColumns}%
  \everypar{\HtmlPar}%
  \Configure{HtmlPar}{}{\HCode{<br class="index-segment"\xml:empty>}}{}{}%
  \par\ShowPar
>>>

\<end index mult cols\><<<
\ifvmode\IgnorePar\fi \EndP\EndHColumns
>>>

\<mult-col index\><<<
\def\add:col{\Advance:\:cols  -1 \HAdvance\HCol  1\relax
   \ifnum \:cols>0
      \c:Cols \vsplit0 to \tmp:dim  \d:Cols  \expandafter\add:col
   \fi}
\NewConfigure{HColumns}{4}
\def\c:Cols{\edef\sv:dim{\the\tmp:dim}\c:HColumns}
\def\d:Cols{\d:HColumns \tmp:dim\sv:dim }
\def\ColMag#1{\tmp:dim  #1\tmp:dim}
\def\HColumns#1{%
   \a:HColumns
   \HAssign\:cols#1  \setbox0=\vbox\bgroup
   \divide\hsize  #1  }
\def\EndHColumns{\egroup   \HAssign\HCol0
  \tmp:dim\ht0  \advance\tmp:dim  \dp0  \divide\tmp:dim  \:cols
  \add:col \c:Cols \box0 \d:Cols \b:HColumns}
>>>



%%%%%%%%%%%%%
\section{Glossary}
%%%%%%%%%%%%%

\<configure html-speech glossary\><<<
\Configure{gloskip}{list}{\item[]\HCode{<p class="gloskip"></p>}}
\Configure{gloskip}{altlist}{\item[]\HCode{<p class="gloskip"></p>}}
\Configure{gloskip}{super}{\cr\HCode{<p class="gloskip"></p>}}
\Configure{gloskip}{long}{\cr\HCode{<p class="gloskip"></p>}}
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Captions}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\<config captions\><<<
\Configure{caption}{\HCode{\if:nopar  \else <br\xml:empty>\fi}
   \:xhtml{\IgnorePar\EndP}\HCode{<table class="caption"\Hnewline><tr 
    valign="baseline"  class="caption"><td class="id">}}
   {: } {\HCode{</td><td \Hnewline class="content">}} 
   {\HCode{</td></tr></table>}|<caption label comment|>}
\Css{.caption td.id{font-weight: bold; white-space: nowrap; }}
\Css{table.caption {text-align:center;}}
>>>


\<apa captions\><<<
\Configure{caption}{\HCode{\if:nopar  \else <br\xml:empty>\fi}
   \:xhtml{\IgnorePar\EndP}\HCode{<table class="caption"\Hnewline><tr 
    valign="baseline"  class="caption"><td class="id">}}
   { } {\HCode{</td><td \Hnewline class="content">}} 
   {\HCode{</td></tr></table>}|<caption label comment|>}
\Css{table.caption {text-align:left;}}
>>>

\<scr reprt/book captions\><<<
\Configure{caption}{\HCode{\if:nopar  \else <br\xml:empty>\fi}
   \:xhtml{\IgnorePar\EndP}\HCode{<div 
    class="caption"><table class="caption"\Hnewline><tr
    valign="baseline"  class="caption"><td class="id">}}
   {: } {\HCode{</td><td \Hnewline class="content">}}
   {\HCode{</td></tr></table></div>}|<caption label comment|>%
}
\Css{.caption td.id{font-weight: bold; white-space: nowrap; }}
\Css{div.cation {text-align:center;}}
>>>

\<amsppt captions\><<<
\Configure{caption}
   {\:xhtml{\IgnorePar\EndP}\HCode{<center>}}{}{\HCode{</center>}}
>>>

\<config span caption\><<<
\Configure{caption}
   {\HCode{<br /><span class="caption"><span class="id">}}
   {\HCode{</span>}: }{}{\HCode{</span><br />}}%
>>>


\<caption label comment\><<<
\HCode{<!--tex4ht:label?:
   \cur:th\:currentlabel\space-->}%
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Footnotes}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Originating Packages}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<latex ltfloat (footnotes)\><<<
|<latex footnotes|>
\:CheckOption{fn-in}\if:Option  
   |<inline footnote latex|>
\else   
   \Log:Note{for inline footnotes use
          command line option `fn-in'}
   |<offline footnote latex|>
\fi
>>>





\<configure html-speech plain\><<<
\:CheckOption{fn-in}\if:Option  
   |<inline footnote plain|>
\else   
   \Log:Note{for inline footnotes, use
          the command line option `fn-in'}
   |<offline footnote plain|>
\fi
>>>

\<maketitle footnote\><<<
\:CheckOption{fn-in}\if:Option  
   |<end-thanks author date and|>
\else
   |<config thanks author date and|>
\fi
>>>

\<revtex maketitle footnote\><<<
\:CheckOption{fn-in}\if:Option
   |<revtex end-thanks author date and|>
\else
   |<revtex config thanks author date and|>
\fi
>>>

\<JHEP maketitle footnote\><<<
\:CheckOption{fn-in}\if:Option  
   |<JHEP end-thanks author date and|>
\else
   |<JHEP thanks author date and|>
\fi
>>>





%%%%%%%%%%%%%%%%
\subsection{In-Line LaTeX}
%%%%%%%%%%%%%%%%

\<inline footnote latex\><<<
\:CheckOption{mouseover} \if:Option
   |<mouseover inline footnote mark|>
   |<mouseover inline footnote text|>
   |<mouseover inline footnote|>
   |<onmouseover footnote css|>
\else
   |<inline footnote mark|>
   |<inline footnote text|>
   |<inline footnote|>
\fi
>>>


\<inline footnote text\><<<
\Configure{footnotetext}
   {|<open inline footnote box|>%
    |<fn mark sup|>|<inline fn text /Link|>%
    \NoFonts
    \Tag{|<footnote id|>-bk}{}%
    \special{t4ht@(}%
   }
   {\special{t4ht@)}\EndNoFonts |<end inline fn text /Link|>|<fn mark end sup|>}
   {\expandafter\global\expandafter
       \let\csname (|<footnote id|>)\endcsname\def
    |<close inline footnote box|>}
>>>

\<inline footnote mark\><<<
\Configure{footnotemark}
   {|<fn mark sup|>|<inline fn mark /Link|>%
    \NoFonts
    \Tag{|<footnote id|>}{}}
   {\EndNoFonts
    |<end inline fn mark /Link|>|<fn mark end sup|>%
    \expandafter\global\expandafter
       \let\csname (|<footnote id|>-bk)\endcsname\def}
>>>




\<mouseover inline footnote text\><<<
\Configure{footnotetext}
   {|<open inline footnote box|>%
    |<js footnote|>%
    |<fn mark sup|>|<inline fn text /Link|>%
    \NoFonts   \Tag{|<footnote id|>-bk}{}%
   }
   {\EndNoFonts |<end inline fn text /Link|>|<fn mark end sup|>}
   {\expandafter\global\expandafter
       \let\csname (|<footnote id|>)\endcsname\def
    |<js /footnote|>%
    |<close inline footnote box|>}
>>>

\<mouseover inline footnote mark\><<<
\Configure{footnotemark}
   {|<fn mark sup|>|<mouseover inline fn mark /Link|>%
    \NoFonts
    \Tag{|<footnote id|>}{}}
   {\EndNoFonts
    |<end inline fn mark /Link|>|<fn mark sup|>%
    \expandafter\global\expandafter
       \let\csname (|<footnote id|>-bk)\endcsname\def}
>>>















\<inline fn text /Link\><<<
\ifTag{|<footnote id|>}
   {\expandafter\ifx\csname (|<footnote id|>)\endcsname\def
      \Link{|<footnote id|>-bk}{}%       
    \else
      \Link{|<footnote id|>-bk}{|<footnote id|>}%
    \fi
   }
   {\expandafter\ifx\csname (|<footnote id|>)\endcsname\def
    \else \Link{}{|<footnote id|>}\fi
   }%
>>>

\<end inline fn text /Link\><<<
\ifTag{|<footnote id|>}
   {\EndLink}
   {\expandafter\ifx\csname (|<footnote id|>)\endcsname\def
    \else \EndLink\fi
   }%
>>>



\<mouseover inline fn mark /Link\><<<
|<start js|>%
\ifTag{|<footnote id|>-bk}
   {\expandafter\ifx\csname (|<footnote id|>-bk)\endcsname\def
      \Link[ |<mouseover-footnote arguments|>\Hnewline
                    ]{|<footnote id|>}{}%       
    \else
      \Link[ |<mouseover-footnote arguments|>\Hnewline
                    ]{|<footnote id|>}{|<footnote id|>-bk}%
    \fi
   }
   {\expandafter\ifx\csname (|<footnote id|>-bk)\endcsname\def
    \else \Link[ |<mouseover-footnote arguments|>\Hnewline
                    ]{}{|<footnote id|>-bk}\fi
   }%
>>>







\<inline fn mark /Link\><<<
\ifTag{|<footnote id|>-bk}
   {\expandafter\ifx\csname (|<footnote id|>-bk)\endcsname\def
      \Link{|<footnote id|>}{}%       
    \else
      \Link{|<footnote id|>}{|<footnote id|>-bk}%
    \fi
   }
   {\expandafter\ifx\csname (|<footnote id|>-bk)\endcsname\def
    \else \Link{}{|<footnote id|>-bk}\fi
   }%
>>>

\<end inline fn mark /Link\><<<
\ifTag{|<footnote id|>-bk}
   {\EndLink}
   {\expandafter\ifx\csname (|<footnote id|>-bk)\endcsname\def
    \else \EndLink\fi
   }%
>>>




\<open inline footnote box\><<<
\SaveEndP\global\setbox\fn:box=\vtop\bgroup\ShowPar 
   \ifvoid\fn:box\else  \csname unvbox\endcsname\fn:box\fi
>>>

\<close inline footnote box\><<<
\EndP\egroup\RecallEndP
>>>  


\<save inline footnotes\><<<
\ifvoid \fn:box \else
   \expandafter \ifx \csname fn:box\body:level\endcsname\relax
      \csname newbox\expandafter\endcsname
                   \csname fn:box\body:level\endcsname
   \fi
   \global\expandafter\setbox\csname fn:box\body:level\endcsname=
      \vbox{\csname unvbox\endcsname\fn:box}%
\fi
\gHAdvance\body:level by 1
>>>

\<recall inline footnotes\><<<
\gHAdvance\body:level by -1
\expandafter \ifx \csname fn:box\body:level\endcsname\relax \else
   \global\setbox\fn:box=
      \vbox{\expandafter\ifvoid \csname fn:box\body:level\endcsname \else
          \csname unvbox\expandafter\endcsname
               \csname fn:box\body:level\endcsname\fi}%     
\fi
>>>

\<insert inline footnotes\><<<
\ifvmode \IgnorePar\fi\EndP  
\ifvoid \fn:box\else 
   \HCode{<div class="footnotes">}\box\fn:box\HCode{</div>}
   \IgnorePar\EndP
\fi
>>>


\<file tag into footnote\><<<
(L >>>

\<link tag to footnotetext\><<<
)Q>>>



\<mouseover inline footnote\><<<
\Configure{BODY}
   {|<save inline footnotes|>\:xhtml{\SaveEndP}\IgnorePar
       \HCode{<body\Hnewline\csname a:!BODY\endcsname 
     >}|<overDiv|>\ShowPar\par}
   {|<insert inline footnotes|>%
    \relax \ifnum \FileNumber=1
      |<ol-hauto mouseover-script|>%
    \fi
    \HCode{\Hnewline
     </body>}\:xhtml{\RecallEndP}|<recall inline footnotes|>}%
>>>

\<inline footnote\><<<
   \Configure{BODY}
      {|<save inline footnotes|>\:xhtml{\SaveEndP}\IgnorePar
          \HCode{<body\Hnewline\csname a:!BODY\endcsname >}\ShowPar\par}
      {|<insert inline footnotes|>\HCode{\Hnewline
        </body>}\:xhtml{\RecallEndP}|<recall inline footnotes|>}%
>>>
   

\<inline footnote latex\><<<
\Configure{crosslinks+}
   {\IgnorePar\EndP\HCode{|<show input line no|>%
                          <div class="crosslinks"><p class="noindent">}}
   {\HCode{</p></div>}\par\ShowPar}
   {|<insert inline footnotes|>%
    \ifvmode \IgnorePar\fi \EndP
    \HCode{|<show input line no|><div class="crosslinks"><p class="noindent">}}
   {\HCode{</p></div>}\par\ShowPar}
>>>

\<inline footnote latex\><<<
\Css{div.footnotes{border-top:solid 1px black;
   border-bottom:solid 1px black; 
   padding-bottom:1ex;
   padding-top:0.5ex;   
   margin-right:15\%; margin-top:2ex; 
   font-style:italic; font-size:85\%;}}
\Css{div.footnotes p{margin-top:0; margin-bottom:0; text-indent:0;}}
\ifx \fn:box\:UnDef \csname newbox\endcsname\fn:box \fi
\HAssign\body:level=0
>>>




%%%%%%%%%%%%%%%%
\subsection{Off-Line in latex}
%%%%%%%%%%%%%%%%


\<offline footnote latex\><<<
\:CheckOption{mouseover} \if:Option
  |<onmouseover offline footnote mark|>
  |<onmouseover offline footnote text|>
  |<onmouseover footnote css|>
  \AtEndDocument{|<ol-hauto mouseover-script|>}
\else \:CheckOption{frames-fn}  \if:Option
        |<frames footnote mark|>
        |<frames footnote text|>
      \else
        |<default offline footnote mark|>
        |<default offline footnote text|>
\fi   \fi
>>>

\<default offline footnote text\><<<
\Configure{footnotetext}
   {|<open footnote page|>%
    |<fn mark sup|>\Link{}{|<footnote id|>}%
    \NoFonts
   }
   {\EndNoFonts \EndLink|<fn mark end sup|>}
   {|<close footnote page|>}
>>>

\<default offline footnote mark\><<<
\Configure{footnotemark}
   {|<fn mark sup|>|<footnotemark link|>\NoFonts
    \Tag{|<footnote id|>}{}}
   {\EndNoFonts |<end footnotemark link|>|<fn mark end sup|>}
>>>

\<onmouseover offline footnote text\><<<
\Configure{footnotetext}
   {|<js open footnote page|>%
    |<fn mark sup|>\Link{}{|<footnote id|>}%
    \NoFonts
   }
   {\EndNoFonts \EndLink|<fn mark end sup|>}
   {|<js close footnote page|>}
>>>


\<onmouseover offline footnote mark\><<<
\Configure{footnotemark}
   {|<fn mark sup|>|<js footnotemark link|>\NoFonts
    \Tag{|<footnote id|>}{}}
   {\EndNoFonts
    |<end js footnotemark link|>|<fn mark end sup|>}
>>>



\<frames footnote text\><<<
\Configure{footnotetext}
   {|<open frames footnote page|>%
    |<fn mark sup|>\Link{}{|<footnote id|>}\NoFonts
   }
   {\EndNoFonts\EndLink|<fn mark end sup|>}
   {|<close frames footnote page|>}
>>>

\<frames footnote mark\><<<
\Configure{footnotemark}
   {|<fn mark sup|>|<frames footnotemark link|>\NoFonts
    \Tag{|<footnote id|>}{}}
   {\EndNoFonts
    |<end frames footnotemark link|>|<fn mark end sup|>}
>>>





\<open footnote page\><<<
\ifTag{|<footnote id|>}
   {\expandafter\ifx\csname (|<footnote id|>)\endcsname\def
       \:warning{Multiple footnote texts for mark \FNnum}%
    \else \csname a:footnote-text\endcsname\fi
   }
   {}%
>>>


\<close footnote page\><<<
\ifTag{|<footnote id|>}
   {\expandafter\ifx\csname (|<footnote id|>)\endcsname\def
    \else  \csname b:footnote-text\endcsname\fi
   }
   {}%
\expandafter\global\expandafter
   \let\csname (|<footnote id|>)\endcsname\def
>>>    





\<js open footnote page\><<<
\ifTag{|<footnote id|>}
   {\expandafter\ifx\csname (|<footnote id|>)\endcsname\def
       \:warning{Multiple footnote texts for mark \FNnum}%
    \else  \csname a:footnote-text\endcsname\fi
   }
   {}%
>>>


\<js close footnote page\><<<
\ifTag{|<footnote id|>}
   {\expandafter\ifx\csname (|<footnote id|>)\endcsname\def
    \else  \csname b:footnote-text\endcsname\fi
   }
   {}%
\expandafter\global\expandafter
   \let\csname (|<footnote id|>)\endcsname\def
>>>    


\<footnotemark link\><<<
\ifTag{|<link tag to footnotetext|>|<footnote id|>}
   {\Link{|<footnote id|>}{}}
   {}%
>>>

\<end footnotemark link\><<<
\ifTag{|<link tag to footnotetext|>|<footnote id|>}
   {\EndLink}
   {}%
>>>


\<js footnotemark link\><<<
\ifTag{|<link tag to footnotetext|>|<footnote id|>}
   {|<start js|>%
       \leavevmode \Link[ |<mouseover-footnote arguments|>%
                                \Hnewline]{|<footnote id|>}{}}
   {}%
>>>

\<end js footnotemark link\><<<
\ifTag{|<link tag to footnotetext|>|<footnote id|>}
   {\EndLink}
   {}%
>>>



\<open frames footnote page\><<<
\ifTag{|<footnote id|>}
   {\expandafter\ifx\csname (|<footnote id|>)\endcsname\def
       \:warning{Multiple footnote texts for mark \FNnum}%
    \else  
      \Configure{!BODY}{id="|<tex4ht-fn|>" }%
      \BeginHPage[|<footnote id|>]{ }%
      \Configure{!BODY}{}%
    \fi
   }
   {}%
>>>


\<close frames footnote page\><<<
\ifTag{|<footnote id|>}
   {\expandafter\ifx\csname (|<footnote id|>)\endcsname\def
    \else  
      \close:fn\EndHPage{}
    \fi
   }
   {}%
\expandafter\global\expandafter
   \let\csname (|<footnote id|>)\endcsname\def
>>>    


\<frames footnote text\><<<
\def\close:fn{\HPage{}\Link{}{hide-fn}\EndLink\EndHPage{}%
   \gdef\close:fn{\rightline{\Link{hide-fn}{}@\EndLink}}\close:fn}
>>>

% \Css{body\#|<tex4ht-fn|>{font-size:80\%;}}%


\<frames footnotemark link\><<<
\ifTag{|<footnote id|>|<file tag into footnote|>}
   {\Link[\RefFile{|<footnote id|>}
                             target="|<tex4ht-fn|>"]{}{}}
   {}%
>>>

\<end frames footnotemark link\><<<
\ifTag{|<footnote id|>|<file tag into footnote|>}
   {\EndLink}
   {}%
>>>







\<footnote id\><<<
fn\FNnum x\minipageNum
>>>



\<fn mark sup\><<<
\csname a:footnote-mark\endcsname
>>>

\<fn mark end sup\><<<
\csname b:footnote-mark\endcsname
>>>

\<thank mark sup\><<<
\csname a:thank-mark\endcsname
>>>

\<thank mark end sup\><<<
\csname b:thank-mark\endcsname
>>>

\<latex footnotes\><<<
\NewConfigure{footnote-mark}{2}
\NewConfigure{thank-mark}{2}
\Configure{footnote-mark}
   {\HCode{<span class="footnote-mark">}}
   {\HCode{</span>}}  
\Configure{thank-mark}
   {\HCode{<span class="thank-mark">}}
   {\HCode{</span>}}  
\Css{span.thank-mark{ vertical-align: super }}
>>>



\<latex footnotes\><<<
\NewConfigure{footnote-text}{2}
>>>

\<default offline footnote text\><<<
\Configure{footnote-text}
   {\HPage{}\HCode{<div class="footnote-text">}\par}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{</div>}\EndHPage{}}
>>>

\<onmouseover offline footnote text\><<<
\Configure{footnote-text}
   {\HPage{}\HCode{<div>}|<js footnote|>}
   {\ifvmode \IgnorePar\fi \EndP
    |<js /footnote|>\HCode{</div>}\EndHPage{}}
>>>

\<latex footnotes\><<<
% \Css{span.footnote-mark{ vertical-align: super }}
\Css{span.footnote-mark   sup.textsuperscript,
     span.footnote-mark a sup.textsuperscript{ font-size:80\%; }}
>>>


%%%%%%%%%%%%%%%%
\subsection{AMS}
%%%%%%%%%%%%%%%%


\<footnote for ams title\><<<
\:CheckOption{fn-in}\if:Option  
   \:CheckOption{mouseover}\if:Option
      |<mouseover inline ams title fn text|>%
   \else
      |<inline ams title fn text|>%
   \fi
\else
   \:CheckOption{mouseover}\if:Option
      |<mouseover ams title fn text|>%
   \else \:CheckOption{frames-fn}\if:Option
           |<frames ams title fn text|>%
         \else
           |<offline ams title fn text|>%
   \fi   \fi
\fi
>>>

\<offline ams title fn text\><<<
\Configure{footnotetext}
   {|<fn mark sup|>\HPage{\FNnum}\HCode{<div>}\NoFonts}
   {\EndNoFonts}
   {\HCode{</div>}\EndHPage{}|<fn mark end sup|>}%
>>>


\<frames ams title fn text\><<<
|<offline ams title fn text|>%
>>>

\<mouseover ams title fn text\><<<
|<offline ams title fn text|>%
>>>

\<mouseover inline ams title fn text\><<<
|<offline ams title fn text|>%
>>>

\<inline ams title fn text\><<<
|<offline ams title fn text|>%
>>>

\<ams art,proc,book\><<<
% \Css{span.footnote-mark{ vertical-align: super }}
\Css{span.footnote-mark   sup.textsuperscript,
     span.footnote-mark a sup.textsuperscript{ font-size:80\%; }}
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{SCR *}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\<scrbook maketitle footnote\><<<
\:CheckOption{fn-in}\if:Option
   |<scrbook end-thanks author date and|>
\else
   |<scrbook thanks author date and|>
\fi
>>>


\<scrreprt maketitle footnote\><<<
\:CheckOption{fn-in}\if:Option
   |<scrreprt end-thanks author date and|>
\else
   |<scrreprt thanks author date and|>
\fi
>>>



\<scr article,report,book\><<<
%  \Css{span.footnote-mark{ vertical-align: super }}
\Css{span.footnote-mark   sup.textsuperscript,
     span.footnote-mark a sup.textsuperscript{ font-size:80\%; }}
>>>



%%%%%%%%%%%%%%%%
\subsection{Plain}
%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<inline footnote plain\><<<
\Configure{vfootnote}
  {|<mark inline vfootnote|>}
  {|<open inline vfootnote|>}
  {|<close inline vfootnote|>}
>>>




\<mark inline vfootnote\><<<
\HCode{<sup>}\Link{fn\FNnum}{fn\FNnum-bk}%
      \ifx \FNmark\empty +\else \FNmark\fi\EndLink
\HCode{</sup>}%
>>>

\<open inline vfootnote\><<<
|<open inline footnote box|>%
\HCode{<sup>}\Link{fn\FNnum-bk}{fn\FNnum}%
\ifx \FNmark\empty +\else \FNmark\fi
\EndLink\space\HCode{</sup>}%
>>>

\<close inline vfootnote\><<<
|<close inline footnote box|>
>>>



\<offline footnote plain\><<<
\Configure{vfootnote}
   {\HPageButton[fn\FNnum]{\FNmark}}
   {\BeginHPage[fn\FNnum]{ }}
   {\EndHPage{}}
>>>


%%%%%%%%%%%%%%%%
\subsection{On Mouse Over}
%%%%%%%%%%%%%%%%


\<onmouseover footnote css\><<<
\expandafter\def\csname c:mouseover-footnote:\endcsname{%
  \def\:tempb{footnote}\csname c:mouseover-?:\endcsname}
\Configure{mouseover-footnote} {tex4ht.body,FULLHTML}
>>>




\<onmouseover footnote mark\><<<
|<start js|>\let\sv:link=\Link
\def\Link[##1]{\let\Link=\sv:link  
   \Link[##1 |<mouseover-footnote arguments|>\Hnewline]}%
>>>


\<mouseover-footnote arguments\><<<
\mo:args{footnote}{\FNnum}{|<footnote id|>}%
>>>


\<js footnote\><<<
|<start js|>%
\HCode{<!--}%
|<js From fn|>%
\HCode{<footnote>|<footnote id|>=<div class="js">}%
|<js Skip fn|>%
\HCode{-->}%
|<js Cont fn|>%
>>>

\<js /footnote\><<<
|<js Skip fn|>%
\HCode{<!--}%
|<js Cont fn|>%
\HCode{</div></footnote>\Hnewline}%
|<js Until fn|>%
\HCode{-->}%
>>>






An alternative css-based approach:

\begin{verbatim}
\Configure{tableofcontents}
   {\IgnorePar\EndP\HCode{<div class="tableofcontents">}\IgnorePar}
   {}
   {\IgnorePar\EndP\HCode{</div>}\ShowPar}
   {\HCode{<br />}}   {}

\ConfigureToc{section}
  {\HCode{<div class="sectionToc"><span class="mark">}}
  { \HCode{</span>}}
  {}
  {\HCode{</div>}}
\ConfigureToc{subsection}
  {\HCode{<div class="subsectionToc"><span class="mark">}}
  { \HCode{</span>}}
  {}
  {\HCode{</div>}}
\ConfigureToc{subsubsection}
  {\HCode{<div class="subsubsectionToc"><span class="mark">}}
  { \HCode{</span>}}
  {}
  {\HCode{</div>}}

\ConfigureToc{likesection}
  {}
  {\HCode{<div class="likesectionToc">}}
  {}
  {\HCode{</div>}}
\ConfigureToc{likesubsection}
  {}
  {\HCode{<div class="likesubsectionToc">}}
  {}
  {\HCode{</div>}}
\ConfigureToc{likesubsubsection}
  {}
  {\HCode{<div class="likesubsubsectionToc">}}
  {}
  {\HCode{</div>}}



\Css{div.sectionToc { margin-left: 1em; text-indent: -1em;  }}
\Css{div.sectionToc span.mark { text-align:right; width: 1em; 
               padding-right:0.25em; }}

\Css{div.subsectionToc { margin-left:2.5em; text-indent: -2.5em; }}
\Css{div.subsectionToc span.mark { text-align:right; width: 2.5em; 
               padding-right:0.25em; }}
\Css{div.likesubsectionToc { margin-left: 2.5em; text-indent: -1.5em; }}

\Css{div.subsubsectionToc { margin-left: 4.5em; text-indent: -4.5em; }}
\Css{div.subsubsectionToc span.mark { text-align:right; width: 4.5em; 
               padding-right:0.25em; }}
\Css{div.likesubsubsectionToc { margin-left: 4.5em; text-indent: -2em; }}
\end{verbatim}

%%%%%%%%%%%%%
\subsection{Other}
%%%%%%%%%%%%%


\<latex ltfloat (footnotes)\><<<
\Configure{textsuperscript}
  {\HCode{<sup class="textsuperscript">}\bgroup \small}
  {\egroup \HCode{</sup>}}
>>>


%%%%%%%%%%%%%%%%
\section{Floats}
%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%%%
\subsection{subfigure}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech subfigure\><<<
\Configure{subfigure}
   {\ifvmode \IgnorePar \fi \EndP
     \HCode{<div class="subfigure"><table><tr><td align="left">}}
   {\ifvmode \IgnorePar \fi \EndP  \HCode{</td></tr></table></div>}}
\Configure{subfigurecaption}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="subfigcaption">}}
   {}{}  
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Css{.subfigcaption {margin-top:1em;
   margin-left:1em;  text-align:center;}}
\Css{div.subfigure {text-align:center;}}
>>>

%%%%%%%%%%%%%%%%%%%%%
\subsection{Wrapfig}
%%%%%%%%%%%%%%%%%%%

\begin{itemize}
\item
  r  R  -  the right side of the text
\item
  l  L  -  the left side of the text
\item
  i  I  -  the inside edge--near the binding (if ``[twoside]'' document)
\item
  o  O  -  the outside edge--far from the binding
\end{itemize}


\<configure html-speech wrapfig\><<<
\Configure{wrapfloat}
    {\ifvmode\IgnorePar\EndP
       \HCode{<div class="wrapfig-\WFplace">}%
       \def\endWrap{\ifvmode\IgnorePar\fi\EndP\HCode{</div>}\par}%
     \else
       \HCode{<span class="wrapfig-\WFplace">}\bgroup
       |<config span caption|>%
       \def\endWrap{\egroup\HCode{</span>}}%
     \fi
    }
    {\endWrap}
\Css{.caption span.id{font-weight: bold;}}
\Css{
  .wrapfig-r,
  .wrapfig-ri,
  .wrapfig-ir,
  .wrapfig-ro,
  .wrapfig-or
  {float:right; text-align:left; 
            margin-left:auto; margin-top:0.5em;}
}
\Css{
  .wrapfig-l,
  .wrapfig-li,
  .wrapfig-il,
  .wrapfig-lo,
  .wrapfig-ol
  {float:left; text-align:left;  
            margin-right:auto; margin-top:0.5em;}
}
\Css{.wrapfig-r .caption td.content,
     .wrapfig-ri .caption td.content,
     .wrapfig-ir .caption td.content,
     .wrapfig-ro .caption td.content,
     .wrapfig-or .caption td.content,
     .wrapfig-l  .caption td.content,
     .wrapfig-li  .caption td.content,
     .wrapfig-il  .caption td.content,
     .wrapfig-lo  .caption td.content,
     .wrapfig-ol .caption td.content
     {white-space: normal; }}
\Css{.wrapfig-r .caption,
     .wrapfig-ri .caption,
     .wrapfig-ir .caption,
     .wrapfig-ro .caption,
     .wrapfig-or .caption,
     .wrapfig-l .caption,
     .wrapfig-li .caption,
     .wrapfig-il .caption,
     .wrapfig-lo .caption,
     .wrapfig-ol .caption
     {width:30\%; }}
>>>


%%%%%%%%%%%%%%%%%%%%%%%
\subsection{endfloat}
%%%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech endfloat\><<<
\ConfigureEnv{figure}{}{}{}{} 
>>>

\<configure html-speech floatflt\><<<
\Configure{floatingfigure}
  {\HCode{<span class="floatingfigure-\ifoddpages r\else l\fi"
      style="width:\the\floatfltwidth">}%
   \bgroup \Configure{HtmlPar}{}{}{}{}%
     \ConfigureEnv{minipage}{\IgnorePar}{}{\IgnorePar}{}%
     |<config span caption|>%
  }
  {\egroup \HCode{</span>}}
\Css{.floatingfigure-r { float:right; text-align:left; 
      margin-top:0.5em; margin-bottom:0.5em; margin-left:0em;}}
\Css{.floatingfigure-l { float:left; text-align:left;
      margin-top:0.5em; margin-bottom:0.5em; margin-right:0em; }}
\Css{.caption span.id{font-weight: bold;}}  
>>>



%%%%%%%%%%%%%%%%
\section{Make Title}
%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{book-report-article}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\<thanks author date and\><<<
thanks author date and>>>

\<maketitle 4\><<<
\Configure{maketitle}
   {\ifvmode \IgnorePar\fi \EndP |<title for TITLE|>%
    \HCode{<div class="maketitle">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
   {\NoFonts\IgnorePar\HCode{<h2 class="titleHead"\a:LRdir>}\IgnorePar}
   {\HCode{</h2>}\IgnoreIndent\EndNoFonts}
\Css{div.maketitle {text-align:center;}}
\Css{h2.titleHead{text-align:center;}}
\Css{div.maketitle{ margin-bottom: 2em; }}
|<maketitle footnote|>
>>>



\<config thanks author date and\><<<
\Configure{|<thanks author date and|>} 
   {\ifvmode \IgnorePar\fi\EndP \HCode{<div class="thanks">}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{<div class="author" >}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{<div class="date" >}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
   {\HCode{<br class="and"\xml:empty>}}
   {\HCode{<br\xml:empty>}}
|<thank for thanks|>
\Css{div.author, div.date {text-align:center;}}
\Css{div.thanks{text-align:left; margin-left:10\%; font-size:85\%;
                font-style:italic; }}
\Css{div.author{white-space: nowrap;}}
>>>

\<thank for thanks\><<<
\Configure{thank}
   {|<thank mark sup|>\Link{tk-\the\c@footnote}{}} 
   {\EndLink |<thank mark end sup|>}
   {\HCode{<br />}\protect\Link{}{tk-\the\c@footnote}\protect
     \EndLink |<thank mark sup|>}
   {|<thank mark end sup|>} {}
>>>

\<thanks for thanks p\><<<
\Configure{thank}
   {|<thank mark sup|>\Link{tk-\the\c@footnote}{\ifx
        \footnote\thanks kt-\the\c@footnote\fi}} 
   {\EndLink |<thank mark end sup|>}
   {\HCode{<p>}\protect\Link{\ifx \footnote\thanks kt-\the\c@footnote
      \fi}{tk-\the\c@footnote}|<thank mark sup|>}
   {|<thank mark end sup|>\protect\EndLink}
   {\HCode{</p>}}
>>>

\<thanks for thanks EndP\><<<
\Configure{thank}
   {\HCode{<sup>}\Link{tk-\the\c@footnote}{\ifx
        \footnote\thanks kt-\the\c@footnote\fi}} 
   {\EndLink\HCode{</sup>}}
   {\protect\Link{\ifx \footnote\thanks kt-\the\c@footnote
      \fi}{tk-\the\c@footnote}\HCode{<sup>}}
   {\HCode{</sup>}\protect\EndLink}    
   {\ifvmode\IgnorePar\fi\EndP}     
>>>


\<end-thanks author date and\><<<
\Configure{|<thanks author date and|>} 
   {\SaveEndP\global\setbox\fn:box=\vtop\bgroup\ShowPar
     \ifvoid\fn:box\else  \csname unvbox\endcsname\fn:box\fi}
   {\EndP\egroup\RecallEndP }
   {\HCode{<div class="author">}}{\HCode{</div>}}
   {\HCode{<div class="date" >}}{\HCode{</div>}}
   {\HCode{<br class="and"\xml:empty>}}
   {\HCode{<br\xml:empty>}}
|<thanks for thanks p|>
\Css{div.author, div.date {text-align:center;}}
\Css{div.thanks{text-align:left; margin-left:10\%; font-size:85\%;
                font-style:italic; }}
>>>


%%%%%%%%%%%%%%%%%%%%
\subsection{RevTeX}
%%%%%%%%%%%%%%%%%%%%

\<revtex title page\><<<
\ConfigureEnv{abstract}{\:xhtml{\IgnorePar\EndP}\HCode
   {<\tbl:XV{abstract}><tr><td\Hnewline>}}
   {\ifvmode \IgnorePar\fi \EndP\HCode{</td></tr></table>}}{}{}
\Css{.abstract p {margin-left:5\%; margin-right:5\%;}}

\Configure{maketitle}
   {\ifvmode \IgnorePar\fi \EndP |<title for TITLE 2|>%
    \HCode{<div  class="maketitle">}}
   {\HCode{</div>}}
   {\NoFonts\IgnorePar\HCode{<h2 class="titleHead"\a:LRdir>}\IgnorePar}
   {\HCode{</h2>}\IgnoreIndent\EndNoFonts}
\Css{h2.titleHead{text-align:center;}}
\Css{div.maketitle{ margin-bottom: 2em; text-align:center; }}
|<revtex maketitle footnote|>
\Configure{address}
   {\ifvmode \IgnorePar\fi\EndP \HCode{<div class="address">}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
>>>





\<revtex end-thanks author date and\><<<
\Configure{thanks author date and}
   {\SaveEndP\global\setbox\fn:box=\vtop\bgroup\ShowPar
     \ifvoid\fn:box\else  \csname unvbox\endcsname\fn:box\fi}
   {\EndP\egroup\RecallEndP }
   {\HCode{<div class="author" >}}{\HCode{</div>}}
   {\HCode{<div class="date" >}}{\HCode{</div>}}
   {\HCode{<br class="and"\xml:empty>}}
   {\HCode{<br\xml:empty>}}
|<thanks for thanks p|>
\Css{div.author, div.date {text-align:center;}}
\Css{div.thanks{text-align:left; margin-left:10\%; font-size:85\%;
                font-style:italic; }}
>>>

\<revtex config thanks author date and\><<<
\Configure{thanks author date and}
   {\ifvmode \IgnorePar\fi\EndP \HCode{<div class="thanks">}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{<div class="author" >}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
   {\HCode{<div class="date" >}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
   {\HCode{<br class="and"\xml:empty>}}
   {\HCode{<br\xml:empty>}}
|<thank for thanks|>
\Css{div.author, div.date {text-align:center;}}
\Css{div.thanks{text-align:left; margin-left:10\%; font-size:85\%;
                font-style:italic; }}
\Css{div.author{white-space: nowrap;}}
>>>







%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{TUG LaTeX}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\<tug proc maketitle\><<<
\Configure{maketitle}
   {\ifvmode \IgnorePar\fi \EndP |<title for TITLE|>%
    |<global HtmlPar|>%
    \HCode{<div class="maketitle">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
   {\NoFonts\IgnorePar\EndP
    \HCode{<h2 class="titleHead"\a:LRdir>}\IgnorePar}
   {\HCode{</h2>}\IgnoreIndent\EndNoFonts}
>>>


\<tug boat maketitle\><<<
\@ifclassloaded{ltugproc}{}{%
   \@ifpackageloaded{ltugproc}{}{\Configure{@BODY}{\rtitlex}}
}
\Configure{maketitle}
   {\ifvmode \IgnorePar\fi \EndP 
    \def\textSMC##1{##1}%
    |<title for TITLE|>%
    |<global HtmlPar|>%
    \HCode{<div class="maketitle">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
   {\NoFonts\IgnorePar\EndP
    \HCode{<h2 class="titleHead"\a:LRdir>}\IgnorePar}
   {\HCode{</h2>}\IgnoreIndent\EndNoFonts}
>>>





%%%%%%%%%%%%%%%%%%%
\subsection{lncse}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech lncse\><<<
\Configure{institute}{}{}{\HCode{<br />}}
\Configure{maketitle}
   {\ifvmode \IgnorePar\fi \EndP  |<title for TITLE|>%
    \HCode{<div class="maketitle">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
   {\NoFonts\IgnorePar\HCode{<h2 class="titleHead"\a:LRdir>}\IgnorePar}
   {\HCode{</h2>}\IgnoreIndent\EndNoFonts}
\Css{h2.titleHead{text-align:left;}}
\:CheckOption{fn-in}\if:Option
   \Configure{thanks author date and}
   {\SaveEndP\global\setbox\fn:box=\vtop\bgroup\ShowPar
     \ifvoid\fn:box\else  \csname unvbox\endcsname\fn:box\fi}
   {\EndP\egroup\RecallEndP }
   {\HCode{<div class="author" >}}{\HCode{</div>}}
   {\HCode{<div class="date" >}}{\HCode{</div>}}
   {\HCode{<br class="and"\xml:empty>}}
   {\HCode{<br\xml:empty>}}
\else
   \Configure{thanks author date and}
   {\ifvmode \IgnorePar\fi\EndP \HCode{<div class="thanks">}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{<div class="author">}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
   {\HCode{<div class="date" >}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
   {\HCode{<br class="and"\xml:empty>}}
   {\HCode{<br\xml:empty>}}
\fi

>>>

%%%%%%%%%%%%%%%%%%%%
\subsection{Prosper}
%%%%%%%%%%%%%%%%%%%%


\<prosper maketitle\><<<
\Configure{maketitle}
   {\ifvmode \IgnorePar\fi \EndP
    {\def\@title{\@Title}|<title for TITLE|>}%
    \HCode{<div class="maketitle">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}\par}
   {\NoFonts\IgnorePar \EndP
    \HCode{<h2 class="titleHead"\a:LRdir>}\IgnorePar}
   {\HCode{</h2>}\IgnoreIndent\EndNoFonts}
>>>




%%%%%%%%%%%%%%%%%%%
\subsection{AMS}
%%%%%%%%%%%%%%%%%%%



\<ams art,proc,book\><<<
\Configure{translators}
  {\par\IgnorePar\EndP  \HCode{<div class="translators">}\par\ShowPar}
  {\ifvmode \IgnorePar \fi\EndP \HCode{</div>}}
  {\HCode{<span class="translator">}}
  {\HCode{</span>}}
>>>

\<ams art,proc\><<<
\Css{div.translators {text-align:right; margin-bottom:0.7em;}}
>>>



\<ams art,proc,book\><<<
\Configure{keywords}
   {\par\IgnorePar\EndP \HCode{<div class="keywords">}\par\ShowPar}
   {\ifvmode \IgnorePar \fi\EndP\HCode{</div>}}
\Configure{subjclass}
   {\par\IgnorePar\HCode{<div class="subjclass">}\par\ShowPar} 
   {\ifvmode \IgnorePar \fi\EndP\HCode{</div>}}
\Configure{@maketitle}
   {\Tg<div class="submaketitle">\IgnoreIndent} 
   {\ifvmode \IgnorePar \fi\EndP\Tg</div>}
\Css{div.submaketitle{ text-align:left;  margin-top:2em;
   border-top: 1px solid black;
   border-bottom: 1px solid black; 
   margin-left:5\%;   margin-right:5\%; 
   font-size:85\%; line-height: 95\%;}}
\Css{div.submaketitle div {margin-top:0.5em; margin-bottom:0.5em; }}
\Css{div.submaketitle p { margin-top:0em; margin-bottom:0em; }}
>>>

\<ams art,proc,book\><<<
\ConfigureEnv{abstract}
   {\ifvmode \IgnorePar\fi \EndP}
   {\ifvmode \IgnorePar\fi \EndP}
   {}{}
\ConfigureList{abstract}
   {\ifvmode \IgnorePar\fi \EndP \Tg<div class="abstract">\ShowPar}
   {\ifvmode \IgnorePar\fi \EndP\Tg</div>}
   {\ShowPar\par\HCode{<span class="title">}}
   {\HCode{</span>}}
\Configure{setabstract}
   {\ifvmode \IgnorePar \fi \EndP}
   {\ifvmode \IgnorePar \fi \EndP}
\Css{div.abstract{ margin-top: 2em;  text-align:left;
   margin-right:15pt; margin-left:15pt; }}
>>>

\<ams art,proc,book\><<<
\Configure{addresses}
   {\ifvmode \IgnorePar\fi \EndP
     \HCode{<div class="addresses">}\ShowPar}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Configure{address}
   {\HCode{<span class="address-title">}}
   {\ifvmode \IgnorePar\fi \HCode{</span><span class="address">}}
   {\HCode{</span>}}
\Configure{curraddr}
   {\HCode{<span class="curraddr-title">}}
   {\ifvmode \IgnorePar\fi \HCode{</span><span class="curraddr">}}
   {\HCode{</span>}}
\Configure{email}
   {\HCode{<span class="email-title">}}
   {\ifvmode \IgnorePar\fi \HCode{</span><span class="email">}}
   {\HCode{</span>}}
\Configure{urladdr}
   {\HCode{<span class="urladdr-title">}}
   {\ifvmode \IgnorePar\fi \HCode{</span><span class="urladdr">}}
   {\HCode{</span>}}
\Css{div.addresses p {margin-top:0em; margin-bottom:0em; }}
>>>


\<ams art,proc,book\><<<
\Configure{maketitle}
   {\ifvmode \IgnorePar\fi \EndP |<ams title for TITLE|>%
    \HCode{<div  class="maketitle">}%
    \ConfigureEnv{center}
       {\ifvmode \IgnorePar\fi} {\ifvmode \IgnorePar\fi}
       {\ifvmode \IgnorePar\fi} {\ifvmode \IgnorePar\fi}%
    |<footnote for ams title|>%
   }
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
   {\NoFonts\IgnorePar \EndP 
    \HCode{<h2 class="titleHead"\a:LRdir>}\IgnorePar
    \bgroup \Configure{HtmlPar}{}{}{}{}}
   {\egroup \HCode{</h2>}\IgnoreIndent\EndNoFonts}
\Css{h2.titleHead{text-align:center;}}
\Css{div.maketitle{ margin-bottom: 2em; text-align:center; }}
>>>




\<ams art,proc\><<<
\Configure{|<thanks author date and|>} 
   {\par\IgnorePar\EndP \HCode{<div class="thanks">}\par\ShowPar}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
   {\ifvmode \IgnorePar\fi\EndP
       \HCode{<div class="authors"><span class="author">}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</span></div>}}
   {\par\IgnorePar\EndP \HCode{<div class="date">}\par\ShowPar}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
   {\lowercase{\HCode{</span><span class="and">}}and~%
    \lowercase{\HCode{</span><span>}}}
   {\HCode{<br\xml:empty>}}
>>>

\<ams book\><<<
\Configure{|<thanks author date and|>} 
   {\par\IgnorePar\EndP \HCode{<div class="thanks">}\par\ShowPar}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
   {\ifvmode \IgnorePar\fi\EndP
       \HCode{<div class="authors"><div class="author">}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div></div>}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{<div class="date">}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
   {\lowercase{\HCode{</div><div>}}}
   {\HCode{<br\xml:empty>}}
\Css{div.addresses{ margin-top:0.5em; }}
>>>

\<amsdtx maketitle\><<<
\Configure{maketitle}
   {\ifvmode \IgnorePar\fi \EndP |<title for TITLE|>%
    \HCode{<div  class="maketitle">}}
   {\HCode{</div>}}
   {\NoFonts\HCode{<h2 class="titleHead"\a:LRdir>}}
   {\HCode{</h2>}\EndNoFonts}
\Css{div.maketitle {text-align:center;}}
>>>

%%%%%%%%%%%%%%%%
\subsection{llncs}
%%%%%%%%%%%%%%%%

\<configure html-speech llncs\><<<
\Configure{email}
   {\HCode{<span class="email">}}
   {\HCode{</span>}}
\Configure{institute}
   {\HCode{<div class="institute">}}
   {\HCode{</div>}}
>>>



%%%%%%%%%%%%%%%%
\subsection{aa}
%%%%%%%%%%%%%%%%

\<configure aa 3.2/4.0t\><<<
\Configure{subtitle institute}
   {\HCode{<br\xml:empty><span class="subtitle">}}{\HCode{</span>}}
   {\HCode{<div class="institute">}}{\HCode{</div>}}
   {\Tg<sup>}{\Tg</sup>}
   {\HCode{<br\xml:empty>}}

\Configure{maketitle}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{<div align="center" >}}
   {\HCode{</div>}}
   {\NoFonts\IgnorePar \HCode{<h2 class="maketitleHead"\a:LRdir>}\IgnorePar}
   {\HCode{</h2>}\IgnoreIndent\EndNoFonts}
\Configure{|<thanks author date and|>} {}{}
   {\HCode{<div class="author" align="center">}}{\HCode{</div>}}
   {\HCode{<div class="date" align="center">}}{\HCode{</div>}}
   {\SPAN:{and}and\EndSPAN:}
   {\HCode{<br\xml:empty>}}
\Css{div.maketitle {text-align:center;}}
>>>

\<configure aa 3.2/4.0t\><<<
\ConfigureEnv{abstract}
   {\:xhtml{\IgnorePar\EndP}\HCode {<div class="abstract">}}
   {\HCode{</div>}}{}{}

\Css{div.abstract{text-align:center;}}

\Configure{makeheadbox}
   {\HCode{<table class="makeheadbox"
       width="100\%"><tr><td><table><tr><td>}}
   {\HCode{</td></tr><tr><td>}}
   {\HCode{</td></tr><tr><td>}}
   {\HCode{</td></tr></table></td><td class="AALogo" width="10\%">}}
   {\HCode{</td></tr></table>}}
\Css{.AALogo{font-size:120\%;font-weight: bold; text-align:right;}}
>>>


%%%%%%%%%%%%%%%%
\subsection{MWC}
%%%%%%%%%%%%%%%%

\<mwcls configs\><<<
\Configure{maketitle}
   {\ifvmode \IgnorePar\fi \EndP |<title for TITLE 2|>%
    \HCode{<div class="maketitle">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
   {\NoFonts\IgnorePar\HCode{<h2 class="titleHead"\a:LRdir>}\IgnorePar}
   {\HCode{</h2>}\IgnoreIndent\EndNoFonts}
\Css{div.maketitle {text-align:center;}}
\Css{h2.titleHead{text-align:center;}}
\Css{div.maketitle{ margin-bottom: 2em; }}
\:CheckOption{fn-in}\if:Option
   \Configure{thanks author date and}
   {\SaveEndP\global\setbox\fn:box=\vtop\bgroup\ShowPar
     \ifvoid\fn:box\else  \csname unvbox\endcsname\fn:box\fi}
   {\EndP\egroup\RecallEndP }
   {\HCode{<div class="author">}}{\HCode{</div>}}
   {\HCode{<div class="date" >}}{\HCode{</div>}}
   {\HCode{<br class="and"\xml:empty>}}
   {\HCode{<br\xml:empty>}}
|<thanks for thanks p|>
\Css{div.author, div.date {text-align:center;}}
\Css{div.thanks{text-align:left; margin-left:10\%; font-size:85\%;
                font-style:italic; }}

\else
   \Configure{thanks author date and}
   {\ifvmode \IgnorePar\fi\EndP \HCode{<div class="thanks">}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{<div class="author" >}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{<div class="date" >}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
   {\HCode{<br class="and"\xml:empty>}}
   {\HCode{<br\xml:empty>}}
|<thank for thanks|>
\Css{div.author, div.date {text-align:center;}}
\Css{div.thanks{text-align:left; margin-left:10\%; font-size:85\%;
                font-style:italic; }}
\Css{div.author{white-space: nowrap;}}

\fi
>>>


%%%%%%%%%%%%%%%%
\subsection{scr}
%%%%%%%%%%%%%%%%

\<configure html-speech scrbook\><<<
\Configure{maketitle}
   {\ifvmode \IgnorePar\fi \EndP |<title for TITLE 3|>%
    \HCode{<div class="maketitle">}}
   {\HCode{</div>}}
   {\IgnorePar \EndP 
    \NoFonts\HCode{<h2 class="titleHead"\a:LRdir>}\IgnorePar}
   {\HCode{</h2>}\IgnoreIndent\EndNoFonts}
\Css{h2.titleHead{text-align:center;}}
\Css{div.maketitle{ margin-bottom: 2em; text-align:center; }}
|<maketitle footnote|>
|<scr title page|>
>>>


\<configure html-speech scrreprt\><<<
\Configure{maketitle}
   {\ifvmode \IgnorePar\fi \EndP |<title for TITLE 3|>%%
    \HCode{<div  class="maketitle">}}
   {\HCode{</div>}}
   {\IgnorePar \EndP
    \NoFonts\HCode{<h2 class="titleHead"\a:LRdir>}\IgnorePar}
   {\HCode{</h2>}\IgnoreIndent\EndNoFonts}
\Css{h2.titleHead{text-align:center;}}
\Css{div.maketitle{ margin-bottom: 2em; text-align:center; }}
|<scrreprt maketitle footnote|>
|<scr title page|>
>>>


\<scr title page\><<<
\ConfigureEnv{titlepage}
   {\bgroup 
      \ifvmode \IgnorePar\fi \EndP
      \HCode{<div class="titlepage">}%
      \ConfigureEnv{center}{}{}{}{}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}%
    \egroup}
   {} {}
\Configure{dedication}
   {\ifvmode \IgnorePar\fi\EndP \HCode{<div class="dedication" >}}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</div>}}
\Css{div.dedication {text-align:center;}}  
>>>


%%%%%%%%%%%%%%%%
\subsection{ACM}
%%%%%%%%%%%%%%%%


\<configure html-speech acm-proc-article-sp\><<<
\Configure{toappear}
   {\ifvmode \IgnorePar \fi  \EndP  \HCode{<div class="toappear">}}
   {\ifvmode \IgnorePar \fi  \EndP  \HCode{</div>}}
\Configure{boilerplate}
   {\HCode{<div class="boilerplate">}} {\HCode{</div>}}
\Configure{conf}
   {\HCode{<div class="conf">}} {\HCode{</div>}}
\Configure{confinfo}
   {\HCode{<div class="confinfo">}} {\HCode{</div>}}
\Configure{copyrightetc}
   {\HCode{<div class="copyrightetc">}} {\HCode{</div>}}
>>>

\<configure html-speech acm-proc-article-sp\><<<
\Configure{thanks}
   {\IgnorePar\HCode{<div class="thanks">}\IgnorePar}
   {\ifvmode \IgnorePar \fi  \EndP  \HCode{</div>}\IgnoreIndent}
\Css{div.thanks{text-align:left; margin-top:1em; margin-bottom:1em;}}
\Configure{subtitle}
   {\ifvmode \IgnorePar \fi  \EndP  
    \HCode{<h4 class="subtitleHead"\a:LRdir>}\IgnorePar}
   {\ifvmode \IgnorePar \fi  \EndP  \HCode{</h4>}\IgnoreIndent}
\Css{.subtitleHead{text-align:center;}}
\Configure{title}
   {\ifvmode \IgnorePar \fi  \EndP  
    \HCode{<h3 class="titleHead"\a:LRdir>}\IgnorePar}
   {\ifvmode \IgnorePar \fi  \EndP  \HCode{</h3>}\IgnoreIndent}
\Css{.titleHead{text-align:center;}}
\Configure{email}{\Link[mailto:#1]{}{}\IgnorePar\o:email:{#1}\EndLink}
\Configure{@TITLE}{\let\titlenote=\:gobble}
\Configure{maketitle}
  {\ifvmode \IgnorePar\fi \EndP |<title for TITLE|>}
  {}
\Configure{author}
   {\ifvmode \IgnorePar \fi  \EndP 
    \HCode{<div class="author">}\ShowPar\par}
   {\ifvmode \IgnorePar \fi  \EndP  \HCode{</div>}\IgnoreIndent}
\Css{div.author{text-align:center; margin-top:1em; margin-bottom:1em;}}
>>>


%%%%%%%%%%%%%%%%
\subsection{APA}
%%%%%%%%%%%%%%%%

\<apa maketitle\><<<
\Configure{affil}
   {\HCode{<div class="affil">}\bgroup
    |<apa maketitle br cr|>%
   }
   {\egroup \HCode{</div>}}
\Configure{maketitle}
   {\ifvmode \IgnorePar\fi \EndP |<title for TITLE|>%
    \HCode{<div class="maketitle">}\bgroup
    |<apa maketitle no-br cr|>%
   }
   {\egroup\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
   {\apa:title} {\apa:endtitle}
\def\apa:title{\NoFonts\IgnorePar
   \HCode{<h2 class="titleHead"\a:LRdir>}\IgnorePar
   \global\let\apa:title=\empty   }
\def\apa:endtitle{\HCode{</h2>}\IgnoreIndent\EndNoFonts
   \global\let\apa:endtitle=\empty   }
>>>


\<apa maketitle br cr\><<<
\Configure{centercr}
   {\ht:special{t4ht=<br />}}
   {\ht:everypar{\ht:everypar{\HtmlPar}}}
>>>

\<apa maketitle no-br cr\><<<
\Configure{centercr}
   {}  {\ht:everypar{\ht:everypar{\HtmlPar}}}%
>>>


%%%%%%%%%%%%%%%%
\subsection{Shared}
%%%%%%%%%%%%%%%%



\<title for TITLE\><<<
{\Configure{maketitle}{}{}{}{}%
\a:NoSection |<disable latex fonts|>\let\thanks|=\:gobble
\let\\|=\space \def\TeX{TeX}%
\def\gobble:font##1##2{##2}\:TITLE: \no:fonts
\def\footnotemark[##1]{}%
\Tag{TITLE+}{\@title}}
>>>

Old latex files need \verb'\no:fonts', but not new ones.---wrong, as far as writing to toc in 0.0?

\<ams title for TITLE\><<<
{\Configure{maketitle}{}{}{}{}%
\a:NoSection |<disable latex fonts|>\let\thanks|=\:gobble
\let\\|=\space \def\TeX{TeX}%
\def\gobble:font##1##2{##2}\:TITLE: \no:fonts
\def\footnotemark[##1]{}%
\Tag{TITLE+}{\shorttitle}}
>>>



\<disable latex fonts\><<<
\let\leavevmode|=\empty \let\not@math@alphabet|=\:gobbleII
\def\text@command##1{##1}\let\selectfont|=\empty
\def\check@icl ##1\check@icr{}%
>>>

\<title for TITLE 2\><<<
{\Configure{maketitle}{}{}{}{}%
\a:NoSection \let\leavevmode\empty \let\not@math@alphabet\:gobbleII
\def\text@command##1{##1}\let\selectfont\empty
\def\check@icl ##1\check@icr{}%
\let\thanks\:gobble
\let\\\space \def\TeX{TeX}%
\def\gobble:font##1##2{##2}\:TITLE: \no:fonts
\def\footnotemark[##1]{}%
\def\a:ttl##1##2//{##1//}%
\let\large=\empty
\let \bf=\empty
\let \centering=\empty
\def \ignorespaces##1\vskip##2//{##1}%
\Tag{TITLE+}{\@title//}%
}%
>>>

\<title for TITLE 3\><<<
{\Configure{maketitle}{}{}{}{}%
\a:NoSection \let\leavevmode\empty \let\not@math@alphabet\:gobbleII
\def\text@command##1{##1}\let\selectfont\empty
\def\check@icl ##1\check@icr{}%
\let\thanks\:gobble
\let\\\space \def\TeX{TeX}%
\def\gobble:font##1##2{##2}\:TITLE: \no:fonts
\Tag{TITLE+}{\@title}}%
>>>



%%%%%%%%%%%%%%%%
\section{Abstracts}
%%%%%%%%%%%%%%%%

\<apa abstract\><<<
\Configure{abstract}
   {\HCode{<div class="abstract">}\bgroup
    |<apa maketitle br cr|>%
   }
   {\egroup \HCode{</div>}}
\Css{div.abstract{text-align:left; margin-left:10\%; margin-top:1em; }}
>>>





%%%%%%%%%%%%%%%%
\section{Math}
%%%%%%%%%%%%%%%%




Don't put \verb'\:xhtml{\IgnorePar\EndP}' on the following; \verb'\PicDisplay'
should handle it.



\<configure html-speech-math latex\><<<
\Configure{[]} 
   {\bgroup
       \protect\nested:math
       \PicDisplay 
       $$\everymath{}\everydisplay{}}
   {$$\EndPicDisplay \egroup |<try inline par|>}
\Configure{()}{\bgroup
      \protect\nested:math
      \protect\PicMath
       $}
   {$ \protect\EndPicMath \egroup}
\def\nested:math{|<nested pic math|>}
>>>

The above should be sensitive to cases like the following one.

\begin{verbatim}
\[ \parbox[t]{2in} { \[.\] }\]
\end{verbatim}


\<nested pic math\><<<
\def\[{\bgroup \def\]{$$\egroup}$$}%
\def\({\bgroup \def\){$\egroup}$}%
>>>




\<configure html-speech-math latex\><<<
\Configure{@TITLE}{\Configure{()}{$}{$}}
>>>

\<configure html-speech-math th4\><<<
\:CheckOption{th4}\if:Option
   \Configure{[]} 
      {\PicDisplay $$\everymath{}\everydisplay{}}
      {$$\EndPicDisplay |<try inline par|>}
   \Configure{()}{\PicMath$}{$\EndPicMath}
\fi
>>>









%%%%%%%%%%%%%%%%%%
\section{Cross References}
%%%%%%%%%%%%%%%%%%

\<configure html-speech latex\><<<
\Configure{pageref} 
   {\HCode{<span class="pageref">}} 
   {\HCode{</span>}} 
   {\S} 
>>>






%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Features}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%
\section{Javascript: Pop-ups On Mouse Over}
%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%
\subsection{Background}
%%%%%%%%%%%%%%%%


There are 6 supporting dvi variations of the 
`CopyTo to-file op group'
 dvi command:

\begin{description}
\item[From]    Start copying (at current address)
\item[Until]   End copying   (at current address)
\item[Skip]    Start skipping (from current address)
\item[Cont]    End skipping (at current-address)
\item[Addr integer-label] Associate current 
      address with the integer-label of the given group
\item[Set integer-label]   
     Replace the `current address' in the following Skip/Cont (and
     From/Until ?) commands with the address associated to the
     integer-label of the given group  by an Addr command
\end{description}

The code
\begin{verbatim}
B0
 \ht:special {t4ht@DCopyTo: \jobname-js.tex From bib }
B1
 \ht:special {t4ht@DCopyTo: \jobname-js.tex Skip bib }
B2
 \ht:special {t4ht@DCopyTo: \jobname-js.tex Addr1 bib }
B3
 \ht:special {t4ht@DCopyTo: \jobname-js.tex Addr2 bib }
B4
 \ht:special {t4ht@DCopyTo: \jobname-js.tex Set1 bib }
 \ht:special {t4ht@DCopyTo: \jobname-js.tex Cont bib }
 \ht:special {t4ht@DCopyTo: \jobname-js.tex Set2 bib }
 \ht:special {t4ht@DCopyTo: \jobname-js.tex Skip bib }
B5
\ht:special {t4ht@DCopyTo: \jobname-js.tex Until bib }
B6
\end{verbatim}

produces the string ` B1  B3 '.


%%%%%%%%%%%%%%%%
\subsection{End Points of the Jobname-js.tex File}
%%%%%%%%%%%%%%%%



\<start js\><<<
\js:on
>>>



\<onmouseover utilities\><<<
\def\js:on{%
  \global\let\js:on=\relax
  \HCode{<!--}%
  |<js From js|>%
  \HCode{\string\def\string\jstoday{\:today} }%
  \HCode{\string\input\space onmouseover.4ht }%
  \:CheckOption{trace-onmo} \if:Option
      \HCode{<js trace="on">}%
  \else
     \Log:Note{for mouseover tracing of
          compilation, use the command line option `trace-onmo'}
      \HCode{<js>}%
  \fi
  |<js Until js|>%
  \HCode{-->}%
  |<end js|>}
>>>


\<end js\><<<
\csname a:mouseover-Needs\endcsname
\Css{.js {text-indent:0; background-color:aqua; color:black;
   border:solid 1px black;  margin:2pt; width:99\%;}}
\Css{.js p, .|<js p.bibitem css|>, |<js p.bibitem-p css|> {text-indent:0;
   background-color:aqua; color:black; margin:2pt;}}
\AtEndDocument{{\HCode{<!--}%
  |<js From js|>%
  \HCode{</js>}%
  |<js Until js|>%
  \HCode{-->}}}%
>>>


Was \verb'\Css{.js p {margin:0; text-indent:0;}}' but javascript under
netscape had problems dealing with 0 left margins.  




\<js From js\><<<
\ht:special {t4ht@DCopyTo: \jobname-js.tex From js }%
>>>

\<js Until js\><<<
\ht:special {t4ht@DCopyTo: \jobname-js.tex Until js }%
>>>





%%%%%%%%%%%%%%%%
\subsection{Configuration Commands}
%%%%%%%%%%%%%%%%




\<onmouseover utilities\><<<
\HAssign\MO:script = 0
\NewConfigure{mouseover-script}[1]{\bgroup
  \gHAdvance\MO:script by 1
  \expandafter\NextFile \expandafter{\jobname\MO:script.tmp}%
  \HPage{}\IgnorePar |<js From var|>%
    \HCode{<\if !#1!\else mouseover-script\fi>#1\if !#1!\else =\fi}%
    \everyvbox{\IgnorePar\everyvbox{}\aftergroup\end:movar}%
    \def\end:movar{\everyvbox{}\HCode
                   {</\if !#1!\else mouseover-script\fi>}%
        |<js Until var|>\EndHPage{}%
        \egroup}%
    \vbox}
>>>

\<ol-hauto mouseover-script\><<<
\Configure {mouseover-script}{}{\HCode{ol\string_hauto = 1;}}%
>>>


\<js From var\><<<
\ht:special {t4ht@DCopyTo: \jobname-js.tex From var }%
>>>

\<js Until var\><<<
\ht:special {t4ht@DCopyTo: \jobname-js.tex Until var }%
>>>




\<onmouseover utilities\><<<
\expandafter\def\csname c:mouseover-vars:\endcsname#1#2{%
   \expandafter\def\csname mouseover-#1-init\endcsname##1{}%
   \def\:tempc##1{\expandafter\append:defI\csname
      mouseover-#1-init\endcsname{tex4ht.##1=tex4ht.\expandafter\jsHash
      \expandafter{\expandafter v####1.##1};}}%
   \Mo:vars#2,<>}
\def\Mo:vars#1,#2<>{%
   \if !#1!\else
      \expandafter\def\csname mo#1\endcsname##1{%
          \HCode{<!--}%
          \ht:special{t4ht@DCopyTo: \jobname-js.tex From #1 }%
          \HCode{<#1-var>\jsHash{v##1.#1}=}%
          \ht:special{t4ht@DCopyTo: \jobname-js.tex Skip #1 }%
          \HCode{-->}%
          \ht:special{t4ht@DCopyTo: \jobname-js.tex Cont #1 }%
      }%
      \expandafter\def\csname endmo#1\endcsname{%
          \ht:special{t4ht@DCopyTo: \jobname-js.tex Skip #1 }%
          \HCode{<!--}%
          \ht:special{t4ht@DCopyTo: \jobname-js.tex Cont #1 }%
          \HCode{</#1-var>}%
          \ht:special{t4ht@DCopyTo: \jobname-js.tex Until #1 }%
          \HCode{-->}%
      }%
      \:tempc{#1}%
   \fi
   \if !#2!\else \expand:after{\Mo:vars#2<>}\fi
}
>>>




%%%%%%%%%%%%%%%%
\subsection{Footnotes Contributions}
%%%%%%%%%%%%%%%%




\<js From fn\><<<
\ht:special {t4ht@DCopyTo: \jobname-js.tex From fn }%
>>>

\<js Skip fn\><<<
\ht:special {t4ht@DCopyTo: \jobname-js.tex Skip fn }%
>>>

\<js Cont fn\><<<
\ht:special {t4ht@DCopyTo: \jobname-js.tex Cont fn }%
>>>

\<js Until fn\><<<
\ht:special {t4ht@DCopyTo: \jobname-js.tex Until fn }%
>>>




%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Overlib}
%%%%%%%%%%%%%%%%%%%%%%%%%%%

\Link[http://www.egroups.com/group/overlib]{}{}egroup for overlib\EndLink,
\Link[http://www.bosrup.com/web/overlib/]{}{}home over overlib\EndLink

           
\<overDiv\><<<
\HCode{<div id="overDiv"
         style="position:absolute; 
                      visibility:hidden; z-index:1000;"></div>
         |<overlib src|>}%
>>>


\<onmouseover @HEAD\><<<
\Configure{@HEAD}
  {\HCode{%|% natural place for <overlib src>, but netscape 4.7...|%
     <script type="text/javascript" 
                 src="\jobname-js.js"></script>\Hnewline}}
|<onmouseover utilities|>
\:CheckOption{info} \if:Option
   |<overlib info|>
\fi
>>>


\<overlib info\><<<
\Log:Note{Option `mouseover' is powered
  by the overlib.js utility of Erik Bosrup
  (http://www.bosrup.com/web/overlib/).}
\immediate\write-1{}
\immediate\write-1{The option requires two compilations of
  the source file.}
\immediate\write-1{}
\immediate\write-1{Use \string\Configure
  {mouseover-XXX}{...} to introduce arguments into the overlib
  function call, and code into a preceding script. XXX stands for
  `cite' or `footnote', the default body is at tex4ht.body,
  and the default caption at tex4ht.caption. An empty parameter
  requests no  sensitivity of mouse over the specified type of entries.}
\immediate\write-1{}
\immediate\write-1{The variant \string\Configure
  {mouseover-XXX}[labels]{...} of the above command restricts the
  outcome just to the listed labels (i.e., the values listed
  in tex4ht.caption).}
\immediate\write-1{}
\immediate\write-1{The \string\Configure{mouseover-script }{variable-name}
  {javascript-code} command may be used to introduce code into the 
  javascript script, as a content of a global variable when a name is
  given and as a bare code when the name is not given.  To be referenced,
  the name must be prefixed by ``tex4ht.'.}
\immediate\write-1{}
\immediate\write-1{The \string\Configure{mouseover-vars}{XXX}
  {variable-list} command introduces local variables, to be referenced
  with the prefix ``tex4ht.' on their names. In addition, for each 
  variable YYY  it introduces a construct \string\moYYY
  {label}...\string\endmoYYY\space for selecting a value for the variable
  at the specified label.}
\immediate\write-1{}
\immediate\write-1{Example:} 
\immediate\write-1{
  \string\Configure{mouseover-script}{var}{\HCode{<hr />}}}
\immediate\write-1{|<mouseover cite config|>} 
\immediate\write-1{|<mouseover cite css|>.}
\immediate\write-1{
  \string\moAuthor{bb}A name\string\endmoAuthor }
\immediate\write-1{}
\immediate\write-1{The compilation indirectly invokes the 
  command 'xhtex \string\jobname-js'.  An alternative format for
  the command can be requested within a configuration of
  the form \string\Configure{mouseover-Needs}{\string\Needs{"..."}}. 
  The default setting is due to 
  \string\Configure{mouseover-Needs}{\string\Needs{"xhtex 
  \string\jobname-js"}}}
\immediate\write-1{In case \string\Configure{mouseover-Needs} is
  undefined, introduce the instruction
  \string\NewConfigure{mouseover-Needs}{1} before that command.
}
>>>

\<onmouseover utilities\><<<
\expandafter\ifx \csname mouseover-Needs\endcsname\relax
  \NewConfigure{mouseover-Needs}{1}
  \Configure{mouseover-Needs}{\Needs{"xhtex \jobname-js"}}
\fi
\def\mo:args#1#2#3{\expandafter 
  \ifx \csname a:mouseover-#1-#2\endcsname\empty\else
  \expandafter \ifx \csname a:mouseover-#1-#2\endcsname\relax
    |<global mouseover-type|>\else
    |<private mouseover-type|>\fi\fi}
>>>

\<global mouseover-type\><<<
\expandafter \ifx \csname a:mouseover-#1\endcsname\empty
      \else
    \Hnewline
    onmouseover="tex4ht.body=tex4ht.#3; tex4ht.caption='#2';
            |<init mouseover vars|>%
              return overlib(\csname a:mouseover-#1\endcsname);"
   \Hnewline    onmouseout="nd();"\Hnewline\fi
>>>

\<private mouseover-type\><<<
\Hnewline
 onmouseover="tex4ht.body=tex4ht.#3; tex4ht.caption='#2';
            |<init mouseover vars|>%
            return overlib(\csname a:mouseover-#1-#2\endcsname);"
\Hnewline onmouseout="nd();"\Hnewline
>>>

\<init mouseover vars\><<<
\expandafter\ifx \csname mouseover-#1-init\endcsname\relax
            \else \csname mouseover-#1-init\endcsname{#2}\fi
>>>



%%%%%%%%%%%%%%%%
\subsection{Boundary Cases for mouseover}
%%%%%%%%%%%%%%%%




\<DOCTYPE in PROLOG under mouseover\><<<
\:CheckOption{xhtml} \if:Option  \else
   \:CheckOption{DOCTYPE} \if:Option 
    \Log:Note{to request a DOCTYPE declaration
          use the command line option `DOCTYPE'}   
   \else
      \edef\Preamble{\Preamble,no-DOCTYPE}
   \fi
\fi
>>>





\<overlib src\><<<
<script language="JavaScript" src="overlib.js"
      type="text/javascript" ></script>\Hnewline
<!--http://www.bosrup.com/web/overlib/ (Erik Bosrup)-->%
>>>



\begin{itemize}
\item 
\begin{verbatim}
THE DOCUMENT DECLARATION GIVES TROUBLE IN CONNECTION WITH OVERLIB.  It
would be hardly noticeable in small pages, requiring no scrolling -
the only symptom then is that the browser suddenly warns about errors
- those ones in overlib, and as a matter of fact, apparently in the
part of the script that ensures compatibility with Netscape.  However,
in a large page, the pop-ups seem to disappear - making them STICKY
and scrolling up, one can find them in the upper right corner.  One
has only to remove <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01
Transitional//EN" "http://www.w3.org/TR/emacspeak/loose.dtd"> however, to
put an end to the browser complaints and get back the pop-ups into
their proper places.  \end{verbatim}

\item
\begin{verbatim}
 I
have just found a reference to the trouble, together with a very easy
way to go round it: it is enough to add <?xml version="1.1"?> BEFORE
the Document declaration. I have checked it, and it is all right -
both for Explorer6 and Netscape 4.7 and 6.

By the way: for the Mouseover option to work under Netscape4.x, the call to
<script type="text/JavaScript" src="overlib.js"></script>
<!--http://www.bosrup.com/web/overlib/ (Erik Bosrup)-->
MUST appear in the <BODY> section, NOT in the <HEAD>: absurd, but true (it
is reported in Overlib's page).
\end{verbatim}

\end{itemize}


%%%%%%%%%%%%%%%%
\subsection{The Configuration File onmouseover.4ht}
%%%%%%%%%%%%%%%%




\<onmouseover.4ht\><<<
\ifnum\the\catcode`\%=14\else\expandafter\edef\csname
  \string:RestoreCatcodes\endcsname{\catcode`\%|=\the
  \catcode`\%}\catcode`\%|=14\fi
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  
% onmouseover.4ht                       |version %
% Copyright |CopyYear.2001.       Eitan M. Gurari         %
|<TeX4ht copyright|>

\hbadness=10000 \vbadness=10000 \hfuzz=99in \vfuzz=\hfuzz
\overfullrule=0pt   \let\makefootline\empty
\special{t4ht.js}

\newcount\CodeNumber
\def\NoSpecials#1#2#3{\edef\temp{\the\CodeNumber}%
     \global\CodeNumber=#3
     \def\next{\catcode\CodeNumber=#1
       \ifnum \CodeNumber=#2 \let\next=\relax \fi
       \global\advance\CodeNumber by -1 \next}\next
     \global\CodeNumber=\temp  }%

\expandafter\def\csname js js\endcsname{\egroup  \special{t4ht@@}%
   tex4ht=new Array() ; //\jstoday}
\expandafter\def\csname js js trace="on"\endcsname{\global
   \let\TagTrace=\empty \csname js js\endcsname}
\expandafter\def\csname js /js\endcsname{\egroup \special{t4ht@@}%
   \csname bye\endcsname\endinput}

|<hash for onmouseover.4ht|>
|<escape backslashes|>
\catcode`\<=13
\def\jselement#1{\expandafter\def\csname js #1\endcsname##1=##2</#1>{%
   \hfill\break tex4ht.\jsHash{##1}=\hbox{"##2";}\egroup}}
|<escape double quotes|>
\expandafter\def\csname js \endcsname#1</>{%
   \hfill\break \hbox{#1}\egroup}

\def<#1>{\bgroup
   \expandafter \ifx \csname js #1\endcsname \relax \jselement{#1}\fi
   \def<##1>{\TagTrace{\def\x{##1}\def\y####1:->{}%
      \immediate\write16{...\string<\expandafter\y\meaning\x>}}%
       \string<\scan ##1"<>>}%
   \NoSpecials{12}{0}{255}\NoSpecials{11}{65}{90}\NoSpecials{11}{97}{122}%
   \catcode`\ =10 \catcode`\^^M=10 \catcode`\^^I=10 \catcode`\<=13
   \catcode`\\=13
   \tt \csname js #1\endcsname}
\def\TagTrace#1{}
\catcode`\&=12 \catcode`\#=12
\endinput
>>>   

\<escape double quotes\><<<
\def\scan#1"#2<>{#1\if !#2!\expandafter\done\else
   \string\"\expandafter\scan
\fi#2<>}
\def\done#1>{}
>>>

\<escape backslashes\><<<
\catcode`/=0 \catcode`\\=13
/def\{/string\/string\}
/catcode`/\=0 \catcode`\/=12
>>>



\<onmouseover utilities\><<<
\def\jsHash#1{\jsHash:a #1<>}
\def\jsHash:a#1#2<>{%
   \ifnum `#1<`0 JjV\else
   \ifnum `#1>`z jJv\else
   \ifnum `#1>`9
      \ifnum `#1<`A jJV\else
      \ifnum `#1>`Z
         \ifnum `#1<`a jVV\else #1\fi
      \else #1\fi\fi
   \else #1\fi\fi\fi
   \if !#2!\expandafter\done:hash
                       \else\expandafter\jsHash:a\fi#2<>}
\def\done:hash#1>{}
>>>

\<hash for onmouseover.4ht\><<<
\def\jsHash#1{\jsHasha #1<>}
\def\jsHasha#1#2<>{%
   \ifnum `#1<`0 JjV\else
   \ifnum `#1>`z jJv\else
   \ifnum `#1>`9
      \ifnum `#1<`A jJV\else
      \ifnum `#1>`Z
         \ifnum `#1<`a jVV\else #1\fi
      \else #1\fi\fi
   \else #1\fi\fi\fi
   \if !#2!\expandafter\done
                       \else\expandafter\jsHasha\fi#2<>}
>>>



\<onmouseover utilities\><<<
\expandafter\Odef\csname c:mouseover-?:\endcsname[#1]#2{%
  \def\:temp{#2}%
  \if !#1!\expandafter\let\csname a:mouseover-\:tempb\endcsname=\:temp
  \else \om:type#1,|<par del|>\fi}
\def\om:type#1,#2|<par del|>{%
  \if !#1!\else\expandafter
     \let\csname a:mouseover-\:tempb-#1\endcsname=\:temp\fi
  \ifx !#2!\else \def\:tempa{\om:type#2|<par del|>}\expandafter\:tempa \fi
}
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Formats}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%
\section{latex.ltx}
%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech latex\><<<
|<0,32,4 plain,latex|>
|<32,4 plain,latex|>
|<4 plain,latex|>
|<32,4 latex|>
|<4 latex|>
|<0,32,4 latex|>
|<latex lttab|>
|<latex ltbibl|>
|<latex ltoutenc|>
|<latex ltfloat (footnotes)|>
\:CheckOption{javahelp} \if:Option 
   \input javahelp.4ht
\else
   \Log:Note{for a JavaHelp output format,
         use the command line option `javahelp'}
\fi
>>>

\<latex lttab\><<<
\Configure{extracolsep}
   {~\tmp:dim=#1\relax\ifdim \tmp:dim>1em ~\fi}
>>>


                                              %%%%%%%%%%%%%%%%%%%%%%%
                                              % ltplain.dtx
                                              %%%%%%%%%%%%%%%%%%%%%%%

\subsection{obeylines}

\<4 plain,latex\><<<
\Configure{obeylines}
   {\ifvmode \:xhtml{\IgnorePar\EndP}\IgnoreIndent
       \HCode{<div class="obeylines-v">}%
       \gdef\ob:ln{\ht:special{t4ht=</div>}}%
    \else
       \SaveEndP \HCode{<span class="obeylines-h">}%
       \gdef\ob:ln{\ht:special{t4ht=</span>}\RecallEndP}%
    \fi
   }
   {\EndP\ob:ln\ShowPar} 
   {\hbox{\HCode{<br\xml:empty>}}}
\Css{.obeylines-h,.obeylines-v {white-space: nowrap; }}
\Css{div.obeylines-v p { margin-top:0; margin-bottom:0; }}
>>>
                                              %%%%%%%%%%%%%%%%%%%%%%%
                                              % ltlogos.dtx
                                              %%%%%%%%%%%%%%%%%%%%%%%

\subsection{Logos}
\<4 plain\><<<
|</TeX for 4.0t|>
>>>


\</TeX for 4.0t\><<<
\def\TeX{\HCode{<span class="TEX">}T\HCode{<span\Hnewline
     class="E">}E\HCode{</span>}X\HCode{</span>}}
\Css{span.TEX {letter-spacing: -0.125em; }}
\Css{span.TEX span.E{ position:relative;top:0.5ex;left:-0.0417em;}} 
\Css{a span.TEX span.E {text-decoration: none; }}
>>>

\verb'\def\TeX{T\kern-.1667em\lower.5ex\hbox{E}\kern-.125emX\@}'




                                              %%%%%%%%%%%%%%%%%%%%%%%
                                              % ltfssini.dtx
                                              %%%%%%%%%%%%%%%%%%%%%%%

\subsection{tt Font}

\<0,32,4 latex\><<<
\ifx \ttfamily\:UnDef \else \Configure{tt}{\ttfamily} \fi
>>>

                                              %%%%%%%%%%%%%%%%%%%%%%%
                                              % ltxref.dtx
                                              %%%%%%%%%%%%%%%%%%%%%%%

\subsection{Cross References}
\<32,4 latex\><<<
\Configure{ref}
   {\Link}
   {\ifx \RefArg\:UnDef\else
      \Tg<!--tex4ht:ref: \RefArg\space-->\fi\EndLink}
   {}
>>>

The comments lets us relate the automatically created label with that
offered by the user. The space is needed for cases that the label ends with a dash.


\begin{itemize}
\item
 LaTeX allows labels almost everywhere.
\item
Different labels may be associated to a common object in LaTex.
\item
 There are almost no restrictions on the kind of characters
    allowed within the labels of LaTeX.
\end{itemize}







                                              %%%%%%%%%%%%%%%%%%%%%%%
                                              % ltmiscen.dtx
                                              %%%%%%%%%%%%%%%%%%%%%%%

\subsection{Miscellaneous Environments}
\<32,4 plain,latex\><<<
\def\end:TTT{\ifvmode\IgnorePar\fi \EndP\HCode{</td></tr></table>}} 
>>>

\<4 latex\><<<
\append:def\center{\par}
\ConfigureEnv{center}
  {\ifvmode \IgnorePar\fi \EndP}{|<try env inline par|>}
  {\EndP\IgnorePar
   \HCode{<div class="center"\Hnewline>}\ShowPar\endgraf}
  {\IgnorePar\EndP\HCode{</div>}}
\ConfigureEnv{flushleft}
  {\ifvmode \IgnorePar\fi \EndP}{|<try env inline par|>}
  {\EndP\IgnorePar 
   \HCode{<div class="flushleft"\Hnewline>}\ShowPar\endgraf}
  {\IgnorePar\EndP\HCode{</div>}}
\ConfigureEnv{flushright}
  {\ifvmode \IgnorePar\fi \EndP}{|<try env inline par|>}
  {\EndP\IgnorePar
   \HCode{<div class="flushright"\Hnewline>}\ShowPar\endgraf}
  {\IgnorePar\EndP\HCode{</div>}}
\Css{div.center,
     div.center div.center {text-align: center;
   margin-left:1em; margin-right:1em;}}
\Css{div.center div {text-align: left;}}
\Css{div.flushright, 
     div.flushright div.flushright {text-align: right;}}
\Css{div.flushright div {text-align: left;}}
\Css{div.flushleft {text-align: left;}}
>>>

\<32,4 latex\><<<
\ConfigureEnv{verbatim}{\env:verb{verbatim}}{\endenv:verb}{}{}
\ConfigureEnv{verbatim*}{\env:verb{verbatim}}{\endenv:verb}{}{}
\def\env:verb#1{\ifinner\else \vfill\break\fi
  \IgnorePar\EndP  \HAssign\Verb:N=0
  \HCode{<\tbl:XV{#1}><tr  class="#1"><td\Hnewline 
  class="#1">}\HCode{<div class="#1"\a:LRdir>}\EndNoFonts}
\def\endenv:verb{\NoFonts
  \EndP \ht:special{t4ht=</div>}\end:TTT |<try inline par|>}
\def\start:fenv#1{\:xhtml{\IgnorePar\EndP}\HCode{<table
    \Hnewline width="100\%"
    \:zbsp{flush#1}><tr><td><div align="#1"\Hnewline\a:LRdir>}}
\def\end:fenv{\IgnorePar\HCode{</div>}\end:TTT\IgnorePar}
\HAssign\Verb:N=0
\Css{div.verbatim {font-family: monospace; white-space: nowrap; }}
>>>

\<configure html-speech latex\><<<
\Configure{verb}
   {\HCode{<span class="verb"\a:LRdir>}}
   {\HCode{</span>}}
>>>



The \verb+\:nbsp+ above is because lynx collapses 
consecutive \verb+<br />+ tags.




\<configure html-speech latex\><<<
\Configure{centercr}{\ht:special{t4ht=<br\xml:empty>}}
   {\ht:everypar{\ht:everypar{\HtmlPar}}}
>>>


                                              % ltmath.dtx
                                              %%%%%%%%%%%%%%%%%%%%%%%

\subsection{Math Setup}

\<configure html-speech-math latex\><<<
\:CheckOption{pic-equation}\if:Option 
%   \ConfigureEnv{equation}
%     {\relax\ifmmode\else\par\fi\:xhtml{\IgnorePar\EndP}%
%     \HCode{<center class="equation"><table class="equation"\Hnewline
%      border="0" cellpadding="0" cellspacing="15"><tr><td>}}
%     {\:xhtml{\IgnorePar\EndP}%
%      \HCode{</td></tr></table></center>}\IgnorePar
%      \ifmmode\else\par\fi}
%     {}{} 
   \Configure{equation}
     {\:xhtml{\ifvmode \IgnorePar\fi\EndP}%
              \HCode{<\tbl:XV{equation}><tr><td>}\IgnorePar
      \Configure{$$}{\PicDisplay}{\EndPicDisplay}
        {\everymath{}\everydisplay{}}
     }
     {\ifvmode \IgnorePar\fi\HCode{</td><td width="5\%">}}
     {\end:TTT |<try inline par|>} |% was: \IgnorePar\par|%
\else
%   \ConfigureEnv{equation}
%     {\relax\ifmmode\else\par\fi\:xhtml{\IgnorePar\EndP}%
%      \HCode{<center class="equation"><table class="equation"\Hnewline
%        border="0" cellpadding="0" cellspacing="15"><tr><td>}%
%     }
%     {\:xhtml{\IgnorePar\EndP}%
%      \HCode{</td></tr></table></center>}\IgnorePar
%      \ifmmode\else\par\fi}
%     {}{} 
   \Configure{equation}
     {\ifmmode\else\par \IgnorePar\fi \EndP
              \HCode{<\tbl:XV{equation}><tr><td>}\IgnorePar
     }
     {\ifvmode \IgnorePar\fi\EndP\HCode{</td><td width="5\%">}}
     {\end:TTT\ifmmode\else |<try inline par|>\fi}
\fi
\Css{.equation td{text-align:center; }}
\Css{td.equation { margin-top:1em; margin-bottom:1em; }   }
>>>

\<configure html-speech-math latex\><<<
|<pic plain/latex math 4.0t|>               
\:CheckOption{pic-eqnarray}  \if:Option      
   |<PIC eqnarray Config|>
\else |<TABLE eqnarray Config 4.0t|>\fi
>>>


\<PIC eqnarray Config\><<<
\ConfigureEnv{eqnarray}
     {\IgnorePar\EndP\Tg<div class="pic-eqnarray">\Picture*{}}
     {\EndPicture\Tg</div>}{}{}
\Css{div.pic-eqnarray {text-align:center;}}  
\ConfigureEnv{eqnarray*}
     {\IgnorePar\EndP\Tg<div class="pic-eqnarray-star">\Picture*{}}
     {\EndPicture\Tg</div>}{}{}
\Css{div.pic-eqnarray-star {text-align:center;}}  
>>>

\<TABLE eqnarray Config 4.0t\><<<
\Log:Note{for pictorial eqnarray,
                      use the command line option `pic-eqnarray'}

\Configure{eqnarray}{\HCode{<table\Hnewline
        class="eqnarray\ifx \@seqncr\@eqncr\else-star\fi ">}}
    {\HCode{</table>}}
    {\HCode{<tr valign="middle" 
        class="eqnarray\ifx \@seqncr\@eqncr\else-star\fi">}}
    {\HCode{</tr>}}
    {\HCode{\ifnum \HCol=4 <td\Hnewline width="10"  
        class="eqnarray4"></td>\fi
       <td\Hnewline align="\ifcase\HCol \or right\or center\or 
               left\else right\fi" style="white-space:nowrap;"\Hnewline 
               class="eqnarray\HCol">}}
    {\EndP\HCode{</td>}}
>>>

\<TABLE eqnarray Config 4.0t\><<<
\ConfigureEnv{eqnarray}
    {\:xhtml{\IgnorePar\EndP}\HCode{<div class="eqnarray">}}
    {\:xhtml{\EndP}\HCode{</div>}}{}{}
\ConfigureEnv{eqnarray*}
    {\:xhtml{\IgnorePar\EndP}\HCode{<div class="eqnarray">}}
    {\:xhtml{\EndP}\HCode{</div>}}{}{}
\Css{div.eqnarray{text-align:center;}} 
>>>
                                              %%%%%%%%%%%%%%%%%%%%%%%
                                              % lttab.dtx
                                              %%%%%%%%%%%%%%%%%%%%%%%

\subsection{Tabbing, Tabular and Array Environments}

\<configure html-speech latex\><<<
\:CheckOption{no-array}\if:Option \else
   |<html latex array/tabular Config 4.0t|>
\fi
>>>


\<configure html-speech-math latex\><<<
\:CheckOption{no-array}\if:Option \else
   |<math html latex array/tabular|>
\fi
>>>




\<vspace body for array/tabular\><<<
\append:def\vspc:s{\h:HBorder}%
\def\:tempb{\ifnum \tmp:cnt<\ar:cnt 
    \advance\tmp:cnt by 1 \append:def\vspc:s{\i:HBorder}%
    \expandafter\:tempb
  \fi }
\tmp:cnt|=0 \:tempb
\append:def\vspc:s{\j:HBorder}\global\let\vspc:s|=\vspc:s
>>>

\<0,32,4 latex\><<<
\Configure{hline}{\ifx \ar:cnt\:UnDef\else
      \o:noalign:{|<hline body for array/tabular|>}%
      \expandafter\ignoreEndTr
   \fi}
\Configure{//[]}{\ifx \ar:cnt\:UnDef 
   \else\o:noalign:{|<vspace body for array/tabular|>}\fi}
>>>



\<hline body for array/tabular\><<<
\append:def\hline:s{\a:HBorder}%
\def\:tempb{\ifnum \tmp:cnt<\ar:cnt 
    \advance\tmp:cnt by 1 \append:def\hline:s{\b:HBorder}%
    \expandafter\:tempb
  \fi }%
\tmp:cnt|=0 \:tempb
\append:def\hline:s{\c:HBorder}\global\let\hline:s|=\hline:s
>>>



\<html latex array/tabular Config 4.0t\><<<
\Configure{multicolumn}
   {\let\sv:VBorder\VBorder
    \let\VBorder\empty
    \Configure{VBorder}{}{}{}{}%
   }
   {\let\VBorder\sv:VBorder}   
   {\ifvmode\IgnorePar\fi 
    \HCode{<div class="multicolumn" }\HColAlign\HCode{>}}
   {\ifvmode\IgnorePar\fi \EndP\HCode{</div>}}
>>>



\<html latex array/tabular Config 4.0t\><<<
\def\pic:env{%
   \def\begin##1{\bgroup
      \def\end####1{\o:end:{####1}\EndPicture\egroup}%
      \ifx \EndPicture\:UnDef
           \Picture+{ class="##1" align="middle"}%
      \else \let\EndPicture|=\empty\fi
      \o:begin:{##1}}%
}
>>>

\verb'\AllColMargins' Return a binary string in which 1 represents
a column, and 0 represents a `@'. \verb'\ColMargins' retrieves the
zeros before the 1's that represent the current and following 1's.

\<html latex array/tabular Config 4.0t\><<<
\def\ColMargins{\tmp:cnt|=\HCol\relax 
   \expandafter\nosp:hbr\AllColMargins 1//}
\def\nosp:hbr#11#2//{\ifnum \tmp:cnt>1 \advance\tmp:cnt by -1
   \nosp:hbr#2//\else\nosp:gt#11#2//\fi}
\def\nosp:gt#11#21#3//{%
   \def\:temp{#1}\ifx \:temp\empty 1\else 0\fi
   \def\:temp{#2}\ifx \:temp\empty 1\else 0\fi}
\Css{div.td00{ margin-left:0pt; margin-right:0pt; }}
\Css{div.td01{ margin-left:0pt; margin-right:5pt; }}
\Css{div.td10{ margin-left:5pt; margin-right:0pt; }}
\Css{div.td11{ margin-left:5pt; margin-right:5pt; }}
>>>


\<html latex array/tabular Config 4.0t\><<<
\:CheckOption{pic-tabular}  \if:Option \else
   \Configure{tabular}
      {\ifvmode \IgnorePar\fi \EndP \halignTB{tabular}\putVBorder }
      {|<insert Clr|>\HCode{</table>}}
      {\HCode{<tr \Hnewline}\halignTR 
                            \HCode{ id="TBL-\TableNo-\HRow-">}}
      {\r:HA}
      {\HCode{<td \ifnum \HMultispan>1 colspan="\HMultispan"\fi}%
         \halignTD \HCode{ id="TBL-\TableNo-\HRow-\HCol"
         \Hnewline class="td}\NoFonts\ColMargins\EndNoFonts
         \HCode{">}|<td save EndP|>%
         |<start array par box|>\PushStack\Table:Stck\TableNo}
      {|<end array par box|>\PopStack\Table:Stck\TableNo \d:HA}
\fi
|<configuring @()|>
\Css{td.td00{ padding-left:0pt; padding-right:0pt; }}
\Css{td.td01{ padding-left:0pt; padding-right:5pt; }}
\Css{td.td10{ padding-left:5pt; padding-right:0pt; }}
\Css{td.td11{ padding-left:5pt; padding-right:5pt; }}
>>>

\<insert ClrNO\><<<
\expandafter\tmp:toks\expandafter{\Clr}%
\HCode{<!--"\the\tmp:toks"-->}%
>>>

The quotes above hide \verb+>+ from IE within the comment. Otherwise, the
browser inappropriately get confused.

On the other hand, the above doesn't work, for instance on
`\verb+|r||r@{--}l|p{1.25in}|+' due to the extra \verb+--+.


\subsection{The option @()}


\<configuring @()\><<<
\Configure{@{}}{}
>>>


\<html latex array/tabular Config 4.0t\><<<
\Configure{halignTB<>}{array}{\HCode{class="array"\Hnewline
   cellpadding="0" cellspacing="0" \GROUPS\Hnewline
   frame="\ifx \GROUPS\empty void\else border\fi"
   }<>\HAlign}
\:CheckOption{pic-array}  \if:Option \else
   \Configure{array}
      {\ifvmode \IgnorePar\fi \EndP\halignTB{array}\putVBorder}
      {|<insert Clr|>\HCode{</table>}}
      {\R:HA}
      {\r:HA}
      {\D:HA\HCode{<div class="td}\NoFonts\ColMargins\EndNoFonts
            \HCode{">}|<start array par box|>\pic:env}
      {|<end array par box|>\HCode{</div>}\d:HA}
   \Configure{arrayparbox}{\ShowPar}
\fi
>>>

\verb|\par| is empty if not in par box.

\<start array par box\><<<
\par  \ShowPar
>>>

\<end array par box\><<<
\IgnorePar \EndP
>>>


We force border around the full table whenever a vertical line is
requested, because it makes the tables better looking within the
existing capabilities.

Currently, we either have empty \verb'\VBorder', or one defined to
\verb'\def\VBorder{border="1"}'.

\<html latex array/tabular Config 4.0t\><<<
  \let\VBorder|=\empty   \let\AllColMargins|=\empty
  \Configure{VBorder}
     {\let\VBorder|=\empty \let\AllColMargins|=\empty
      \global\let\GROUPS|=\empty \HAssign\NewGroup = 0 
      \gHAdvance\Next:TableNo by 1 \global\let\TableNo=\Next:TableNo }
     {\xdef\VBorder{\VBorder\ifnum \NewGroup> 0 </colgroup>\fi}
      \HAssign\NewGroup = 0  \gdef\GROUPS{rules="groups"}}
     {\Advance:\NewGroup by 1 
      \ifnum \NewGroup=1 \xdef\VBorder{\VBorder<colgroup 
          id="TBL-\TableNo-\ar:cnt g">}\fi      
      \xdef\VBorder{\VBorder<col\Hnewline id="TBL-\TableNo
         -\ar:cnt"\xml:empty>}\xdef\AllColMargins{\AllColMargins1}}
     {\xdef\AllColMargins{\AllColMargins 0}}
  \Configure{HBorder}
     {<tr\Hnewline class="hline">} {<td><hr\xml:empty></td>}   {</tr>}
     {<tr\Hnewline class="cline">}
     {<td></td>} {<td><hr\xml:empty></td>} {</tr>}
     {<tr\Hnewline class="vspace" style="font-size:\HBorderspace">} 
         {<td\Hnewline>\string&nbsp;</td>} {</tr>}
\Configure{putHBorder}{\HCode{\HBorder}}
\HAssign\Next:TableNo|=0 \global\let\TableNo=\Next:TableNo
\Css{.hline hr, .cline hr{  height : 1px; margin:0px; }}
>>>

When \verb'\putVBorder' is call  in \verb'\VBorder' 
we have a sequence of the form
\verb'<COLGROUP><COL ...">...</COLGROUP>...' with the last 
tag possibly missing.

\<html latex array/tabular Config 4.0t\><<<
\def\putVBorder{\expandafter\put:VBorder\VBorder</>|<par del|>}
\def\put:VBorder#1</#2>#3|<par del|>{\def\:temp{#2}\ifx\:temp\empty
     \HCode{\VBorder}%
     \def\:temp{#1}\ifx\:temp\empty \else\HCode{</colgroup>}\fi
  \else  \def\:temp{\put:VBorder#3|<par del|>}\expandafter\:temp\fi
}
>>>

\<configure html-speech latex\><<<
\:CheckOption{pic-tabbing}  \if:Option
    \ConfigureEnv{tabbing}{\Picture*{}}{\EndPicture}{}{}
\else 
    |<TABLE tabbing Config 4.0t|>   
    \:CheckOption{pic-tabbing'} \if:Option
        |<PICT dot tabbing|>
    \fi 
\fi
>>>

\<TABLE tabbing Config 4.0t\><<<
\Configure{tabbing}[1.5]{%
    \ifvmode \IgnorePar\fi\EndP \leavevmode\ht:special{t4ht=<table 
     \Hnewline\:zbsp{tabbing}><tr \Hnewline valign="baseline"
     class="tabbing">}}
   {\ht:special{t4ht=</tr></table>}\ShowPar \csname par\endcsname
    |<global HtmlPar|>%
   }
   {\ht:special{t4ht=<td \ifx \TabWidth\empty \else
                width="\TabWidth"\fi \Hnewline 
                class="tabbing\ifx \`\TabType -right\fi">}}
   {\ht:special{t4ht=</td>}}
\ConfigureEnv{tabbing}{\IgnorePar\EndP}{}{}{}     
\Css{.tabbing-right {text-align:right;}}
>>>   



%%%%%%%%%%%%%%%%%%%%%% to be placed %%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{to be placed}
%%%%%%%%%%%%%%%%%%%



\<4 latex\><<<
\Configure{underline}
   {\HCode{<span class="underline">}\:gobble}
   {\HCode{</span>}}
\Css{.underline{ text-decoration:underline; }}
\Css{.underline img{ border-bottom: 1px solid black; 
                     margin-bottom:1pt; }}
>>>

\<4 plain\><<<
\Configure{underline}
   {\HCode{<span class="underline">}\hbox\bgroup \:gobble}
   {\egroup \HCode{</span>}}
\Css{.underline{ text-decoration:underline; }}
\Css{.underline img{ border-bottom: 1px solid black; 
                     margin-bottom:1pt; }}
>>>



\<4 plain,latex\><<<
\Configure{overline}
   {\HCode{<span class="overline">}}
   {\HCode{</span>}}
\Css{.overline{ text-decoration:overline; }}
\Css{.overline img{ border-top: 1px solid black;  }}
>>>










\<0,32,4 latex\><<<
\:CheckOption{pic-framebox} \if:Option
  \Configure{framebox}
    {\Picture+[]{ \a:@Picture{framebox}}} {\EndPicture}
\else
  \Log:Note{for bitmap framebox'es, use
          the command line option `pic-framebox'}
  \Configure{framebox}
     {\HCode{<span class="framebox-\frameboxAlign"\Hnewline
                   style="width:\frameboxWidth;">}}
     {\HCode{</span>}}
  |<shared framebox style|>
\fi
>>>

%       \bgroup
%      \fboxrule=0pt \fboxsep=0pt
%   \HAssign\frameboxN=0
%       \gHAdvance\frameboxN by 1
%  id="framebox-\frameboxN"


\<shared framebox style\><<<
\Css{.framebox-c, .framebox-l, .framebox-r {  
  padding-left:\the\fboxsep;
  padding-right:\the\fboxsep;
  text-indent:0pt;
  border:solid black \the\fboxrule;
}}
\Css{.framebox-c {text-align:center;}}
\Css{.framebox-l {text-align:left;}}
\Css{.framebox-r {text-align:right;}}
>>>

\<32,4 latex\><<<
\:CheckOption{pic-fbox} \if:Option
  \Configure{fbox}
    {\leavevmode\Picture+[]{ \a:@Picture{fbox}}} {\EndPicture}
\else
  \Log:Note{for bitmap fbox'es, use
          the command line option `pic-fbox'}
  \Configure{fbox}
     {\ifvmode \IgnorePar\EndP 
               \HCode{<div class="fbox">}%
               \def\end:bx{\HCode{</div>}\par}%
      \else
               \HCode{<span class="fbox">}%
               \def\end:bx{\HCode{</span>}}%
      \fi}
     {\end:bx}
  \Css{.fbox {padding-left:\the\fboxsep;
                  padding-right:\the\fboxsep;
                  text-indent:0pt;
                  border:solid black \the\fboxrule;
      }}
   \Css{div.center div.fbox {text-align:center; clear:both;
                             padding-left:3.0pt; padding-right:3.0pt;
                             text-indent:0pt; border:solid black 0.4pt; }}
\fi
>>>




\<0,32,4 latex\><<<
\Configure{InsertTitle}{\let\label|=\lb:l
   \let\ref|=\o:ref \Configure{ref}{}{}{}}
\Configure{AfterTitle}{\let\index|=\:index
       \let\ref|=\:ref  \let\label|=\lb:l }
\Configure{NoSection}
  {\let\sv:index|=\index \let\sv:label|=\label 
   \let\sv:newline|=\newline \def\newline{ }%
   \let\sv:setfontsize|=\@setfontsize  \let\@setfontsize|=\:gobbleIII
   \let\index|=\@gobble  \let\label|=\@gobble  
   |<nolink ref|>%
  }
  {\let\index|=\sv:index \let\label|=\sv:label 
   |<restore ref|>%
   \let\newline|=\sv:newline    \let\@setfontsize|=\sv:setfontsize 
  }
>>>

\<nolink ref\><<<
\let\sva:rEfLiNK|=\a:rEfLiNK
\let\svb:rEfLiNK|=\b:rEfLiNK
\let\svc:rEfLiNK|=\c:rEfLiNK  
\expandafter\let\expandafter\svC:rEfLiNK\c:rEfLiNK
\Configure{ref}{}{}{}%  \let\sv:ref|=\ref  \let\ref|=\@gobble
>>>

\<restore ref\><<<
\let\a:rEfLiNK|=\sva:rEfLiNK
\let\b:rEfLiNK|=\svb:rEfLiNK
\let\c:rEfLiNK|=\svc:rEfLiNK
\expandafter\let\c:rEfLiNK\svC:rEfLiNK  %  \let\ref\sv:ref  
>>>

\<0,32,4 latex\><<<
\Configure{oalign}{\Picture+{ \a:@Picture{oalign}}}{\EndPicture}
\Configure{TocLink}
  {\expandafter\ifx \csname #3-def\endcsname\relax
      \global\expandafter\let \csname #3-def\endcsname\def
      \Link{#2}{#3}%
   \else
      \Link{#2}{}%
   \fi
   {\Configure{ref}{}{}{}%
      |<cite in TocLink|>#4}\ifvmode\IgnorePar\fi\EndLink}
>>>


\<configure html-speech-math latex\><<<
\Configure{stackrel}{\Picture+{ class="stackrel"}\mathrel}
                    {\limits ^}{\EndPicture}
>>>


\<0,32,4 latex\><<<
\Configure{picture}
    {\Picture+[PICT]{}}
    {\EndPicture}
>>>


\<32,4 latex\><<<
\ConfigureEnv{minipage}
   {\IgnorePar\EndP\HCode{<table class="minipage"><tr><td>}}
   {\EndP\HCode{</td></tr></table>}}
   {}{}
\Css{table.minipage{width:100\%;}} 
>>>

Tried the following for minipage
\begin{verbatim}
\ConfigureEnv{minipage}
    {\IgnorePar\EndP\HCode{<div class="minipage">}}
    {\EndP\HCode{</div>}}
   {\IgnoreIndent\HtmlEnv}{}
\end{verbatim}
but was not able to find an appropriate css code for centered pages
\begin{verbatim}
Es ist ganz einfach:

\begin{center}
  \raisebox{0cm}{\begin{minipage}{10cm}\sc Jesus Christus\\
erbarme dich meiner!\end{minipage}}
\end{center}

Varianten sind:
\end{verbatim}




\<latex shared section config\><<<
\Configure{endsection}
     {likesection,chapter,likechapter,appendix,part,likepart}
\Configure{endlikesection}
     {section,chapter,likechapter,appendix,part,likepart}
>>>

\<latex shared subsection config\><<<
\Configure{endsubsection}
   {likesubsection,section,likesection,chapter,%
      likechapter,appendix,part,likepart}
\Configure{endlikesubsection}
   {subsection,section,likesection,chapter,%
      likechapter,appendix,part,likepart}
>>>

\<latex shared subsubsection config\><<<
\Configure{endsubsubsection}
   {likesubsubsection,subsection,likesubsection,section,%
      likesection,chapter,likechapter,appendix,part,likepart}
\Configure{endlikesubsubsection}
   {subsubsection,subsection,likesubsection,section,%
      likesection,chapter,likechapter,appendix,part,likepart}
>>>




\<latex shared div config\><<<
\Configure{endlikeparagraph}
   {paragraph,subsubsection,likesubsubsection,subsection,%
    likesubsection,section,%
    likesection,chapter,likechapter,appendix,part,likepart}
\Configure{endsubparagraph}
   {likesubparagraph,likeparagraph,subsubsection,likesubsubsection,%
    subsection,likesubsection,section,%
    likesection,chapter,likechapter,appendix,part,likepart}
\Configure{endlikesubparagraph}
   {subparagraph,likeparagraph,subsubsection,likesubsubsection,%
    subsection,likesubsection,section,%
    likesection,chapter,likechapter,appendix,part,likepart}
>>>

\<latex shared paragraph config\><<<
\Configure{endparagraph}
   {likeparagraph,subsubsection,likesubsubsection,subsection,%
    likesubsection,section,%
    likesection,chapter,likechapter,appendix,part,likepart}
>>>



\<latex shared part config\><<<
\Configure{endpart}{likepart}
\Configure{endlikepart}{endpart}
>>>


\<latex shared part config\><<<
\Configure{part}{}{}
   {\IgnorePar \EndP\HCode{<h1 class="partHead"\a:LRdir>}%
       \HCode{<span class="titlemark">}\partname \ \thepart
       \HCode{<br\xml:empty></span>}}
   {\HCode{</h1>}\IgnoreIndent\par}
\Configure{likepart}{}{}
   {\IgnorePar\EndP\HCode{<h1 class="likepartHead"\a:LRdir>}}
   {\HCode{</h1>}\IgnoreIndent\par}
\Configure{partTITLE+}{\thepart\space #1}
\Configure{likepartTITLE+}{#1}
\Css{h1.partHead{text-align: center}}
>>>



\<configure html-speech latex\><<<
\ifx\bf\:UnDef 
   \def\bf{\normalfont\bfseries}
\fi
>>>
Earlier we had 
\verb'\:CheckOption{no-halign} \if:Option \else |<pic array|> \fi', 
and the same for pic tabular. Why?



\<4 plain,latex\><<<
\Configure{displaylines}
   {\IgnorePar \EndP
     \HCode{<table \Hnewline border="0" width="100\%"
         class="displaylines">}\IgnorePar}
   {\HCode{</table>}}
   {\HCode{<tr class="displaylines"><td \Hnewline
       valign="baseline" class="displaylines" 
       >}}{\HCode{</td></tr>}}
\Css{td.displaylines {text-align:center; white-space:nowrap;}}
>>>












\<configure html-speech latex\><<<
|</TeX for 4.0t|>
\def\:temp{\HCode{<span class="LATEX">}L\HCode{<span
   class="A">}A\HCode{</span>}\TeX\HCode{</span>}}
\HLet\LaTeX|=\:temp
\def\:temp{\mbox{%
  \if b\expandafter\@car\f@series\@nil\boldmath\fi
  \LaTeX2$_{\textstyle\varepsilon}$}}
\expandafter\HLet\csname LaTeXe\endcsname|=\:temp
\Css{span.LATEX span.A{ position:relative; top:-0.5ex;
   left:-0.4em; font-size:85\%;}}
\Css{span.LATEX span.TEX{ position:relative; left: -0.4em; }}
\Configure{@TITLE}{\def\LaTeX{LaTeX}\let\fontencoding|=\:gobble
  \let\fontfamily|=\:gobble \let\fontseries|=\:gobble
  \let\fontshape|=\:gobble  \let\usefont|=\:gobbleIV  }
>>>





\<configure html-speech latex\><<<
\Configure{newline}{\HCode{<br class="newline"\xml:empty>}}
>>>




\<configure html-speech supertabular\><<<
\Configure{SpBorder}
   {<tr\Hnewline class="vspace"><!--\SpBorder-->}
   {<td>\string&nbsp;</td>}
   {</tr>}
\ConfigureEnv{supertabular}
   {\par \IgnorePar \EndP \HCode{<div class="supertabular">}}
   {\HCode{</div>}\par}
   {} {}
\Css{.supertabular {text-align:center}}
>>>

\<configure html-speech longtable\><<<
\:CheckOption{old-longtable}\if:Option 
  |<config old longtable|>
\else
  |<config new longtable|>
\fi
>>>


\<config new longtable\><<<   
\Configure{halignTB<>}{longtable}{\HCode{class="longtable"\Hnewline 
   cellspacing="0" cellpadding="0" \GROUPS\Hnewline
   frame="\ifx \GROUPS\empty void\else border\fi"
   }<>\HAlign}
\Configure{longtable}
   {\IgnorePar\EndP
     \HCode{|<show input line no|><div class="longtable">}%
    \halignTB{longtable}\putVBorder }
   {|<insert Clr|>\HCode{</table></div>}}
   {\HCode{<tr \Hnewline}\halignTR\HCode{ id="TBL-\TableNo-\HRow-">}}
   {\r:HA}
   {\HCode{<td \ifnum \HMultispan>1 colspan="\HMultispan"\fi}%
    \halignTD \HCode{ id="TBL-\TableNo-\HRow-\HCol"
    \Hnewline class="td}\NoFonts\ColMargins\EndNoFonts
    \HCode{">}|<td save EndP|>%
    |<start array par box|>\PushStack\Table:Stck\TableNo}
   {\PopStack\Table:Stck\TableNo |<end array par box|>\d:HA}
\Css{div.longtable{text-align:center;}}
\Configure{longtableparbox}{\IgnorePar\leavevmode\ShowPar\par}
>>>


\<config old longtable\><<<
\let\a:longtable=\a:tabular
\let\b:longtable=\b:tabular
\let\c:longtable=\c:tabular
\let\d:longtable=\d:tabular
\let\e:longtable=\e:tabular
\let\f:longtable=\f:tabular
>>>

\<configure html-speech latex\><<<
\Configure{float}
   {\ifOption{refcaption}{}{\csname par\endcsname\ShowPar \leavevmode}}
   {\:xhtml{\IgnorePar\EndP}\HCode{<hr class="float"\xml:empty><div
     class="float"\Hnewline><table
     class="float"><tr  class="float"><td class="float"\Hnewline
        >}}
   {\ifvmode \IgnorePar \fi\EndP
    \HCode{</td></tr></table></div><hr
        class="endfloat" />}\csname par\endcsname\ShowPar}
\ConfigureEnv{figure}
   {\:xhtml{\IgnorePar\EndP}\HCode{<hr class="figure"\xml:empty><div
     class="figure"\Hnewline><table
     class="figure"><tr  class="figure"><td class="figure"\Hnewline>}%
    \bgroup \Configure{float}{\ShowPar}{}{}%    
   }
   {\egroup
    \:xhtml{\IgnorePar\EndP}\HCode{</td></tr></table></div><hr
       class="endfigure"\xml:empty>}|<try env inline par|>\par}
   {}{}
\Css{div.float img,  div.float  .caption {text-align:center;}}
\Css{div.figure img, div.figure .caption {text-align:center;}}
>>>
The \verb'<TABLE>' is needed as a grouping mechanism for \verb'<CENTER>'.




%%%%%%%%%%%%%%%%%%%%%%
\section{Plain}
%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{General}
%%%%%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech plain\><<<
|<4 plain,latex|>
|<0,32,4 plain|>
|<0,32,4 plain,latex|>
|<32,4 plain,latex|>
|<32,4 plain|>
|<4 plain|>
|<plain items|>             |%keep last in html mode?|%
>>>


\<4 plain\><<<
\def\plain:indent{\ShowIndent \global\let\plain:indent\empty}
\Configure{@BODY}{\plain:indent}
>>>



\<plain items\><<<
\Configure{item} 
   {}{} 
   {\par\Configure{items}{\item:class}\HCode{<span class="item">}} 
   {\HCode{</span>}\Configure{items}{}} 
\Configure{itemitem} 
   {}{} 
   {\par\Configure{items}{\itemitem:class}\HCode{<span class="itemitem">}} 
   {\HCode{</span>}\Configure{items}{}} 
\Css{p.item {text-indent:-2em; margin-left:2em;}} 
\Css{p.itemitem {text-indent:-2em; margin-left:4em;}} 
\Css{span.item, span.itemitem {width:2em; margin-right:0.4em;}}
\Configure{!P}{\a:items} 
\NewConfigure{items}{1} 
\Configure{items}{} 
\def\item:class#1class#2"#3"{#1class="item"} 
\def\itemitem:class#1class#2"#3"{#1class="itemitem"} 
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Environments}
%%%%%%%%%%%%%%%%%%%%%%%%%

\<4 plain\><<<
\Configure{settabs}[1.5]{\IgnorePar\EndP\leavevmode
     \ht:special{t4ht=<table 
     \Hnewline\:zbsp{settabs}><tr \Hnewline valign="baseline"
     class="settabs">}}
   {\ht:special{t4ht=</tr></table>}}
   {\ht:special{t4ht=<td \ifx \TabWidth\empty \else
                width="\TabWidth"\fi \Hnewline class="settabs">}}
   {\ht:special{t4ht=</td>}}
>>>   

\<4 plain\><<<
\Configure{narrower}{\ifvmode \IgnorePar\fi  \EndP%
   \HCode{<table cellpadding="15" class="narrower"><tr
      class="narrower"><td class="narrower">}\ifvmode \IgnorePar\fi}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{</td></tr></table>}\ifvmode \IgnorePar\fi}
>>>



\<0,32,4 plain\><<<
\Configure{settabs}[1.5]{}{}{}{}{}
\Configure{line}{\HCode{<br\xml:empty>}}
>>>

\<4 plain\><<<
\Configure{proclaim}
    {\IgnorePar\EndP\HCode{<div class="proclaim"><span class="proclaim">}}
    {\HCode{</span>}}    {\IgnorePar\EndP\HCode{</div>}}
\Css{div.proclaim { margin-top: 1em; margin-bottom: 1em; }}
>>>

\<4 plain\><<<
\Configure{beginsection}
  {\ifvmode \IgnorePar\fi \EndP
   \HCode{<div class="beginsection">}}
  {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
  {\HCode{<h3 class="beginsection">}} 
  {\HCode{</h3>}\par\ShowPar}
\ConfigureToc{beginsection} 
     {} {\relax}  {}  { }
>>>

% \Css{div.beginsection { margin-top: 1em; margin-bottom: 1em; }}




\<4 plain\><<<
\Configure{TableOfContents}
   {\IgnorePar\EndP \HCode{<div class="TableOfContents">}}{}
   {\ifvmode \IgnorePar\fi\EndP
    \HCode{</div>}\ShowPar}{\HCode{<br\xml:empty>}}{}
>>>

\<4 plain\><<<
\Configure{insert}
  {\IgnorePar\EndP\HCode{<hr class="insert"\xml:empty>}\IgnorePar}
  {\IgnorePar\EndP\HCode{<hr class="endinsert"\xml:empty>}\IgnorePar}
>>>

\<pic plain/latex math 4.0t\><<<
\NewConfigure{@root}{1}
\Configure{@root}{align="middle" }
>>>

\<html-speech-math plain,fontmath\><<<
\Configure{big}{\HCode{<span class="big">}}{\HCode{</span>}}{}{}
\Configure{Big}{\HCode{<span class="bbig">}}{\HCode{</span>}}{}{}
\Configure{bigg}{\HCode{<span class="bigg">}}{\HCode{</span>}}{}{}
\Configure{Bigg}{\HCode{<span class="bbigg">}}{\HCode{</span>}}{}{}
>>>

\<pic plain math 4.0t\><<<
\Configure{@underbrace}{align="middle"}
>>>

\<4 plain,latex\><<<
\def\:zbsp#1{cellpadding="0" border="0" cellspacing="0"\Hnewline
   class="#1"}
>>>

\<4 plain,latex\><<<
\Configure{centerline}{\ifvmode \IgnorePar
     \fi \EndP\HCode{<div \Hnewline 
      class="centerline">}}{\EndP\HCode{</div>}\ShowPar}
\Configure{leftline}{\ifvmode \IgnorePar
     \fi \EndP \HCode{<p\Hnewline  class="leftline">}}
   {\HCode{</p>}\ShowPar} 
\Configure{rightline}
   {\IgnorePar\EndP\HCode{<p class="rightline">}}
   {\HCode{</p>}\ShowPar}
\Css{.centerline {text-align:center;}}
\Css{.rightline {text-align:right;}}
>>>

\<4 plain,latex\><<<
\def\tbl:XV#1{table width="100\%"\Hnewline class="#1"}
>>>


The \verb'100%' is to allow centering of stuff on the page.
The table is a grouping mechanism to protect internal stuff
from external centering operations.


The \verb'special{t4ht=' is superior to \verb'\HCode{' because it can
prevent \verb'<p>'s from entering before \verb'<NOBR>'.


The hbox is for avoiding the start of a new paragraph, if in vmode.





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Shared plain latex Math}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%






\<configure html-speech-math plain\><<<

|<html-speech-math plain,fontmath|>
>>>





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Classes}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%




%%%%%%%%%%%%%%%%%
\section{article}
%%%%%%%%%%%%%%%%%

\<configure html-speech article\><<<
|<article,report,book options 1, 2, 3|>
\:CheckOption{1}     \if:Option
  |<toc article,report options 1|>
\fi
|<config book-report-article|>
|<config report-article|>
>>>


\<config report-article\><<<
\ConfigureEnv{abstract}
   {\IgnorePar\EndP
    \HCode{<\tbl:XV{abstract}><tr><td\Hnewline>}\par\ShowPar} 
   {\ifvmode \IgnorePar\fi \EndP\HCode{</td></tr></table>}}{}{}
\Css{.abstract p {margin-left:5\%; margin-right:5\%;}}
>>>



%%%%%%%%%%%%%%%%
\section{report}
%%%%%%%%%%%%%%%%%

\<configure html-speech report\><<<
|<article,report,book options 1, 2, 3|>
\:CheckOption{1}     \if:Option
  |<toc article,report options 1|>
\fi
|<config book-report-article|>
|<latex shared part config|>
|<config book-report 4.0t|>
|<config report-article|>
|<32,4 report,book|>
|<32,4 report|>
>>>

\<32,4 report\><<<
\ConfigureMark{chapter}
   {\HCode{<span class="titlemark">}\chaptername
    \ \thechapter\HCode{</span>}}
\Configure{chapter}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="chapterHead"\a:LRdir>}%
     \TitleMark{\HCode{<br\xml:empty>}}}
   {\HCode{</h2>}\IgnoreIndent\par}
\Configure{chapterTITLE+}{\thechapter\space#1}
\Configure{likechapterTITLE+}{#1}
>>>


\<32,4 report\><<<
\Configure{appendix}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="appendixHead"\a:LRdir>}%
     \TitleMark{\HCode{<br\xml:empty>}}}
   {\HCode{</h2>}\IgnoreIndent}
\Configure{likechapter}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="likechapterHead"\a:LRdir>}}
   {\HCode{</h2>}\IgnoreIndent}
>>>

\<32,4 report,book\><<<
\ConfigureMark{appendix}{\HCode{<span class="titlemark">}%
   \appendixname \ \thechapter\HCode{</span>}}
\Configure{appendixTITLE+}{\thechapter\space#1}
\Configure{likechapterTITLE+}{#1}
>>>

\<32,4 report,book\><<<
\Configure{endchapter}{likechapter,appendix,part,likepart}
\Configure{endlikechapter}{chapter,appendix,part,likepart}
\Configure{endappendix}{chapter,likechapter,part,likepart}
>>>


%%%%%%%%%%%%%%
\section{book}
%%%%%%%%%%%%%%

\<configure html-speech book\><<<
|<article,report,book options 1, 2, 3|>
\:CheckOption{1}     \if:Option
   |<toc book options 1|>
\fi
|<config book-report-article|>
|<latex shared part config|>
|<config book-report 4.0t|>
|<32,4 report,book|>
|<32,4 book|>
>>>

\<32,4 book\><<<
\ConfigureMark{chapter}
   {\if@mainmatter \ifnum \c@secnumdepth >\m@ne
       \HCode{<span class="titlemark">}\chaptername
     \ \thechapter\HCode{</span>}\fi \fi}
\Configure{chapterTITLE+}{\if@mainmatter\thechapter\space\fi#1}
\renewcommand\thechapter {\if@mainmatter\@arabic\c@chapter\fi}
>>>

\<32,4 book\><<<
\Configure{chapter}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="chapterHead"\a:LRdir>}%
    \if@mainmatter \TitleMark{\HCode{<br\xml:empty>}}\fi }
   {\HCode{</h2>}\IgnoreIndent}
\Configure{appendix}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="appendixHead"\a:LRdir>}%
    \if@mainmatter \TitleMark{\HCode{<br\xml:empty>}}\fi }
   {\HCode{</h2>}\IgnoreIndent}
\Configure{likechapter}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="likechapterHead"\a:LRdir>}}
   {\HCode{</h2>}\IgnoreIndent}
>>>


\<chapter toc css\><<<
\Css{.chapterToc a, .chapterToc, .likechapterToc a, .likechapterToc,
        .appendixToc a, .appendixToc
        {line-height: 200\%; font-weight:bold;}}
>>>


\<part toc css\><<<
\Css{.partToc a, .partToc, .likepartToc a, .likepartToc
        {line-height: 200\%; font-weight:bold; font-size:110\%;}}
>>>






%%%%%%%%%%%%%%%%%%
\section{letter}
%%%%%%%%%%%%%%%%%%


\<configure html-speech letter\><<< 

|<quotations|>
|<description 4|>
|<base font size|>
\ConfigureEnv{verse}
   {\ifvmode \IgnorePar\fi\EndP\Tg<div class="verse">}
   {\ifvmode \IgnorePar\fi\EndP\Tg</div>}
   {}{}
\ConfigureList{verse}
   {}{}
   {\parindent=\z@}  {\par}
\Css{.verse{white-space:nowrap; margin-left:2em}}
>>>




\<configure html-speech letter\><<< 
\Configure{opening}
   {\bgroup
       \ConfigureEnv{tabular}{}{}{}{}%
       \Configure{tabular}
         {\EndP\ifvmode \IgnorePar \fi 
          \HCode{<div class="opening"\a:LRdir>}}
         {\HCode{</div><p class="clear-both" />}}
         {}
         {\HCode{<br />}}
         {}{}%
       \Configure{HBorder}
         {<br class="hline"/>} {}{}
         {<br class="cline" />} {}{} {}
         {<br class="vspace"/>} {}{}%
   }
   {\egroup}
\Configure{closing}
   {\EndP\ifvmode \IgnorePar\fi
    \HCode{<div class="closing">}}
   {\EndP\ifvmode \IgnorePar\fi
    \HCode{</div><p class="clear-both" />}}
\longindentation=0pt
\Css{div.opening{float:right;}}
\Css{div.closing {float:right; margin-right:2em;}}
\Css{p.clear-both{clear:both;}}
>>>

\<configure html-speech letter\><<< 
\Configure{address}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<span class="address">}}
   {\HCode{</span>}}
\Configure{toaddress}
   {\HCode{<div class="toaddress">}}
   {\HCode{</div>}}
\Configure{toname}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="toname">}}
   {\HCode{</div>}}
\Configure{date}
   {\HCode{<span class="date">}}
   {\HCode{</span>}}
\Configure{dear}
   {\HCode{<span class="dear">}}
   {\HCode{</span>}}
\Configure{sincerely}
   {\HCode{<span class="sincerely">}}
   {\HCode{</span>}}
\Configure{signature}
   {\HCode{<span class="signature">}}
   {\HCode{</span>}}
\Configure{cc}
   {\HCode{<div class="cc">}\IgnorePar}
   {\ifvmode\IgnorePar\fi\HCode{</div>}}
\Configure{encl}
   {\HCode{<div class="encl">}\IgnorePar}
   {\ifvmode\IgnorePar\fi\HCode{</div>}}
>>>


%%%%%%%%%%%%%%%%%
\section{AMS Art, Proc, Book}
%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%
\subsection{amsart}
%%%%%%%%%%%%%%%%



\<configure html-speech amsart\><<<
|<ams art,proc,book|>
|<ams art,proc|>
|<ams art|>
>>>




\<ams art,proc,book\><<<
|<ams maketitle|>
|<makeketitle config 4.0t|>
|<thebib config|>
>>>

\<makeketitle config 4.0t\><<<
|<config captions|>
>>>







\<ams art,proc,book\><<<
\ifx \deferred@thm@head\:UnDef\else   
   |<ams 2000 art + book + proc|>
\fi
>>>

\<ams 2000 art + book + proc\><<<
\Configure{qed}
     {\HCode{<span class="qed">}} {\HCode{</span>}}
\Css{.qed {width:2ex; float:right; text-align:right;}}
>>>



%%%%%%%%%%%%%%%%%%%
\subsection{amsproc}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech amsproc\><<<
|<ams art,proc,book|>
|<ams proc,book|>
|<ams art,proc|>
>>>


%%%%%%%%%%%%%%%%%%%
\subsection{amsdtx}
%%%%%%%%%%%%%%%%%%%


\<configure html-speech amsdtx\><<<
|<amsdtx maketitle|>
>>>


%%%%%%%%%%%%%%%%%%%%%
\subsection{amsbook}
%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech amsbook\><<<
|<ams art,proc,book|>
|<ams proc,book|>
|<ams book|>
>>>













%%%%%%%%%%%%%%%%%%%
\subsection{Divisions}
%%%%%%%%%%%%%%%%%%%


\<ams art,proc,book\><<<
|<ams art,proc,book div|>
|<ams art,proc,book toc|>  |%should appear before TocAt|%
|<ams options 1, 2, 3|>    
>>>


\<ams art,proc,book div\><<<
\ConfigureMark{part}
   {\ifnum \c:secnumdepth>\c@secnumdepth \expandafter\:gobble
    \else
       \HCode{<span class="titlemark">}\@ifundefined{partname}{}{%
          \ignorespaces\partname\space}%
          \@seccntformat{part}%
       \HCode{</span>}\fi }
\Configure{part}{}{}
   {\ifvmode \IgnorePar\fi \EndP\IgnorePar
    \HCode{<h1 class="partHead"\a:LRdir>}\TitleMark\space\HtmlParOff}
   {\HCode{</h1>}\HtmlParOn \IgnoreIndent \par}
\Configure{partTITLE+}{\thepart\space#1}
>>>


\<ams book\><<<
\Configure{likepart}{}{}
   {\IgnorePar\EndP\HCode{<h1 class="likepartHead"\a:LRdir>}}
   {\HCode{</h1>}\IgnoreIndent}
\Configure{likepartTITLE+}{#1}
>>>




\<ams art,proc,book div\><<<
\ConfigureMark{section}
   {\ifnum \c:secnumdepth>\c@secnumdepth \expandafter\:gobble
    \else
       \HCode{<span class="titlemark">}\@ifundefined{sectionname}{}{%
          \ignorespaces\sectionname\space}%
          \@seccntformat{section}%
       \HCode{</span>}\fi }
|<section TITLE+|>
\Configure{section}{}{}
   {\ifvmode \IgnorePar\fi \EndP\IgnorePar
    \HCode{<h3 class="sectionHead"\a:LRdir>}\TitleMark\space\HtmlParOff}
   {\HCode{</h3>}\HtmlParOn \IgnoreIndent \par}
>>>

\<section TITLE+\><<<
\Configure{sectionTITLE+}{\ifnum \c:secnumdepth>\c@secnumdepth
      \ifnum \c@secnumdepth > 0
      \thesection\space
    \fi\fi #1}
>>>


\<subsection TITLE+\><<<
\Configure{subsectionTITLE+}{\ifnum \c:secnumdepth>\c@secnumdepth
      \ifnum \c@secnumdepth > 0
      \thesubsection\space
    \fi\fi #1}
>>>

\<subsubsection TITLE+\><<<
\Configure{subsubsectionTITLE+}{\ifnum \c:secnumdepth>\c@secnumdepth
      \ifnum \c@secnumdepth > 0
      \thesubsubsection\space
    \fi\fi #1}
>>>


\<ams art\><<<
\Css{.sectionHead{text-align:center;}}
>>>

 


\<ams proc,book\><<<
\Configure{paragraph}{}{}
  {\ShowPar\IgnoreIndent\HCode{<span class="paragraphHead"\a:LRdir>}\begingroup\bf}
  {\endgroup\HCode{</span>}\IgnorePar}
\ConfigureMark{subparagraph}{\thesubparagraph}
\Css{.paragraphHead  { margin-top:2em; font-weight: bold;}}
>>>




\<ams art\><<<
\Configure{paragraph}{}{}
  {\ShowPar\IgnoreIndent\HCode{<span class="paragraphHead"\a:LRdir>}}
  {.\HCode{</span>}\IgnorePar}
\ConfigureMark{subparagraph}{}
>>>


\<ams proc,book\><<<
\Configure{subparagraph}{}{}
  {\ShowPar\HCode{<span class="subparagraphHead"\a:LRdir>}\begingroup\bf
   \TitleMark\space}
  {\endgroup\HCode{</span>}\IgnorePar}
\Css{.subparagraphHead { font-weight: bold;}}
>>>

\<ams art\><<<
\Configure{subparagraph}{}{}
  {\ShowPar\noindent\HCode{<span class="subparagraphHead"\a:LRdir>}\begingroup
   \TitleMark\space}
  {.\endgroup\HCode{</span>}\IgnorePar}
>>>>



\<ams book\><<<
\ConfigureMark{chapter}
   {\HCode{<span class="titlemark">}\chaptername
    \ \thechapter\HCode{</span>}}
\Configure{chapter}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="chapterHead"\a:LRdir>}%
     \TitleMark{\HCode{<br\xml:empty>}}}
   {\HCode{</h2>}\IgnoreIndent\par}
\Configure{chapterTITLE+}{\thechapter\space#1}
>>>

\<ams book\><<<
\ConfigureMark{appendix}{\HCode{<span class="titlemark">}%
   \appendixname \ \thechapter\HCode{</span>}}
\Configure{appendix}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="appendixHead"\a:LRdir>}%
    \TitleMark{\HCode{<br\xml:empty>}}}
   {\HCode{</h2>}\IgnoreIndent}
\Configure{appendixTITLE+}{\thechapter\space#1}
\Configure{likechapter}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="likechapterHead"\a:LRdir>}}
   {\HCode{</h2>}\IgnoreIndent}
\Configure{likechapterTITLE+}{#1}
>>>


\<ams art,proc\><<<
\Configure{endsection}
     {part}
\Configure{endsubsection}
   {section,part}
\Configure{endsubsubsection}
   {subsection,section,part}
\Configure{endparagraph}
   {subsubsection,subsection,section,part}
>>>



\<ams book\><<<
\Configure{endpart}{likepart}
\Configure{endlikepart}{endpart}
\Configure{endchapter}{likechapter,appendix,part,likepart}
\Configure{endlikechapter}{chapter,appendix,part,likepart}
\Configure{endappendix}{chapter,likechapter,part,likepart}
\Configure{endsection}
   {chapter,likechapter,appendix,part,likepart}
\Configure{endsubsection}
   {section,chapter,likechapter,appendix,part,likepart}
\Configure{endsubsubsection}
   {subsection,section,chapter,likechapter,appendix,part,likepart}
\Configure{endparagraph}
   {subsubsection,subsection,section,chapter,likechapter,%
    appendix,part,likepart}
>>>








%%%%%%%%%%%%%%%%%%%
\subsection{Tocs at Cut Points}
%%%%%%%%%%%%%%%%%%%


\<ams art,proc\><<<
\:CheckOption{1}     \if:Option
  |<toc article,report options 1|>
\fi
>>>

\<ams book\><<<
\:CheckOption{1}     \if:Option
   |<toc book options 1|>
\fi
>>>




%%%%%%%%%%%%%%%%%%%%%%
\section{amsppt.sty}
%%%%%%%%%%%%%%%%%%%%%%



\<configure html-speech amsppt\><<<
\ifx \EnditemitemList\:UnDef
    \Configure{itemitem}
   {}{}
   {\par{\Configure{HtmlPar}{\Tg<p class="itemitem">}
                            {\Tg<p class="itemitem">} {}{}%
         \:xhtml{\Configure{HtmlPar}{\EndP\Tg<div class="itemitem">}
                            {\EndP\Tg<div class="itemitem">}
                            {\Tg</div>}{\Tg</div>}}%
         \noindent}}
   {}
   \Css{.itemitem {margin-left: 5em; text-indent: -2em;
                margin-top: 0.5em; margin-bottom: 0.5em;}}
\fi
|<32,4 amsppt|>
|<4 amsppt|>
>>>





\<4 amsppt\><<<
\Configure{title}
   {\IgnorePar\par\HCode{<div\Hnewline class="title">}}
   {\IgnorePar\EndP\HCode{</div>}\IgnorePar}
\Css{div.title {margin-top: 0.5em;
                font-weight: bold; text-align:center;}}

\Configure{author}
   {\IgnorePar\par\HCode{<div\Hnewline class="author">}}
   {\IgnorePar\EndP\HCode{</div>}\IgnorePar}
\Css{div.author {text-align:center}}

\Configure{affil}
   {\IgnorePar\par\HCode{<div\Hnewline class="affil">}}
   {\IgnorePar\EndP\HCode{</div>}\IgnorePar}
\Css{.affil {text-align:center}}

\Configure{date}
   {\IgnorePar\par\HCode{<div\Hnewline class="date">}}
   {\IgnorePar\EndP\HCode{</div>}\IgnorePar
      \append:def\c:footnote{ }%
   }
\Css{.date {text-align:center}}

\Configure{abstract}
   {\IgnorePar\par
    \HCode{<div\Hnewline class="abstract">}\ShowPar\IgnoreIndent\par}
   {}
   {}
   {\IgnorePar\EndP\HCode{</div>}\IgnorePar}
\Css{.abstract, .subjclass, .thanks, .keywords
   {margin-left:5\%; margin-right:5\%;}}

\Configure{subjclass}
   {\ifx \m:top\:Undef
       \let\m:top|=\relax \Css{.subjclass {margin-top:1em; }}%
    \fi  \Tg<div class="subjclass">} 
   {\Tg</div>}
\Configure{thanks}
   {\ifx \m:top\:Undef
       \let\m:top|=\relax \Css{.thanks {margin-top:1em; }}%
    \fi  \Tg<div class="thanks">}
   {\Tg</div>}
\Configure{keywords}
   {\ifx \m:top\:Undef
       \let\m:top|=\relax \Css{.keywords {margin-top:1em; }}%
    \fi  \ifvmode \IgnorePar\fi\EndP\Tg<div class="keywords">}
   {\ifvmode \IgnorePar\fi \EndP\Tg</div>}
>>>

\<32 amsppt, 32,4 vanilla\><<<
\Configure{title}
   {\IgnorePar\EndP\HCode{<div class="title">}\begingroup\bf}
   {\endgroup\IgnorePar\HCode{</div>}}
\Css{div.title {margin-top: 0.5em;}}
\Configure{author}
   {\IgnorePar\EndP\HCode{<br\xml:empty><center>}\IgnorePar\par}
   {\IgnorePar\EndP\HCode{</center>}}

>>>

\<32,4 amsppt\><<<
\Configure{specialhead}{}{}
   {\IgnorePar\EndP\HCode{<h1 class="amsspecialheadHead"\a:LRdir>}}
   {\HCode{</h1>}\IgnoreIndent}
\ConfigureToc{specialhead}
   {\HCode{<center>}\ignorespaces}{ }
   {}{\HCode{</center>}}
\Configure{head}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="amsheadHead"\a:LRdir>}}
   {\HCode{</h2>}\IgnoreIndent}
\ConfigureToc{head}
   {\ignorespaces}{ }{}{\HCode{<br\xml:empty>}}
\Configure{subhead}{}{}
   {\IgnorePar\EndP\HCode{<h3 class="amssubheadHead"\a:LRdir>}}
   {\HCode{</h3>}\IgnoreIndent}
\ConfigureToc{subhead} 
   {\:nbsp\:nbsp\:nbsp\:nbsp\ignorespaces} { }
   {} {\HCode{<br\xml:empty>}}
\Configure{subsubhead}{}{}
   {\IgnorePar\EndP\HCode{<h4 class="amssubsubheadHead"\a:LRdir>}}
   {\HCode{</h4>}\IgnoreIndent}
\ConfigureToc{subsubhead}
  {\:nbsp\:nbsp\:nbsp\:nbsp\:nbsp%
       \:nbsp\:nbsp\:nbsp\ignorespaces} { } {} {\HCode{<br\xml:empty>}}
\Configure{block}
   {\IgnorePar\EndP
       \HCode{<table cellpadding="15"><tr><td>}\IgnorePar\par}
   {\IgnorePar\HCode{</td></tr></table>}\IgnorePar\par}
|<amsppt captions|>
\Configure{roster}
    {\IgnorePar\EndP\HCode{<table>}\let\end:item|=\empty}
    {\IgnorePar\end:item\HCode{</table>}\IgnorePar\par} 
    {\IgnorePar\end:item \HCode{<tr valign="top"><td>}
                        \def\end:item{\EndP\HCode{</td></tr>}}}
    {\:nbsp\EndP\HCode{</td><td>}\ShowPar}
    {\IgnorePar\EndP\HCode{<table>}\let\end:iitem|=\empty}
    {\IgnorePar\end:iitem\HCode{</table>}\IgnorePar\par}
    {\IgnorePar\end:iitem\HCode{<tr valign="top"><td>}}
    {\HCode{</td><td>}
      \def\end:iitem{\EndP\HCode{</td></tr>}}}
|<bib in amsppt.sty|>
>>>

%%%%%%%%%%%%%%%%%%%%%%%%
\section{amstex.tex}
%%%%%%%%%%%%%%%%%%%%%%%%

\<amstex.tex m:env\><<<
|<amsmath / amstex1 m:env|>
>>>

\<NO\><<<
\def\m:env#1{\:xhtml{\IgnorePar\EndP}\HCode{<center><table class="#1"
   border="0" cellpadding="0" cellspacing="15"><tr><td>}}
\def\endm:env{\HCode
  {</td></tr></table></center>}\IgnorePar}
>>>

\<amsmath / amstex1 m:env\><<<
\def\m:env#1{\relax\ifmmode\else\par\fi\:xhtml{\IgnorePar\EndP}%
  \HCode{<center class="#1"><table class="#1"\Hnewline
   border="0" cellpadding="0" cellspacing="15"><tr><td>}}
\def\endm:env{\:xhtml{\IgnorePar\EndP}%
   \HCode{</td></tr></table></center>}\IgnorePar
   \ifmmode\else\par\fi}
>>>


\<shared amstex.tex matrix 4.0t\><<<
\Configure{linebreak}{\HCode{<br\xml:empty>}}
|<amstex.tex m:env|>
>>>


\section{amsthm.sty}

\<configure html-speech amsthm\><<<
\ConfigureEnv{proof}{\par\leavevmode}{\par\ShowPar}{}{}

>>>






\section{amsmath}

\<configure html-speech-math amsmath\><<<
\Configure{equation}
  {\ifmmode\else\par \IgnorePar\fi \EndP
           \HCode{<\tbl:XV{equation}><tr><td>}\IgnorePar
  }
  {\ifvmode \IgnorePar\fi\EndP\HCode{</td><td width="5\%">}}
  {\end:TTT\ifmmode\else |<try inline par|>\fi}
\Configure{equation*}
  {\ifmmode\else\par \IgnorePar\fi \EndP
           \HCode{<\tbl:XV{equation-star}><tr><td>}\IgnorePar
  }
  {\end:TTT\ifmmode\else |<try inline par|>\fi}
>>>



\<configure html-speech-math amsmath\><<<
|<amsmath / amstex1 m:env|>
>>>

\<configure html-speech-math amsmath\><<<
\:CheckOption{pic-align}  \if:Option
   |<amsmath pic-align css|>
\else
    |<amsmath align css|>
\fi
\:tempc{align}{align}
\:tempc{alignat}{alignat}
\:tempc{xalignat}{xalignat}
\:tempc{xxalignat}{xxalignat}
\:tempc{flalign}{flalign}
\:tempc{align*}{align-star}
\:tempc{alignat*}{alignat-star}
\:tempc{xalignat*}{xalignat-star}
\:tempc{flalign*}{flalign-star}
>>>

\<amsmath align css\><<<
\def\:tempc#1#2{%
   \Configure{#1}
   {\IgnorePar\EndP  \HCode{<table\Hnewline class="#2">}}
   {\HCode{</table>}}  {\HCode{<tr>}}   {\HCode{</tr>}}
   {\HCode{<td\Hnewline
      class="align-\ifnum \HCol>\maxfields@ label\else 
         \ifodd\HCol\space  odd\else     even\fi 
       \fi">}}
   {\HCode{</td>}}}
>>>

\<amsmath pic-align css\><<<
\def\:tempc#1#2{%
   \ConfigureEnv{#1}
     {\par\IgnorePar\EndP\HCode{<div class="align">}\Picture*[pict]{}}
     {\EndPicture\EndP\HCode{</div>}\par}
     {} {}}
\Css{div.align {text-align: center;}}
>>>

\<configure html-speech-math amsmath\><<<
\Configure{split}
   {\HCode{<table\Hnewline  class="split"><tr><td>}} 
   {\ifvmode \IgnorePar\fi \HCode{</td></tr></table>}}
   {\HCode{<br\Hnewline class="split-tr"\xml:empty>}} {}
   {\HCode{<br\Hnewline class="split-td"\xml:empty>}} {}
\Configure{smallmatrix}
   {\:xhtml{\IgnorePar\EndP}%
    \HCode{<table\Hnewline class="smallmatrix">}}   {\HCode{</table>}}
   {\HCode{<tr>}}                                   {\HCode{</tr>}} 
   {\HCode{<td\Hnewline>}}                          {\HCode{</td>}}
>>>



\<configure html-speech-math amsmath\><<<
\ConfigureEnv{gather*}{\m:env{gather*}}{\endm:env}{}{}   
\ConfigureEnv{gathered}{\m:env{gathered}}{\endm:env}{}{}   
\ConfigureEnv{matrix}{\m:env{matrix}}{\endm:env}{}{}   
\ConfigureEnv{quotation}{\m:env{quotation}}{\endm:env}{}{}   
\Configure{equations}{*}{}
>>>


\<configure html-speech-math amsmath\><<<
\ConfigureEnv{multline}
  {\:xhtml{\IgnorePar\EndP}%
    \HCode{<\tbl:XV{multline}><tr><td>}\Picture*{}\ExtractHLabel
  }
  {\EndPicture |<put HLabel|>\end:TTT}
  {}{}
  {}{}
\ConfigureEnv{multline*}
  {\:xhtml{\IgnorePar\EndP}%
    \HCode{<\tbl:XV{multline-star}><tr><td>}\Picture*{}%
  }
  {\EndPicture \end:TTT}
  {}{}
|<extract amsmath labels|>
>>>

\<extract amsmath labels\><<<
\def\ExtractHLabel{%
   \def\tagform@##1{{%
      \ifx \:HLabel\:UnDef \let\:HLabel=\empty \fi
      \def\tagform@####1{\expandafter\let\csname ####1\endcsname\def}%
      \:HLabel
      \expandafter\ifx\csname ##1\endcsname\relax
        \let\tagform@=\relax
        \let\HCode=\relax
        \edef\:temp{\noexpand\append:def\noexpand
                        \:HLabel{\HCode{<br />}\tagform@{##1}\HCode{<br />}}}%
        \:temp
        \global\let\:HLabel=\:HLabel
      \fi
   }}}
\def\PutHLabel{\:HLabel}
>>>

\<put HLabel\><<<
\ifx \:HLabel\:Undef \else
   \HCode{</td><td width="5\%">}\PutHLabel
   \global\let\:HLabel\:Undef
\fi
>>>




\<configure html-speech-math amsmath\><<<
\ConfigureEnv{gather}
  {\:xhtml{\IgnorePar\EndP}%
    \HCode{<\tbl:XV{gather}><tr><td 
       class="gather1">}\Picture*{}\ExtractHLabel
  }
  {\EndPicture |<put HLabel|>\end:TTT}
  {}{}
\ConfigureEnv{gather*}
  {\:xhtml{\IgnorePar\EndP}%
    \HCode{<\tbl:XV{gather-star}><tr><td>}\Picture*{}%
  }
  {\EndPicture \end:TTT}
  {}{}
>>>





\<mathml: plain, amsmath, amstex1\><<<
\def\underarrow@#1#2#3{%
      \Tg<|.munder>\Tg<|.mrow\Hnewline>#1\Tg</|.mrow>%
                 \Tg<|.mrow\Hnewline>#2\Tg</|.mrow>%
      \Tg</|.munder>}%

\def\overarrow@#1#2#3{%
      \Tg<|.mover>\Tg<|.mrow
           class="fill">#1\Tg</|.mrow>%
      \Tg<|.mrow\Hnewline>{#2#3}\Tg</|.mrow>%
      \Tg</|.mover>}%
>>>

\<mathml: plain, fontmath, amsmath, amstex1\><<<
\def\overrightarrow{\mathpalette{\overarrow@\rightarrow}}
\def\overleftarrow{\mathpalette{\overarrow@\leftarrow}}
\def\overleftrightarrow{\mathpalette{\overarrow@\leftrightarrow}}

\def\underrightarrow{\mathpalette{\underarrow@\rightarrow}}
\def\underleftarrow{\mathpalette{\underarrow@\leftarrow}}
\def\underleftrightarrow{\mathpalette{\underarrow@\leftrightarrow}}
>>>


\<mathml: plain, fontmath, amsmath, amstex1NO\><<<
\def\overrightarrow{\mathpalette{\overarrow@\rightarrow}}
\def\overleftarrow{\mathpalette{\overarrow@\leftarrow}}
\def\overleftrightarrow{\mathpalette{\overarrow@\leftrightarrow}}

\def\underrightarrow{\mathpalette{\underarrow@\rightarrow}}
\def\underleftarrow{\mathpalette{\underarrow@\leftarrow}}
\def\underleftrightarrow{\mathpalette{\underarrow@\leftrightarrow}}
>>>

 The \verb'\HCode{}' in \verb'\sideset' is for catching superscripts and subscripts


\<configure html-speech-math amsmath\><<<
\Configure{intertext}
    {\IgnorePar \ifinalign@   
        \HCode{\ifnum \HRow>0 </td></tr>\fi<tr><td
            colspan="\ifnum \HRow>0 \HCol\else 15\fi"
                                            class="intertext">}%
     \else \ifingather@
        \HCode{<tr><td colspan="\HCol" class="intertext">}%
     \fi\fi
    }
    {\ifvmode \IgnorePar \fi \EndP\ifinalign@ 
        \HCode{</td></tr>\ifnum \HRow>0 <tr><td>\fi}%
     \else \ifingather@
         \HCode{</td></tr>}%
     \fi\fi
    }
>>>



\<configure html-speech-math amsmath\><<<
\Configure{@begin}
  {split}
  {\ifx \EndPicture \:UnDef \else \let\tagform@=\:gobble \fi}
>>>



%%%%%%%%%%%%%%%%%
\section{amscd}
%%%%%%%%%%%%%%%%%%

\<configure html-speech amscd\><<<
\ConfigureEnv{CD}
   {\Picture*{ class="CD"}$} {$\EndPicture} {}{}
\Css{.CD {text-align:center}}
>>>







%%%%%%%%%%%%%%%%
\section{Memoir}
%%%%%%%%%%%%%%%%%

\<configure html-speech memoir\><<<
\Configure{poemline}
   {\HCode{<span class="poemline">}} {\HCode{</span>}}
\Css{.poemline {text-align:right; width:6em;}}
>>>


%%%%%%%%%%%%%%%%
\section{Elsvier Articles (elsart)}
%%%%%%%%%%%%%%%%%

\<configure html-speech elsart\><<<
|<32,4 elsart|>
\Configure{abstract}
  {\HCode{<\tbl:XV{abstract}><tr><td\Hnewline>}\par\ShowPar}
  {}
  {\ifvmode\IgnorePar\fi \HCode{</td></tr></table>}}
\Configure{keyword}
  {\HCode{<\tbl:XV{keyword}><tr><td\Hnewline>}}
  {\ifvmode\IgnorePar\fi \HCode{</td></tr></table>}}
\ConfigureEnv{abstract}
   {\ifvmode \IgnorePar\fi \EndP}
   {\ifvmode \IgnorePar\fi \EndP}
   {}{}
\ConfigureEnv{keyword}
   {\ifvmode \IgnorePar\fi \EndP}
   {\ifvmode \IgnorePar\fi \EndP}
   {}{}
>>>


\<32,4 elsart\><<<
\ConfigureEnv{frontmatter}
  {\EndP\IgnorePar
   \HCode{<\tbl:XV{frontmatter}><tr><td><div 
       class="frontmatter"\Hnewline>}}
  {\ifvmode\IgnorePar\fi \EndP\HCode{</div>}\end:TTT\IgnorePar}
  {}{}
\Css{div.frontmatter {text-align:center;}}
>>>



%%%%%%%%%%%%%%%%%%%%%
\section{American Psychological Association (APA)}
%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech apa\><<<
|<apa maketitle|>
|<apa abstract|>
|<apa captions|>
|<apa lists|>
\Configure{note}
   {\HCode{<div class="note">}\bgroup
    |<apa maketitle br cr|>%
   }
   {\egroup \HCode{</div>}}
\Css{div.note{text-align:left; margin-top:1em; }}
>>>


\<apa lists\><<<
\ConfigureList{enumerate}%
   {|<enumerate I|>}
   {|<enumerate II|>}
   {|<enumerate III|>}
   {|<enumerate IV|>}
\ConfigureList{APAenumerate}%
   {|<enumerate I|>}
   {|<enumerate II|>}
   {|<enumerate III|>}
   {|<enumerate IV|>}
\Configure{seriate} 
   {\HCode{<span class="seriate">}\let\end:seriate=\empty} 
   {\end:seriate\HCode{</span>}} 
   {\end:seriate \def\end:seriate{\HCode{</span>}}%
    \HCode{<span class="seriate-item">}\HCode{<span class="seriate-label">}} 
   {\HCode{</span>}} 
\ConfigureList{APAitemize}%
   {\EndP\HCode{<ul class="itemize" \a:LRdir >}\PushMacro\end:itm
     \global\let\end:itm=\empty
   }
   {\PopMacro\end:itm \global\let\end:itm \end:itm
    \EndP\HCode{</li></ul>}\ShowPar
   }
   {\end:itm \gdef\end:itm{\EndP\Tg</li>}\DeleteMark}
   {\HCode{<li class="itemize">}\AnchorLabel }
>>>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{JHEP}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech JHEP\><<<
|<latex shared part config|>
|<latex shared section config|>
|<latex shared subsection config|>
|<latex shared subsubsection config|>
|<acm paragraph config|>
\Css{.sectionHead, .partHead{text-transform:uppercase}}
\Css{.subsubsectionHead, .likesubsubsectionHead {font-style: italic;}}
>>>

\<configure html-speech JHEP\><<<
\Configure{abstract}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<div class="abstract">}\IgnoreIndent}  
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Configure{accepted}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="accepted">}}  
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Configure{author}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{<div class="author">}\par \ShowPar}  
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Configure{conference}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="conference">}}  
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Configure{dedicated}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="dedicated">}}  
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Configure{keywords}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="keywords">}}  
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Configure{preprint}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="preprint">}}  
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Configure{received}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="received">}}  
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Configure{title}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="title">}}  
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Css{.abstract{margin-top:1em; margin-bottom:1em;}}
\Css{.accepted{margin-top:1em; margin-bottom:1em; text-align:right;}}
\Css{div.author{margin-top:1em; margin-bottom:1em; margin-left:2em;}}
\Css{.conference{margin-top:1em; margin-bottom:1em;}}
\Css{.dedicated{margin-top:1em; margin-bottom:1em;}}
\Css{.keywords{margin-top:1em; margin-bottom:1em;}}
\Css{.preprint{margin-top:1em; margin-bottom:1em;}}
\Css{.received{margin-top:1em; margin-bottom:1em; text-align:right;}}
\Css{.title{margin-top:1em; margin-bottom:1em;}}
>>>

\<configure html-speech JHEP\><<<
|<thebib config|>
|<JHEP maketitle footnote|>
>>>

\<JHEP thanks author date and\><<<
\Configure{thanks} 
   {\HCode{<div class="thanks">}}{\HCode{</div>}}
|<thank for thanks|>
\Css{div.thanks{text-align:left; margin-left:10\%; font-size:85\%;
                font-style:italic; }}
>>>


\<JHEP end-thanks author date and\><<<
\Configure{thanks} 
   {\SaveEndP\global\setbox\fn:box=\vtop\bgroup\ShowPar
     \ifvoid\fn:box\else  \csname unvbox\endcsname\fn:box\fi}
   {\ifvmode\IgnorePar\fi\EndP\egroup\RecallEndP }
|<thanks for thanks EndP|>
\Css{div.thanks{text-align:left; margin-left:10\%; font-size:85\%;
                font-style:italic; }}
>>>




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{acm-proc-article-sp}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<configure html-speech acm-proc-article-sp\><<<

|<acm-proc-article-sp thebib config|>
|<config captions|>
>>>



\<configure html-speech acm-proc-article-sp\><<<
\Configure{qed}
  {\Picture+[Q.E.D.]{}\o:qed:\EndPicture
   \SavePicture\qed:sym[Q.E.D.]}
>>>

\<configure html-speech acm-proc-article-sp\><<<
|<latex shared part config|>
|<latex shared section config|>
|<latex shared subsection config|>
|<latex shared subsubsection config|>
|<acm paragraph config|>
\Css{.sectionHead, .partHead{text-transform:uppercase}}
\Css{.subsubsectionHead, .likesubsubsectionHead {font-style: italic;}}
>>>

\<acm paragraph config\><<<
\ConfigureMark{paragraph}
   {\ifnum \c:secnumdepth>\c@secnumdepth  \expandafter\:gobble
    \else
       \HCode{<span class="titlemark">}\theparagraph\space
       \HCode{</span>}\fi}
\Configure{paragraph}{}{}
   {\ifvmode \IgnorePar \fi  \EndP
    \bgroup \IgnorePar\HCode{<h5 class="paragraphHead"\a:LRdir>}%
    \TitleMark\space \HtmlParOff}
   {\HCode{</h5>}\HtmlParOn \IgnoreIndent\egroup}
\Configure{likeparagraph}{}{}
   {\ifvmode \IgnorePar \fi  \EndP
    \bgroup \IgnorePar\HCode{<h5 class="likeparagraphHead"\a:LRdir>}%
    \HtmlParOff}
   {\HCode{</h5>}\HtmlParOn \IgnoreIndent\egroup}
\Css{.paragraphHead, .likeparagraphHead  { font-style:italic; }}
>>>





%%%%%%%%%%%%%%%%%%%%
\section{scrbook}
%%%%%%%%%%%%%%%%%%%%

\<configure html-speech scrbook\><<<
|<scr article,report,book|>
|<scr report,book|>
|<shared bib env|>
|<thebib config|>
|<description 4|>
\def\:SPAN#1#2{\HCode{<span class="#1">}#2\HCode{</span>}}
\def\:tempa{
   \CutAt{part}
   \CutAt{likepart}
   |<cut toc scr: part|>%
}
\def\:tempb{
   |<tocat scr: part|>
   \CutAt{chapter,likechapter,addchap,appendix,part}
   \CutAt{likechapter,addchap,appendix,part}
   \CutAt{addchap,chapter,likechapter,appendix,part}
   \CutAt{appendix,chapter,likechapter,addchap,part}
   |<tocat: ch|>%
}
\def\:tempc{
   |<tocat scr: ch|>%
   \CutAt{section,likesection,chapter,likechapter,addchap,appendix,part}
   \CutAt{likesection,chapter,likechapter,addchap,appendix,part}
   |<cut toc: sec|>%
}
\def\:tempd{
   |<tocat scr: section|>%
   |<tocat scr: subsection|>%
   |<cut toc: subsec|>%
}

\:CheckOption{4}     \if:Option
    \expandafter\ifx \csname @chapter\endcsname\relax
                          \:tempa \:tempc \:tempd
    \else                 \:tempa \:tempb \:tempc \:tempd  \fi
\else\:CheckOption{3}     \if:Option
    \expandafter\ifx \csname @chapter\endcsname\relax
                          \:tempa \:tempc  \:tempd
    \else                 \:tempa \:tempb  \:tempc  \fi
\else\:CheckOption{2}     \if:Option
    \expandafter\ifx \csname @chapter\endcsname\relax  \:tempa \:tempc
    \else                 \:tempa \:tempb    \fi
\else\:CheckOption{1}     \if:Option
    \:tempa
\else
    \Log:Note{for sectioning pagination,
          use the command line option `1', `2', or `3'}%
\fi \fi \fi \fi

\:CheckOption{1}     \if:Option
   |<toc scrbook options 1|>
\fi

|<scrbook end units|>
\ifx \part\:UnDef \else
   |<latex shared part config|>
\fi

|<config lists of figures and tables|> 

\Configure{paragraph}{}{}
  {\ShowPar\IgnoreIndent\HCode{<span class="paragraphHead"\a:LRdir>}\begingroup\bf}
  {\endgroup\HCode{</span>}\IgnorePar}
\Configure{likeparagraph}{}{}
  {\ShowPar\IgnoreIndent\HCode{<span class="likeparagraphHead"\a:LRdir>}}
  {\HCode{</span>}\IgnorePar}
\Css{.paragraphHead, .likeparagraphHead
   { margin-top:2em; font-weight: bold;}}

\ConfigureMark{subparagraph}{\thesubparagraph}
\Configure{subparagraph}{}{}
  {\ShowPar\HCode{<span class="subparagraphHead"\a:LRdir>}\begingroup\bf
   \TitleMark\space}
  {\endgroup\HCode{</span>}\IgnorePar}
\Configure{likesubparagraph}{}{}
  {\ShowPar\HCode{<span class="likesubparagraphHead"\a:LRdir>}\begingroup\bf}
  {\endgroup\HCode{</span>}\IgnorePar}
\Css{.subparagraphHead, .likesubparagraphHead
   { font-weight: bold;}}
\ConfigureEnv{picture}
   {\bgroup\ifvmode \Configure{HtmlPar}
      {\EndP\HCode{<!--l. \the\inputlineno-->%
}\HCode{<p
            class="center">}}%
      {\EndP\HCode{<!--l. \the\inputlineno-->%
}\HCode{<p
            class="center">}}%
      {\:xhtml{\Tg</p>}}{\:xhtml{\Tg</p>}} \ShowPar\leavevmode
    \fi}
   {\egroup}{}{}

|<book-report-article index|>
|<scr reprt/book captions|>

\ConfigureEnv{verse}
   {\ifvmode \IgnorePar\fi\EndP\Tg<div class="verse">}
   {\ifvmode \IgnorePar\fi\EndP\Tg</div>}
   {}{}
\ConfigureList{verse}
   {}{}
   {\parindent=\z@}  {\par}
\Css{.verse{white-space:nowrap; margin-left:2em}}
|<base font size|>

|<quotations|>
\Configure{listof}{}{}{}{\HCode{<br\xml:empty>}}{}{}



|<latex shared part config|>

>>>

\<scrbook end-thanks author date and\><<<
\Configure{thanks author date and}
   {\SaveEndP\global\setbox\fn:box=\vtop\bgroup\ShowPar
     \ifvoid\fn:box\else  \csname unvbox\endcsname\fn:box\fi}
   {\EndP\egroup\RecallEndP }
   {\HCode{<div class="author" >}}{\HCode{</div>}}
   {\HCode{<div class="date" >}}{\HCode{</div>}}
   {\HCode{<br class="and"\xml:empty>}}
   {\HCode{<br\xml:empty>}}
|<thanks for thanks p|>
\Css{div.author, div.date {text-align:center;}}
\Css{div.thanks{text-align:left; margin-left:10\%; font-size:85\%;
                font-style:italic; }}
>>>



\<scrbook thanks author date and\><<<
\Configure{thanks author date and}
   {\HCode{<div class="thanks">}}{\HCode{</div>}}
   {\HCode{<div class="author">}}{\HCode{</div>}}
   {\HCode{<div class="date" >}}{\HCode{</div>}}
   {\HCode{<br class="and"\xml:empty>}}
   {\HCode{<br\xml:empty>}}
|<thank for thanks|>
\Css{div.author, div.date {text-align:center;}}
\Css{div.thanks{text-align:left; margin-left:10\%; font-size:85\%;
                font-style:italic; }}

>>>

 
\<scr report,book\><<<
\ConfigureMark{section}
   {\ifnum \c:secnumdepth>\c@secnumdepth \expandafter\:gobble
    \else
       \HCode{<span class="titlemark">}\thesection\HCode{</span>}\fi }
|<section TITLE+|>
\Configure{section}{}{}
   {\ifvmode \IgnorePar\fi \EndP\IgnorePar
    \HCode{<h3 class="sectionHead"\a:LRdir>}\TitleMark.~~\HtmlParOff}
   {\HCode{</h3>}\HtmlParOn \IgnoreIndent \par}
\Configure{likesection}{}{}
   {\ifvmode \IgnorePar\fi
    \EndP\IgnorePar\HCode{<h3 class="likesectionHead"\a:LRdir>}\HtmlParOff}
   {\HCode{</h3>}\HtmlParOn \IgnoreIndent \par}
\Configure{likesectionTITLE+}{#1}
>>>



\<scr report,book\><<<
|<shared h5 subsubsection|>
\ConfigureMark{appendix}{\HCode{<span class="titlemark">}%
   \thechapter\HCode{</span>}}
\Configure{appendix}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="appendixHead"\a:LRdir>}\TitleMark{}.~~}
   {\HCode{</h2>}\IgnoreIndent}
\Configure{appendixTITLE+}{\thechapter\space#1}
\Configure{likechapter}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="likechapterHead"\a:LRdir>}}
   {\HCode{</h2>}\IgnoreIndent}
\Configure{likechapterTITLE+}{#1}
\Configure{addchap}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="addchapHead"\a:LRdir>}}
   {\HCode{</h2>}\IgnoreIndent\par}
>>>

\<configure html-speech scrbook\><<<
\ConfigureMark{chapter}
   {\if@mainmatter
       \HCode{<span class="titlemark">}\thechapter\HCode{</span>}.~~\fi}
\Configure{chapter}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="chapterHead"\a:LRdir>}\TitleMark{}}
   {\HCode{</h2>}\IgnoreIndent}
\Configure{chapterTITLE+}{\if@mainmatter\thechapter\space\fi#1}
\renewcommand\thechapter {\if@mainmatter\@arabic\c@chapter\fi}
>>>

\<configure html-speech scrreprt\><<<
\ConfigureMark{chapter}
   {\HCode{<span class="titlemark">}\thechapter\HCode{</span>}.~~}
\Configure{chapter}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="chapterHead"\a:LRdir>}\TitleMark{}}
   {\HCode{</h2>}\IgnoreIndent\par}
\Configure{chapterTITLE+}{\thechapter\space#1}
>>>

\<scr article,report,book\><<<
\ConfigureMark{minisec}{}
\Configure{minisec}{}{}
   {\ifvmode \IgnorePar \fi  \EndP
    \bgroup \IgnorePar\HCode{<h5 class="minisecHead"\a:LRdir>}%
    \TitleMark\space \HtmlParOff}
   {\HCode{</h5>}\HtmlParOn \IgnoreIndent\egroup\par\ShowPar}
>>>

\<scrbook end units\><<<
\Configure{endlikeparagraph}
   {paragraph,subsubsection,likesubsubsection,subsection,%
    likesubsection,section,%
    likesection,chapter,likechapter,addchap,appendix,part,likepart}
\Configure{endsubparagraph}
   {likesubparagraph,likeparagraph,subsubsection,likesubsubsection,%
    subsection,likesubsection,section,%
    likesection,chapter,likechapter,addchap,appendix,part,likepart}
\Configure{endlikesubparagraph}
   {subparagraph,likeparagraph,subsubsection,likesubsubsection,%
    subsection,likesubsection,section,%
    likesection,chapter,likechapter,addchap,appendix,part,likepart}
\Configure{endsection}
     {likesection,chapter,likechapter,addchap,appendix,part,likepart}
\Configure{endlikesection}
     {section,chapter,likechapter,addchap,appendix,part,likepart}
\Configure{endsubsection}
   {likesubsection,section,likesection,chapter,%
      likechapter,addchap,appendix,part,likepart}
\Configure{endlikesubsection}
   {subsection,section,likesection,chapter,%
      likechapter,addchap,appendix,part,likepart}
\Configure{endsubsubsection}
   {likesubsubsection,subsection,likesubsection,section,%
      likesection,chapter,likechapter,addchap,appendix,part,likepart}
\Configure{endlikesubsubsection}
   {subsubsection,subsection,likesubsection,section,%
      likesection,chapter,likechapter,addchap,appendix,part,likepart}
\Configure{endparagraph}
   {likeparagraph,subsubsection,likesubsubsection,subsection,%
    likesubsection,section,%
    likesection,chapter,likechapter,addchap,appendix,part,likepart}
\Configure{endchapter}{likechapter,addchap,appendix,part,likepart}
\Configure{endlikechapter}{chapter,appendix,part,likeparaddchap,addchap}
\Configure{endaddchap}{chapter,likechapter,appendix,part,likepart}
\Configure{endappendix}{chapter,likechapter,addchap,part,likepart}
>>>


%%%%%%%%%%%%%%%%%%%
\section{scrreprt}
%%%%%%%%%%%%%%%%%%%





\def\:SPAN#1#2{\HCode{<span class="#1">}#2\HCode{</span>}}

|<shared bib env|>
|<thebib config|>

\ifx \part\:UnDef \else
   |<latex shared part config|>
\fi

|<config lists of figures and tables|> 
\ConfigureEnv{picture}
   {\bgroup\ifvmode \Configure{HtmlPar}
      {\EndP\HCode{<!--l. \the\inputlineno-->%
}\HCode{<p
            class="center">}}%
      {\EndP\HCode{<!--l. \the\inputlineno-->%
}\HCode{<p
            class="center">}}%
      {\:xhtml{\Tg</p>}}{\:xhtml{\Tg</p>}} \ShowPar\leavevmode
    \fi}
   {\egroup}{}{}

|<quote config|>
|<book-report-article index|>
|<scr reprt/book captions|>

\ConfigureEnv{verse}
   {\ifvmode \IgnorePar\fi\EndP\Tg<div class="verse">}
   {\ifvmode \IgnorePar\fi\EndP\Tg</div>}
   {}{}
\ConfigureList{verse}
   {}{}
   {\parindent=\z@}  {\par}
\Css{.verse{white-space:nowrap; margin-left:2em}}
|<base font size|>
|<quotations|>

\Configure{listof}{}{}{}{\HCode{<br\xml:empty>}}{}{}


|<latex shared part config|>

\ConfigureEnv{abstract}{\:xhtml{\IgnorePar\EndP}\HCode
   {<\tbl:XV{abstract}><tr><td\Hnewline>}}
   {\EndP\HCode{</td></tr></table>}}{}{}
\Css{.abstract p {margin-left:5\%; margin-right:5\%;}}

\def\:tempa{
   \CutAt{part}
   \CutAt{likepart}
   |<cut toc scr: part|>%      
}
\def\:tempb{
   |<tocat scr: part|>%
   \CutAt{chapter,likechapter,addchap,appendix,part}
   \CutAt{likechapter,addchap,appendix,part}
   \CutAt{addchap,chapter,likechapter,appendix,part}
   \CutAt{appendix,chapter,likechapter,addchap,part}
   |<tocat: ch|>%
}
\def\:tempc{
   |<tocat scr: ch|>%
   \CutAt{section,likesection,chapter,likechapter,addchap,appendix,part}
   \CutAt{likesection,chapter,likechapter,addchap,appendix,part}
   |<cut toc: sec|>%
}
\def\:tempd{
   |<tocat scr: section|>%
   |<tocat scr: subsection|>%
   |<cut toc: subsec|>%
}

\:CheckOption{4}     \if:Option
    \expandafter\ifx \csname @chapter\endcsname\relax
                          \:tempa \:tempc \:tempd
    \else                 \:tempa \:tempb \:tempc \:tempd  \fi
\else\:CheckOption{3}     \if:Option
    \expandafter\ifx \csname @chapter\endcsname\relax
                          \:tempa \:tempc  \:tempd
    \else                 \:tempa \:tempb  \:tempc  \fi
\else\:CheckOption{2}     \if:Option
    \expandafter\ifx \csname @chapter\endcsname\relax  \:tempa \:tempc
    \else                 \:tempa \:tempb    \fi
\else\:CheckOption{1}     \if:Option
    \:tempa
\else
    \Log:Note{for sectioning pagination,
          use the command line option `1', `2', or `3'}%
\fi \fi \fi \fi

\:CheckOption{1}     \if:Option
  |<toc article,report options 1|>
\fi
|<scrreprt end units|>
\Configure{addchapTITLE+}{#1}
\def\tocaddchap#1#2#3{\par\:SPAN{addchapToc}{#2}\par}%  
>>>


\<scrreprt end-thanks author date and\><<<
\Configure{thanks author date and}
   {\SaveEndP\global\setbox\fn:box=\vtop\bgroup\ShowPar
     \ifvoid\fn:box\else  \csname unvbox\endcsname\fn:box\fi}
   {\EndP\egroup\RecallEndP }
   {\HCode{<div class="author" >}}{\HCode{</div>}}
   {\HCode{<div class="date" >}}{\HCode{</div>}}
   {\HCode{<br class="and"\xml:empty>}}
   {\HCode{<br\xml:empty>}}
|<thanks for thanks p|>
\Css{div.author, div.date {text-align:center;}}
\Css{div.thanks{text-align:left; margin-left:10\%; font-size:85\%;
                font-style:italic; }}
>>>

\<scrreprt thanks author date and\><<<
\Configure{thanks author date and}
   {\HCode{<div class="thanks">}}{\HCode{</div>}}
   {\HCode{<div class="author" >}}{\HCode{</div>}}
   {\HCode{<div class="date" >}}{\HCode{</div>}}
   {\HCode{<br class="and"\xml:empty>}}
   {\HCode{<br\xml:empty>}}
|<thank for thanks|>
\Css{div.author, div.date {text-align:center;}}
\Css{div.thanks{text-align:left; margin-left:10\%; font-size:85\%;
                font-style:italic; }}
>>>

\<configure html-speech scrartcl\><<<
|<scr article,report,book|>
>>>

\<configure html-speech scrreprt\><<<
|<scr article,report,book|>
|<scr report,book|>
|<description 4|>
\Configure{paragraph}{}{}
  {\ShowPar\IgnoreIndent\HCode{<span class="paragraphHead"\a:LRdir>}\begingroup\bf}
  {\endgroup\HCode{</span>}\IgnorePar}
\Configure{likeparagraph}{}{}
  {\ShowPar\IgnoreIndent\HCode{<span class="likeparagraphHead"\a:LRdir>}}
  {\HCode{</span>}\IgnorePar}
\Css{.paragraphHead, .likeparagraphHead
   { margin-top:2em; font-weight: bold;}}

\ConfigureMark{subparagraph}{\thesubparagraph}
\Configure{subparagraph}{}{}
  {\ShowPar\HCode{<span class="subparagraphHead"\a:LRdir>}\begingroup\bf
   \TitleMark\space}
  {\endgroup\HCode{</span>}\IgnorePar}
\Configure{likesubparagraph}{}{}
  {\ShowPar\HCode{<span class="likesubparagraphHead"\a:LRdir>}\begingroup\bf}
  {\endgroup\HCode{</span>}\IgnorePar}
\Css{.subparagraphHead, .likesubparagraphHead
   { font-weight: bold;}}
>>>

\<scrreprt end units\><<<
\Configure{endlikeparagraph}
   {paragraph,subsubsection,likesubsubsection,subsection,%
    likesubsection,section,%
    likesection,chapter,likechapter,addchap,appendix,part,likepart}
\Configure{endsubparagraph}
   {likesubparagraph,likeparagraph,subsubsection,likesubsubsection,%
    subsection,likesubsection,section,%
    likesection,chapter,likechapter,addchap,appendix,part,likepart}
\Configure{endlikesubparagraph}
   {subparagraph,likeparagraph,subsubsection,likesubsubsection,%
    subsection,likesubsection,section,%
    likesection,chapter,likechapter,addchap,appendix,part,likepart}

\Configure{endsection}
     {likesection,chapter,likechapter,addchap,appendix,part,likepart}
\Configure{endlikesection}
     {section,chapter,likechapter,addchap,appendix,part,likepart}

\Configure{endsubsection}
   {likesubsection,section,likesection,chapter,%
      likechapter,addchap,appendix,part,likepart}
\Configure{endlikesubsection}
   {subsection,section,likesection,chapter,%
      likechapter,addchap,appendix,part,likepart}
\Configure{endsubsubsection}
   {likesubsubsection,subsection,likesubsection,section,%
      likesection,chapter,likechapter,addchap,appendix,part,likepart}
\Configure{endlikesubsubsection}
   {subsubsection,subsection,likesubsection,section,%
      likesection,chapter,likechapter,addchap,appendix,part,likepart}
\Configure{endparagraph}
   {likeparagraph,subsubsection,likesubsubsection,subsection,%
    likesubsection,section,%
    likesection,chapter,likechapter,addchap,appendix,part,likepart}

\Configure{endaddchap}{likechapter,appendix,part,likepart,chapter}
\Configure{endchapter}{likechapter,appendix,part,likepart,addchap}
\Configure{endlikechapter}{chapter,appendix,part,likepart,addchap}
\Configure{endappendix}{chapter,likechapter,part,likepart,addchap}
>>>


%%%%%%%%%%%%%%
\section{Res}
%%%%%%%%%%%%%%

\<configure html-speech res\><<<   
\ConfigureEnv{resume}
    {\ifvmode \IgnorePar\fi \EndP
     \HCode{<div class="resume">}\let\endHR=\empty}
    {\ifvmode \IgnorePar\fi \EndP
     \HCode{\endHR</div>}}    
    {} {}
\def\c:secnumdepth{-1}

\Configure{overlapped-section}
   {\ifvmode \IgnorePar\fi \EndP\IgnorePar }
   {\ifvmode \IgnorePar\fi \EndP\IgnorePar  \HCode{</div>}}
   {\ifvmode \IgnorePar\fi \EndP\IgnorePar
    \HCode{<h4 class="sectionHead"\a:LRdir>}\HtmlParOff}
   {\HCode{</h4>}%
    \HCode{<div class="section">}%
    \HtmlParOn \ShowPar \IgnoreIndent \csname par\endcsname}

\ConfigureEnv{tabbing}
    {\ifvmode \IgnorePar\fi \EndP \HCode{<table class="tabbing">}}
    {\ifvmode \IgnorePar\fi \HCode{</table>}\par\ShowPar}
    {} {}

\Configure{tabbing}
    {\ifvmode \IgnorePar\fi \HCode{<tr>}}
    {\HCode{</tr>}}
    {\ifvmode \IgnorePar\fi \HCode{<td class="tabbing">}}
    {\ifvmode \IgnorePar\fi \HCode{</td>}}

\Css{table.tabbing {width:100\%; margin-top:1em;}}
\Css{td.tabbing {width:33\%;}}
\Css{div.section {margin-left:3em;}}
>>>


\<configure html-speech res\><<<   
\Configure{centeraddresses}
   {} {}
   {\HCode{<table class="center-addresses"><tr><td class="first-address">}}
   {\HCode{</td><td class="second-address">}}
   {\HCode{</td></tr></table>}}
\Css{.center-addresses {width:100\%}}
>>>

\<configure html-speech res\><<<   
\Configure{linename}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<div class="linename">}}
   {\HCode{</div><hr />}\par}
\Configure{lineaddress}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<div class="line-address">}}
   {\HCode{<br />}}
   {\HCode{</div>}}
\Css{.line-address {text-align:right;}}
>>>

\<configure html-speech res\><<<
\Configure{boxed-section}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{<table class="section"><tr><td class="section">}\par
   }
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{</td></tr></table>}\par}
   {\ifvmode \IgnorePar\fi \HtmlParOff}
   {\HCode{</td><td class="section-body">}\HtmlParOn\par\ShowPar}
\Css{table.section td{ vertical-align:top;}}
\Css{td.section {padding-right:2em; width:20\%;}}
\Css{table.section {margin-top:1em;}}
>>>

\<configure html-speech res\><<<
\ConfigureEnv{position}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<div class="position">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
   {}{}
\Css{.position table {width:100\%;}}
>>>

%%%%%%%%%%%%%%
\section{aa}
%%%%%%%%%%%%%%

\<configure html-speech aa\><<<   
   |<makeketitle config 4.0t|>
    |<configure aa 3.2/4.0t|>
|<latex shared part config|>
|<latex config div 4.0t|>
|<latex shared div config|>
|<shared bib env|>
\ifx \part\:UnDef \else
   |<latex shared part config|>
\fi
>>>

\subsection{Sizes of Fonts}

pages should honor the base font sizes the
readers choose for their browsers. Hence, under this assumption, all
tex4ht should do is just assure appropriate relative dimensions for
fonts of other sizes. To meet this end, I modified latex.4ht to
automatically include

   \verb'{\Configure{Needs}{Font\string_Size: #1}\Needs{1...}}'

when options 11pt and 12pt are listed in \verb'\documentclass'.
\<article,report,book\><<<
|<base font size|>
>>>
>

\<base font size\><<<
{\Configure{Needs}{Font\string_Size: #1}\ifcase  \@ptsize
   \or \Needs{11}\or \Needs{12}\else \fi}
>>>


\<ams art,proc,book\><<<
|<base font size|>
>>>







\<latex config div 4.0t\><<<
|<latex shared section config|>
|<latex shared subsection config|>
|<latex shared subsubsection config|>
|<latex shared paragraph config|>
>>>



% \Css{.titlemark{margin-right:0.7em;}} abuses NS 4.7

\<latex shared section config\><<<
\ConfigureMark{section}
   {\ifnum \c:secnumdepth>\c@secnumdepth \expandafter\:gobble
    \else
       \HCode{<span class="titlemark">}\@seccntformat{section}%
       \HCode{</span>}\fi }
|<section TITLE+|>
\Configure{section}{}{}
   {\ifvmode \IgnorePar\fi \EndP\IgnorePar
    \HCode{<h3 class="sectionHead"\a:LRdir>}\TitleMark\space\HtmlParOff}
   {\HCode{</h3>}\HtmlParOn\ShowPar \IgnoreIndent \par}
\Configure{likesection}{}{}
   {\ifvmode \IgnorePar\fi
    \EndP\IgnorePar\HCode{<h3 class="likesectionHead"\a:LRdir>}\HtmlParOff}
   {\HCode{</h3>}\HtmlParOn \IgnoreIndent \par}
\Configure{likesectionTITLE+}{#1}
>>>
% \def\HCode{<#1>}{\HCode{<#1>}}



\<latex shared subsection config\><<<
|<shared h5 subsubsection|>
|<shared h4 subsection|>
>>>


\<latex shared paragraph config\><<<
\Configure{paragraph}{}{}
  {\ShowPar\IgnoreIndent\HCode{<span class="paragraphHead"\a:LRdir>}\begingroup\bf}
  {\endgroup\HCode{</span>}\IgnorePar}
\Configure{likeparagraph}{}{}
  {\ShowPar\IgnoreIndent\HCode{<span class="likeparagraphHead"\a:LRdir>}}
  {\HCode{</span>}\IgnorePar}
\Css{.paragraphHead, .likeparagraphHead
   { margin-top:2em; font-weight: bold;}}
>>>

\<latex config div 4.0t\><<<
\ConfigureMark{subparagraph}{}
\Configure{subparagraph}{}{}
  {\ShowPar\HCode{<span class="subparagraphHead"\a:LRdir>}\begingroup\bf
   \TitleMark\space}
  {\endgroup\HCode{</span>}\IgnorePar}
\Configure{likesubparagraph}{}{}
  {\ShowPar\HCode{<span class="likesubparagraphHead"\a:LRdir>}\begingroup\bf}
  {\endgroup\HCode{</span>}\IgnorePar}
\Css{.subparagraphHead, .likesubparagraphHead
   { font-weight: bold;}}
>>>

\<32,4 latex\><<<
\ConfigureEnv{picture}
   {\bgroup\ifvmode \Configure{HtmlPar}
      {\EndP\HCode{|<show input line no|>}\HCode{<p
            class="center">}}%
      {\EndP\HCode{|<show input line no|>}\HCode{<p
            class="center">}}%
      {\:xhtml{\Tg</p>}}{\:xhtml{\Tg</p>}} \ShowPar\leavevmode
    \fi}
   {\egroup}{}{}
>>>

%%%%%%%%%%%%%%%%%%%%%%
\subsection{ltxguide}
%%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech ltxguide\><<<
\Configure{m}
   {\HCode{\string&\#x2329;}}
   {\HCode{\string&\#x232A;}}
>>>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Polish: mwart.cls, mwrep.cls, mwbk.cls}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech mwart\><<<
|<mwcls divs|>
|<mwcls tocs|>
|<mwart tocs|>
|<cut and toc at for options 1, 2, 3|> |%should be after mw ... tocs|%
|<mwcls configs|>
>>>


\<configure html-speech mwrep\><<<
|<mwcls divs|>
|<mw rep/bk divs|>
|<mwcls tocs|>
|<mw rep/bk tocs|>
|<cut and toc at for options 1, 2, 3|> |%should be after mw ... tocs|%
|<mwcls configs|>
>>>

\<configure html-speech mwbk\><<<
|<mwcls divs|>
|<mw rep/bk divs|>
|<mwcls tocs|>
|<mw rep/bk tocs|>
|<cut and toc at for options 1, 2, 3|> |%should be after mw ... tocs|%
|<mwcls configs|>
>>>

\<mwcls configs\><<<
|<mwcls index|>
|<config captions|>
|<shared bib env|>
|<thebib config|>
\def\:SPAN#1#2{\HCode{<span class="#1">}#2\HCode{</span>}}
|<config lists of figures and tables|> 
\ConfigureList{description}%
   {\EndP\HCode{<dl \a:LRdir class="description">}%
      \PushMacro\end:itm
\global\let\end:itm=\empty}
   {\PopMacro\end:itm \global\let\end:itm \end:itm
\EndP\HCode{</dd></dl>}\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</dd>}\HCode{<dt
        class="description">}\bgroup \bf}
   {\egroup\EndP\HCode{</dt><dd\Hnewline class="description">}}

|<quote config|>
\ConfigureEnv{verse}
   {\ifvmode \IgnorePar\fi\EndP\Tg<div class="verse">}
   {\ifvmode \IgnorePar\fi\EndP\Tg</div>}
   {}{}
\ConfigureList{verse}
   {}{}
   {\parindent=\z@}  {\par}
\Css{.verse{white-space:nowrap; margin-left:2em}}

{\Configure{Needs}{Font\string_Size: #1}\ifcase  \@ptsize
   \or \Needs{11}\or \Needs{12}\else \fi}

|<quotations|>
\Configure{listof}{}{}{}{\HCode{<br\xml:empty>}}{}{}

\ConfigureEnv{abstract}
   {\IgnorePar\EndP
    \HCode{<\tbl:XV{abstract}><tr><td\Hnewline>}\par\ShowPar}
   {\ifvmode \IgnorePar\fi \EndP\HCode{</td></tr></table>}}{}{}
\Css{.abstract p {margin-left:5\%; margin-right:5\%;}}
>>> 


\<mwcls divs\><<<
\ConfigureMark{part}
   {\ifHeadingNumbered \HCode{<span class="titlemark">}\partname
      \space \HeadingNumber \HCode{</span>}\fi}
\Configure{part}{}{}
   {\NoFonts\ifvmode \IgnorePar\fi \EndP\IgnorePar
    \HCode{<h1 class="partHead"\a:LRdir>}\TitleMark
    \HCode{<br />}\HtmlParOff}
   {\HCode{</h1>}\HtmlParOn \EndNoFonts \IgnoreIndent \par}
\Configure{partTITLE+}{\thepart\space #1}
\Css{h1.partHead{text-align: left}}
>>>

\<mwcls divs\><<<
\Configure{likepart}{}{}
   {\IgnorePar\EndP\HCode{<h1 class="likepartHead"\a:LRdir>}}
   {\HCode{</h1>}\IgnoreIndent}
\Configure{likepartTITLE+}{#1}
>>>

\<mw rep/bk divs\><<<
\ConfigureMark{chapter}
   {\ifHeadingNumbered \HCode{<span class="titlemark">}\mw@seccntformat
    \HeadingNumber \HCode{</span>}\fi}
\Configure{chapter}{}{}
   {\NoFonts \ifvmode \IgnorePar\fi \EndP\IgnorePar
    \HCode{<h2 class="chapterHead"\a:LRdir>}\TitleMark\HtmlParOff}
   {\HCode{</h2>}\HtmlParOn \EndNoFonts \IgnoreIndent \par}
\Configure{chapterTITLE+}{\thesection\space#1}
>>>

\<mw rep/bk divs\><<<
\Configure{likechapter}{}{}
   {\ifvmode \IgnorePar\fi
    \EndP\IgnorePar\HCode{<h2 class="likechapterHead"\a:LRdir>}\HtmlParOff}
   {\HCode{</h2>}\HtmlParOn \IgnoreIndent \par}
\Configure{likechapterTITLE+}{#1}
>>>

\<mwcls divs\><<<
\ConfigureMark{section}
   {\ifHeadingNumbered \HCode{<span class="titlemark">}\mw@seccntformat
    \HeadingNumber \HCode{</span>}\fi}
\Configure{section}{}{}
   {\NoFonts \ifvmode \IgnorePar\fi \EndP\IgnorePar
    \HCode{<h3 class="sectionHead"\a:LRdir>}\TitleMark\HtmlParOff}
   {\HCode{</h3>}\HtmlParOn \EndNoFonts \IgnoreIndent \par}
\Configure{sectionTITLE+}{\thesection\space#1}
>>>

\<mwcls divs\><<<
\Configure{likesection}{}{}
   {\ifvmode \IgnorePar\fi
    \EndP\IgnorePar\HCode{<h3 class="likesectionHead"\a:LRdir>}\HtmlParOff}
   {\HCode{</h3>}\HtmlParOn \IgnoreIndent \par}
\Configure{likesectionTITLE+}{#1}
>>>


\<mwcls divs\><<<
\Configure{paragraph}{}{}
  {\par\ShowPar\IgnoreIndent\HCode{<span 
      class="paragraphHead"\a:LRdir>}\begingroup\bf}
  {\endgroup\HCode{</span>}\IgnorePar}
\Css{.paragraphHead, .likeparagraphHead
   { margin-top:2em; font-weight: bold;}}
>>>

\<mwcls divs\><<<
\Configure{likeparagraph}{}{}
  {\ShowPar\IgnoreIndent\HCode{<span class="likeparagraphHead"\a:LRdir>}}
  {\HCode{</span>}\IgnorePar}
>>>

\<mwcls divs\><<<
\ConfigureMark{subparagraph}{}
\Configure{subparagraph}{}{}
  {\par\ShowPar\IgnoreIndent 
   \HCode{<span class="subparagraphHead"\a:LRdir>}\begingroup\bf
   \TitleMark\space}
  {\endgroup\HCode{</span>}\IgnorePar}
\Css{.subparagraphHead, .likesubparagraphHead
   { font-weight: bold;}}
>>>

\<mwcls divs\><<<
\Configure{likesubparagraph}{}{}
  {\par\ShowPar\IgnoreIndent 
   \HCode{<span class="likesubparagraphHead"\a:LRdir>}\begingroup\bf}
  {\endgroup\HCode{</span>}\IgnorePar}
>>>

\<mwcls divs\><<<
\Configure{endpart}{likepart}
\Configure{endlikepart}{endpart}
\Configure{endsection}
   {likesection,chapter,likechapter,appendix,part,likepart}
\Configure{endlikesection}
   {section,chapter,likechapter,appendix,part,likepart}
\Configure{endsubsection}
   {likesubsection,section,likesection,chapter,%
      likechapter,appendix,part,likepart}
\Configure{endlikesubsection}
   {subsection,section,likesection,chapter,%
      likechapter,appendix,part,likepart}
\Configure{endsubsubsection}
   {likesubsubsection,subsection,likesubsection,section,%
      likesection,chapter,likechapter,appendix,part,likepart}
\Configure{endlikesubsubsection}
   {subsubsection,subsection,likesubsection,section,%
      likesection,chapter,likechapter,appendix,part,likepart}
\Configure{endparagraph}
   {likeparagraph,subsubsection,likesubsubsection,subsection,%
      likesubsection,section,%
      likesection,chapter,likechapter,appendix,part,likepart}
\Configure{endlikeparagraph}
   {paragraph,subsubsection,likesubsubsection,subsection,%
    likesubsection,section,%
    likesection,chapter,likechapter,appendix,part,likepart}
\Configure{endsubparagraph}
   {likesubparagraph,likeparagraph,subsubsection,likesubsubsection,%
    subsection,likesubsection,section,%
    likesection,chapter,likechapter,appendix,part,likepart}
\Configure{endlikesubparagraph}
   {subparagraph,likeparagraph,subsubsection,likesubsubsection,%
    subsection,likesubsection,section,%
    likesection,chapter,likechapter,appendix,part,likepart}
>>>





\<mwcls tocs\><<<
\ConfigureToc{part}
  {\HCode{<div class="partToc"><span class="mark">}}
  {\HCode{</span>}. }
  {}
  {\HCode{</div>}}
\ConfigureToc{likepart}
  {\HCode{<div class="likepartToc"><span class="mark">}}
  {\HCode{</span>}}
  {}
  {\HCode{</div>}}
\ConfigureToc{section}
  {\HCode{<div class="sectionToc"><span class="mark">}}
  {\HCode{</span>}. }
  {}
  {\HCode{</div>}}
\ConfigureToc{likesection}
  {\HCode{<div class="likesectionToc"><span class="mark">}}
  {\HCode{</span>}}
  {}
  {\HCode{</div>}}
\ConfigureToc{subsection}
  {\HCode{<div class="subsectionToc"><span class="mark">}}
  {\HCode{</span>}. }
  {}
  {\HCode{</div>}}
\ConfigureToc{likesubsection}
  {\HCode{<div class="likesubsectionToc"><span class="mark">}}
  {\HCode{</span>}}
  {}
  {\HCode{</div>}}
\ConfigureToc{subsubsection}
  {\HCode{<div class="subsubsectionToc"><span class="mark">}}
  {\HCode{</span>}. }
  {}
  {\HCode{</div>}}
\ConfigureToc{likesubsubsection}
  {\HCode{<div class="likesubsubsectionToc"><span class="mark">}}
  {\HCode{</span>}}
  {}
  {\HCode{</div>}}
\ConfigureToc{paragraph}
  {\HCode{<div class="paragraphToc"><span class="mark">}}
  {\HCode{</span>}. }
  {}
  {\HCode{</div>}}
\ConfigureToc{likeparagraph}
  {\HCode{<div class="likeparagraphToc"><span class="mark">}}
  {\HCode{</span>}}
  {}
  {\HCode{</div>}}
\ConfigureToc{subparagraph}
  {\HCode{<div class="subparagraphToc"><span class="mark">}}
  {\HCode{</span>}. }
  {}
  {\HCode{</div>}}
\ConfigureToc{likesubparagraph}
  {\HCode{<div class="likesubparagraphToc"><span class="mark">}}
  {\HCode{</span>}}
  {}
  {\HCode{</div>}}
>>>

\<mw rep/bk tocs\><<<
\ConfigureToc{chapter}
  {\HCode{<div class="chapterToc"><span class="mark">}}
  {\HCode{</span>}. }
  {}
  {\HCode{</div>}}
\ConfigureToc{likechapter}
  {\HCode{<div class="likechapterToc"><span class="mark">}}
  {\HCode{</span>}}
  {}
  {\HCode{</div>}}
>>>


\<mwcls tocs\><<<
\Css{.partToc a, .partToc, .likepartToc a, .likepartToc
        {line-height: 200\%; font-weight:bold; font-size:110\%;}}
\Css{.partToc, .likepartToc{text-align:center;margin-bottom:0.25em;
           margin-top:0.25em;}}
>>>

\<mwart tocs\><<<
\Css{.sectionToc, .likesectionToc            {white-space: nowrap;}}
\Css{.subsectionToc, .likesubsectionToc      
                            {margin-left:1em; white-space: nowrap;}}
\Css{.subsubsectionToc, .likesubsubsectionToc
                            {margin-left:2em; white-space: nowrap;}}
\Css{.paragraphToc, .likeparagraphToc        
                            {margin-left:3em; white-space: nowrap;}}
\Css{.subparagraphToc, .likesubparagraphToc  
                            {margin-left:4em; white-space: nowrap;}}
>>>

\<mw rep/bk tocs\><<<
\Css{.chapterToc, .likechapterToc            {white-space: nowrap;}}
\Css{.sectionToc, .likesectionToc
                            {margin-left:1em; white-space: nowrap;}}
\Css{.subsectionToc, .likesubsectionToc      
                            {margin-left:2em; white-space: nowrap;}}
\Css{.subsubsectionToc, .likesubsubsectionToc
                            {margin-left:3em; white-space: nowrap;}}
\Css{.paragraphToc, .likeparagraphToc        
                            {margin-left:4em; white-space: nowrap;}}
\Css{.subparagraphToc, .likesubparagraphToc  
                            {margin-left:5em; white-space: nowrap;}}
>>>



%%%%%%%%%%%%%%%%%%%%%
\section{texinfo}
%%%%%%%%%%%%%%%%%%%%%


\<configure html-speech texinfo\><<<
\Configure{group}
   {\IgnorePar\EndP\HCode{<div class="group">}}
   {\ifvmode \IgnorePar\fi \EndP\HCode{</div>}}
\Css{div.obeylines-v  div.group  p { margin-top:0; margin-bottom:0; }}
\Configure{multitable}
   {\IgnorePar \EndP\HCode{<table\Hnewline class="multitable">}\IgnorePar}
   {\HCode{</table>}}
   {\HCode{<tr>}}
   {\HCode{</tr>}}
   {\HCode{<td \Hnewline class="multitabl\the\colcount">}}
   {\IgnorePar \EndP\HCode{</td>}}
\Css{.multitable td{padding-left:1em; padding-right:1em;}}
>>>


\<configure html-speech texinfo\><<<
\Configure{example}
   {\IgnorePar\EndP\HCode{<div class="example">}}
   {\ifvmode \IgnorePar\fi \EndP\HCode{</div>}}
\Css{div.example { margin-left:2em; }}
\Configure{smallexample}
   {\IgnorePar\EndP\HCode{<div class="smallexample">}}
   {\ifvmode \IgnorePar\fi \EndP\HCode{</div>}}
\Css{div.smallexample { margin-left:2em; }}
>>>


\<configure html-speech texinfo\><<<
\ConfigureMark{chapter}{\the\chapno}
\Configure{chapter}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="chapterHead"\a:LRdir>}\TitleMark\space}
   {\HCode{</h2>}\IgnoreIndent}
\ConfigureMark{appendix}{\appendixletter}
\Configure{appendix}{}{}
   {\IgnorePar\EndP
    \HCode{<h2 class="appendixHead"\a:LRdir>}Appendix \TitleMark\space}
   {\HCode{</h2>}\IgnoreIndent}
\Configure{unnumbered}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="unnumberedHead"\a:LRdir>}}
   {\HCode{</h2>}\IgnoreIndent}
\ConfigureMark{numberedsec}{\the\chapno.\the\secno}
\Configure{numberedsec}{}{}
   {\IgnorePar\EndP\HCode{<h3 
       class="numberedsecHead"\a:LRdir>}\TitleMark\space}
   {\HCode{</h3>}\IgnoreIndent}
\ConfigureMark{appendixsec}{\appendixletter.\the\secno}
\Configure{appendixsec}{}{}
   {\IgnorePar\EndP\HCode{<h3 
       class="appendixsecHead"\a:LRdir>}\TitleMark\space}
   {\HCode{</h3>}\IgnoreIndent}
\Configure{unnumberedsec}{}{}
   {\IgnorePar\EndP\HCode{<h3 class="unnumberedsecHead"\a:LRdir>}}
   {\HCode{</h3>}\IgnoreIndent}
\ConfigureMark{numberedsubsec}{\the\chapno.\the\secno .\the\subsecno}
\Configure{numberedsubsec}{}{}
   {\IgnorePar\EndP\HCode{<h4 
       class="numberedsubsecHead"\a:LRdir>}\TitleMark\space}
   {\HCode{</h4>}\IgnoreIndent}
\ConfigureMark{appendixsubsec}{\appendixletter .\the\secno.\the\subsecno}
\Configure{appendixsubsec}{}{}
   {\IgnorePar\EndP\HCode{<h4 
     class="appendixsubsecHead"\a:LRdir>}\TitleMark\space}
   {\HCode{</h4>}\IgnoreIndent}
\ConfigureMark{appendixsubsec}{\appendixletter.\the\secno
                                        .\the\subsecno}
\Configure{appendixsubsec}{}{}
   {\IgnorePar\EndP\HCode{<h4 
       class="appendixsubsecHead"\a:LRdir>}\TitleMark\space}
   {\HCode{</h4>}\IgnoreIndent}
\Configure{unnumberedsubsec}{}{}
   {\IgnorePar\EndP\HCode{<h4 class="unnumberedsubsecHead"\a:LRdir>}}
   {\HCode{</h4>}\IgnoreIndent}
\ConfigureMark{numberedsubsubsec}{\the\chapno.\the\secno
                      .\the\subsecno.\the\subsubsecno}
\Configure{numberedsubsubsec}{}{}
   {\IgnorePar\EndP\HCode{<h5 
       class="numberedsubsubsecHead"\a:LRdir>}\TitleMark\space}
   {\HCode{</h5>}\IgnoreIndent}
\ConfigureMark{appendixsubsubsec}{\appendixletter
             .\the\secno.\the\subsecno.\the\subsubsecno}
\Configure{appendixsubsubsec}{}{}
   {\IgnorePar\EndP\HCode{<h5 
     class="appendixsubsubsecHead"\a:LRdir>}\TitleMark\space}
   {\HCode{</h5>}\IgnoreIndent}
\ConfigureMark{appendixsubsubsec}{\appendixletter.\the\secno
                                  .\the\subsecno.\the\subsubsecno}
\Configure{appendixsubsubsec}{}{}
   {\IgnorePar\EndP\HCode{<h5 
       class="appendixsubsubsecHead"\a:LRdir>}\TitleMark\space}
   {\HCode{</h5>}\IgnoreIndent}
\Configure{unnumberedsubsubsec}{}{}
   {\IgnorePar\EndP\HCode{<h5 class="unnumberedsubsubsecHead"\a:LRdir>}}
   {\HCode{</h5>}\IgnoreIndent}
>>>

\<configure html-speech texinfo\><<<
\ConfigureToc{chapter}
    {\Tg<span class="chapterToc">}{ }{}{\Tg</span>\Tg<br />}
\ConfigureToc{appendix}
    {\Tg<span class="appendixToc">}{ }{}{\Tg</span>\Tg<br />}
\ConfigureToc{unnumbered}
    {\Tg<span class="unnumberedToc">}{ }{}{\Tg</span>\Tg<br />}
\ConfigureToc{numberedsec}
    {\Tg<span class="numberedsecToc">}{ }{}{\Tg</span>\Tg<br />}
\ConfigureToc{appendixsec}
    {\Tg<span class="appendixsecToc">}{ }{}{\Tg</span>\Tg<br />}
\ConfigureToc{unnumberedsec}
    {\Tg<span class="unnumberedsecToc">}{ }{}{\Tg</span>\Tg<br />}
\ConfigureToc{numberedsubsec}
    {\Tg<span class="numberedsubsecToc">}{ }{}{\Tg</span>\Tg<br />}
\ConfigureToc{appendixsubsec}
    {\Tg<span class="appendixsubsecToc">}{ }{}{\Tg</span>\Tg<br />}
\ConfigureToc{appendixsubsec}
    {\Tg<span class="appendixsubsecToc">}{ }{}{\Tg</span>\Tg<br />}
\ConfigureToc{unnumberedsubsec}
    {\Tg<span class="unnumberedsubsecToc">}{ }{}{\Tg</span>\Tg<br />}
\ConfigureToc{numberedsubsubsec}
    {\Tg<span class="numberedsubsubsecToc">}{ }{}{\Tg</span>\Tg<br />}
\ConfigureToc{appendixsubsubsec}
    {\Tg<span class="appendixsubsubsecToc">}{ }{}{\Tg</span>\Tg<br />}
\ConfigureToc{appendixsubsubsec}
    {\Tg<span class="appendixsubsubsecToc">}{ }{}{\Tg</span>\Tg<br />}
\ConfigureToc{unnumberedsubsubsec}
    {\Tg<span class="unnumberedsubsubsecToc">}{ }{}{\Tg</span>\Tg<br />}
>>>



\<configure html-speech texinfo\><<<
\Configure{enumerate}
   {\IgnorePar\EndP\HCode{<ol\space class="enumerate"\Hnewline>}}
   {\IgnorePar\EndP\HCode{</li></ol>}\ShowPar}
   {\IgnorePar\EndP\ifnum \itemno>1 \Tg</li>\fi\DeleteMark}
   {\HCode{<li class="enumerate">}}
\Configure{itemize}
   {\IgnorePar\EndP\HCode{<ul\space\a:LRdir class="itemize"\Hnewline>}}
   {\IgnorePar\EndP\HCode{</li></ul>}\ShowPar}
   {\IgnorePar\EndP\ifnum \itemno>1 \Tg</li>\fi\DeleteMark}
   {\HCode{<li class="itemize">}}
\Configure{table}%
   {\IgnorePar\EndP\HCode{<dl \a:LRdir class="description">}%
    |<save end:itm|>\global\let\end:itm|=\empty}
   {|<recall end:itm|>\IgnorePar\EndP\HCode{</dd></dl>}}
   {\IgnorePar\end:itm \global\def\end:itm{\EndP\Tg</dd>}\HCode{<dt
        class="description">}\bgroup \bf}
   {\egroup\IgnorePar\EndP\HCode{</dt><dd\Hnewline class="description">}}
>>>

\<configure html-speech texinfo\><<<
\Configure{titlepage}
   {\IgnorePar\EndP\HCode{<div class="titlepage">}} 
   {\IgnorePar\EndP\HCode{</div>}}
\Configure{title}
   {\IgnorePar\EndP\HCode{<div class="title">}}  
   {\IgnorePar\EndP\HCode{</div>}}
\Configure{subtitle}
   {\IgnorePar\EndP\HCode{<div class="subtitle">}}
   {\IgnorePar\EndP\HCode{</div>}}
\Configure{author}
   {\IgnorePar\EndP\HCode{<div class="author">}}
   {\IgnorePar\EndP\HCode{</div>}}
>>>








%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Accents, encodings, and Languages}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Outline}
%%%%%%%%%%%%%%%%%%%%%%%%%%%


\Link[http://lycos.basistech.com/info/standards/ISO-8859.txt]{}{}iso
 text\EndLink,
\Link[http://titus.uni-frankfurt.de/unicode/iso8859/iso8859.htm]{}{}titus glyphs\EndLink,
satto glyphs:
\Link[http://www.satto.co.yu/podrska/iso/iso8859-1.htm]{}{}1\EndLink{}
\Link[http://www.satto.co.yu/podrska/iso/iso8859-2.htm]{}{}2\EndLink{} ...,
microsoft glyphs:
\Link[http://www.microsoft.com/globaldev/reference/iso/28591.htm]{}{}1\EndLink{}
\Link[http://www.microsoft.com/globaldev/reference/iso/28592.htm]{}{}2\EndLink{} ...



\<configure html-speech latex\><<<
\ifOption{charset=iso-8859-7}
   {|<T1 greek ldf iso-8859-7|>}
   {}
\:CheckOption{new-accents}     \if:Option
\else
   |<T1 old iso-8859-1 accents|>
\fi
\let\^^_|=\v
>>>


\<old plain,latex accents\><<<
|<old iso-8859-1 accents|>
|<OT1 old iso-8859-1 accents|>
|<optional iso-8859-2 accents|>
>>>

\<babel accents\><<<
|<optional iso-8859-2 accents|>
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Group Configurations}
%%%%%%%%%%%%%%%%%%%%%%%%%%%





%%%%%%%%%%%%%%%%%%%%
\section{8859-1}
%%%%%%%%%%%%%%%%%%%%

\<acute codes\><<<
A{00C1}C{0106}D{010E}E{00C9}G{01F4}I{00CD}L{0139}N{0143}%
O{00D3}R{0154}S{015A}U{00DA}Y{00DD}Z{0179}a{00E1}c{0107}%
d{010F}e{00E9}g{01F5}i{00ED}l{013A}n{0144}o{00F3}r{0155}%
s{015B}u{00FA}y{00FD}z{017A}j{FFFD}J{FFDD}\i{00ED}\j{FFFD}%
>>>

\<add acute codes\><<<
   {A}{\add:acc{00C1}}
     {C}{\add:acc{0106}}
     {D}{\add:acc{010E}}
     {E}{\add:acc{00C9}}
     {G}{\add:acc{01F4}}
     {I}{\add:acc{00CD}}
     {L}{\add:acc{0139}}
     {N}{\add:acc{0143}}
     {O}{\add:acc{00D3}}
     {R}{\add:acc{0154}}
     {S}{\add:acc{015A}}
     {U}{\add:acc{00DA}}
     {Y}{\add:acc{00DD}}
     {Z}{\add:acc{0179}}
     {a}{\add:acc{00E1}}
     {c}{\add:acc{0107}}
     {d}{\add:acc{010F}}
     {e}{\add:acc{00E9}}
     {g}{\add:acc{01F5}}
     {i}{\add:acc{00ED}}
     {l}{\add:acc{013A}}
     {n}{\add:acc{0144}}
     {o}{\add:acc{00F3}}
     {r}{\add:acc{0155}}
     {s}{\add:acc{015B}}
     {u}{\add:acc{00FA}}
     {y}{\add:acc{00FD}}
     {z}{\add:acc{017A}}
     {j}{\add:acc{FFFD}}
     {J}{\add:acc{FFDD}}
     {\i}{\add:acc{00ED}}
     {\j}{\add:acc{FFFD}}      
>>>

\<acute iso-8859-1\><<<
|<acute codes|>%
>>>

\<acute iso-8859-2\><<<
|<acute codes|>%
>>>


\<double acute code\><<<
o{0151}O{0150}U{0170}u{0171}%
>>>

\<add double acute code\><<<
   {o}{\add:acc{0151}}
     {O}{\add:acc{0150}}
     {U}{\add:acc{0170}}
     {u}{\add:acc{0171}}
>>>

\<double acute iso-8859-1\><<<
|<double acute code|>%
>>>

\<double acute iso-8859-2\><<<
|<double acute code|>%
>>>








\<cedilla codes\><<<
K{0136}k{0137}L{013B}l{013C}N{0145}n{0146}%
R{0156}r{0157}S{015E}s{015F}T{0162}t{0163}%
E{0228}e{0229}D{1E10}d{1E11}H{1E28}h{1E29}%
C{00C7}c{00E7}G{0122}g{0123}%
>>>

\<add cedilla codes\><<<
     {K}{\add:acc{0136}}
     {k}{\add:acc{0137}}
     {L}{\add:acc{013B}}
     {l}{\add:acc{013C}}
     {N}{\add:acc{0145}}
     {n}{\add:acc{0146}}
     {R}{\add:acc{0156}}
     {r}{\add:acc{0157}}
     {S}{\add:acc{015E}}
     {s}{\add:acc{015F}}
     {T}{\add:acc{0162}}
     {t}{\add:acc{0163}}
     {E}{\add:acc{0228}}
     {e}{\add:acc{0229}}
     {D}{\add:acc{1E10}}
     {d}{\add:acc{1E11}}
     {H}{\add:acc{1E28}}
     {h}{\add:acc{1E29}}
     {C}{\add:acc{00C7}}
     {c}{\add:acc{00E7}}
     {G}{\add:acc{0122}}
     {g}{\add:acc{0123}}
>>>


\<cedilla iso-8859-1\><<<
|<cedilla codes|>%
>>>


\<cedilla iso-8859-2\><<<
|<cedilla codes|>%
>>>




\<dot above codes\><<<
C{010A}c{010B}E{0116}e{0117}G{0120}g{0121}%
I{0130}Z{017B}z{017C}A{0226}a{0227}O{022E}%
o{022F}B{1E02}b{1E03}D{1E0A}d{1E0B}F{1E1E}%
f{1E1F}H{1E22}h{1E23}M{1E40}m{1E41}N{1E44}%
n{1E45}P{1E56}p{1E57}R{1E58}r{1E59}S{1E60}%
s{1E61}T{1E6A}t{1E6B}W{1E86}w{1E87}X{1E8A}%
x{1E8B}Y{1E8E}y{1E8F}%
>>>

\<add dot above codes\><<<
     {C}{\add:acc{010A}}
     {c}{\add:acc{010B}}
     {E}{\add:acc{0116}}
     {e}{\add:acc{0117}}
     {G}{\add:acc{0120}}
     {g}{\add:acc{0121}}
     {I}{\add:acc{0130}}
     {Z}{\add:acc{017B}}
     {z}{\add:acc{017C}}
     {A}{\add:acc{0226}}
     {a}{\add:acc{0227}}
     {O}{\add:acc{022E}}
     {o}{\add:acc{022F}}
     {B}{\add:acc{1E02}}
     {b}{\add:acc{1E03}}
     {D}{\add:acc{1E0A}}
     {d}{\add:acc{1E0B}}
     {F}{\add:acc{1E1E}}
     {f}{\add:acc{1E1F}}
     {H}{\add:acc{1E22}}
     {h}{\add:acc{1E23}}
     {M}{\add:acc{1E40}}
     {m}{\add:acc{1E41}}
     {N}{\add:acc{1E44}}
     {n}{\add:acc{1E45}}
     {P}{\add:acc{1E56}}
     {p}{\add:acc{1E57}}
     {R}{\add:acc{1E58}}
     {r}{\add:acc{1E59}}
     {S}{\add:acc{1E60}}
     {s}{\add:acc{1E61}}
     {T}{\add:acc{1E6A}}
     {t}{\add:acc{1E6B}}
     {W}{\add:acc{1E86}}
     {w}{\add:acc{1E87}}
     {X}{\add:acc{1E8A}}
     {x}{\add:acc{1E8B}}
     {Y}{\add:acc{1E8E}}
     {y}{\add:acc{1E8F}}
>>>

\<dot above iso-8859-1\><<<
|<dot above codes|>%
>>>

\<dot iso-8859-1\><<<
|<dot above codes|>%
>>>

\<dot above iso-8859-2\><<<
|<dot above codes|>%
>>>




\<breve codes\><<<
g{011F}I{012C}i{012D}O{014E}o{014F}%
U{016C}u{016D}A{0102}a{0103}E{0114}%
e{0115}G{011E}\i{012D}%
>>>

\<add breve codes\><<<
   {g}{\add:acc{011F}}
     {I}{\add:acc{012C}}
     {i}{\add:acc{012D}}
     {O}{\add:acc{014E}}
     {o}{\add:acc{014F}}
     {U}{\add:acc{016C}}
     {u}{\add:acc{016D}}
     {A}{\add:acc{0102}}
     {a}{\add:acc{0103}}
     {E}{\add:acc{0114}}
     {e}{\add:acc{0115}}
     {G}{\add:acc{011E}}
     {\i}{\add:acc{012D}}
     {y}{y\add:acc{0306}}
>>>


\<breve iso-8859-1\><<<
|<breve codes|>%
>>>

\<breve iso-8859-2\><<<
|<breve codes|>%
>>>







\<caron codes\><<<
C{010C}c{010D}D{010E}d{010F}%
E{011A}e{011B}L{013D}l{013E}N{0147}n{0148}R{0158}r{0159}%
S{0160}s{0161}T{0164}t{0165}Z{017D}z{017E}A{01CD}a{01CE}I{01CF}%
i{01D0}O{01D1}o{01D2}U{01D3}u{01D4}G{01E6}g{01E7}K{01E8}k{01E9}%
j{01F0}H{021E}h{021F}\i{01D0}\j{01F0}%
>>>

\<add caron codes\><<<
   {C}{\add:acc{010C}}
     {c}{\add:acc{010D}}
     {D}{\add:acc{010E}}
     {d}{\add:acc{010F}}
     {E}{\add:acc{011A}}
     {e}{\add:acc{011B}}
     {L}{\add:acc{013D}}
     {l}{\add:acc{013E}}
     {N}{\add:acc{0147}}
     {n}{\add:acc{0148}}
     {R}{\add:acc{0158}}
     {r}{\add:acc{0159}}
     {S}{\add:acc{0160}}
     {s}{\add:acc{0161}}
     {T}{\add:acc{0164}}
     {t}{\add:acc{0165}}
     {Z}{\add:acc{017D}}
     {z}{\add:acc{017E}}
     {A}{\add:acc{01CD}}
     {a}{\add:acc{01CE}}
     {I}{\add:acc{01CF}}
     {i}{\add:acc{01D0}}
     {O}{\add:acc{01D1}}
     {o}{\add:acc{01D2}}
     {U}{\add:acc{01D3}}
     {u}{\add:acc{01D4}}
     {G}{\add:acc{01E6}}
     {g}{\add:acc{01E7}}
     {K}{\add:acc{01E8}}
     {k}{\add:acc{01E9}}
     {j}{\add:acc{01F0}}
     {H}{\add:acc{021E}}
     {h}{\add:acc{021F}}
     {\i}{\add:acc{01D0}}
     {\j}{\add:acc{01F0}}
>>>
% 


\<caron iso-8859-1\><<<
|<caron codes|>%
>>>

\<caron iso-8859-2\><<<
|<caron codes|>%
>>>

\<check iso-8859-1\><<<
|<caron codes|>%
>>>







\<ring codes\><<<
A{00C5}a{00E5}U{016E}u{016F}%
>>>

\<add ring codes\><<<
   {A}{\add:acc{00C5}}
     {a}{\add:acc{00E5}}
     {U}{\add:acc{016E}}
     {u}{\add:acc{016F}}
>>>


\<ring iso-8859-1\><<<
|<ring codes|>%
>>>

\<ring iso-8859-2\><<<
|<ring codes|>%
>>>














\<diaeresis codes\><<<
H{1E26}h{1E27}W{1E84}w{1E85}X{1E8C}x{1E8D}%
t{1E97}A{00C4}E{00CB}I{00CF}O{00D6}U{00DC}%
a{00E4}e{00EB}i{00EF}o{00F6}u{00FC}y{00FF}%
Y{0178}\i{00EF}%
>>>

\<add diaeresis codes\><<<
     {H}{\add:acc{1E26}}
     {h}{\add:acc{1E27}}
     {W}{\add:acc{1E84}}
     {w}{\add:acc{1E85}}
     {X}{\add:acc{1E8C}}
     {x}{\add:acc{1E8D}}
     {t}{\add:acc{1E97}}
     {A}{\add:acc{00C4}}
     {E}{\add:acc{00CB}}
     {I}{\add:acc{00CF}}
     {O}{\add:acc{00D6}}
     {U}{\add:acc{00DC}}
     {a}{\add:acc{00E4}}
     {e}{\add:acc{00EB}}
     {i}{\add:acc{00EF}}
     {o}{\add:acc{00F6}}
     {u}{\add:acc{00FC}}
     {y}{\add:acc{00FF}}
     {Y}{\add:acc{0178}}
     {\i}{\add:acc{00EF}}
     {m}{m\add:acc{0308}}
>>>



\<diaeresis iso-8859-1\><<<
|<diaeresis codes|>%
>>>

\<diaeresis iso-8859-2\><<<
|<diaeresis codes|>%
>>>







\<circumflex codes\><<<
A{00C2}E{00CA}I{00CE}O{00D4}U{00DB}a{00E2}e{00EA}%
i{00EE}o{00F4}u{00FB}C{0108}c{0109}G{011C}g{011D}%
H{0124}h{0125}J{0134}j{0135}S{015C}s{015D}W{0174}%
w{0175}Y{0176}y{0177}Z{1E90}z{1E91}\i{00EE}\j{0135}%
>>>

\<add circumflex codes\><<<
   {A}{\add:acc{00C2}}
     {E}{\add:acc{00CA}}
     {I}{\add:acc{00CE}}
     {O}{\add:acc{00D4}}
     {U}{\add:acc{00DB}}
     {a}{\add:acc{00E2}}
     {e}{\add:acc{00EA}}
     {i}{\add:acc{00EE}}
     {o}{\add:acc{00F4}}
     {u}{\add:acc{00FB}}
     {C}{\add:acc{0108}}
     {c}{\add:acc{0109}}
     {G}{\add:acc{011C}}
     {g}{\add:acc{011D}}
     {H}{\add:acc{0124}}
     {h}{\add:acc{0125}}
     {J}{\add:acc{0134}}
     {j}{\add:acc{0135}}
     {S}{\add:acc{015C}}
     {s}{\add:acc{015D}}
     {W}{\add:acc{0174}}
     {w}{\add:acc{0175}}
     {Y}{\add:acc{0176}}
     {y}{\add:acc{0177}}
     {Z}{\add:acc{1E90}}
     {z}{\add:acc{1E91}}
     {\i}{\add:acc{00EE}}
     {\j}{\add:acc{0135}}
>>>



\<circumflex iso-8859-1\><<<
|<circumflex codes|>%
>>>

\<circumflex iso-8859-2\><<<
|<circumflex codes|>%
>>>


\<grave codes\><<<
A{00C0}E{00C8}I{00CC}N{01F8}O{00D2}U{00D9}W{1E80}%
Y{1EF2}a{00E0}e{00E8}i{00EC}n{01F9}o{00F2}u{00F9}%
w{1E81}y{1EF3}\i{00EC}%
>>>


\<add grave codes\><<<
{A}{\add:acc{00C0}}
  {E}{\add:acc{00C8}}
  {I}{\add:acc{00CC}}
  {N}{\add:acc{01F8}}
  {O}{\add:acc{00D2}}
  {U}{\add:acc{00D9}}
  {W}{\add:acc{1E80}}
  {Y}{\add:acc{1EF2}}
  {a}{\add:acc{00E0}}
  {e}{\add:acc{00E8}}
  {i}{\add:acc{00EC}}
  {n}{\add:acc{01F9}}
  {o}{\add:acc{00F2}}
  {u}{\add:acc{00F9}}
  {w}{\add:acc{1E81}}
  {y}{\add:acc{1EF3}}
  {\i}{\add:acc{00EC}}
>>>

\<grave iso-8859-1\><<<
|<grave codes|>%
>>>

\<grave iso-8859-2\><<<
|<grave codes|>%
>>>



\<tilde codes\><<<
A{00C3}N{00D1}O{00D5}a{00E3}n{00F1}o{00F5}I{0128}%
i{0129}U{0168}u{0169}V{1E7C}v{1E7D}E{1EBC}e{1EBD}%
Y{1EF8}y{1EF9}\i{0129}%
>>>

\<add tilde codes\><<<
     {A}{\add:acc{00C3}}
     {N}{\add:acc{00D1}}
     {O}{\add:acc{00D5}}
     {a}{\add:acc{00E3}}
     {n}{\add:acc{00F1}}
     {o}{\add:acc{00F5}}
     {I}{\add:acc{0128}}
     {i}{\add:acc{0129}}
     {U}{\add:acc{0168}}
     {u}{\add:acc{0169}}
     {V}{\add:acc{1E7C}}
     {v}{\add:acc{1E7D}}
     {E}{\add:acc{1EBC}}
     {e}{\add:acc{1EBD}}
     {Y}{\add:acc{1EF8}}
     {y}{\add:acc{1EF9}}
     {\i}{\add:acc{0129}}
>>>

\<tilde iso-8859-1\><<<
|<tilde codes|>%
>>>


\<tilde iso-8859-2\><<<
|<tilde codes|>%
>>>
















\<vec iso-8859-1\><<<
>>>













\<old iso-8859-1 accents\><<<
\Configure{accent}\widetilde\widetilde{{}{}} 
   {\a:accents{widetilde}{#1}} {\b:accents{widetilde}{#1}{#2}}
\Configure{accent}\widehat\widehat{{}{}} 
   {\a:accents{widehat}{#1}} {\b:accents{widehat}{#1}{#2}}
>>>

\verb'\vec', \verb'\widetilde', and \verb'\widehat' are for math mode.
\verb'\b', \verb'\c', \verb'\d', \verb'\t', and \verb'\H' are for text mode.






\<bar iso-8859-1\><<<
>>>










NOT USED!!!!!


\<bar below codes\><<<
B{1E06}b{1E07}%
D{1E0E}d{1E0F}K{1E34}k{1E35}L{1E3A}l{1E3B}N{1E48}n{1E49}%
R{1E5E}r{1E5F}T{1E6E}t{1E6F}Z{1E94}z{1E95}h{1E96}%
>>>




\<dot below codes\><<<
A{1EA0}a{1Ea1}B{1E04}b{1E05}D{1E0C}d{1E0D}%
E{1EB8}e{1EB9}H{1E24}h{1E25}I{1ECA}i{1ECB}%
K{1E32}k{1E33}L{1E36}l{1E37}M{1E42}m{1E43}%
N{1E46}n{1E47}O{1ECC}o{1ECD}R{1E5A}r{1E5B}%
S{1E62}s{1E63}T{1E6C}t{1E6D}U{1EE4}u{1EE5}%
V{1E7E}v{1E7F}W{1E88}w{1E89}Y{1EF4}y{1EF5}%
>>>




\<macron codes\><<<
A{0100}a{0101}E{0112}%
e{0113}I{012A}i{012B}O{014C}o{014D}U{016A}u{016B}Y{0232}%
y{0233}G{1E20}g{1E21}%
>>>

%%%%%%%%%%%%%%%%%%%%
\section{T1 8859-1}
%%%%%%%%%%%%%%%%%%%%

\<T1 old iso-8859-1 accents\><<<
\expand:after{\Configure{accent}}\csname T1\string\`\expandafter\endcsname
   \csname T1\string\`\endcsname{|<grave iso-8859-1|>{}{}}
   {\a:accents{grave}{#1}}   {\b:accents{grave}{#1}{#2}}
\expand:after{\Configure{accent}}\csname T1\string\'\expandafter\endcsname
   \csname T1\string\'\endcsname{|<acute iso-8859-1|>{}{}}
   {\a:accents{acute}{#1}}   {\b:accents{acute}{#1}{#2}}
\expand:after{\Configure{accent}}\csname T1\string\^\expandafter\endcsname
   \csname T1\string\^\endcsname{|<circumflex iso-8859-1|>{}{}}
   {\a:accents{circ}{#1}}   {\b:accents{circ}{#1}{#2}}
\expand:after{\Configure{accent}}\csname T1\string\~\expandafter\endcsname
   \csname T1\string\~\endcsname{|<tilde iso-8859-1|>{}{}}
   {\a:accents{tilde}{#1}}   {\b:accents{tilde}{#1}{#2}}
\expand:after{\Configure{accent}}\csname T1\string\"\expandafter\endcsname
   \csname T1\string\"\endcsname{|<diaeresis iso-8859-1|>{}{34}}
   {\a:accents{uml}{#1}}     {\b:accents{uml}{#1}{#2}}
\expand:after{\expand:after{\Configure{accent}}%
   \csname T1\string\r\endcsname}%
   \csname T1\string\r\endcsname{|<ring iso-8859-1|>{}{}}
   {\a:accents{ring}{#1}}   {\b:accents{ring}{#1}{#2}}
>>>



\<T1 old iso-8859-1 accents\><<<
\expand:after{\expand:after{\Configure{accent}}%
   \csname T1\string\c\endcsname}%
   \csname T1\string\c\endcsname{|<cedilla iso-8859-1|>{}{}}
   {\a:accents{cedil}{#1}}     {\b:accents{cedil}{#1}{#2}}
\expand:after{\expand:after{\Configure{accent}}%
   \csname T1\string\t\endcsname}%
   \csname T1\string\t\endcsname{{}{}}
   {\a:accents{udot}{#1}}     {\b:accents{udot}{#1}{#2}}
\expand:after{\expand:after{\Configure{accent}}%
   \csname T1\string\H\endcsname}%
   \csname T1\string\H\endcsname{{}{}} 
   {\a:accents{Huml}{#1}} {\b:accents{Huml}{#1}{#2}}
\expand:after{\expand:after{\Configure{accent}}%
   \csname T1\string\b\endcsname}%
   \csname T1\string\b\endcsname{{}{}}
   {\a:accents{b}{#1}}     {\b:accents{b}{#1}{#2}}
\expand:after{\expand:after{\Configure{accent}}%
   \csname T1\string\d\endcsname}%
   \csname T1\string\d\endcsname{{}{}}
   {\a:accents{d}{#1}}     {\b:accents{d}{#1}{#2}}
>>>



\<T1 old iso-8859-1 accents\><<<
\expand:after{\Configure{accent}}\csname T1\string\.\expandafter\endcsname
   \csname T1\string\.\endcsname
   {|<dot iso-8859-1|>{}{}}
   {\a:accents{dot}{#1}} {\b:accents{dot}{#1}{#2}}
\expand:after{\Configure{accent}}\csname T1\string\u\expandafter\endcsname
   \csname T1\string\u\endcsname
   {|<breve iso-8859-1|>{}{}}
   {\a:accents{breve}{#1}} {\b:accents{breve}{#1}{#2}}
\expand:after{\Configure{accent}}\csname T1\string\vec\expandafter\endcsname
   \csname T1\string\vec\endcsname
   {|<vec iso-8859-1|>{}{}}
   {\a:accents{vec}{#1}} {\b:accents{vec}{#1}{#2}}
\expand:after{\Configure{accent}}\csname T1\string\v\expandafter\endcsname
   \csname T1\string\v\endcsname
   {|<check iso-8859-1|>{}{}}
   {\a:accents{check}{#1}} {\b:accents{check}{#1}{#2}} 
\expand:after{\Configure{accent}}\csname T1\string\=\expandafter\endcsname
   \csname T1\string\=\endcsname
   {|<bar iso-8859-1|>{}{}}  
   {\a:accents{bar}{#1}} {\b:accents{bar}{#1}{#2}}
>>>


%%%%%%%%%%%%%%%%%%%%
\section{T1 on Empty Base}
%%%%%%%%%%%%%%%%%%%%

\<latex accents\><<<
\Configure{add accent}{T1:2}
  {}{\ht:special{t4ht@+\string&\#x005E;}x}
  {}{}
>>>

%%%%%%%%%%%%%%%%%%%%
\section{OT1 8859-1}
%%%%%%%%%%%%%%%%%%%%

\<OT1 old iso-8859-1 accents\><<<
\expand:after{\Configure{accent}}\csname OT1\string\`\endcsname
   \grave{|<grave iso-8859-1|>{}{}}
   {\a:accents{grave}{#1}}   {\b:accents{grave}{#1}{#2}}
\expand:after{\Configure{accent}}\csname OT1\string\'\endcsname
   \acute{|<acute iso-8859-1|>{}{}}
   {\a:accents{acute}{#1}}   {\b:accents{acute}{#1}{#2}}
\expand:after{\Configure{accent}}\csname OT1\string\^\endcsname
   \hat{|<circumflex iso-8859-1|>{}{}}
   {\a:accents{circ}{#1}}   {\b:accents{circ}{#1}{#2}}
\expand:after{\Configure{accent}}\csname OT1\string\~\endcsname
   \tilde{|<tilde iso-8859-1|>{}{}}
   {\a:accents{tilde}{#1}}   {\b:accents{tilde}{#1}{#2}}
\expand:after{\Configure{accent}}\csname
           OT1\string\"\expandafter\endcsname
   \csname OT1\string\"\endcsname{|<diaeresis iso-8859-1|>{}{34}}
   {\a:accents{uml}{#1}}     {\b:accents{uml}{#1}{#2}}
\Configure{accent}\ddot\ddot{|<diaeresis iso-8859-1|>{}{34}}
   {\a:accents{uml}{#1}}     {\b:accents{uml}{#1}{#2}}
\expand:after{\Configure{accent}}\csname OT1\string\r\endcsname
   \mathring{|<ring iso-8859-1|>{}{}}
   {\a:accents{ring}{#1}}   {\b:accents{ring}{#1}{#2}}
>>>








The following are also placed under accents configuration.

\<OT1 old iso-8859-1 accents\><<<
\expand:after{\expand:after{\Configure{accent}}%
   \csname OT1\string\c\endcsname}%
   \csname OT1\string\c\endcsname{|<cedilla iso-8859-1|>{}{}}
   {\a:accents{cedil}{#1}}     {\b:accents{cedil}{#1}{#2}}
\expand:after{\expand:after{\Configure{accent}}%
   \csname OT1\string\t\endcsname}%
   \csname OT1\string\t\endcsname{{}{}}
   {\a:accents{udot}{#1}}     {\b:accents{udot}{#1}{#2}}
\expand:after{\expand:after{\Configure{accent}}%
   \csname OT1\string\H\endcsname}%
   \csname OT1\string\H\endcsname{{}{}}
   {\a:accents{Huml}{#1}} {\b:accents{Huml}{#1}{#2}}
\expand:after{\expand:after{\Configure{accent}}%
   \csname OT1\string\b\endcsname}%
   \csname OT1\string\b\endcsname{{}{}}
   {\a:accents{b}{#1}}     {\b:accents{b}{#1}{#2}}
\expand:after{\expand:after{\Configure{accent}}%
   \csname OT1\string\d\endcsname}%
   \csname OT1\string\d\endcsname{{}{}}
   {\a:accents{d}{#1}}     {\b:accents{d}{#1}{#2}}
>>>



The following originally have been defined to be parameter-less.

\<OT1 old iso-8859-1 accents\><<<
\expand:after{\Configure{accent}}\csname OT1\string\.\endcsname
   \dot{|<dot iso-8859-1|>{}{}}
   {\a:accents{dot}{#1}} {\b:accents{dot}{#1}{#2}}
\expand:after{\Configure{accent}}\csname OT1\string\u\endcsname
   \breve{|<breve iso-8859-1|>{}{}}
   {\a:accents{breve}{#1}} {\b:accents{breve}{#1}{#2}}
\expand:after{\Configure{accent}}\csname OT1\string\vec\endcsname
   \vec{|<vec iso-8859-1|>{}{}}
   {\a:accents{vec}{#1}} {\b:accents{vec}{#1}{#2}}
\expand:after{\Configure{accent}}\csname OT1\string\v\endcsname
   \check{|<check iso-8859-1|>{}{}}
   {\a:accents{check}{#1}} {\b:accents{check}{#1}{#2}} 
\expand:after{\Configure{accent}}\csname OT1\string\=\endcsname
   \bar{|<bar iso-8859-1|>{}{}}
   {\a:accents{bar}{#1}} {\b:accents{bar}{#1}{#2}}
>>>

\<OT1 old iso-8859-1 accents\><<<
|<ot1enc.def unicode|>
>>>

\<ot1enc.def unicode\><<<
\expandafter\def
   \csname OT1\string\l\endcsname{\ht:special{t4ht@+\string&{35}x0142{59}}x}
\expandafter\def
   \csname OT1\string\L\endcsname{\ht:special{t4ht@+\string&{35}x0141{59}}x}
>>>


\<configure html-speech plain\><<<
\Configure{l}{\ht:special{t4ht@+\string&{35}x0142{59}}x}
\Configure{L}{\ht:special{t4ht@+\string&{35}x0141{59}}x}
>>>



%%%%%%%%%%%%%%%%%%%%
\section{8859-2}
%%%%%%%%%%%%%%%%%%%%



\<optional iso-8859-2 accents\><<<
\def\:temp{charset=iso-8859-2}
\ifx \a:charset\:UnDef
      \ifx  \A:charset\:temp \let\:temp=\def \fi
\else \ifx  \a:charset\:temp \let\:temp=\def \fi
\fi
\ifx \:temp\def
   \:CheckOption{new-accents}     \if:Option \else
      |<old iso-8859-2 accents|>
\fi \fi
>>>

\<old iso-8859-2 accents\><<<
|<T1 old iso-8859-2 accents|>
>>>











% d{239}
























\<old iso-8859-2 accents\><<<
\Configure{accent}\`\grave{|<grave iso-8859-2|>{}{}}
   {\a:accents{grave}{#1}}   {\b:accents{grave}{#1}{#2}}
\Configure{accent}\'\acute{|<acute iso-8859-2|>{}{}}
   {\a:accents{acute}{#1}}   {\b:accents{acute}{#1}{#2}}
\Configure{accent}\^\hat{|<circumflex iso-8859-2|>{}{}}
   {\a:accents{hat}{#1}}   {\b:accents{hat}{#1}{#2}}
\Configure{accent}\~\tilde{|<tilde iso-8859-2|>{}{}}
   {\a:accents{tilde}{#1}}   {\b:accents{tilde}{#1}{#2}}
\Configure{accent}\"\ddot{|<diaeresis iso-8859-2|>{}{34}}
   {\a:accents{uml}{#1}}   {\b:accents{uml}{#1}{#2}}
>>>





The following are also placed under accents configuration.

\<old iso-8859-2 accents\><<<
\Configure{accent}\c\c{|<cedilla iso-8859-2|>{}{}}
   {\a:accents{cedil}{#1}}     {\b:accents{cedil}{#1}{#2}}
\Configure{accent}\t\t{{}{}}
   {\a:accents{udot}{#1}}     {\b:accents{udot}{#1}{#2}}
\Configure{accent}\H\H{|<double acute iso-8859-2|>{}{}}
   {\a:accents{Huml}{#1}}     {\b:accents{Huml}{#1}{#2}}
\Configure{accent}\b\b{{}{}}
   {\a:accents{b}{#1}}     {\b:accents{b}{#1}{#2}}
\Configure{accent}\d\d{{}{}}
   {\a:accents{d}{#1}}     {\b:accents{d}{#1}{#2}}
>>>

The following originally have been defined to be parameter-less.

\<old iso-8859-2 accents\><<<
\Configure{accent}\.\.{|<dot above iso-8859-2|>{}{}}  
   {\a:accents{dot}{#1}}      {\b:accents{dot}{#1}{#2}}
\Configure{accent}\dot\dot{|<dot above iso-8859-2|>{}{}}  
   {\a:accents{dot}{#1}}      {\b:accents{dot}{#1}{#2}}
\Configure{accent}\u\breve{|<breve iso-8859-2|>{}{}}
   {\a:accents{breve}{#1}}      {\b:accents{breve}{#1}{#2}}
\Configure{accent}\vec\vec{{}{}}
   {\a:accents{vec}{#1}}      {\b:accents{vec}{#1}{#2}}
\Configure{accent}\v\v{|<caron iso-8859-2|>{}{}}
   {\a:accents{check}{#1}}      {\b:accents{check}{#1}{#2}} 
\Configure{accent}\check\check{|<caron iso-8859-2|>{}{}}
   {\a:accents{check}{#1}}      {\b:accents{check}{#1}{#2}} 
\Configure{accent}\=\bar{{}{}} 
   {\a:accents{bar}{#1}}      {\b:accents{bar}{#1}{#2}}
>>>


\<old 8859-2 accents\><<<
\Configure{accent}\widetilde\widetilde{{}{}} 
   {\a:accents{widetilde}{#1}} {\b:accents{widetilde}{#1}{#2}}
\Configure{accent}\widehat\widehat{{}{}} 
   {\a:accents{widehat}{#1}} {\b:accents{widehat}{#1}{#2}}
>>>

\verb'\vec', \verb'\widetilde', and \verb'\widehat' are for math mode.
\verb'\b', \verb'\c', \verb'\d', \verb'\t', and \verb'\H' are for text mode.


%%%%%%%%%%%%%%%%%%%%
\section{T1 8859-2}
%%%%%%%%%%%%%%%%%%%%


\<T1 old iso-8859-2 accents\><<<
\expand:after{\Configure{accent}}\csname T1\string\`\expandafter\endcsname
   \csname T1\string\`\endcsname{|<grave iso-8859-2|>{}{}}
   {\a:accents{grave}{#1}}   {\b:accents{grave}{#1}{#2}}
\expand:after{\Configure{accent}}\csname T1\string\'\expandafter\endcsname
   \csname T1\string\'\endcsname{|<acute iso-8859-2|>{}{}}
   {\a:accents{acute}{#1}}   {\b:accents{acute}{#1}{#2}}
\expand:after{\Configure{accent}}\csname T1\string\^\expandafter\endcsname
   \csname T1\string\^\endcsname{|<circumflex iso-8859-2|>{}{}}
   {\a:accents{circ}{#1}}   {\b:accents{circ}{#1}{#2}}
\expand:after{\Configure{accent}}\csname T1\string\~\expandafter\endcsname
   \csname T1\string\~\endcsname{|<tilde iso-8859-2|>{}{}}
   {\a:accents{tilde}{#1}}   {\b:accents{tilde}{#1}{#2}}
\expand:after{\Configure{accent}}\csname T1\string\"\expandafter\endcsname
   \csname T1\string\"\endcsname{|<diaeresis iso-8859-2|>{}{34}}
   {\a:accents{uml}{#1}}     {\b:accents{uml}{#1}{#2}}
\expand:after{\expand:after{\Configure{accent}}%
   \csname T1\string\r\endcsname}%
   \csname T1\string\r\endcsname{|<ring iso-8859-2|>{}{}}
   {\a:accents{ring}{#1}}   {\b:accents{ring}{#1}{#2}}
>>>






\<T1 old iso-8859-2 accents\><<<
\expand:after{\expand:after{\Configure{accent}}%
   \csname T1\string\c\endcsname}%
   \csname T1\string\c\endcsname{|<cedilla iso-8859-2|>{}{}}
   {\a:accents{cedil}{#1}}     {\b:accents{cedil}{#1}{#2}}
\expand:after{\expand:after{\Configure{accent}}%
   \csname T1\string\t\endcsname}%
   \csname T1\string\t\endcsname{{}{}}
   {\a:accents{udot}{#1}}     {\b:accents{udot}{#1}{#2}}
\expand:after{\expand:after{\Configure{accent}}%
   \csname T1\string\H\endcsname}%
   \csname T1\string\H\endcsname{|<double acute iso-8859-2|>{}{}}
   {\a:accents{Huml}{#1}}{\b:accents{Huml}{#1}{#2}}
\expand:after{\expand:after{\Configure{accent}}%
   \csname T1\string\b\endcsname}%
   \csname T1\string\b\endcsname{{}{}}
   {\a:accents{b}{#1}}     {\b:accents{b}{#1}{#2}}
\expand:after{\expand:after{\Configure{accent}}%
   \csname T1\string\d\endcsname}%
   \csname T1\string\d\endcsname{{}{}}
   {\a:accents{d}{#1}}     {\b:accents{d}{#1}{#2}}
>>>



\<T1 old iso-8859-2 accents\><<<
\expand:after{\Configure{accent}}\csname T1\string\.\expandafter\endcsname
   \csname T1\string\.\endcsname
   {|<dot iso-8859-2|>{}{}} 
   {\a:accents{dot}{#1}}{\b:accents{dot}{#1}{#2}}
\expand:after{\Configure{accent}}\csname T1\string\u\expandafter\endcsname
   \csname T1\string\u\endcsname
   {|<breve iso-8859-2|>{}{}}
   {\a:accents{breve}{#1}}{\b:accents{breve}{#1}{#2}}
\expand:after{\Configure{accent}}\csname T1\string\vec\expandafter\endcsname
   \csname T1\string\vec\endcsname
   {|<vec iso-8859-2|>{}{}}
   {\a:accents{vec}{#1}}{\b:accents{vec}{#1}{#2}}
\expandafter\let\csname T1\string\v\endcsname\:UnDef
\expand:after{\Configure{accent}}\csname T1\string\v\expandafter\endcsname
   \csname T1\string\v\endcsname
   {|<caron iso-8859-2|>{}{}}
   {\a:accents{check}{#1}}{\b:accents{check}{#1}{#2}} 
\expand:after{\Configure{accent}}\csname T1\string\=\expandafter\endcsname
   \csname T1\string\=\endcsname
   {|<bar iso-8859-2|>{}{}}
   {\a:accents{bar}{#1}}{\b:accents{bar}{#1}{#2}}
>>>



%%%%%%%%%%%%%%%%%%%%
\section{T1, OT1 8859-7}
%%%%%%%%%%%%%%%%%%%%



\<T1 greek ldf iso-8859-7\><<<
\expand:after{\Configure{accent}}\csname T1\string\'\expandafter\endcsname
   \csname T1\string\'\endcsname
   {|<acute iso-8859-7|>{}{}}
   {\a:accents{acute}{#1}}   {\b:accents{acute}{#1}{#2}}
>>>

\<greek ldf iso-8859-7\><<<
\expand:after{\Configure{accent}}\csname OT1\string\'\endcsname
   \acute{|<acute iso-8859-7|>{}{}}
   {\a:accents{acute}{#1}}   {\b:accents{acute}{#1}{#2}}
>>>

\<acute iso-8859-7\><<<
A{\ht:special{t4ht@+\string&{35}x00C1{59}}A}%
E{\ht:special{t4ht@+\string&{35}x00C9{59}}E}%
I{\ht:special{t4ht@+\string&{35}x00CD{59}}I}%
O{\ht:special{t4ht@+\string&{35}x00D3{59}}O}%
U{\ht:special{t4ht@+\string&{35}x00DA{59}}U}%
Y{\ht:special{t4ht@+\string&{35}x00DD{59}}Y}%
a{\ht:special{t4ht@+\string&{35}x00E1{59}}a}%
e{\ht:special{t4ht@+\string&{35}x00E9{59}}e}%
i{\ht:special{t4ht@+\string&{35}x00ED{59}}i}%
\i{\ht:special{t4ht@+\string&{35}x00ED{59}}i}%
o{\ht:special{t4ht@+\string&{35}x00F3{59}}o}%
u{\ht:special{t4ht@+\string&{35}x00FA{59}}u}%
y{\ht:special{t4ht@+\string&{35}x00FD{59}}y}%
{\@use@text@encoding \@curr@enc a}{\ht:special{t4ht@220}a}%
{\@use@text@encoding \@curr@enc e}{\ht:special{t4ht@221}e}%
{\@use@text@encoding \@curr@enc h}{\ht:special{t4ht@222}h}%
{\@use@text@encoding \@curr@enc i}{\ht:special{t4ht@223}i}%
{\@use@text@encoding \@curr@enc o}{\ht:special{t4ht@252}o}%
{\@use@text@encoding \@curr@enc u}{\ht:special{t4ht@253}u}%
{\@use@text@encoding \@curr@enc w}{\ht:special{t4ht@254}w}%
>>>





%%%%%%%%%%%%%%%%%%%%%%%
\section{LaTeX Encodings}
%%%%%%%%%%%%%%%%%%%%%%%



\<32,4 plain,latex\><<<
\:CheckOption{new-accents}     \if:Option \else 
  \Configure{accents}
    {\expandafter\ifx \csname #1-num\endcsname\relax
       \ht:special{t4ht@+\string&{35}x#2{59}}x%
     \else
       \ht:special{t4ht@+\string&\#x#2;}X%
     \fi
    }
    {\Picture+{ \a:@Picture{#1}}#2{#3}\EndPicture}
    \expandafter\let\csname ring-num\endcsname=\def
\fi
>>>

\<32,4 latexPRE-CSS\><<<
\:CheckOption{new-accents}     \if:Option \else 
   \Configure{textscaccent}
      {\Tg<small class="small-caps">}{\Tg</small>}
\fi
>>>

\<latex ltoutenc\><<<
\Configure{textcircled}
   {\@use@text@encoding \@curr@enc c}       
   {\leavevmode \special{t4ht@+\string&\#x00A9;}c}
   {\@use@text@encoding \@curr@enc \scshape r}
   {\leavevmode \special{t4ht@+\string&\#x00AE;}r}
   {}
>>>

\<latex accents\><<<
\:CheckOption{new-accents}     \if:Option
   |<new accents|>
\else
   |<old plain,latex accents|>
\fi
\let\^^_|=\v
>>>

\<latex accents\><<<
\Configure{@TITLE}{|<env for titles|>}
>>>

\<env for titles\><<<
\let\"=\:same \let\~=\:same \let\^=\:same
\PictureOff
>>>




\<0,32,4 latex\><<<
|<latex accents|>
\let\@acci|=\' \let\@accii|=\` \let\@acciii|=\=       
>>>

\<new accents\><<<
\:CheckOption{accent-}     \if:Option
  \Configure{HAccent}\acute{AEIOUYaeiouy{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\bar{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\breve{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\check{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\ddot{AEIOUYaeiouy{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\dot{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\grave{AEIOUaeiou{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\hat{AEIOUaeiou{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\tilde{AOaoNn{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\vec{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\widehat{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\widetilde{}{\Picture+{}}{\EndPicture}
\fi
\:CheckOption{mathaccent-}     \if:Option
  \Configure{HAccent}\"{AEIOUYaeiouy{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\'{AEIOUYaeiouy{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\.{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\={}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\H{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\^{AEIOUaeiou{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\`{AEIOUaeiou{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\b{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\c{Cc{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\d{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\t{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\u{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\v{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\~{AOaoNn{}}{\Picture+{}}{\EndPicture}
\fi
>>>

\<new accents\><<<
\Configure{accent}{*}
   {<!--tex4ht:accent\Hnewline font="}{" char="}{" type="}{"-->}
   {<!--tex4ht:end accent-->}
\Configure{mathaccent}{*}
   {<!--tex4ht:mathaccent\Hnewline font="}{" char="}{" type="}{"-->}
   {<!--tex4ht:end mathaccent-->}
\Configure{accented}{*}
   {<!--tex4ht:accented\Hnewline font="}{" char="}{" type="}{"-->}
   {<!--tex4ht:end accented-->}
\Configure{accenting}{*}
   {<!--tex4ht:accenting\Hnewline-->}
   {<!--tex4ht:end accenting-->}
>>>







\<0,32,4 plain\><<<
\:CheckOption{new-accents}     \if:Option
   |<new plain accents|>
\else
   |<old plain accents|>
   \Configure{accents}
      {\ht:special{t4ht@+\string&{35}x#2{59}}x}
      {\Picture+{ \:Picture:{#1}}#2{#3}\EndPicture}
\fi
\let\^^_|=\v
>>>



\<new plain accents\><<<
\:CheckOption{accent-}     \if:Option
  \Configure{HAccent}\acute{AEIOUYaeiouy{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\bar{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\breve{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\check{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\ddot{AEIOUYaeiouy{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\dot{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\grave{AEIOUaeiou{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\hat{AEIOUaeiou{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\tilde{AOaoNn{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\vec{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\widehat{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\widetilde{}{\Picture+{}}{\EndPicture}
\fi
\:CheckOption{mathaccent-}     \if:Option
  \Configure{HAccent}\"{AEIOUYaeiouy{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\'{AEIOUYaeiouy{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\.{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\={}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\H{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\^{AEIOUaeiou{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\`{AEIOUaeiou{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\b{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\c{Cc{}}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\d{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\t{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\u{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\v{}{\Picture+{}}{\EndPicture}
  \Configure{HAccent}\~{AOaoNn{}}{\Picture+{}}{\EndPicture}
\fi
>>>

\<new plain accents\><<<
\Configure{accent}{*}
   {<!--tex4ht:accent\Hnewline font="}{" char="}{" type="}{"-->}
   {<!--tex4ht:end accent-->}
\Configure{mathaccent}{*}
   {<!--tex4ht:mathaccent\Hnewline font="}{" char="}{" type="}{"-->}
   {<!--tex4ht:end mathaccent-->}
\Configure{accented}{*}
   {<!--tex4ht:accented\Hnewline font="}{" char="}{" type="}{"-->}
   {<!--tex4ht:end accented-->}
\Configure{accenting}{*}
   {<!--tex4ht:accenting\Hnewline-->}
   {<!--tex4ht:end accenting-->}
>>>





\<old plain accents\><<<
\Configure{accent}\`\grave{|<grave codes|>{}{}}
   {\a:accents{grave}{#1}}   {\b:accents{grave}{#1}{#2}}
\Configure{accent}\'\acute{|<acute codes|>{}{}}
   {\a:accents{acute}{#1}}   {\b:accents{acute}{#1}{#2}}
\Configure{accent}\^\hat{|<circumflex codes|>{}{}}
   {\a:accents{circ}{#1}}   {\b:accents{hat}{#1}{#2}}
\Configure{accent}\~\tilde{|<tilde codes|>{}{}}
   {\a:accents{tilde}{#1}}   {\b:accents{tilde}{#1}{#2}}
\Configure{accent}\"\ddot{|<diaeresis codes|>{}{34}}
   {\a:accents{uml}{#1}}     {\b:accents{uml}{#1}{#2}}
>>>

The following are also placed under accents configuration.

\<old plain accents\><<<
\Configure{accent}\c\c{C{C}c{c}{}{}}
   {\a:accents{cedil}{#1}}     {\b:accents{cedil}{#1}{#2}}
\Configure{accent}\t\t{{}{}}
   {\a:accents{udot}{#1}}     {\b:accents{udot}{#1}{#2}}
\Configure{accent}\H\H{{}{}}
    {\a:accents{Huml}{#1}} {\b:accents{Huml}{#1}{#2}}
\Configure{accent}\b\b{{}{}}
    {\a:accents{b}{#1}} {\b:accents{b}{#1}{#2}}
\Configure{accent}\d\d{{}{}}
    {\a:accents{d}{#1}} {\b:accents{d}{#1}{#2}}
>>>

The following originally have been defined to be parameter-less.

\<old plain accents\><<<
\Configure{accent}\.\.{{}{}} 
   {\a:accents{dot}{#1}} {\b:accents{dot}{#1}{#2}}
\Configure{accent}\dot\dot{{}{}}
   {\a:accents{dot}{#1}} {\b:accents{dot}{#1}{#2}}
\Configure{accent}\u\breve{{}{}}{\a:accents{breve}{#1}}
   {\b:accents{breve}{#1}{#2}}
\Configure{accent}\vec\vec{{}{}}{\a:accents{vec}{#1}}
   {\b:accents{vec}{#1}{#2}}
\Configure{accent}\v\v{{}{}}{\a:accents{check}{#1}}
   {\b:accents{check}{#1}{#2}} 
\Configure{accent}\check\check{{}{}}{\a:accents{check}{#1}}
   {\b:accents{check}{#1}{#2}} 
\Configure{accent}\=\bar{{}{}}
   {\a:accents{bar}{#1}} {\b:accents{bar}{#1}{#2}}
>>>
%  \= macron

\<old plain accents\><<<
\Configure{accent}\widetilde\widetilde{{}{}} 
   {\a:accents{widetilde}{#1}} {\b:accents{widetilde}{#1}{#2}}
\Configure{accent}\widehat\widehat{{}{}} 
   {\a:accents{widehat}{#1}} {\b:accents{widehat}{#1}{#2}}
>>>
\verb'\vec', \verb'\widetilde', and \verb'\widehat' are for math mode.
\verb'\b', \verb'\c', \verb'\d', \verb'\t', and \verb'\H' are for text mode.


%%%%%%%%%%%%%%%%%%%
\section{AMS Encodings}
%%%%%%%%%%%%%%%%%%%




\<ams 2000 art + book + proc\><<<
\def\:tempc#1#2#3#4#5{%
  \expandafter\ifx \csname #1mathaccentV\endcsname\relax
     \o:mathaccentV:{#1}{#2}{#3}{#4}{#5}%
  \else  \csname #1mathaccentV\endcsname{#5}\fi}
\HLet\mathaccentV\:tempc
\:CheckOption{new-accents}     \if:Option \else
   |<ams 2000 iso-8859-1 accents|>
\fi
\def\:temp{charset=iso-8859-2}
\ifx \a:charset\:UnDef
      \ifx  \A:charset\:temp \let\:temp=\def \fi
\else \ifx  \a:charset\:temp \let\:temp=\def \fi
\fi
\ifx \:temp\def
   \:CheckOption{new-accents}     \if:Option \else
      |<old ams 2000 iso-8859-2 accents|>
\fi \fi
>>>


\<ams 2000 iso-8859-1 accents\><<<
\HRestore\grave
\expandafter\let\csname gravemathaccentV\endcsname=\grave
\expandafter\let\csname GRAVEmathaccentV\endcsname=\grave
\expand:after{\Configure{accent}}\csname
           gravemathaccentV\expandafter\endcsname
   \csname GRAVEmathaccentV\endcsname{|<grave iso-8859-1|>{}{}}
   {\a:accents{grave}{#1}}   {\b:accents{grave}{#1}{#2}}
\HRestore\acute
\expandafter\let\csname acutemathaccentV\endcsname=\acute
\expandafter\let\csname ACUTEmathaccentV\endcsname=\acute
\expand:after{\Configure{accent}}\csname 
           acutemathaccentV\expandafter\endcsname
   \csname ACUTEmathaccentV\endcsname{|<acute iso-8859-1|>{}{}}
   {\a:accents{acute}{#1}}   {\b:accents{acute}{#1}{#2}}
\HRestore\hat
\expandafter\let\csname hatmathaccentV\endcsname=\hat
\expandafter\let\csname HATmathaccentV\endcsname=\hat
\expand:after{\Configure{accent}}\csname
           hatmathaccentV\expandafter\endcsname
   \csname HATmathaccentV\endcsname{|<hat iso-8859-1|>{}{}}
   {\a:accents{hat}{#1}}   {\b:accents{hat}{#1}{#2}}
\HRestore\tilde
\expandafter\let\csname tildemathaccentV\endcsname=\tilde
\expandafter\let\csname TILDEmathaccentV\endcsname=\tilde
\expand:after{\Configure{accent}}\csname
           tildemathaccentV\expandafter\endcsname
   \csname TILDEmathaccentV\endcsname{|<tilde iso-8859-1|>{}{}}
   {\a:accents{tilde}{#1}}   {\b:accents{tilde}{#1}{#2}}
\HRestore\ddot
\expandafter\let\csname DDOTmathaccentV\endcsname=\ddot
\expand:after{\Configure{accent}}\csname
           DDOTmathaccentV\expandafter\endcsname
   \csname DDOTmathaccentV\endcsname{|<ddot iso-8859-1|>{}{}}
   {\a:accents{ddot}{#1}}   {\b:accents{ddot}{#1}{#2}}
\expandafter\let\csname ddotmathaccentV\endcsname=\ddot
\expand:after{\Configure{accent}}\csname
           ddotmathaccentV\expandafter\endcsname
   \csname ddotmathaccentv\endcsname{|<ddot iso-8859-1|>{}{}}
   {\a:accents{ddot}{#1}}   {\b:accents{ddot}{#1}{#2}}
\HRestore\check
\expandafter\let\csname checkmathaccentV\endcsname=\check
\expandafter\let\csname CHECKmathaccentV\endcsname=\check
\expand:after{\Configure{accent}}\csname
           checkmathaccentV\expandafter\endcsname
   \csname CHECKmathaccentV\endcsname{|<check iso-8859-1|>{}{}}
   {\a:accents{check}{#1}}   {\b:accents{check}{#1}{#2}}
\HRestore\dot
\expandafter\let\csname dotmathaccentV\endcsname=\dot
\expandafter\let\csname DOTmathaccentV\endcsname=\dot
\expand:after{\Configure{accent}}\csname
           dotmathaccentV\expandafter\endcsname
   \csname DOTmathaccentV\endcsname{|<dot iso-8859-1|>{}{}}
   {\a:accents{dot}{#1}}   {\b:accents{dot}{#1}{#2}}
\HRestore\breve
\expandafter\let\csname brevemathaccentV\endcsname=\breve
\expandafter\let\csname BREVEmathaccentV\endcsname=\breve
\expand:after{\Configure{accent}}\csname
           brevemathaccentV\expandafter\endcsname
   \csname BREVEmathaccentV\endcsname{|<breve iso-8859-1|>{}{}}
   {\a:accents{breve}{#1}}   {\b:accents{breve}{#1}{#2}}
\HRestore\bar
\expandafter\let\csname barmathaccentV\endcsname=\bar
\expandafter\let\csname BARmathaccentV\endcsname=\bar
\expand:after{\Configure{accent}}\csname
           barmathaccentV\expandafter\endcsname
   \csname BARmathaccentV\endcsname{|<bar iso-8859-1|>{}{}}
   {\a:accents{bar}{#1}}   {\b:accents{bar}{#1}{#2}}
\HRestore\vec
\expandafter\let\csname vecmathaccentV\endcsname=\vec
\expandafter\let\csname VECmathaccentV\endcsname=\vec
\expand:after{\Configure{accent}}\csname
           vecmathaccentV\expandafter\endcsname
   \csname VECmathaccentV\endcsname{|<vec iso-8859-1|>{}{}}
   {\a:accents{vec}{#1}}   {\b:accents{vec}{#1}{#2}}
>>>

\<old ams 2000 iso-8859-2 accents\><<<
\HRestore\acute
\expandafter\let\csname acutemathaccentV\endcsname=\acute
\expandafter\let\csname ACUTEmathaccentV\endcsname=\acute
\expand:after{\Configure{accent}}\csname 
           acutemathaccentV\expandafter\endcsname
   \csname ACUTEmathaccentV\endcsname{|<acute iso-8859-2|>{}{}}
   {\a:accents{acute}{#1}}   {\b:accents{acute}{#1}{#2}}
>>>

The upper case is needed for cases like 

\begin{verbatim}
\documentclass[12pt]{amsart}
\begin{document}
\title{BUDOWA J''ADER ATOM{O}W PIERWIASTK{O}W}
\author{Rafa''l ``Raba--P{o}''lg''l{o}wek\'o$\acute{o}$}
\def\datename{Wersja z}
\date{\today}
\maketitle
\end{document}
\end{verbatim}


%%%%%%%%%%%%%%%%%%
\section{ot4enc}
%%%%%%%%%%%%%%%%%%

\<configure html-speech ot4enc\><<<
\def\add:acc#1{\ht:special{t4ht@+\string&\#x#1;}x}
\Configure{add accent}{OT4:18} %\`
  |<add grave codes|>  {}{} 
\Configure{add accent}{OT4:127} %\"
  |<add diaeresis codes|>  {}{}
\Configure{add accent}{OT4:19} %\'
  |<add acute codes|>  {}{}
\Configure{add accent}{OT4:95} %\.
  |<add dot above codes|>  {}{}
\Configure{add accent}{OT4:22} %\=
     {}{}
\Configure{add accent}{OT4:94} %\^
  |<add circumflex codes|>  {}{}
\Configure{add accent}{OT4:126} %\~
  |<add tilde codes|>  {}{}
\Configure{add accent}{OT4:125} %\H
  |<add double acute code|>  {}{}
\Configure{add accent}{OT4:21} %\u
  |<add breve codes|>  {}{}
\Configure{add accent}{OT4:20} %\v
  |<add caron codes|>  {}{}
\Configure{add accent}{OT4:23} %\r
  |<add ring codes|>   {}{}
\Configure{add accent}{OT4:24} %\c
  |<add cedilla codes|>  {}{}
>>>

%%%%%%%%%%%%%%%%%%
\section{pd1enc}
%%%%%%%%%%%%%%%%%%

\<configure html-speech pd1enc\><<<
\def\add:acc#1{\ht:special{t4ht@+\string&\#x#1;}x}
\Configure{add accent}{PD1:96} %\`
  |<add grave codes|>  {}{} 
\Configure{add accent}{PD1:168} %\"
  |<add diaeresis codes|>  {}{}
\Configure{add accent}{PD1:180} %\'
  |<add acute codes|>  {}{}
\Configure{add accent}{PD1:27} %\.
  |<add dot above codes|>  {}{}
\Configure{add accent}{PD1:26} %\^
  |<add circumflex codes|>  {}{}
\Configure{add accent}{PD1:31} %\~
  |<add tilde codes|>  {}{}
\Configure{add accent}{PD1:24} %\u
  |<add breve codes|>  {}{}
\Configure{add accent}{PD1:20} %\v
  |<add caron codes|>  {}{}
\Configure{add accent}{PD1:21} %\r
  |<add ring codes|>   {}{}
\Configure{add accent}{PD1:184} %\c
  |<add cedilla codes|>  {}{}
>>>

% \Configure{add accent}{PD1:22} %\=     {}{}

% \Configure{add accent}{PD1:125} %\H
%  |<add double acute code|>  {}{}


%%%%%%%%%%%%%%%%%%%
\section{Languages}
%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%
\subsection{Babel}
%%%%%%%%%%%%%%%%%%%


\<babel.def\><<<
|<quotedblbase|>
>>>


\<babel macros\><<<
|<babel.def|>
>>>




\<config tex4ht\><<<
\NewConfigure{charset}[1]{\def\a:charset{#1}}
\def\:temp#1charset=#2,#3|<par del|>{%
   \if !#2!%
     \Log:Note{for alternative charset, use
          the command line option `charset=...'}
   \else \Configure{charset}{charset=#2}\fi}
\expandafter\:temp\Preamble ,charset=,|<par del|>
>>>




\<configure html-speech CJK\><<<
\def\A:charset{charset=utf-8}
|<simplified chinese (mainland)|>
|<traditional chinese (taiwanese)|>
|<japanese charset|>
|<korean charset|>
\Configure{CJKbold}{\HCode{<b>}}{\HCode{</b>}}
>>>



The following are from CJK.enc
\begin{verbatim}
% CEF:          CEFX    C80
%               CEFY    C81
\end{verbatim}


\<traditional chinese (taiwanese)\><<<
\Configure{CJK.enc}{Bg5}{\def\A:charset{charset=big5}}
\Configure{CJK.enc}{Bg5pmC}{\def\A:charset{charset=big5}}
\Configure{CJK.enc}{Bg5+}{\def\A:charset{charset=big5}}
>>>


GB2312 (1980) has been superceded by GBK (circa 1993?) and GB18030 (2000).

\<simplified chinese (mainland)\><<<
\Configure{CJK.enc}{GBpmC}{\def\A:charset{charset=gbk}}
\Configure{CJK.enc}{GBK}{\def\A:charset{charset=gbk}}
\Configure{CJK.enc}{GBt}{\def\A:charset{charset=gbk}}
\Configure{CJK.enc}{GBtpmC}{\def\A:charset{charset=gbk}}
\Configure{CJK.enc}{CNS1-7}{\def\A:charset{charset=gbk}}
>>>


\<japanese charset\><<<
\Configure{CJK.enc}{JIS}{\def\A:charset{charset=iso-2022-jp}}
\Configure{CJK.enc}{JISpmC}{\def\A:charset{charset=iso-2022-jp}}
\Configure{CJK.enc}{JISdnp}{\def\A:charset{charset=iso-2022-jp}}
\Configure{CJK.enc}{JISwn}{\def\A:charset{charset=iso-2022-jp}}
\Configure{CJK.enc}{JIS2}{\def\A:charset{charset=iso-2022-jp}}
\Configure{CJK.enc}{JIS2dnp}{\def\A:charset{charset=iso-2022-jp}}
\Configure{CJK.enc}{SJIS}{\def\A:charset{charset=iso-2022-jp}}
>>>

\<korean charset\><<<
\Configure{CJK.enc}{KS}{\def\A:charset{charset=iso-2022-kr}}
\Configure{CJK.enc}{KSpmC}{\def\A:charset{charset=iso-2022-kr}}
\Configure{CJK.enc}{KSHL}{\def\A:charset{charset=iso-2022-kr}}
>>>





\<configure html-speech hebtex\><<<
\def\A:charset{charset=iso-8859-8}
\Configure{arabtext}
   {\ifhmode \let\end:arabtex=\empty \IgnorePar
    \else
         \HCode{<div align="right"><table class="arabtex"><tr><td\Hnewline
              style="white-space:nowrap;" align="right">}%
         \def\end:arabtex{\HCode{</td></tr></table></div>}}%
    \fi
    \global\let\start:arab=\relax}
   {\end:arabtex}
   {\ifx \start:arab\relax \global\let\start:arab=\empty
    \else \Tg<br />\fi}
   {}
\:CheckOption{nikud}     \if:Option
   \Configure{chireq}{\char5 }
   \Configure{cholem}{\char3 }
   \Configure{chpatach}{\char1\char7 }
   \Configure{chqames}{\char2\char7 }
   \Configure{chsegol}{\char3\char7 }
   \Configure{dagesh}{\char46 }
   \Configure{meteg}{\char44 }
   \Configure{patachf}{\char1 }
   \Configure{patach}{\char1 }
   \Configure{qameschat}{\char6\char7 }
   \Configure{qames}{\char6 }
   \Configure{qibbus}{\HCode{<!--qibbus-->}}
   \Configure{rdot}{\HCode{<!--rdot-->}}
   \Configure{segol}{\char3 }
   \Configure{sere}{\char9 }
   \Configure{shindot}{\HCode{<!--shindot-->}}
   \Configure{shwa}{\char7 }
   \Configure{sindot}{\HCode{<!--sindot-->}}
\else
   \Log:Note{for hebrew vowels, use
        the command line option `nikud'}
   \Configure{chireq}{\HCode{<!--chireq-->}}
   \Configure{cholem}{\HCode{<!--cholem-->}}
   \Configure{chpatach}{\HCode{<!--chpatach-->}}
   \Configure{chqames}{\HCode{<!--chqames-->}}
   \Configure{chsegol}{\HCode{<!--chsegol-->}}
   \Configure{dagesh}{\HCode{<!--dagesh-->}}
   \Configure{meteg}{\HCode{<!--meteg-->}}
   \Configure{patachf}{\HCode{<!--patachf-->}}
   \Configure{patach}{\HCode{<!--patach-->}}
   \Configure{qameschat}{\HCode{<!--qameschat-->}}
   \Configure{qames}{\HCode{<!--qames-->}}
   \Configure{qibbus}{\HCode{<!--qibbus-->}}
   \Configure{rdot}{\HCode{<!--rdot-->}}
   \Configure{segol}{\HCode{<!--segol-->}}
   \Configure{sere}{\HCode{<!--sere-->}}
   \Configure{shindot}{\HCode{<!--shindot-->}}
   \Configure{shwa}{\HCode{<!--shwa-->}}
   \Configure{sindot}{\HCode{<!--sindot-->}}
\fi
>>>


\<configure html-speech abidir\><<<
\:CheckOption{pic-RL}\if:Option
   \Configure{RL}
      {\ifvmode \IgnorePar\EndP \def\RL:tag{div}\else \def\RL:tag{span}\fi
       \HCode{<\RL:tag\space class="pic-RL">}\Picture*{}} 
      {\EndPicture\HCode{</\RL:tag>}}
      {}  {} {} {}
   \Css{div.pic-RL{text-align:right;}}
\else 
   \Log:Note{for pictorial RL, use
             the command line option `pic-RL'}
   \Configure{RL}
      {\HCode{<span class="RL">}} {\HCode{</span>}}
      {}  {\HCode{<br />}} {} {}

\fi
>>>

% \:CheckOption{RL2LR}\if:Option
%    \Configure{RL}
%       {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="RL" 
%           dir="rtl" >}}
%       {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
%       {}  {} {} {}
% \else
%    \Configure{RL}
%       {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="RL" 
%           dir="rtl" >}}
%       {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
%       {}  {\HCode{<br />}} {} {}
% \fi 


\<configure html-speech-uni babel\><<<
\def\A:charset{charset=utf-8}%
>>>


\<configure html-speech-uni austrian\><<<
\def\A:charset{charset=utf-8}
>>>

\<configure html-speech-uni catalan\><<<
\def\A:charset{charset=utf-8}
>>>

\<configure html-speech-uni croatian\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni czech\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni danish\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni dutch\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni english\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni esperant\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni estonian\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni finnish\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni francais\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni galician\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni germanb\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni greek\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni hebrew\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni ngermanb\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni norsk\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni polish\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni polski\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni portuges\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni romanian\><<<
\def\A:charset{charset=utf-8}
>>>


\<configure html-speech-uni scottish\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni slovak\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni slovene\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni spanish\><<<
\def\A:charset{charset=utf-8}
|<spanish configs|>
>>>
\<configure html-speech-uni swedish\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni turkish\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni ukraineb\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni usorbian\><<<
\def\A:charset{charset=utf-8}
>>>
\<configure html-speech-uni welsh\><<<
\def\A:charset{charset=utf-8}
>>>

\<configure html-speech-uni CJK\><<<
\def\A:charset{charset=utf-8}  
\Configure{CJKbold}{\HCode{<b>}}{\HCode{</b>}}
>>>

\<configure html-speech-uni hebtex\><<<
\def\A:charset{charset=utf-8}
>>>

\<configure html-speech-uni exerquiz\><<<
\def\A:charset{charset=utf-8}  
>>>

\<configure html-speech romanian\><<<
\def\A:charset{charset=iso-8859-2}
\:CheckOption{new-accents}     \if:Option \else
   |<old iso-8859-2 accents|>
\fi
>>>

%%%%%%%%%%%%%%%%%%%
\subsection{Umlaut}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech german\><<<
\:CheckOption{new-accents}     \if:Option \else
   \Configure{accent}\grmn@OTumlaut
      \grmn@OTumlaut{|<diaeresis codes|>{}{34}}
   {\a:accents{uml}{#1}}     {\b:accents{uml}{#1}{#2}}
\fi
>>>


\<configure html-speech ngerman\><<<
\:CheckOption{new-accents}     \if:Option \else
   \Configure{accent}\grmn@OTumlaut
      \grmn@OTumlaut{|<diaeresis codes|>{}{34}}
   {\a:accents{uml}{#1}}     {\b:accents{uml}{#1}{#2}}
\fi
>>>

\<babel.def\><<<
\:CheckOption{new-accents}     \if:Option \else
   \Configure{accent}\lower@umlaut\lower@umlaut{|<diaeresis codes|>{}{34}}
   {\a:accents{uml}{#1}}     {\b:accents{uml}{#1}{#2}}
\fi
>>>



\<u mlaut\><<<
\Configure{accent}\bbl@umlauta
   \bbl@umlaute{|<diaeresis iso-8859-1|>{}{34}}
   {\a:accents{uml}{#1}}     {\b:accents{uml}{#1}{#2}}
>>>

%%%%%%%%%%%%%%%%%%%
\subsection{Russian and Cyrillic}
%%%%%%%%%%%%%%%%%%%



\<configure html-speech t2benc\><<<
\def\:temp{charset=koi8-r}\ifx \A:charset\:temp \else
   \def\A:charset{charset=iso-8859-5}
\fi
>>>



\<configure html-speech koi8-r\><<<
\def\A:charset{charset=koi8-r}
>>>



\<set babel charset\><<<
\def\:temp{charset=koi8-r}\ifx \A:charset\:temp \else
   \a:temp{russian}{iso-8859-5}{ru}
\fi
>>>

\<configure html-speech-uni russianb\><<<
\NewConfigure{dtd-lang}{1}  \Configure{dtd-lang}{RU}
\def\A:charset{charset=utf-8}

\ifx \@begindocumenthook\:UnDef\else
   \:CheckOption{new-accents}     \if:Option \else
         |<russian|>
\fi\fi
>>>



\<configure html-speech russianb\><<<
\NewConfigure{dtd-lang}{1}  \Configure{dtd-lang}{RU}
\def\:temp{charset=koi8-r}\ifx \A:charset\:temp \else
   \def\A:charset{charset=iso-8859-5}
\fi
\ifx \@begindocumenthook\:UnDef\else
   \:CheckOption{new-accents}     \if:Option \else
%      \def\:temp{russian}\ifx \languagename\:temp
         |<russian|>
%      \fi
\fi\fi
>>>


We had also \verb'\append:def\@begindocumenthook{\HLet\"|=\ddot}' in
babel. It gets russian and brazil into infinite loop.  Why it was
inserted.

ERROR: The non ascii characters  might translate wrongly in the 4ht
file (e.g., \verb'^^e5' for 00EB below). They also  not show in the
documentation since a cmtt10 font is in use and it doesn't covet those
symbols. The problem will probably vanish once the new accent approach
will kick in.


\<russian\><<<
\Configure{accent}\"\ddot{|<diaeresis codes|>{00EB}%
           {\@use@text@encoding \@curr@enc A}{00C4}%
           {\@use@text@encoding \@curr@enc E}{00CB}%
           {\@use@text@encoding \@curr@enc I}{00CF}%
           {\@use@text@encoding \@curr@enc O}{00D6}%
           {\@use@text@encoding \@curr@enc U}{00DC}%
           {\@use@text@encoding \@curr@enc Y}{0178}%
           {\@use@text@encoding \@curr@enc a}{00E4}%
           {\@use@text@encoding \@curr@enc e}{00EB}%
           {\@use@text@encoding \@curr@enc i}{00EF}%
           {\@use@text@encoding \@curr@enc \i}{00EF}%
           {\@use@text@encoding \@curr@enc o}{00F6}%
           {\@use@text@encoding \@curr@enc u}{00FC}%
           {\@use@text@encoding \@curr@enc y}{00FF}%
           {\@use@text@encoding \@curr@enc }{00EB}%
           {}{34}}
   {\a:accents{uml}{#1}}    
   {\def\:temp{>}\def\:tempa{#2}\ifx \:temp\:tempa\HCode{}%
    \else \def\:temp{<}\ifx \:temp\:tempa\HCode{}%
    \else \b:accents{uml}{#1}{#2}\fi\fi}
>>> 



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Features}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%
\section{Margin Comments}
%%%%%%%%%%%%%%%%%%


We need to consider cases like
 \verb+\marginpar{ Consider: \par *one \par *two}+
for margin pars.




%%%%%%%%%%%%%%%%%%
\section{Pictures in Margins}
%%%%%%%%%%%%%%%%%%

\<configure html-speech picins\><<<
\Configure{parpic}
   {\IgnorePar\EndP\HCode{<div class="picins-\parpicOpt">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
>>>

\<configure html-speech picins\><<<
\Css{.picins-dr, .picins-rd { float:right; 
  padding: 2px; margin-left:5px; margin-bottom:3px;
  border: 1px dashed black; 
  }} 
\Css{.picins-dl, .picins-ld, .picins-d { float:left; 
  padding: 2px; margin-right:5px; margin-bottom:3px;
  border: 1px dashed black; 
  }} 
\Css{.picins-fr, .picins-rf { float:right; 
  padding: 2px; margin-left:5px; margin-bottom:3px;
  border: 1px dashed black; 
  }} 
\Css{.picins-fl, .picins-lf, .picins-f { float:left; 
  padding: 2px; margin-right:5px; margin-bottom:3px;
  border: 1px solid black; 
  }} 
\Css{.picins-sr, .picins-rs { float:right; 
  padding: 2px; margin-left:5px; margin-bottom:3px;
  border-left: 1px solid black; 
  border-top: 1px solid black; 
  border-right: 4px solid black; 
  border-bottom: 4px solid black; 
  }} 
\Css{.picins-sl, .picins-ls, .picins-s { float:left; 
  padding: 2px; margin-right:5px; margin-bottom:3px;
  border-left: 1px solid black; 
  border-top: 1px solid black; 
  border-right: 4px solid black; 
  border-bottom: 4px solid black; 
  }} 
\Css{.picins-xr, .picins-rx { float:right; 
  padding: 2px; margin-left:5px; margin-bottom:3px;
  border-left: 1px solid black; 
  border-top: 1px solid black; 
  border-right: 1px double black; 
  border-bottom: 1px double black; 
  }} 
\Css{.picins-xl, .picins-lx, .picins-x { float:left; 
  padding: 2px; margin-right:5px; margin-bottom:3px;
  border-left: 1px solid black; 
  border-top: 1px solid black; 
  border-right: 1px double black; 
  border-bottom: 1px double black; 
  }} 
\Css{.picins-r { float:right; 
  padding: 2px; margin-left:5px; margin-bottom:3px;
  }} 
\Css{.picins-l, .picins- { float:left; 
  padding: 2px; margin-right:5px; margin-bottom:3px;
  }} 
>>>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Style Files}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%
\subsection{MeX}
%%%%%%%%%%%%%%%%%%


\<configure html-speech mex\><<<
\def\MeX{\HCode{<span class="MeX">}MeX\HCode{</span>}}
>>>

%%%%%%%%%%%%%%%%%%
\subsection{eplain}
%%%%%%%%%%%%%%%%%%


\<configure html-speech eplain\><<<
\Configure{columns}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<div class="columns"><!--cols=\NumColumns-->}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Css{div.columns { margin-left:2em; margin-right:2em; }}
>>>


\<configure html-speech eplain\><<<
\Configure{bibliography}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{<div class="bibliography">}\par}
   {\ifvmode \IgnorePar\fi \EndP  \HCode{</div>}\par}
>>>



\<configure html-speech eplain\><<<
\Configure{makecolumns}
    {\ifvmode \IgnorePar\fi \EndP
     \HCode{<table class="makecolumns"><tr><td>}%
     \gdef\make:col{\gdef\make:col{\HCode{<br />}}}}
    {\HCode{</td></tr></table>}}
    {\HCode{</td><td>}%
     \gdef\make:col{\gdef\make:col{\HCode{<br />}}}}
    {\make:col}
    {}
\Css{table.makecolumns{width:100\%;}}
\Css{table.makecolumns td {vertical-align:top;}}
>>>


\<configure html-speech eplain\><<<
\Configure{flushleft}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{<div class="flushleft">}}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{</div>}}
   {\HCode{<br />}}
\Configure{flushright}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{<div class="flushright">}}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{</div>}}
   {\HCode{<br />}}
\Configure{center}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{<div class="center">}}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{</div>}}
   {\HCode{<br />}}
\Css{div.center {text-align:center;}}
\Css{div.flushright {text-align:right;}}
\Css{div.flushleft {text-align:left;}}
>>>



\<configure html-speech eplain\><<<
|<eplain dates|>
\Configure{numberedlist}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<ol>}\let\end:itm=\empty}
   {\ifvmode \IgnorePar\fi \end:itm \HCode{</ol>}}
   {\end:itm \def\end:itm{\EndP\Tg</li>}\HCode{<li>}\special{t4ht@[}\IgnorePar}
   {\special{t4ht@]}}
\Configure{orderedlist}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<ol>}\let\end:itm=\empty}
   {\ifvmode \IgnorePar\fi \end:itm \HCode{</ol>}}
   {\end:itm \def\end:itm{\EndP\Tg</li>}\HCode{<li>}\special{t4ht@[}\IgnorePar}
   {\special{t4ht@]}}
\Configure{unorderedlist}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<ul>}\let\end:itm=\empty}
   {\ifvmode \IgnorePar\fi \end:itm \HCode{</ul>}}
   {\ifvmode \IgnorePar\fi \EndP
    \end:itm \def\end:itm{\EndP\Tg</li>}%
    \HCode{<li>}\special{t4ht@[}\IgnorePar}
   {\special{t4ht@]}}
>>>

\<configure html-speech eplain\><<<
\Configure{listing}
   {\IgnorePar\EndP \HCode{<div class="listing">}\par
    \Configure{HtmlPar}
      {\EndP}
      {\EndP}
      {~\HCode{<br />}}
      {~\HCode{<br />}}
   }
   {\HCode{</div>}\par}
>>>


\<configure html-speech-math eplain\><<<
\Configure{PicDisplay}
  {\edef\MathPar{\ifvmode par-\fi}\IgnorePar\endgraf\EndP
   \HCode{<div class="\if@leftdisplays leftdisplay\else centereddisplay\fi">}}
  {\HCode{</div>}}  {}  {class="\MathPar math-display" } 
\Css{div.lsftdisplay {text-align:left;}}
\Css{div.centereddisplay {text-align:center;}}
>>>


\<configure html-speech-math eplain\><<<
\Configure{contents}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<div class="contents">}}
   {\HCode{</div>}}
\Configure{tocchapterentry}
   {\HCode{<span class="tocchapterentry">}}
   {\HCode{</span><span class="toc-num">}}
   {\HCode{</span>}}
\Configure{tocsectionentry}
   {\HCode{<span class="tocsectionentry">}}
   {\HCode{</span><span class="toc-num">}}
   {\HCode{</span>}}
\Configure{tocsubsectionentry}
   {\HCode{<span class="tocsubsectionentry">}}
   {\HCode{</span><span class="toc-num">}}
   {\HCode{</span>}}
\Css{span.tocchapterentry{width:30em}}
\Css{span.tocsectionentry{width:30em; padding-left:1.5em}}
\Css{span.tocsectionentry{width:30em; padding-left:3em}}
\Css{span.toc-num{width:6em; padding-left:2em}}
>>>



\<eplain dates\><<<
\Configure{monthname}
   {\HCode{<span class="month">}}
   {\HCode{</span>}}
\Configure{timestring}
   {\HCode{<span class="time">}}
   {\HCode{</span>}}
\Configure{timestamp}
   {\HCode{<span class="timestamp">}}
   {\HCode{</span>}}
\Configure{today}
   {\HCode{<span class="today">}}
   {\HCode{</span>}}
>>>



%%%%%%%%%%%%%%%%%%%
\section{Drawing Utilitis}
%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%
\subsection{Diagrams}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech epsf\><<<
\Configure{epsfsetgraph}
  {\Picture+[\PicName]{}}
  {\EndPicture}
>>>




%%%%%%%%%%%%%%%%%%%
\subsection{Diagrams}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech diagrams\><<<
\ConfigureEnv{diagram}
   {\ifvmode \IgnorePar \EndP
      \Tg<div class="diagrams">\def\End:Diagrams{\Tg</div>}%
    \else \let\End:Diagrams\empty
    \fi }
   {\End:Diagrams}
   {}{}
\Configure{diagram}
   {\Picture*{}$} {$\EndPicture}
\Css{.diagrams {text-align: center;}}
>>>

%%%%%%%%%%%%%%%%%%%
\subsection{dratex}
%%%%%%%%%%%%%%%%%%%

  \<configure html-speech dratex\><<<
\Css{div.Draw{text-align:center}} 
>>>>


%%%%%%%%%%%%%%%%%%%
\subsection{pgf}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech pgf\><<<
\ConfigureEnv{pgfpicture}
   {\hbox\bgroup\Picture+[picture]{}}
   {\EndPicture\egroup} 
   {}{}
>>>



%%%%%%%%%%%%%%%%%%%
\subsection{pgf}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech overpic\><<<
\ConfigureEnv{overpic} 
   {\Picture*[pic]{}} 
   {\EndPicture} 
   {}{} 
>>>




%%%%%%%%%%%%%%
\subsection{psfig}
%%%%%%%%%%%%%%

\<configure html-speech psfig\><<<
|<0,32,4 psfig|>
>>>

\<0,32,4 psfig\><<<
\Configure{psfig} {\Picture+[psfig]{}}{\EndPicture}
>>>



%%%%%%%%%%%%%%%%%%%
\subsection{graphics}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech graphics\><<<
\:CheckOption{graphics-} \if:Option
   \Configure{graphics}
     {\bgroup
        \let\E:IMG=\e:IMG \let\e:IMG=\empty
      \Picture+[\a:GraphicsAlt]{ class="graphics"}}
     {\EndPicture
         \E:IMG\HCode{<!--tex4ht:graphics 
         \Hnewline  name="\PictureFile"  src="\Gin@base\Gin@ext"
         \Hnewline -->}%
      \egroup}
\else
   |<graphics quality|>
   \Configure{graphics}
     {\bgroup
        \let\E:IMG=\e:IMG \let\e:IMG=\empty
      \Picture+[\a:GraphicsAlt]{ class="graphics"}}
     {\EndPicture        \ifx\noBoundingBox\UnDefined
          |<pixels graphics width/height|>\fi
         \E:IMG\HCode{<!--tex4ht:graphics 
         \Hnewline  name="\PictureFile"  src="\Gin@base\Gin@ext"
         \Hnewline -->}%
      \egroup}
\fi
\Css{.figure img.graphics {margin-left:10\%;}}
\Configure{graphics*}
   {gif}
   {\Picture[\a:GraphicsAlt]{\Gin@base.gif |<graphics dim|>}}
\Configure{graphics*}
   {png}
   {\Picture[\a:GraphicsAlt]{\Gin@base.png |<graphics dim|>}}
\Configure{graphics*}
   {jpg}
   {\Picture[\a:GraphicsAlt]{\Gin@base.jpg |<graphics dim|>}}
\Configure{graphics*}
   {jpeg}
   {\Picture[\a:GraphicsAlt]{\Gin@base.jpeg |<graphics dim|>}}
\NewConfigure{GraphicsAlt}{1}
\Configure{GraphicsAlt}{PIC}
|<includegraphics dim|>
>>>

\<graphics quality\><<<
\def\:temp#1graphics-#2,#3|<par del|>{\def\gr:density{#2}}
\expandafter\:temp\Preamble,graphics-,|<par del|>
\ifx \gr:density\empty 
   \Log:Note{if included graphics are
      of degraded quality, try the command line options
      `graphics-num' or `graphics-'. The `num' should provide
      the density of pixels in the bitmaps (e.g., 110).
   }
\else
   \def\int:pt#1.#2|<par del|>{#1}
\fi
>>>



\<graphics dim\><<<
\csname a:Gin-dim\endcsname
>>>


\<includegraphics dim\><<<
\NewConfigure{Gin-dim}{1}
\:CheckOption{Gin-dim} \if:Option
   \Configure{Gin-dim}
     {\ifx\noBoundingBox\UnDefined 
        |<graphics width/height|>%
      \else
        |<graphicx width/height|>%
      \fi
      class="includegraphics"
     }
\else \:CheckOption{Gin-dim+} \if:Option
   \Configure{Gin-dim}
     {\ifx \Gin:ewidth\Gin@exclamation
         \ifx \Gin:eheight\Gin@exclamation
            \ifx\noBoundingBox\UnDefined 
               |<graphics width/height|>%
            \fi
         \else
            height="\Gin:eheight"
         \fi
      \else
         width="\Gin:ewidth"
         \ifx \Gin:eheight\Gin@exclamation \else
            height="\Gin:eheight"
         \fi
      \fi
      class="includegraphics"
     }
\else
   \Log:Note{for key dimensions try the option
       `Gin-dim'; for key dimensions when bounding box is unavailable 
       try `Gin-dim+'; neither is recommended}
   \Configure{Gin-dim}
     {\ifx\noBoundingBox\UnDefined 
        |<graphics width/height|>%
      \fi
     }
\fi \fi
>>>

\<pixels graphics width/height\><<<
\ifx \gr:density\empty
   \HCode{
      width="\the\Gin@req@width"
      height="\the\Gin@req@height"
   }%
\else
   \bgroup
     \divide\Gin@req@width by 72 
     \multiply\Gin@req@width by \gr:density \relax   
     \divide\Gin@req@height by 72 
     \multiply\Gin@req@height by \gr:density \relax   
     \HCode{
        width="\expandafter\int:pt\the\Gin@req@width|<par del|>"
        height="\expandafter\int:pt\the\Gin@req@height|<par del|>"
     }%   
   \egroup
\fi
>>>


\<graphics width/height\><<<
width="\the\Gin@req@width"
height="\the\Gin@req@height"
>>>

\<graphicx width/height\><<<
\ifx \Gin:ewidth\Gin@exclamation \else
   width="\Gin:ewidth"
\fi
\ifx \Gin:eheight\Gin@exclamation \else
   height="\Gin:eheight"
\fi
>>>


%%%%%%%%%%%%%%%%%%
\subsection{xy}
%%%%%%%%%%%%%%%%%%

\<configure html-speech xy\><<<
|<32,4 xy|>
>>>

\<32,4 xy\><<<
\Configure{xypic}
   {\Picture*{}} {\EndPicture}
>>>



%%%%%%%%%%%%%%%%%%
\subsection{pstricks}
%%%%%%%%%%%%%%%%%%


\<configure html-speech pst-all\><<<
\ConfigureEnv{psmatrix}
   {\Picture*{}}
   {\EndPicture}
   {}{}
>>>
         
\<configure html-speech pstricks\><<<
\Configure{pspicture}
   {\ifvmode \ifinner\else \vfill\break\fi
    \leavevmode\fi
    \bgroup 
       \ifdim \pst@dimh<\z@ \pst@dimh=-\pst@dimh \fi
       \HCode{<!--width="\ifdim \wd\pst@hbox=\z@  \the\pst@dimg
                         \else\the\wd\pst@hbox\fi"  
                 height="\ifdim \ht\pst@hbox=\z@ \the\pst@dimh
                         \else \the\ht\pst@hbox\fi"-->}%
     \egroup
     \Picture+[\a:pspictureAlt]{ class="pspicture"}}
   {\EndPicture}
\NewConfigure{pspictureAlt}{1}
\Configure{pspictureAlt}{PIC}
>>>

%%%%%%%%%%%%%%%%%%
\subsection{pb-diagram}
%%%%%%%%%%%%%%%%%%

\<configure html-speech pb-diagram\><<<
\ConfigureEnv{diagram}
   {\Picture*{ class="pb-diagram"}$} {$\EndPicture} {}{}
\Css{.pb-diagram {align:center}}
>>>


%%%%%%%%%%%%%%%%%%%
\subsection{pictex}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech pictex\><<<
\Configure{pictex}
   {\:xhtml{\IgnorePar\EndP}\HCode{<div 
    class="pictex">}}{\HCode{</div>}}{+[PICT]}
\Css{div.pictex {text-align:center;}}
>>>




%%%%%%%%%%%%%%%%%%%
\section{Slides}
%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%
\subsection{Beamer}
%%%%%%%%%%%%%%%%%%%




\<configure html-speech beamer\><<<
|<beamer slides|>
|<beamer environments|>
\ifx \beamer@version\:UnDef
   |<beamer toc 0.8 and 0.3|>
\fi
>>>

\<beamer environments\><<<
\let\block:Name=\empty
\ConfigureEnv{block}
   {\par\IgnorePar\EndP 
    \ifx \block:Name\empty \def\block:Name{block}\fi
    \HCode{<div class="\block:Name">}\global\let\block:Name=\empty}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
   {} {}
\ConfigureEnv{alertblock}
   {\par\IgnorePar\EndP 
    \ifx \block:Name\empty \def\block:Name{alertblock}\fi
    \HCode{<div class="\block:Name">}\global\let\block:Name=\empty}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
   {} {}
\ConfigureEnv{Problem}
   {\def\block:Name{Problem}} {} {} {}
\ConfigureEnv{Loesung}
   {\def\block:Name{Loesung}} {} {} {}
\ConfigureEnv{Definition}
   {\def\block:Name{Definition}} {} {} {}
\ConfigureEnv{Satz}
   {\def\block:Name{Satz}} {} {} {}
\ConfigureEnv{Beweis}
   {\def\block:Name{Beweis}} {} {} {}
\ConfigureEnv{Folgerung}
   {\def\block:Name{Folgerung}} {} {} {}
\ConfigureEnv{Lemma}
   {\def\block:Name{Lemma}} {} {} {}
\ConfigureEnv{Fakt}
   {\def\block:Name{Fakt}} {} {} {}
\ConfigureEnv{Theorem}
   {\def\block:Name{Theorem}} {} {} {}
\ConfigureEnv{Proof}
   {\def\block:Name{Proof}} {} {} {}
\ConfigureEnv{Corollary}
   {\def\block:Name{Corollary}} {} {} {}
\ConfigureEnv{Fact}
   {\def\block:Name{Fact}} {} {} {}
\ConfigureEnv{definition}
   {\def\block:Name{definition}} {} {} {}
\ConfigureEnv{definitions}
   {\def\block:Name{definitions}} {} {} {}
\ConfigureEnv{theorem}
   {\def\block:Name{theorem}} {} {} {}
\ConfigureEnv{proof}
   {\def\block:Name{proof}} {} {} {}
\ConfigureEnv{corollary}
   {\def\block:Name{corollary}} {} {} {}
\ConfigureEnv{fact}
   {\def\block:Name{fact}} {} {} {}
>>>

\<beamer toc 0.8 and 0.3\><<<
\ConfigureEnv{exampleblock}
   {\par\IgnorePar\EndP 
    \ifx \block:Name\empty \def\block:Name{exampleblock}\fi
    \HCode{<div class="\block:Name">}\global\let\block:Name=\empty}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
   {} {}
>>>


\<beamer environments\><<<
\ConfigureEnv{Beispiel}
   {\def\block:Name{Beispiel}} {} {} {}
\ConfigureEnv{Beispiele}
   {\def\block:Name{Beispiele}} {} {} {}
\ConfigureEnv{Example}
   {\def\block:Name{Example}} {} {} {}
\ConfigureEnv{Examples}
   {\def\block:Name{Examples}} {} {} {}
\ConfigureEnv{example}
   {\def\block:Name{example}} {} {} {}
\ConfigureEnv{examples}
   {\def\block:Name{examples}} {} {} {}
\Css{div.Example, div.examplblock, div.Beispiele,
     div.Beispiel, div.Examples, div.example, div.examples{color:green;}}
>>>

\<beamer slides\><<<
\:CheckOption{1} \if:Option
  \ConfigureEnv{slide}
     {\ifvmode \IgnorePar\fi \EndP 
      \ifnum \Slide:cnt>0 \HPage{}\fi
      \ifvmode \IgnorePar\fi \EndP  
      |<beamer header|>%
      \HCode{<div class="slide">}\par
     }
     {\ifvmode \IgnorePar\fi \EndP 
      \HCode{</div>}\ifnum \Slide:cnt>1\relax \EndHPage{}\fi}
     {} {}
  \Css{div.slide {border-top:solid black 0.4pt;}}
\else
   \Log:Note{for pagination of slides,
          use the command line option `1'}
   \ConfigureEnv{slide}
      {\ifvmode \IgnorePar\fi \EndP  
       \HCode{<hr class="hidden" />}%
       |<beamer header|>%
       \HCode{<div class="slide">}\par
      }
      {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
      {} {}
   \Css{div.slide {border:solid black 0.4pt;}}
\fi
>>>






\<beamer toc 0.8 and 0.3\><<<
\Configure{frametitle}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<h2 class="frametitle">}\bgroup
    \Configure{HtmlPar}{ }{ }{}{}%
   }
   {\egroup \ifvmode \IgnorePar\fi \EndP \HCode{</h2>}}
>>>

\<configure html-speech beamer\><<<
\Css{h1, h2, span.inst sup{font-size:100\%;}}

\ConfigureEnv{overlayarea}
  {\bgroup
    \ConfigureEnv{minipage}
       {\bgroup \IgnorePar\EndP
          \ConfigureEnv{minipage}
             {\bgroup \IgnorePar\EndP
              \HCode{<table class="minipage"><tr><td>}}
             {\EndP\HCode{</td></tr></table>}\egroup }
             {}{}%
       }
       {\EndP\egroup }
       {}{}
  }
  {\egroup} {}{}
>>>


\<configure html-speech beamer\><<<
\Configure{sec@slide}
    {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="hidden">}}
    {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}\par
     |<beamer cross links|>\par}
\Css{.hidden {visibility:hidden;}}

\Css{table.columns {width:100\%;}}
\Css{td.column {vertical-align:top;}}
>>>


\<configure html-speech beamer\><<<
\Configure{inst}
   {\HCode{<span class="inst">}}
   {\HCode{</span>}}

\Configure{titlepage}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="titlepage">}%
     \gHAdvance\Slide:cnt by 1     
     \Link{}{sl1}\EndLink
     |<beamer cross links|>%
   }
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Configure{title}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<h1 class="title">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</h1>}}
\Configure{author}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="author">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Configure{institute}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="institute">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Configure{date}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="date">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Configure{andtitle}{\HCode{<br />}}
\Css{div.titlepage {text-align:center;}}
\Css{div.institute { margin-bottom: 1em; margin-top: 1em;}}
>>>


\<configure html-speech beamer\><<<
\ConfigureEnv{columns}
  {\ifvmode \IgnorePar\fi \EndP 
   \HCode{<table class="columns"><tr>}}
  {\ifvmode \IgnorePar\fi \EndP \HCode{</tr></table>}}
  {}{}

\ConfigureEnv{column}
  {\bgroup
    \ConfigureEnv{minipage}
       {\bgroup \IgnorePar\EndP
          \ConfigureEnv{minipage}
             {\bgroup \IgnorePar\EndP
              \HCode{<table class="minipage"><tr><td>}}
             {\EndP\HCode{</td></tr></table>}\egroup }
             {}{}%
       }
       {\EndP\egroup }
       {}{}%   
   \HCode{<td class="column">}%
  }
  {\ifvmode \IgnorePar\fi \EndP  \HCode{</td>}\egroup} 
  {}{}
>>>


\<configure html-speech beamer\><<<
\ifx \beamer@version\:UnDef
   |<shared conf beamer 0.8 and 0.3|>
   \ifx \insertinstituteshort\:UnDef
      |<conf beamer 0.8|>
   \else 
      |<conf beamer 0.3|>
   \fi
\else
   |<conf beamer 3.01|>
\fi
>>>

\<shared conf beamer 0.8 and 0.3\><<<
\Configure{sectionshadedintoc}
   {\HCode{<div class="sectionshadedintoc">}}
   {\ifvmode \IgnorePar\fi \HCode{</div>}}
\Configure{sectionintoc}
   {\HCode{<div class="sectionintoc">}}
   {\ifvmode \IgnorePar\fi \HCode{</div>}}
\Configure{subsectionshadedintoc}
   {\HCode{<div class="subsectionshadedintoc">}}
   {\ifvmode \IgnorePar\fi \HCode{</div>}}
\Configure{subsectionintoc}
   {\HCode{<div class="subsectionintoc">}}
   {\ifvmode \IgnorePar\fi \HCode{</div>}}
\Css{div.sectionintoc, div.sectionshadedintoc{ margin-top:1em; }}
\Css{div.tableofcontents
   { padding-left:1em; padding-right:1em; padding-bottom:1em; }}
\Css{.tableofcontents div.subsectionintoc,
     .tableofcontents div.subsectionshadedintoc{ margin-left:1em; }}
>>>

\<configure html-speech beamer\><<<
\ConfigureToc{toc}
   {}
   {\Configure{TocLink}
       {\def\hyperlink########1########2{\Link{####2}{}########2\EndLink}####4}%
    \leavevmode}
   {}{\par}
\Configure{tableofcontents}
   {\IgnorePar\EndP \HCode{<div class="TableOfContents">}}{}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}\ShowPar}
   {}{}
>>>


\<beamer cross links\><<<
\slides:toc
>>>

\<beamer header\><<<
\gHAdvance\Slide:cnt by 1     
\ifx \sec:name\empty 
   \HCode{<div class="hidden">}\Link{}{sl\Slide:cnt}\EndLink
   \HCode{</div>}%
\else
   \HCode{<div class="header">}\Link{}{sl\Slide:cnt}\EndLink
      \sec:name
      \ifx \subsec:name\empty \else \HCode{<br />}\subsec:name\fi
   \HCode{</div>}%
\fi
>>>

\<configure html-speech beamer\><<<
\let\beamer:section=\@section
\def\@section[#1]#2{\beamer:section[#1]{#2}%
   \gHAdvance\:bookmarkN by 1
   \def\sec:name{#2}\let\subsec:name=\empty}
\append:defI\subsection{%
   \gHAdvance\:bookmarkN by 1
   \def\subsec:name{#1}}
\HAssign\:bookmarkN=0 
\let\sec:name=\empty
\let\subsec:name=\empty
\Css{div.header{ margin:0; text-align:right; font-size:70\%; }}
>>>
    




\<configure html-speech beamer\><<<
\gHAssign\Slide:cnt=0
\def\slides:toc{%
   |<beamer bookmarks|>%
   |<beamer toc frames|>%   
   \gdef\slides:toc{\ifvmode \IgnorePar\fi \EndP
       \HCode{<p class="links">}|<set beamer cross links|>%
       \HCode{</p>}\par}%
   \slides:toc
}
\Css{p.links{ margin:0; float:right; text-align:right; 
              font-size:70\%; }}
>>>


\<set beamer cross links\><<<
\bgroup
   \HAdvance\Slide:cnt by 1\relax
   \ifTag{)Qsl\Slide:cnt}{\Link{sl\Slide:cnt}{}next\EndLink\HCode{<br />}}{}%
\egroup
\ifnum \Slide:cnt>1
  \bgroup
     \HAdvance\Slide:cnt by -1
     \Link{sl\Slide:cnt}{}prev\EndLink\HCode{<br />}%
     \ifnum \:bookmarkN>0\relax
        \Link[ target="|<tex4ht-menu|>"
             ]{tc-\:bookmarkN}{}toc\EndLink\HCode{<br />}%
     \fi
     \Link{sl1}{}top\EndLink\HCode{<br />}%
     {\HAdvance\Slide:cnt by 1\relax \Slide:cnt}%
  \egroup
\else
  \Link[ target="|<tex4ht-menu|>"]{bookmark}{}toc\EndLink
\fi
>>>







\<beamer bookmarks\><<<
\:CheckOption{frames}\if:Option\else
  \bgroup
     \HPage{}{\beamer:bookmarks\tableofcontents}\EndHPage{}%
  \egroup
\fi
>>>


\<configure html-speech beamer\><<<
\:CheckOption{frames}\if:Option
   \:CheckOption{ver}\if:Option
      |<beamer ver frames|>
   \else
      \Log:Note{for vertically stacked frames,
          use the command line options `frames' and `ver'}
      |<beamer hor frames|>
   \fi
   \Css{body\#tex4ht-menu{ background-color:\#EEEEEE; }}
\fi
\def\beamer:bookmarks{%
    \Link{}{bookmark}\EndLink
    \HAssign\:bookmarkN=0 
    |<beamer bookmark config|>%
    \Configure{tableofcontents}
       {\IgnorePar\EndP \HCode{<div class="bookmarks">}}{}
       {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}\ShowPar}
       {}{}
     \let\std:tableofcontents\tableofcontents
     \def\tableofcontents{\std:tableofcontents[section,subsection]}%
  }
>>>


\<beamer bookmark config\><<<
\:CheckOption{frames}\if:Option
    \Configure{TocLink}
       {\HAdvance\:bookmarkN by 1\relax
        \Link{##2}{tc-\:bookmarkN}##4\ifvmode
           \IgnorePar\fi \EndLink}
\else
    \Configure{TocLink}
       {\HAdvance\:bookmarkN by 1\relax
        \Link[ target="|<tex4ht-main|>"]{##2}{tc-\:bookmarkN}##4\ifvmode
           \IgnorePar\fi \EndLink}
\fi
>>>



\<configure html-speech beamer\><<<
\ConfigureToc{section}
   {}{\HCode{<div class="sectionintoc">}} {\HCode{</div>}} {}{}
\ConfigureToc{subsection}
   {}
   {\HCode{<div class="subsectionintoc">}}
   {\HCode{</div>}} {}{}
\Css{div.bookmarks {white-space: nowrap;}}
\Css{div.bookmarks div.subsectionintoc a { text-decoration: none; 
        font-size:85\%;}}
>>>


\<configure html-speech beamer\><<<
\Configure{alert}
   {\HCode{<span class="alert">}}
   {\HCode{</span>}}
\Css{span.alert {color:\#FF0000;}}
\Hinclude{%
  \Configure{HColor}{alert}{rgb(100\%,0\%,0\%)}% 
  \Configure{HColor}{blockstructure}{rgb(20\%,20\%,70\%)}%
  \Configure{HColor}{darkgreen}{rgb(15\%,60\%,15\%)}%
  \Configure{HColor}{lightgray}{rgb(90\%,90\%,90\%)}%
  \Configure{HColor}{shaded}{rgb(60\%,60\%,60\%)}%
  \Configure{HColor}{structuremedium}{rgb(30\%,30\%,30\%)}%
  \Configure{HColor}{structureshaded}{rgb(75\%,75\%,75\%)}%
  \Configure{HColor}{structure}{rgb(0\%,0\%,0\%)}%
}{color}
>>>

The following is problematic when used on titles.

\begin{verbatim}
\Configure{structure}
   {\HCode{<span class="structure">}}
   {\HCode{</span>}}
\Css{span.structure {color:\#000000;}}
\end{verbatim}



%%%%%%%%%%%%%%%
\subsection{foils}
%%%%%%%%%%%%%%%

\<configure html-speech foils\><<<
|<32,4 foils|>
>>>

\<32,4 foils\><<<
\Configure{foilheads} {}{} 
   {\IgnorePar\EndP\HCode{<h1 class="foilheadsHead"\a:LRdir>}}
   {\HCode{</h1>}\IgnorePar}
\ConfigureEnv{Theorem}{\par\leavevmode}{\ShowPar}{}{}
\ConfigureEnv{Lemma}{\par\leavevmode}{\ShowPar}{}{}
\ConfigureEnv{Corollary}{\par\leavevmode}{\ShowPar}{}{}
\ConfigureEnv{Corollary*}{\par\leavevmode}{\ShowPar}{}{}
\ConfigureEnv{Proposition}{\par\leavevmode}{\ShowPar}{}{}
\ConfigureEnv{Definition}{\par\leavevmode}{\ShowPar}{}{}
\ConfigureEnv{Proof}{\par\leavevmode}{\ShowPar}{}{}
|<foils bib|>
\:CheckOption{1}  \if:Option 
    \CutAt{foilheads}
    |<foils toc 1|>%
\else
    \Log:Note{for pagination of slides, 
          use the command line option `1'}
\fi
>>>




%%%%%%%%%%%%%%%%%%%%%%%%
\section{epigraph.sty}
%%%%%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech epigraph\><<<
\Configure{epigraphhead}
   {\IgnorePar\EndP\HCode{<div class="epigraphhead">}}
   {\ifvmode \IgnorePar\fi \EndP\HCode{</div>}}

\Configure{epigraph}
   {\IgnorePar\EndP\HCode{<div class="epigraph">}} 
   {\IgnorePar\EndP\HCode{<div class="episource">}} 
   {\ifvmode \IgnorePar\fi \EndP\HCode{</div></div>}}


\ConfigureEnv{epigraphs}
   {\IgnorePar\EndP\HCode{<div class="epigraphs">}} 
   {\ifvmode \IgnorePar\fi \EndP\HCode{</div>}} {}{}

\Configure{qitem}
   {\IgnorePar\EndP\HCode{<div class="qitem">}} 
   {\IgnorePar\EndP\HCode{<div class="episource">}} 
   {\ifvmode \IgnorePar\fi \EndP\HCode{</div></div>}}

\Css{.epigraph, .epigraphhead, epigraphs {margin-left:60\%}}
\Css{.epigraphhead .epigraph {margin-left:0\%}}

\Css{.episource {text-align:right}}
\Configure{epirule} {\ifvmode \IgnorePar\fi \EndP\Tg<hr />\par}

\Css{.epigraphs table { width:40\% ;}}
\Css{.epigraphs table div .episource { text-align:right;  width:100\%;}}
>>>


%%%%%%%%%%%%%%%%%%
\subsection{slides}
%%%%%%%%%%%%%%%%%%

\<configure html-speech slides\><<<
\:CheckOption{1} \if:Option
   |<multi slides|>
\else
   \Log:Note{for pagination of slides, 
          use the command line option `1'}
   \ConfigureEnv{slide}
     {\ifnum \c@slide=0
        \IgnorePar\EndP\HCode{<hr />}\fi}
     {\rightline{\a:slidename}%
      \IgnorePar\EndP\par\HCode{<hr />}}
     {}{}
\fi
>>>

\<multi slides\><<<
\ConfigureEnv{slide}
   {\ifnum \c@slide=0 \EndP\ShowPar\else\IgnorePar\fi}
   {}
   {}{}
\CutAt{slide}
\Configure{crosslinks}{[}{] }{next}{prev}{}{}{}{up}
\Configure{crosslinks+}
   {}{}
   {\IgnorePar\EndP \HCode{<div
         class="crosslinks"><p class="noindent">}%
    {\advance\c@slide by -1 \the\c@slide}: }
   {\HCode{</p></div>}\par}
\Css{.crosslinks{text-align:right;font-size:85\%;}}
>>>

\<configure html-speech slides\><<<
|<quote config|>
|<quotations|>
|<description 4|>
\ConfigureEnv{verse}
   {\Tg<div class="verse">}
   {\Tg</div>}
   {}{}
\ConfigureEnv{note}
   {\Tg<div class="note">}
   {\Tg</div>}
   {}{}
\ConfigureEnv{titlepage}
   {\Tg<div class="titlepage">}
   {\Tg</div>}
   {}{}
>>>


\<configure html-speech slides\><<<
\Configure{maketitle}
   {\ifvmode \IgnorePar\fi \EndP |<title for TITLE|>%
    \vtop\bgroup \IgnorePar \EndP \HCode{<div  class="maketitle">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}\egroup}
   {\NoFonts\IgnorePar\HCode{<h2 class="titleHead"\a:LRdir>}\IgnorePar}
   {\HCode{</h2>}\IgnoreIndent\EndNoFonts}
\Css{h2.titleHead{text-align:center;}}
\Css{div.maketitle{ margin-bottom: 2em; text-align:center; }}
\Configure{author date}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="author" >}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="date">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Css{div.author, div.date {text-align:center;}}
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Prosper}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%




\<configure html-speech prosper\><<<
|<prosper maketitle|>
|<prosper lists|>
>>>



\<configure html-speech prosper\><<<
\Configure{slidetitle}
   {\NoFonts \ifvmode \IgnorePar\fi \EndP
    \HCode{<h2 class="slidetitle">} }
   {\ifvmode \IgnorePar\fi \EndP \HCode{</h2>}\EndNoFonts}
\Css{h2.slidetitle {text-align:center;}}
>>>

\<configure html-speech prosper\><<<
\Configure{Subtitle}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{<div class="Subtitle">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}} 
\Configure{email}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{<div class="email">}\Link[mailto:\@email]{}{}}
   {\EndLink \ifvmode \IgnorePar\fi \EndP \HCode{</div>}} 
\Configure{institution}
   {\ifvmode \IgnorePar\fi \EndP 
    \HCode{<div class="institution">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}} 
\Css{div.email, div.institution {text-align:center;}}
>>>


\<configure html-speech prosper\><<<
\:CheckOption{1} \if:Option
   |<paginated prosper|>
\else
   \Log:Note{for pagination of slides,
          use the command line option `1'}
   |<non paginated prosper|>
\fi
\:CheckOption{nolayers} \if:Option
    \def\itemstep{\itemize}
    \def\enditemstep{\enditemize}
    \let\overlays=\:gobble
\else
   \Log:Note{to remove overlays of slides,
       use the command line option `nolayers'}
\fi
>>>


\<non paginated prosper\><<<
\ConfigureEnv{slide}
  {\ifvmode \IgnorePar\fi \EndP\HCode{<hr />}\par}  
  {\rightline{\bgroup
     \ifx \slide\SlideNormal \advance\c@slide by -1 \fi
     \ifnum \c@slide>0
         \the\c@slide 
         \ifx \slide\SlideOverlay .\the\c@overlaysCount\fi
     \fi
   \egroup
  }}{}{}
>>>


\<paginated prosper\><<<
\HAssign\Slide:cnt=0
\ConfigureEnv{slide}
  {\ifnum \Slide:cnt>0
      \ifnum \Slide:cnt>1
         \ifvmode\IgnorePar\fi  
      \fi  |<start prosper page|>%
  }
  {\ifnum \Slide:cnt=1
   \else |<end prosper page|>\fi
  }
  {}{}
>>>



\<start prosper page\><<<
\ifnum \Slide:cnt=1
    \IgnorePar   \par\EndP \HCode{<hr />}\par
\fi
\noindent
\HPage{\the\c@slide
       \ifx \slide\SlideOverlay .\the\c@overlaysCount\fi
   }\fi
\gHAdvance\Slide:cnt by 1
\Tag{f-\Slide:cnt}{\FileName}%
>>>


\<end prosper page\><<<
\rightline{|<foot paginated prosper|>}%
\EndHPage{}~~
>>>   


\<foot paginated prosper\><<<
\bgroup
   \ifx \slide\SlideNormal \advance\c@slide by -1 \fi
   \the\c@slide
\egroup
\ifx \slide\SlideOverlay .\the\c@overlaysCount\fi,
\bgroup
   \HAdvance\Slide:cnt by 1
   \ifTag{f-\Slide:cnt}{\Link
             [\LikeRef{f-\Slide:cnt}]{}{}next\EndLink, }{}%
\egroup
\bgroup
\ifnum \Slide:cnt>1 
    \HAdvance\Slide:cnt by -1
    \Link[\LikeRef{f-\Slide:cnt}]{}{}prev\EndLink,
\fi
\egroup
\Link[\LikeRef{f-1}]{}{}up\EndLink%
\ifTag{prosperTOC}{%
   \edef\:temp{\FileName}\edef\:tempa{\LikeRef{prosperTOC}}%
   \ifx \:temp\:tempa \else, 
         \Link[\LikeRef{prosperTOC}]{}{}toc\EndLink}{}\fi
>>>

\<paginated prosper\><<<    
\Configure{tableofcontents}
   {\ifx \prosperTOCtag\:UnDef
       \global\let\prosperTOCtag\def
       \Tag{prosperTOC}{\FileName}%
    \fi
    \IgnorePar\EndP
    \HCode{<div class="tableofcontents">}\IgnorePar}
   {}
   {\IgnorePar\EndP\HCode{</div>}\ShowPar}
   {\HCode{<br />}}   {}
>>>

FROM MANUAL: 
When translated into PDF files, \texttt{prosper} slides benefit from
additional possibilities such as transition effects between slides and
incremental display of a slide with several animation effects. The
currently supported transitions are:
\begin{itemize}
\item {Split}: two lines sweep across the screen revealing the
  new slide;
\item {Blinds}: multiple lines, evenly distributed across the
  screen, appear and synchronously sweep in the same direction to
  reveal the new slide;
\item {Box}: a box sweeps from the center, revealing the new slide;
\item {Wipe}: a single line sweeps across the screen from one
  edge to the other, revealing the new slide;
\item {Dissolve}: the old page image dissolves to reveal the new slide;
\item {Glitter}: similar to \texttt{Dissolve}, except the
  effect sweeps across the image in a wide band moving from one side
  of the screen to the other;
\item {Replace}: the effect is simply to replace the old page
  with the new page.
\end{itemize}



%%%%%%%%%%%%%%%%%%
\subsection{seminar}
%%%%%%%%%%%%%%%%%%






\<configure html-speech seminar\><<<
\ConfigureEnv{slide}
  {\ifvmode \IgnorePar\fi \EndP\HCode{<hr />}\par}  
  {\rightline{\the\c@slide}}{}{}
>>>
%%%%%%%%%%%%%%%%%%%
\subsection{slidesec}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech slidesec\><<<
   \ConfigureToc{slidesection}
      {\HCode{<span class="tocslidesection">}}{\ }{}{\HCode
           {</span><br\xml:empty>}}
>>>

%%%%%%%%%%%%%%%%%%%
\section{Lit Prog and Verbatim}
%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%
\subsection{ProTex}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech ProTex\><<<
\def\NAME:{ id=}
\:CheckProtexOption{[[]]}\if:Option
   |<frame protex code|>
\fi
>>>

\<frame protex code\><<<
\Configure{FrameCode}
   {\ifvmode \IgnorePar\fi  \EndP
    |<lynx separator|>%
        \HCode{<div class="ShowCode">\ifx \:test\:minus  
                 \else<div class="head">\fi}\par\IgnorePar}
   {\ifvmode \IgnorePar\fi \EndP
        \HCode{</div></div>}}
\Configure{ShowCode}
   {\HCode{\ifx \:test\:minus  \else </div>\fi
       \html:src<div class="body"><span class="ShowCode"
        style="font-family:monospace;white-space:nowrap;"
     >\html:invisible}%
     \nobreak
   }
   {\special{t4ht=\html:src</span>%
           \ifx \:test\:minus \else
              </div><div class="tail">\html:BackTitle\fi}}
   {\HCode{<br />\html:invisible}}
   {\HCode{<i>}}
   {\HCode{</i>}}
   {|<nbsp|>}
\Css{div.ShowCode{background-color:\#EEEEEE; border: 1px white solid;}} 
\Css{div.ShowCode div.head{background-color:\#E0E0E0;}} 
\Css{div.ShowCode div.tail{background-color:\#E0E0E0;}} 
>>>

\<nbsp\><<<
\leavevmode\special{t4ht@+\string&{35}x00A0{59}}x%
>>>

The `59' stands for semicolon. Explicit character might be problematic
for languages (e.g., French) where the cahacter is active and may be imported from
aux or another file.  


\<lynx separator\><<<
\ifx \par:end\empty \HCode{<p></p>}\fi
>>>


%%%%%%%%%%%%%%%%%%%
\subsection{moreverb}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech moreverb\><<<
|<moreverb.sty config 4.0t|>
>>>

\<moreverb.sty config 4.0t\><<<
\ConfigureEnv{verbatimtab}
   {\env:verb{verbatim}}
   {\endenv:verb}{}{}
\Configure{verbatimtab}
   {\HAdvance\Verb:N by 1 \ifnum \Verb:N>1 \:nbsp \HCode{<br />}\fi}
   {\a:sp}
\ConfigureEnv{boxedverbatim}
   {\env:verb{boxedverbatim}}{\endenv:verb}{}{}
\ConfigureEnv{boxedverbatim*}
   {\env:verb{boxedverbatim}}{\endenv:verb}{}{}
>>>

\<moreverb.sty config 4.0t\><<<
\ConfigureEnv{boxedverbatim}
   {\env:verB{boxedverbatim}}{\endenv:verb}{}{}
\ConfigureEnv{boxedverbatim*}
   {\env:verB{boxedverbatim}}{\endenv:verb}{}{}
\def\env:verB#1{\IgnorePar\HCode{<table  \Hnewline
   class="#1"><tr class="#1"><td \Hnewline
   class="#1"><pre class="#1">}\EndNoFonts}
\Css{ pre.boxedverbatim{border:solid 1px; padding-right:1em;} }
\Css{table.boxedverbatim {text-align:center;}}
>>>


\<moreverb.sty config 4.0t\><<<
\Configure{listinginput}
   {\HCode{<div class="listinginput">}}
   {\IgnorePar\HCode{</div>}}
\Css{.listinginput p{ margin-bottom:0em; margin-top:0em; }}
>>>


\<moreverb.sty config 4.0t\><<<
\Configure{verbatimtabinput}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<div class="verbatimtabinput"\a:LRdir>}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
>>>


%%%%%%%%%%%%%%%%%%%
\subsection{fancyvrb}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech fancyvrb\><<<
|<fancyvrb.sty config 4.0t|>
>>>

\<fancyvrb.sty config 4.0t\><<<
\HAssign\fancyvrbNo|=0
\Configure{fancyvrb}
   {\IgnorePar \EndP \gHAdvance\fancyvrbNo by 1
    \gHAssign\fancyvrb:cnt0
    \HCode{<div class="fancyvrb" id="fancyvrb\fancyvrbNo">}}
   {\EndP\HCode{</div>}}
   {\gHAdvance\fancyvrb:cnt by 1
    \ifnum \fancyvrb:cnt>1 
    \HCode{<br class="fancyvrb"\xml:empty>}\fi} {}
   {\ \ }{}
\Css{P.fancyvrb {white-space: nowrap; margin:0em;}}
>>>



The following is harmful at the start of section 1.1 in
listings.dtx.

\begin{verbatim}
\ConfigureEnv{verbatim}{\HAssign\Verb:N=0\relax}{\empty}{}{}
\ConfigureEnv{verbatim*}{\HAssign\Verb:N=0\relax}{\empty}{}{}
\end{verbatim}





\<fancyvrb.sty config 4.0t\><<<
\Configure{fancyvrbcolor}
  {\Css{div\#fancyvrb\fancyvrbNo { color: \HColor; }}}
  {\Css{div\#fancyvrb\fancyvrbNo { background-color: \HColor;}}}
  {\Css{div\#fancyvrb\fancyvrbNo { border-color: \HColor;}}}
>>>

\<fancyvrb.sty config 4.0t\><<<
\Configure{fancyvrbframe}
   {\Css{div\#fancyvrb\fancyvrbNo { border-top: solid \HSize; }}}
   {\Css{div\#fancyvrb\fancyvrbNo { border-left: solid \HSize; }}}
   {\Css{div\#fancyvrb\fancyvrbNo { border-bottom: solid \HSize; }}}
   {\Css{div\#fancyvrb\fancyvrbNo { border-right: solid \HSize; }}}
   {\Css{div\#fancyvrb\fancyvrbNo {border-width:\HSize;}}}
   {\Css{div\#fancyvrb\fancyvrbNo {padding:\HSize;}}}
>>>

\<fancyvrb.sty config 4.0t\><<<
\Configure{BVerbatimInput}
   {\ifvmode \IgnorePar \fi \EndP 
    \gHAssign\HRow=0
    \HCode{<div class="BVerbatimInput">}}
   {\ifvmode \IgnorePar \fi \EndP \HCode{</div>}}
   {\gHAdvance\HRow by 1 \ifnum \HRow>1 \HCode{<br />}\fi}{}
>>>


%%%%%%%%%%%%%%%%%%%%%
\subsection{Listings}
%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech listings\><<<
\Configure{lstinline}
   {\HCode{<span class="lstinline">}}
   {\HCode{</span}}
>>>

\<configure html-speech listings\><<<
\Log:Note{to ensure proper alignments use
   fixed size fonts (see listings.dtx)}
\Configure{listings}
   {\ifvmode \IgnorePar\fi \EndP
    {\everypar{}\leavevmode}\HCode{<!--l. \the\inputlineno-->}%
     \HCode{<pre class="listings">}%
   }
   {{\everypar{}\leavevmode}\HCode{</pre>}}
   {}{}
>>>

\<configure html-speech listings\><<<
\ConfigureEnv{lstlisting}
   {\ifvmode \IgnorePar\fi \EndP  
    \HCode{<!--l. \the\inputlineno-->}%
    \HCode{<div class="lstlisting">}%
    \bgroup \special{t4ht@(}%
       \Configure{listings}
         {{\everypar{}\leavevmode}}
         {{\everypar{}\leavevmode}}
         {|<nbsp|>\HCode{<br />}}{}%
   }
   {\special{t4ht@)}\egroup
    \ifvmode \IgnorePar\fi \EndP \HCode{</div>}\par}
   {} {}
>>>

\<configure html-speech listings\><<<
\Configure{lstinputlisting}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<!--l. \the\inputlineno-->}%
    \HCode{<div class="lstinputlisting">}%
    \bgroup \tt \special{t4ht@(}%
       \Configure{listings}
         {{\everypar{}\leavevmode}}
         {{\everypar{}\leavevmode}}
         {|<nbsp|>\HCode{<br />}} 
         {}%
   }
   {\special{t4ht@)}\egroup
    \ifvmode \IgnorePar\fi \EndP  \HCode{</div>}\par}
\Css{div.lstinputlisting{
   font-family: monospace;
   white-space: nowrap;
}}
>>>



%%%%%%%%%%%%%%%%%%%%%
\subsection{Verbatim}
%%%%%%%%%%%%%%%%%%%%%





\<configure html-speech verbatim\><<<
\Configure{verbatiminput}
  {\HAssign\Verb:N=0 \ifvmode \IgnorePar\fi \EndP
   \HCode{<div class="verbatiminput"\a:LRdir>}}
  {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Css{div.verbatiminput
       {font-family: monospace; white-space: nowrap; }}
>>>



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{mdwlist}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech sverb\><<<
\HAssign\demoN=0
\Configure{demo}
   {\HAdvance\demoN by 1
    \ifvmode \IgnorePar \fi \EndP
    \ifnum \demoN=1       
       \HCode{<table class="demo"><tr>}%
    \fi
    \HCode{<td>}%
   }
   {\ifvmode \IgnorePar \fi \EndP
    \HCode{</td>}
    \ifnum \demoN=2
        \HAssign\demoN=0
        \HCode{</tr></table>}%
    \fi    
   }
>>>


%%%%%%%%%%%%%%%%%%%%%
\subsection{verbatimlisting}
%%%%%%%%%%%%%%%%%%%%%


\<configure html-speech verbatimlisting\><<<
\Configure{verbatimlisting}
  {\ifvmode \EndP\fi \EndP\HCode{<div class="verbatimlisting"\a:LRdir>}} 
  {\HCode{</div>}}
  {\ifnum \c@lineno > 1 \HCode{<br />}\fi
   \ifnum \c@lineno<10 ~\fi
   \ifnum \c@lineno<100 ~\fi
   \ifnum \c@lineno<1000 ~\fi
  }
  {}
>>>



%%%%%%%%%%%%%%%%%%%%%
\subsection{doc}
%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech doc\><<<
\ConfigureEnv{macrocode}
  {\ifvmode \IgnorePar\fi\EndP\HCode{<pre class="macrocode">}}
  {\ifvmode \IgnorePar \HCode{</pre>}\par\else \HCode{</pre>}\fi}
  {}{}
>>>


%%%%%%%%%%%%%%%%%%%
\section{Boxes and Multiple columns}
%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%
\subsection{fancybox}
%%%%%%%%%%%%%%%%%%%











\<configure html-speech fancybox\><<<
  \Configure{ovalbox}
     {\ifvmode \IgnorePar\EndP 
               \HCode{<div class="ovalbox">}%
               \def\end:bx{\HCode{</div>}\par}%
      \else
               \HCode{<span class="ovalbox">}%
               \def\end:bx{\HCode{</span>}}%
      \fi}
     {\end:bx}
  \Css{.ovalbox {
          padding-left:3pt;
          padding-right:3pt;
          border:solid thin;
      }}
>>>

\<configure html-speech fancybox\><<<
  \Configure{Ovalbox}
     {\ifvmode \IgnorePar\EndP 
               \HCode{<div class="Ovalbox-thick">}%
               \def\end:bx{\HCode{</div>}\par}%
      \else
               \HCode{<span class="Ovalbox-thick">}%
               \def\end:bx{\HCode{</span>}}%
      \fi}
     {\end:bx}
  \Css{.Ovalbox-thick {
          padding-left:3pt;
          padding-right:3pt;
          border:solid thick;
      }}
>>>


IE doesn't distinguish between upper and lower case characters in css



\<configure html-speech fancybox\><<<
  \Configure{shadowbox}
     {\ifvmode \IgnorePar\EndP 
               \HCode{<div class="shadowbox">}%
               \def\end:bx{\HCode{</div>}\par}%
      \else
               \HCode{<span class="shadowbox">}%
               \def\end:bx{\HCode{</span>}}%
      \fi}
     {\end:bx}
  \Css{.shadowbox {
          padding-left:3pt;
          padding-right:3pt;
          border:solid thin; 
          border-right:solid thick; 
          border-bottom:solid thick;
      }}
>>>




\<configure html-speech fancybox\><<<
  \Configure{doublebox}
     {\ifvmode \IgnorePar\EndP 
               \HCode{<div class="doublebox">}%
               \def\end:bx{\HCode{</div>}\par}%
      \else
               \HCode{<span class="doublebox">}%
               \def\end:bx{\HCode{</span>}}%
      \fi}
     {\end:bx}
  \Css{.doublebox {
          padding-left:3pt;
          padding-right:3pt;
          border-style:double;
          border:solid thick;
      }}
>>>





%%%%%%%%%%%%%%%%%%%
\subsection{boxedminipage}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech boxedminipage\><<<
\ConfigureEnv{boxedminipage}
   {\ifvmode \IgnorePar \EndP 
       \def\after:bmp{\ifvmode \IgnorePar\fi \EndP \HCode{</div>}\par\ShowPar}%
       \HCode{<div class="boxedminipage">}%
       \expandafter\everymath\expandafter{\expandafter
                                 \everymath\expandafter{\the\everymath}}%
    \else \def\after:bmp{\HCode{</span>}}% 
       \HCode{<span class="boxedminipage">}%
    \fi 
    \bgroup \fboxrule=\z@}
   {\egroup \after:bmp}
   {}{}
>>>

%%%%%%%%%%%%%%%%%%%
\subsection{Multicol}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech multicol\><<<
\HAssign\MultiCols=0
\ConfigureEnv{multicols}
   {\par\IgnorePar\EndP
    \gHAdvance\MultiCols by 1\relax
    \HCode{<table class="multicols"
                     id="multicols-\MultiCols"><tr><td class="multicol-1">}%
    \let\sv:HCol=\HCol
    \bgroup  \gHAssign\HCol=1\relax
   }
   {\egroup
    \global\let\HCol=\sv:HCol
    \ifvmode\IgnorePar\fi\EndP
    \HCode{</td></tr></table>}\par
   }
   {}{}
\Configure{columnbreak}
   {\gHAdvance\HCol by 1\relax
    \par \IgnorePar \EndP
    \HCode{</td><td class="multicol-\HCol">}}
\Css{table.multicols {
   width:100\%; margin-left:1em; margin-top:1em; margin-bottom:1em;
}}
>>>


%%%%%%%%%%%%%%%%
\section{array.sty}
%%%%%%%%%%%%%%%%

\<configure html-speech array\><<<
|<html latex array/tabular Config 4.0t|>
>>>


\<configure html-speech-math array\><<<
|<math html latex array/tabular|>
>>>



%%%%%%%%%%%%%%%%%%%
\section{algorithmic}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech algorithmic\><<<
\ConfigureEnv{algorithmic}
   {\ifvmode\IgnorePar\fi \EndP
    \HCode{<div class="algorithmic">}%
    \bgroup 
      \Configure{HtmlPar}{}{}{}{}}
   {\egroup \ifvmode \IgnorePar\fi \HCode{</div>}}
   {}{}
\Configure{ALCitem}
   {\HCode{\ifnum \c@ALC@line>1 <br />\fi <span class="ALCitem">}}
   {\HCode{</span><span style="width:\the\ALC@tlm ;">&nbsp;</span>}}
\Css{.ALCitem {width:2em; text-align:right;}}
>>>


\<configure html-speech algorithmic\><<<
\ConfigureEnv{ALC@for}
   {\HCode{<span class="for-body">}} 
   {\HCode{</span>}}
   {}{}
\ConfigureEnv{ALC@whl}
   {\HCode{<span class="while-body">}} 
   {\HCode{</span>}}
   {}{}
\ConfigureEnv{ALC@loop}
   {\HCode{<span class="loop-body">}} 
   {\HCode{</span>}}
   {}{}
\ConfigureEnv{ALC@rpt}
   {\HCode{<span class="repeat-body">}} 
   {\HCode{</span>}}
   {}{}
\Configure{ALCif}
   {\HCode{<span class="if-body">}} 
   {\HCode{</span>}}
   {\HCode{<span class="else-body">}} 
   {\HCode{</span>}}
\Configure{algorithmiccomment}
   {\HCode{<span class="ALC-comment">}} 
   {\HCode{</span>}}
   {}{}  
>>>




%%%%%%%%%%%%%%%%%%%
\section{Bibliography}
%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%
\subsection{jurabib}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech jurabib\><<<
\HAssign\jbancorDepth=0
\Configure{jblink}
   {\HAdvance\jbancorDepth by 1 \Link}
   {\EndLink \HAdvance\jbancorDepth by -1 }
\Configure{jbanchor}
  {\bgroup
     \ifnum \jbancorDepth=0
       \Configure{Link}{a}{href=}{id=}{}%
     \else
       \Configure{Link}{span}{}{id=}{}%
     \fi
   \Link}
  {\EndLink  \egroup}
>>>

The code \verb+\Configure{jbanchor}{\Link}{\EndLink}+ doen't work
because anchors can in jurabib reside within links.




\begin{verbatim}
Definition of \@citex
---------------------
    \hyper@jblinkstart{\@citeb} 
        \jb@firstcitefull 
    \hyper@jblinkend

Definiton of \jb@firstcitefull
------------------------------
 \hyper@jbanchorstart{look@\@citeb:\jb@reset@look@label@for}\hyper@jbanchorend

 \jbincollcrossref

Definition of \jbincollcrossref
-------------------------------
   \hyper@jblinkstart{#1}% 

   \hyper@jblinkend
\end{verbatim}



%%%%%%%%%%%%%%%%%%%
\subsection{Harvard}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech harvard\><<<
\Configure{harvardyear}
   {\HCode{<span class="bib-year">}}
   {\HCode{</span>}}
>>>


%%%%%%%%%%%%%%%%%%
\section{Text Decoration}
%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%
\subsection{color}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech color\><<<
\Configure{HColor}{red}{\#FF0000}
\Configure{HColor}{rgb 1 0 0}{\#FF0000}
\Configure{HColor}{blue}{\#0000FF}
\Configure{HColor}{rgb 0 0 1}{\#0000FF}
\Configure{HColor}{green}{\#00FF00}
\Configure{HColor}{rgb 0 1 0}{\#00FF00}
\Configure{HColor}{white}{\#FFFFFF}
\Configure{HColor}{gray 1}{\#FFFFFF}
\Configure{HColor}{rgb 1 1 1}{\#FFFFFF}
\Configure{HColor}{black}{\#000000}
\Configure{HColor}{gray 0}{\#000000}
\Configure{HColor}{rgb 0 0 0}{\#000000}
\Configure{HColor}{cyan}{\#00FFFF}
\Configure{HColor}{cmyk 1 0 0 0}{\#00FFFF}
\Configure{HColor}{magenta}{\#FF00FF}
\Configure{HColor}{cmyk 0 1 0 0}{\#FF00FF}
\Configure{HColor}{yellow}{\#FFFF00}
\Configure{HColor}{cmyk 0 0 1 0}{\#FFFF00}
\Configure{color}{\:gobble}
|<color.sty config 4.0t|>
>>>





% \Configure{pagecolor}
%   {\Configure{color}
%       {\Configure{SetHColor}{\Css{body {background-color:\HColor}}}}}



\<configure html-speech color\><<<
\Configure{HColor:gray}{%
   \int:of\:tempa{255}{#1}%
   \Configure{HColor}{}{rgb(\:tempa,\:tempa,\:tempa)}%
}
\Configure{HColor:rgb}{%
   \int:of\:tempa{255}{#1}%
   \int:of\:tempb{255}{#2}%
   \int:of\:tempc{255}{#3}%
   \Configure{HColor}{}{rgb(\:tempa,\:tempb,\:tempc)}%
}
\Configure{HColor:cmyk}{%
   \int:of\:Cyan{255}{#1}%
   \int:of\:Magenta{255}{#2}%
   \int:of\:Yellow{255}{#3}%
   \int:of\:Black{255}{#4}%
   \:cmyk\:tempa\:Cyan
   \:cmyk\:tempb\:Magenta
   \:cmyk\:tempc\:Yellow
   \Configure{HColor}{}{rgb(\:tempa,\:tempb,\:tempc)}%
}
|<HColor util|>
>>>


\<HColor util\><<<
\def\int:of#1#2#3{%
   \tmp:dim=#3pt \tmp:dim=#2\tmp:dim
   \edef\:temp{\tmp:cnt\the\tmp:dim//}%
   \def#1##1//{}\afterassignment#1\:temp
   \edef#1{\the\tmp:cnt}%
}
>>>


\begin{verbatim}
cmyk -> gray
(1 - 0.299c - 0.587m - 0.114y)(1 - k) 

cmyk -> rgb
Red   = 1-minimum(1,Cyan   *(1-Black)+Black)
Green = 1-minimum(1,Magenta*(1-Black)+Black)
Blue  = 1-minimum(1,Yellow *(1-Black)+Black)
\end{verbatim}



\<HColor util\><<<
\def\:cmyk#1#2{%
   \tmp:cnt=255 \advance\tmp:cnt by -\:Black
   \multiply\tmp:cnt by#2 \advance\tmp:cnt by \:Black 
   \advance\tmp:cnt by -255 \tmp:cnt=-\tmp:cnt
   \ifnum \tmp:cnt<0 \tmp:cnt=0 \fi
   \edef#1{\the\tmp:cnt}%
}
>>>




\<color.sty config 4.0t\><<<
\HAssign\textcolorN=0
\Configure{textcolor}
   {\gHAdvance\textcolorN by 1
    \Configure{color}%
      {\Configure{SetHColor}
           {\Css{span\#textcolor\textcolorN{color:\HColor}}}}%
    \HCode{<span id="textcolor\textcolorN">}}%
   {\HCode{</span>}}
>>>

\<color.sty config 4.0t\><<<
\Configure{colorbox}
    {\bgroup
     \gHAdvance\textcolorN by 1
     \ifvmode \let\v:colorbox\def \IgnorePar \EndP
     \else \let\v:colorbox=\relax \fi
     |<colorbox background|>%
     \HCode{<\ifx \v:colorbox\def div\else span\fi \Hnewline
                  class="colorbox" id="colorbox\textcolorN">}}%
    {\ifx \v:colorbox\def \EndP\HCode{</div>}\par
     \else \HCode{</span>}\fi 
     \egroup
    }
>>>


\<colorbox background\><<<
\let\A:color=\a:color
\Configure{color}%
  {\let\a:color=\A:color
   \Configure{SetHColor}
       {\Css{\ifx \v:colorbox\def div\else span\fi
             \#colorbox\textcolorN{background-color:\HColor;}}}}%
>>>


\<\><<<
\Configure{fcolorbox}
   {\gHAdvance\textcolorN by 1
    \let\A:color=\a:color
    \Configure{color}%
        {\Configure{SetHColor}{\Css{\#colorbox\textcolorN{border: 
                                  solid 1px \HColor;}}}}%
     \Configure{fbox}{\leavevmode
              \gHAdvance\textcolorN by -1  \let\a:color=\A:color}{}}
    {}
>>>


\<color.sty config 4.0t\><<<
\Configure{fcolorbox}
   {\bgroup\gHAdvance\textcolorN by 1
     \ifvmode \let\v:colorbox\def \IgnorePar \EndP 
     \else \let\v:colorbox=\relax \fi
     \HCode{<\ifx \v:colorbox\def div\else span\fi \Hnewline
                  class="colorbox" id="colorbox\textcolorN">}%    
    |<fcolorbox border|>%
    \Configure{fbox}{\leavevmode }{}%
}
{\ifx \v:colorbox\def \EndP\HCode{</div>}\par
 \else \HCode{</span>}\fi  \egroup}
>>>

\<fcolorbox border\><<<
\let\A:color=\a:color
\Configure{color}%
    {|<fcolor background|>%
     \Configure{SetHColor}{%
         \Css{\#colorbox\textcolorN{border: solid 1px  \HColor;}}}%
    }%
>>>

\<fcolor background\><<<
\Configure{color}%
    {\let\a:color=\A:color
     \Configure{SetHColor}{%           
         \Css{\#colorbox\textcolorN{background-color: \HColor;}}%
    }}%
>>>

%%%%%%%%%%%%%%%%%%%%%%%
\subsection{colortbl.sty}
%%%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech colortbl\><<<
\Configure{@classz}
   {\let\begin:current@color|=\relax
    \let\end:current@color|=\relax }
   {%
     \ifx \CT@column@color\relax \else 
     \ifx \CT@column@color\empty \else{%
         \def\CT@color{\@ifnextchar[\color:ii\color:i}%
         \CT@column@color|<par del|>%
         \edef\:temp{\noexpand\add:color
            {background-color}{\:temp}{\ar:cnt}}\:temp
     }\fi \fi
   }
   {\begin:current@color}
   {\end:current@color}
\Configure{rowcolor}{\row:clr}
\def\row:clr#1{{%
%  \HAdvance\HRow by 1
  \add:color{background-color}{#1}{\HRow-}}}
\Configure{text-colortbl}
  {\add:color{color}{\current@color}{\HRow-\HCol}}
\Configure{cell-colortbl}
   {\add:color{background-color}{\current@color}{\HRow-\HCol}}
\def\add:color#1#2#3{%
  \Configure{SetHColor}{\Css{ \#TBL-\TableNo-#3{ #1:\HColor }}}{#2}}
>>>


%%%%%%%%%%%%%
\subsection{Soul}
%%%%%%%%%%%%%

\<configure html-speech soul\><<<
\Configure{textcaps}
   {\HCode{<span class="textcaps">}}
   {\HCode{</span>}}
\Configure{texthl}
   {\HCode{<span class="texthl">}\bgroup 
     \ifx\sethlcolor\:gobble\else |<soul color|>\fi}
   {\egroup \HCode{</span>}}
\Configure{textso}
   {\HCode{<span class="textso">}}
   {\HCode{</span>}}
\Configure{textst}
   {\HCode{<span class="textst">}\bgroup 
     \ifx\setstcolor\:gobble\else |<soul color|>\fi}
   {\egroup \HCode{</span>}}
\Configure{textul}
   {\HCode{<span class="textul">}\bgroup 
     \ifx\setulcolor\:gobble\else |<soul color|>\fi}
   {\egroup \HCode{</span>}}
\Css{span.textso{letter-spacing: 0.3em; word-spacing: 0.3em}}
\Css{span.textul{text-decoration:underline}}
\Css{span.textst{text-decoration:line-through}}
\Css{span.textcaps{font-variant:small-caps}}
>>>

\<soul color\><<<
\Configure{textcolor} 
   {\gHAdvance\textcolorN by 1 
    \Configure{color}% 
      {\Configure{SetHColor} 
           {\Css{span\#textcolor\textcolorN{background-color:\HColor}}}}% 
    \HCode{<span id="textcolor\textcolorN">}}% 
   {\HCode{</span>}}%
>>>


%%%%%%%%%%%%%%%%
\section{verse}
%%%%%%%%%%%%%%%%%

\<configure html-speech verse\><<<
\Configure{poemtitle}
   {\par\IgnorePar\EndP     
       \HCode{<div class="poemtitle"><span class="poemtitlemark">}}
   {\HCode{</span>}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}\par}
\Configure{likepoemtitle}
   {\par\IgnorePar\EndP  \HCode{<div class="likepoemtitle">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}\par}
\Css{.poemtitle, likepoemtitle {margin-left:2em; margin-bottom:0.5em;}}
>>>



\<configure html-speech verse\><<<
\ConfigureEnv{verse}
   {\ifvmode \IgnorePar\fi\EndP
    \HCode{<div class="verse">}%
    \bgroup
       \Configure{hspace}
          {\HCode{<span style="margin-right:\the\tmp:dim">}\:nbsp}
          {\HCode{</span>}} {}
       \let\end:verseln\empty
   }
   {\egroup \ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
   {}{}

\ConfigureList{verse}
   {} {\ifvmode \IgnorePar\fi \EndP \end:verseln}
   {\parindent=\z@}  {}

\Configure{verseline}
   {\ifvmode \IgnorePar\fi \EndP \end:verseln  
    \HCode{<div class="verseline">}\def\end:verseln{\HCode{</div>}}}
   {\ifvmode \IgnorePar\fi \EndP \end:verseln
    \HCode{<div class="skip-verseline">}%
    \def\end:verseln{\HCode{</div>}}}  

\Configure{flagverse}
   {\HCode{<span class="flagverse">}\bgroup \setlength{\vleftskip}{0em}}
   {\egroup \HCode{</span>}\ignorespaces}

\Css{.skip-verseline {margin-top: 1em;}}
\Css{.skip-verseline, .verseline {white-space: nowrap;}}
\Css{.flagverse {float:right; font-size:85\%;
                   text-decoration:underline;}}
>>>


%%%%%%%%%%%%%%%%
\section{OpenOffice writer}
%%%%%%%%%%%%%%%%

\<configure html-speech writer\><<<
\Configure{WriterEnv}
   {%
     \ConfigureEnv{#1}
        {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="#1">}}
        {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
        {}{}%
   }
   {%
       \tmp:dim=\parindent 
       \divide\tmp:dim by \ten:Em\relax
       \tmp:dim=10\tmp:dim
     \Css{div.#1 {text-indent:\expandafter\x:Em \the\tmp:dim em;}}%
       \tmp:dim=\leftskip
       \divide\tmp:dim by \ten:Em\relax
       \tmp:dim=10\tmp:dim
     \Css{div.#1 {margin-left:\expandafter\x:Em \the\tmp:dim em;}}%
       \tmp:dim=\rightskip
       \divide\tmp:dim by \ten:Em\relax
       \tmp:dim=10\tmp:dim
     \Css{div.#1 {margin-right:\expandafter\x:Em \the\tmp:dim em;}}%
     \Css{div.#1 {margin-top:0.75em;
                  margin-bottom:0.75em;
         }}%
}
|<10 em constant|>
>>>

\<10 em constant\><<<
{
  \def\x:Em{%
    \catcode`\p=12
    \catcode`\t=12
    \gdef\x:Em}
  \x:Em#1pt{#1}
}
\tmp:dim=10em
\edef\ten:Em#1.#2//{#1}
\edef\ten:Em{\expandafter\ten:Em \the\tmp:dim//}
>>>

%%%%%%%%%%%%%%%%%%
\section{manmac}
%%%%%%%%%%%%%%%%%%

\<configure html-speech manmac\><<<
\Configure{chapter}
   {\IgnorePar\EndP
    \HCode{<!--l. \the\inputlineno--><div class="chapter">}\IgnorePar    }
   {\IgnorePar\EndP\HCode{</div><!--end chapter-->}\par\ShowPar}
   {\HCode{<div class="chapterTitle">}\par \ShowPar \noindent
    \let\sv:rightline=\rightline \let\rightline=\hbox }
   {\IgnorePar\EndP  \let\rightline=\sv:rightline
    \HCode{</div><!--end chapter title-->}\par\ShowPar}
\Configure{titlepage}
   {\ifvmode \IgnorePar\fi\EndP
    \HCode{<!--l. \the\inputlineno--><div class="titlepage">}\par}
   {\IgnorePar\EndP\HCode{</div><!--end titlepage-->}\par\ShowPar}
>>>

\<configure html-speech manmac\><<<
\Configure{mathdemo}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<!--l. \the\inputlineno--><table class="mathdemo">}}
   {\HCode{</table>}\par\ShowPar}
   {\HCode{<tr>}}
   {\HCode{</tr>}}
   {\HCode{<td>}}
   {\HCode{</td>}}
\Css{table.mathdemo{margin-left:2em}}
\Configure{longdisplaymathdemo}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<!--l. \the\inputlineno--><table class="longdisplaymathdemo">}}
   {\HCode{</table>}\par\ShowPar}
   {\HCode{<tr>}}
   {\HCode{</tr>}}
   {\HCode{<td>}}
   {\HCode{</td>}}
\Css{table.longdisplaymathdemo{margin-left:2em}}
\Configure{longmathdemo}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<!--l. \the\inputlineno--><table class="longmathdemo">}}
   {\HCode{</table>}\par\ShowPar}
   {\HCode{<tr>}}
   {\HCode{</tr>}}
   {\HCode{<td>}}
   {\HCode{</td>}}
\Css{table.longmathdemo{margin-left:2em}}
\Configure{displaymathdemo}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<!--l. \the\inputlineno--><table class="displaymathdemo">}}
   {\HCode{</table>}\par\ShowPar}
   {\HCode{<tr>}}
   {\HCode{</tr>}}
   {\HCode{<td>}}
   {\HCode{</td>}}
\Css{table.displaymathdemo{margin-left:2em}}
>>>


\<configure html-speech manmac\><<<
\Configure{exercise}
  {\ifvmode \IgnorePar\fi \EndP 
   \HCode{<!--l. \the\inputlineno--><h5 class="exercise">}%
   \bgroup \Configure{HtmlPar}{}{}{}{}}
  {\egroup\HCode{</h5>}\IgnoreIndent\par}

\Configure{manmac-display}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<!--l. \the\inputlineno--><table class="manmac-display">}}
   {\HCode{</table>}\IgnoreIndent\par}
   {\HCode{<tr>}}
   {\HCode{</tr>}}
   {\HCode{<td>}\ShowPar}
   {\ifvmode \IgnorePar\fi\EndP \HCode{</td>}}

\Configure{ttenv}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<!--l. \the\inputlineno--><div class="ttenv">}}
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}\par\noindent}
>>>



\<configure html-speech manmac\><<<
\Configure{sampleglue}
   {\HCode{<table class="sampleglue">}}
   {\HCode{</table>}}
   {\HCode{<tr>}}
   {\HCode{</tr>}}
   {\HCode{<td>}}
   {\HCode{</td>}}
>>>

\<configure html-speech manmac\><<<
\Configure{danger}
   {\HCode{<!--l. \the\inputlineno--><!--danger-->}}
   {\HCode{<!--end danger-->}}
\Configure{ddanger}
   {\HCode{<!--l. \the\inputlineno--><!--ddanger-->}}
   {\HCode{<!--end ddanger-->}}
>>>


%%%%%%%%%%%%%%%%
\section{Small Packagesy}
%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{lineno.sty}
%%%%%%%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech lineno\><<<
\:warning{The line numbers are commented out. To reintroduce them, use
    the \string\Configure{lineno}{...}{...} command}
\Configure{lineno}
    {\bgroup \let\LineNumber=\empty}
    {\egroup}
>>>




%%%%%%%%%%%%%%
\subsection{revtex (aps)}
%%%%%%%%%%%%%%

\<configure html-speech aps\><<<   
\ifx \@authoraddress\:UnDef
  |<revtex4 aps.rtx|>
\else 
  |<revtex3 aps.sty|>
\fi
>>>

\<revtex3 aps.sty\><<<
|<revtex sections|>
|<revtex title page|>
|<shared bib env|>
|<thebib config|>
>>>


\<revtex sections\><<<
    \def\:SPAN#1#2{\HCode{<span class="#1">}#2\HCode{</span>}}
>>>



 
\<revtex sections\><<<
\:CheckOption{4}     \if:Option
    \expandafter\ifx \csname @chapter\endcsname\relax
         \CutAt{part}
\CutAt{likepart}
|<cut toc: part|>

         \CutAt{section,likesection,chapter,likechapter,appendix,part}
\CutAt{likesection,chapter,likechapter,appendix,part}
|<cut toc: sec|>%
         \CutAt{subsection,section,likesection,%
                  chapter,likechapter,appendix,part}
\CutAt{likesubsection,section,likesection,%
                  chapter,likechapter,appendix,part}
       |<cut toc: subsec|>%
       |<tocat: part|>%
       |<tocat: section|>%
    \else
         \CutAt{part}
\CutAt{likepart}
|<cut toc: part|>

         \CutAt{chapter,likechapter,appendix,part}
\CutAt{likechapter,appendix,part}
\CutAt{appendix,chapter,likechapter,part}
|<tocat: ch|>%

         \CutAt{section,likesection,chapter,likechapter,appendix,part}
\CutAt{likesection,chapter,likechapter,appendix,part}
|<cut toc: sec|>%
         \CutAt{subsection,section,likesection,%
                  chapter,likechapter,appendix,part}
\CutAt{likesubsection,section,likesection,%
                  chapter,likechapter,appendix,part}
      |<cut toc: subsec|>%
      |<tocat: part|>%
      |<tocat: ch|>%
      |<tocat: section|>%
    \fi
\else\:CheckOption{3}     \if:Option
    \expandafter\ifx \csname @chapter\endcsname\relax
         \CutAt{part}
\CutAt{likepart}
|<cut toc: part|>

         \CutAt{section,likesection,chapter,likechapter,appendix,part}
\CutAt{likesection,chapter,likechapter,appendix,part}
|<cut toc: sec|>%
         \CutAt{subsection,section,likesection,%
                  chapter,likechapter,appendix,part}
\CutAt{likesubsection,section,likesection,%
                  chapter,likechapter,appendix,part}
      |<cut toc: subsec|>%
      |<tocat: part|>%
      |<tocat: section|>%
    \else
         \CutAt{part}
\CutAt{likepart}
|<cut toc: part|>

         \CutAt{chapter,likechapter,appendix,part}
\CutAt{likechapter,appendix,part}
\CutAt{appendix,chapter,likechapter,part}
|<tocat: ch|>%

         \CutAt{section,likesection,chapter,likechapter,appendix,part}
\CutAt{likesection,chapter,likechapter,appendix,part}
       |<cut toc: sec|>%
       |<tocat: part|>%
       |<tocat: ch|>%
    \fi
\else\:CheckOption{2}     \if:Option
    \expandafter\ifx \csname @chapter\endcsname\relax
         \CutAt{part}
\CutAt{likepart}
|<cut toc: part|>

         \CutAt{section,likesection,chapter,likechapter,appendix,part}
\CutAt{likesection,chapter,likechapter,appendix,part}
      |<cut toc: sec|>%
      |<tocat: part|>%
    \else
         \CutAt{part}
\CutAt{likepart}
|<cut toc: part|>

         \CutAt{chapter,likechapter,appendix,part}
\CutAt{likechapter,appendix,part}
\CutAt{appendix,chapter,likechapter,part}
       |<tocat: ch|>%
       |<tocat: part|>%
    \fi
\else\:CheckOption{1}     \if:Option
         \CutAt{part}
\CutAt{likepart}
|<cut toc: part|>

\else
    \Log:Note{for automatic sectioning pagination,
          use the command line option `1', `2', or `3'}%
\fi \fi \fi \fi

\:CheckOption{1}     \if:Option
  |<toc article,report options 1|>
\fi
|<shared h5 subsubsection|>
\Configure{endlikesubsubsection}
   {subsubsection,subsection,likesubsection,section,%
      likesection,chapter,likechapter,appendix,part,likepart}
\Configure{endlikeparagraph}
   {paragraph,subsubsection,likesubsubsection,subsection,%
    likesubsection,section,%
    likesection,chapter,likechapter,appendix,part,likepart}
\Configure{endsubparagraph}
   {likesubparagraph,likeparagraph,subsubsection,likesubsubsection,%
    subsection,likesubsection,section,%
    likesection,chapter,likechapter,appendix,part,likepart}
\Configure{endlikesubparagraph}
   {subparagraph,likeparagraph,subsubsection,likesubsubsection,%
    subsection,likesubsection,section,%
    likesection,chapter,likechapter,appendix,part,likepart}

\ifx \part\:UnDef \else
   |<latex shared part config|>
\fi

\Configure{endsection}
     {likesection,chapter,likechapter,appendix,part,likepart}
\Configure{endlikesection}
     {section,chapter,likechapter,appendix,part,likepart}
\ConfigureMark{section}
   {\ifnum \c:secnumdepth>\c@secnumdepth \expandafter\:gobble
    \else
       \HCode{<span class="titlemark">}\thesection\HCode{</span>}\fi }
|<section TITLE+|>
\Configure{section}{}{}
   {\ifvmode \IgnorePar\fi \EndP\IgnorePar
    \HCode{<h3 class="sectionHead"\a:LRdir>}\TitleMark.\space\HtmlParOff}
   {\HCode{</h3>}\HtmlParOn \par}
\Configure{likesection}{}{}
   {\ifvmode \IgnorePar\fi
    \EndP\IgnorePar\HCode{<h3 class="likesectionHead"\a:LRdir>}\HtmlParOff}
   {\HCode{</h3>}\HtmlParOn \IgnoreIndent \par}
\Configure{likesectionTITLE+}{#1}

\Css{h3.sectionHead, h3.likesectionHead {text-align:center;}}

\Configure{endsubsection}
   {likesubsection,section,likesection,chapter,%
      likechapter,appendix,part,likepart}
\Configure{endlikesubsection}
   {subsection,section,likesection,chapter,%
      likechapter,appendix,part,likepart}
|<shared h4 subsection|>

\Css{h4.subsectionHead {text-align:center;}}

\Configure{endsubsubsection}
   {likesubsubsection,subsection,likesubsection,section,%
      likesection,chapter,likechapter,appendix,part,likepart}

\Configure{endparagraph}
   {likeparagraph,subsubsection,likesubsubsection,subsection,%
    likesubsection,section,%
    likesection,chapter,likechapter,appendix,part,likepart}
\Configure{paragraph}{}{}
  {\ShowPar\IgnoreIndent\HCode{<span class="paragraphHead"\a:LRdir>}\begingroup\bf}
  {\endgroup\HCode{</span>}\IgnorePar}
\Configure{likeparagraph}{}{}
  {\ShowPar\IgnoreIndent\HCode{<span class="likeparagraphHead"\a:LRdir>}}
  {\HCode{</span>}\IgnorePar}
\Css{.paragraphHead, .likeparagraphHead
   { margin-top:2em; font-weight: bold;}}

\ConfigureMark{subparagraph}{}
\Configure{subparagraph}{}{}
  {\ShowPar\HCode{<span class="subparagraphHead"\a:LRdir>}\begingroup\bf
   \TitleMark\space}
  {\endgroup\HCode{</span>}\IgnorePar}
\Configure{likesubparagraph}{}{}
  {\ShowPar\HCode{<span class="likesubparagraphHead"\a:LRdir>}\begingroup\bf}
  {\endgroup\HCode{</span>}\IgnorePar}
\Css{.subparagraphHead, .likesubparagraphHead
   { font-weight: bold;}}
>>>





%%%%%%%%%%%%%%%%%%%
\subsection{Spatial Math}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech longdiv\><<<
\Configure{longdiv}
  {\Configure{halign} 
      {\HCode{<table class="longdiv">}}
      {\HCode{</table>}}
      {\HCode{<tr>}} 
      {\HCode{</tr>\Hnewline}}
      {\tmp:cnt=\HRow \divide\tmp:cnt by 2 \multiply\tmp:cnt by 2
       \advance\tmp:cnt by -\HRow
       \HCode{<td \ifnum\HCol=2 \ifnum\HRow=2 class="longdiv"\fi \fi>%
              <span \ifnum \tmp:cnt=-1
                 \ifnum \HRow>2 class="longdiv"\fi\fi >}%
      }
      {\HCode{</span></td>}}%
  }
  {}
\Css{table.longdiv {text-align: right;}}
\Css{td.longdiv {border-top:solid 1px black;
                 border-left:solid 1px black;}}
\Css{span.longdiv {text-decoration:underline;}}
>>>



%%%%%%%%%%%%%%%%%%%
\subsection{lncse}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech lncse\><<<
|<lncse chapter|>
\Configure{paragraph}{}{}
  {\ShowPar\IgnoreIndent
   \HCode{<span class="paragraphHead"\a:LRdir>}\begingroup\it}
  {\endgroup\HCode{</span>}\IgnorePar}
>>>


\<lncse chapter\><<<
\ConfigureMark{chapter}
   {\if@mainmatter
       \HCode{<span class="titlemark">}\chaptername
     \ \thechapter\HCode{</span>}\fi}
\Configure{chapter}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="chapterHead"\a:LRdir>}%
    \TitleMark{\HCode{<br\xml:empty>}}}
   {\HCode{</h2>}\IgnoreIndent}
\Configure{chapterTITLE+}{\if@mainmatter\thechapter\space\fi#1}
\renewcommand\thechapter {\if@mainmatter\@arabic\c@chapter\fi}

\ConfigureMark{appendix}{\HCode{<span class="titlemark">}%
   \appendixname \ \thechapter\HCode{</span>}}
\Configure{appendix}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="appendixHead"\a:LRdir>}%
     \TitleMark{\HCode{<br\xml:empty>}}}
   {\HCode{</h2>}\IgnoreIndent}
\Configure{appendixTITLE+}{\thechapter\space#1}
\Configure{likechapter}{}{}
   {\IgnorePar\EndP\HCode{<h2 class="likechapterHead">}}
   {\HCode{</h2>}\IgnoreIndent}
>>>



%%%%%%%%%%%%%%%%
\section{?????}
%%%%%%%%%%%%%%%%





\<0,32,4 preambles\><<<
|<hook utility|>
|<cascade style sheets|>
\Configure{Preamble}
   {|<default cascade style sheets|>} {}
>>>

\<default cascade style sheets\><<<
{\ifdim \lastskip>\z@ \unskip\fi  \IgnorePar\parindent\z@
\leavevmode}%
\immediate\write-1{--- file \aa:CssFile\space ---}%
\ht:special{t4ht>\aa:CssFile}\ht:special{t4ht=\Hnewline /* css.sty */}%
\ht:special{t4ht<\aa:CssFile}%
>>>



\verb'\special' are like \verb'\hbox', and they so they may introduve empty lines in
vertical mode. That might be a problem if we don't want empty lines at
the start of the files. Hence, in latex we give them special treatment.

\<cascade style sheets\><<<
\ScriptCommand{\CssFile}{%
    \immediate\write-1{--- file \aa:CssFile\space ---}%
    \def\FontSize##1##2{\:Context{##1}\ht:special{t4ht;\%##2}\%}%
    \def\FontName##1{\:Context{##1}\ht:special{t4ht;=}}%
    \def\:Context##1{\ht:special{t4ht>\jobname.tmp}##1\ht:special
       {t4ht>\aa:CssFile}}%
    \ht:special{t4ht>\jobname.tmp}\ht:special{t4ht>\aa:CssFile}%
    \bgroup \everypar{}\NoFonts  \bb:CssFile \hfil\break}
  {\egroup \EndNoFonts
    \ht:special{t4ht<\aa:CssFile}\ht:special{t4ht<\jobname.tmp}}
\let\Css:File|=\CssFile
\def\CssFile{\futurelet\:temp\Css:Fl}
\def\Css:Fl{\ifx [\:temp  \expandafter\Css:fl
   \else \expand:after{\Css:File \space}\fi}
\def\Css:fl[#1]{\Css:File\space \css:files #1,,|<par del|>}
\def\css:files#1,#2|<par del|>{\def\:temp{#1}\ifx \:temp\empty
   \else \def\:temp{\in:css#1.|<par del|>\css:files#2,,|<par del|>}\fi
   \:temp }
\def\in:css#1.#2|<par del|>{\def\:temp{#2}\ifx \:temp\empty
      \inc:ss#1.css|<par del|>
   \else \inc:ss#1.#2|<par del|>\fi}
\def\inc:ss#1.|<par del|>{|<input css file|> }
\NewConfigure{CssFile}[2]{\def\aa:CssFile{#1}\def\bb:CssFile{#2}}
>>>


\<input css file\><<<
     \immediate\openin15=#1
     \ifeof15 \immediate\closein15
        \:warning{Missing file: #1}%
     \else \immediate\closein15     \input #1 \fi
>>>


\verb'\CssFile[file-name,filename.ext,..]...\EndCssFile'.

Default file, just in case the user doesn't provide one. If
the user does, the following file will be overwritten.

Can't use below \verb'\a:CssFile' and \verb'\b:CssFile', because
\verb'\ScriptFile{\CssFile}' also needs them.

\verb'\Css' changes its definition upon reachin \verb'\CssFile'.  The 
first definition is needed within the sty files, and the info is
sent to the lg file (where else it can be sent?).


\<cascade style sheets\><<<
\def\Css#1{{\def\:temp{\Configure{Needs}}%
   \expandafter\:temp\expandafter{\aa:Css}\Needs{#1}}}
>>>

\<cascade style sheets-DISABLE\><<<
\let\send:css|=\Css
\ScriptCommand{\Css}{\HCode{<style
   type="text/css">\Hnewline}\NoFonts}{\EndNoFonts\HCode{</style>}}
\let\loc:css|=\Css
\def\Css{\futurelet\:temp\:Css}
\def\:Css{\ifx \:temp\bgroup \expandafter\send:css
   \else \expandafter\loc:css\fi}
>>>


\<hook utility\><<<
\:CheckOption{hooks++} \if:Option
    \else \:CheckOption{hooks+}  
          \if:Option \else \:CheckOption{hooks}\fi
    \fi
\if:Option
   \Configure{hooks}
      {\HCode{<strong class="hooks">&lt;}}{\HCode{&gt;</strong>}}{}{}  
\fi
>>>




The following provides a faster version
than \verb'\LinkCommand\Link{a,href,name,}' for the \verb'\Link'
command

\<config tex4ht\><<<
\Configure{Link}{a}{href=}{id=}{}
>>>


\section{Shared}
%%%%%%%%%%%%%%%%%%


\<config book-report-article\><<<
|<makeketitle config 4.0t|>
>>>



\<config book-report-article\><<<
|<latex shared div config|>
|<shared bib env|>
\ifx \part\:UnDef \else
   |<latex shared part config|>
\fi
|<config lists of figures and tables|>
|<description 4|>
>>>


\<config lists of figures and tables\><<<
\ConfigureToc{lof}
  {\HCode{<span class="lofToc">}}{\ }{}{\HCode{</span><br\xml:empty>}}
\ConfigureToc{lot}
  {\HCode{<span class="lotToc">}}{\ }{}{\HCode{</span><br\xml:empty>}}
>>>

\<config book-report-article\><<<
|<thebib config|>
|<latex config div 4.0t|>
>>>



\<quote config\><<<
\ConfigureEnv{quote}
   {}{}
   {\IgnorePar\EndP\HCode{<div class="quote">}}
   {\IgnorePar\EndP\HCode{</div>}\ShowPar\ShowIndent}
\Css{.quote  {margin-bottom:0.25em; margin-top:0.25em;
              margin-left:1em; margin-right:1em; text-align:justify;}}
>>>

\<quote noindent config\><<<
\ConfigureEnv{quote}
   {}{}
   {\IgnorePar\EndP\HCode{<div class="quote">}\IgnoreIndent}
   {\IgnorePar\EndP\HCode{</div>}\ShowPar\ShowIndent}
\Css{.quote  {margin-bottom:0.25em; margin-top:0.25em;
              margin-left:1em; margin-right:1em; text-align:justify;}}
>>>



\<config book-report-article\><<<
\ConfigureEnv{verse}
   {\ifvmode \IgnorePar\fi\EndP\Tg<div class="verse">}
   {\ifvmode \IgnorePar\fi\EndP\Tg</div>}
   {}{}
\ConfigureList{verse}
   {}{}
   {\parindent=\z@}  {\par}
\Css{.verse{white-space:nowrap; margin-left:2em}}
>>>





\<config book-report-article\><<<
|<article,report,book|>

>>>






%%%%%%%%%%%%%%%%%%%
\section{babel.sty}
%%%%%%%%%%%%%%%%%%%





\<configure html-speech babel\><<<
|<babel macros|>
|<babel char set|>
|<babel accents|>
|<u mlaut|>
>>>





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Character Set}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<babel char set\><<<
\def\a:temp#1#2#3{%
   \ifOption{charset=#2}{\def\a:charset{charset=#2}}{}%
   \def\:tempa{#1}\ifx \languagename\:tempa
      \def\A:charset{#2}\ifx \A:charset\empty\else
         \def\A:charset{charset=#2}%
      \fi
      \if !#3!\else 
         \Configure{@HTML}{% 
            \iflanguage{#1}{lang="#3" }{}%
         } 
      \fi
   \fi}
\a:temp{afrikaans}{iso-8859-1}{af}
\a:temp{arabic}{iso-8859-6}{ar}
\a:temp{austrian}{iso-8859-1}{ge}
\a:temp{brazilian}{iso-8859-1}{pt}
\a:temp{brazil}{iso-8859-1}{pt}
\a:temp{catalan}{iso-8859-1}{ca}
\a:temp{croatian}{iso-8859-2}{hr}
\a:temp{czech}{iso-8859-2}{cs}
\a:temp{danish}{iso-8859-1}{da}
\a:temp{dutch}{iso-8859-1}{nl}
\a:temp{esperanto}{iso-8859-3}{eo}
\a:temp{estonian}{iso-8859-5}{et}
\a:temp{finnish}{iso-8859-1}{fi}
\a:temp{francais}{iso-8859-1}{fr}
\a:temp{frenchb}{iso-8859-1}{fr}
\a:temp{french}{iso-8859-1}{fr}
\a:temp{galician}{iso-8859-1}{gl}
\a:temp{germanb}{iso-8859-1}{de}
\a:temp{german}{iso-8859-1}{de}
\a:temp{greek}{iso-8859-7}{el}
\a:temp{hebrew}{iso-8859-8}{he}
\a:temp{hungarian}{iso-8859-2}{hu}
\a:temp{ngerman}{iso-8859-1}{de}
\a:temp{norsk}{iso-8859-1}{no}
\a:temp{nynorsk}{iso-8859-1}{no}
\a:temp{polish}{iso-8859-2}{pl}
\a:temp{polski}{iso-8859-2}{pl}
\a:temp{polutonikogreek}{iso-8859-7}{el}
\a:temp{portuges}{iso-8859-1}{pt}
\a:temp{portuguese}{iso-8859-1}{pt}
\a:temp{romanian}{iso-8859-2}{ro}
\a:temp{scottish}{iso-8859-1}{gd}
\a:temp{slovak}{iso-8859-2}{sk}
\a:temp{slovene}{iso-8859-2}{sl}
\a:temp{spanish}{iso-8859-1}{es}
\a:temp{swedish}{iso-8859-1}{sv}
\a:temp{turkish}{iso-8859-9}{tr}
\a:temp{ukrainian}{iso-8859-5}{uk}
\a:temp{uppersorbian}{iso-8859-2}{}
\a:temp{welsh}{iso-8859-1}{cy}
|<set babel charset|>
>>>







\<configure html-speech german\><<<
|<quotedblbase|>
>>>

\<configure html-speech ngerman\><<<
|<quotedblbase|>
>>>





\<quotedblbase\><<<
\Configure{quotedblbase}{\leavevmode\ht:special{t4ht@+&{35}8222{59}}x}
\Configure{quotesinglbase}{\leavevmode\ht:special{t4ht@+&{35}8218{59}}x}
>>>


% \HCode{&}\HChar{-35}\HCode{8222;}}

\<configure html-speech austrian\><<<
\def\A:charset{charset=iso-8859-1}
>>>
\<configure html-speech catalan\><<<
\def\A:charset{charset=iso-8859-1}
>>>

\<configure html-speech croatian\><<<
\def\A:charset{charset=iso-8859-2}
\:CheckOption{new-accents}     \if:Option \else
   |<old iso-8859-2 accents|>
\fi
>>>


\<configure html-speech latin2\><<<
\def\A:charset{charset=iso-8859-2}
>>>




\<configure html-speech czech\><<<
\def\A:charset{charset=iso-8859-2}
>>>
\<configure html-speech danish\><<<
\def\A:charset{charset=iso-8859-1}
>>>
\<configure html-speech dutch\><<<
\def\A:charset{charset=iso-8859-1}
>>>
\<configure html-speech english\><<<
\def\A:charset{charset=iso-8859-1}
>>>
\<configure html-speech esperant\><<<
\def\A:charset{charset=iso-8859-3}
>>>
\<configure html-speech estonian\><<<
\def\A:charset{charset=iso-8859-5}
>>>
\<configure html-speech finnish\><<<
\def\A:charset{charset=iso-8859-1}
>>>

\<configure html-speech francais\><<<
\def\A:charset{charset=iso-8859-1}
>>>


\<configure html-speech frenchb\><<<
\def\A:charset{charset=iso-8859-1}
\Configure{@TITLE}{\Configure{frenchb-thinspace}{}{}}
>>>



\<configure html-speech frenchb\><<<
\Configure{system-nbsp}
   {\ht:special{t4ht@[unhskip}}
   {\ht:special{t4ht@]unhskip}}
>>>

\<configure html-speech frenchb\><<<
\ifx \tmp:bx\:UnDef \csname newbox\endcsname \tmp:bx \fi
\Configure{frenchb-nbsp}
   {\ht:special{t4ht@?unhskip}\HCode{<span class="frenchb-nbsp">}%
    \HCode{&nbsp;}\setbox\tmp:bx=\hbox\bgroup}
   {\egroup \HCode{</span>}}
\Css{.frenchb-nbsp{font-size:75\%;}}
>>>  


\<configure html-speech frenchb\><<<    
\Configure{frenchb-thinspace}
   {\ht:special{t4ht@?unhskip}\HCode{<span class="frenchb-thinspace">}%
    \HCode{&nbsp;}\setbox\tmp:bx=\hbox\bgroup}
   {\egroup \HCode{</span>}}
\Css{.frenchb-thinspace{font-size:75\%;}}
>>>




\<configure html-speech galician\><<<
\def\A:charset{charset=iso-8859-1}
>>>
\<configure html-speech germanb\><<<
\def\A:charset{charset=iso-8859-1}
>>>

\<configure html-speech greek\><<<
\def\A:charset{charset=iso-8859-7}
\ifOption{charset=iso-8859-7}
   {|<greek ldf iso-8859-7|>}
   {\Log:Note{for iso-8859-7 accents 
          use the command line option `charset=iso-8859-7'}}
\ifOption{sgreek}
  {\:CheckOption{new-accents}     \if:Option \else 
       |<greek ldf sgreek|>
   \fi}
  {\Log:Note{for Sgreek font
          use the command line option `sgreek'}}
\ifOption{oldgreek}
  {\:CheckOption{new-accents}     \if:Option \else 
       |<greek ldf Greek Old Face|>
   \fi}
  {\Log:Note{for Greek Old Face font
          use the command line option `oldgreek'}}
>>>



\<greek ldf sgreek\><<<
\def\A:charset{charset=iso-8859-1}
\Configure{htf}{254}{+}{<font \Hnewline
   face="}{}{}{}{}{Sgreek">}{</font>}
\Configure{htf}{252}{+}{<font \Hnewline
   face="}{}{}{}{}{Sgreek" class="small-caps">}{</font>}
\Configure{htf-css}{252}{.small-caps{font-variant: small-caps; }}  
\Configure{accents}
   {\ht:special{t4ht@+\string&{35}x#2{59}}x}
   {\expandafter \ifx \csname \@curr@enc :#1\endcsname\relax
       \Picture+{ \a:@Picture{#1}}#2{#3}\EndPicture
    \else
       \csname \@curr@enc :#1\endcsname {#3}%
    \fi
   }
\def\LGR:acute#1{%
  \LGR:gobble\ifx #1\i \HChar{237}%
  \else #1\HCode{<font face="Sgreek">/</font>}\fi }
\def\LGR:grave#1{%
  \LGR:gobble\ifx #1\i \HChar{236}%
  \else #1\HCode{<font face="Sgreek">\string\</font>}\fi}
\def\LGR:circ#1{%
  \LGR:gobble\ifx #1\i \HChar{238}%
  \else #1\HCode{<font face="Sgreek">=</font>}\fi}
\def\LGR:tilde#1{#1\HCode{<font face="Sgreek">@</font>}}
\def\LGR:uml#1{%
  \LGR:gobble\ifx #1\i \HChar{239}%
  \else #1\HCode{<font face="Sgreek">+</font>}\fi}
\def\LGR:gobble#1#2#3{#1}
>>>


The accented \''\i' arrives in the form of \''\@use@text@encoding
\@curr@enc \i'.



\<greek ldf Greek Old Face\><<<
\def\A:charset{charset=iso-8859-1}
\Configure{htf}{254}{+}{<font \Hnewline
   face="}{}{}{}{}{Greek Old Face">}{</font>}
\Configure{htf}{252}{+}{<font \Hnewline
   face="}{}{}{}{}{Greek Old Face" class="small-caps">}{</font>}
\Configure{htf-css}{252}{.small-caps{font-variant: small-caps; }}  
\Configure{accents}
   {\ht:special{t4ht@+\string&{35}x#2{59}}x}
   {\expandafter \ifx \csname \@curr@enc :#1\endcsname\relax
       \Picture+{ \a:@Picture{#1}}#2{#3}\EndPicture
    \else
       \csname \@curr@enc :#1\endcsname {#3}%
    \fi
   }
\def\LGR:acute#1{%
  \LGR:gobble\ifx #1\i \HChar{237}%
  \else 
     \edef\:temp{\:gobbleII#1\empty\empty}%
     \LGR:ch{i}{133}\LGR:ch{w}{232}\LGR:ch{u}{218}\LGR:ch{o}{210}%
     \LGR:ch{h}{187}\LGR:ch{a}{163}\LGR:ch{e}{154}%
     \ifx \:temp\empty\else #1\HChar{-180}\fi
  \fi }
\def\LGR:grave#1{%
  \LGR:gobble\ifx #1\i \HChar{236}%
  \else 
     \edef\:temp{\:gobbleII#1\empty\empty}%
     \LGR:ch{i}{136}\LGR:ch{235}{232}\LGR:ch{u}{221}\LGR:ch{o}{213}%
     \LGR:ch{h}{190}\LGR:ch{a}{166}\LGR:ch{e}{157}%
     \ifx \:temp\empty\else #1`\fi
  \fi }
\def\LGR:circ#1{%
  \LGR:gobble\ifx #1\i \HChar{238}%
  \else 
     \edef\:temp{\:gobbleII#1\empty\empty}%
     \LGR:ch{i}{139}\LGR:ch{w}{238}\LGR:ch{u}{224}\LGR:ch{o}{253}%
     \LGR:ch{h}{193}\LGR:ch{a}{169}\LGR:ch{e}{252}%
     \ifx \:temp\empty\else #1\string^\fi
  \fi}
\def\LGR:tilde#1{#1}
\def\LGR:uml#1{%
  \LGR:gobble\ifx #1\i \HChar{239}%
  \else 
     \edef\:temp{\:gobbleII#1\empty\empty}%
     \LGR:ch{u}{227}\LGR:ch{i}{142}%
     \ifx \:temp\empty\else  #1\HChar{168}\fi
  \fi}
\def\LGR:gobble#1#2#3{#1}
\def\LGR:ch#1#2{\def\:tempa{#1}\ifx \:temp\:tempa 
   \HCode{<font face="Greek Old Face">}\HChar{#2}\HCode{</font>}%
   \let\:temp=\empty \fi }
>>>









\<configure html-speech hebrew\><<<
\def\A:charset{charset=iso-8859-8}
>>>

\<configure html-speech ngermanb\><<<
\def\A:charset{charset=iso-8859-1}
>>>
\<configure html-speech norsk\><<<
\def\A:charset{charset=iso-8859-1}
>>>
\<configure html-speech polish\><<<
\def\A:charset{charset=iso-8859-2}
>>>
\<configure html-speech polski\><<<
\def\A:charset{charset=iso-8859-2}
>>>
\<configure html-speech portuges\><<<
\def\A:charset{charset=iso-8859-1}
>>>



\<configure html-speech scottish\><<<
\def\A:charset{charset=iso-8859-1}
>>>

\<configure html-speech slovak\><<<
\def\A:charset{charset=iso-8859-2}
\:CheckOption{new-accents}     \if:Option \else
   |<old iso-8859-2 accents|>
\fi
>>>


\<configure html-speech slovene\><<<
\def\A:charset{charset=iso-8859-2}
\:CheckOption{new-accents}     \if:Option \else
   |<old iso-8859-2 accents|>
\fi
>>>

\<configure html-speech spanish\><<<
\def\A:charset{charset=iso-8859-1}
|<spanish configs|>
>>>


\<spanish configs\><<<
\Configure{spanish"a}
   {\HCode{<sup><u>a</u></sup>}}
\Configure{spanish"o}
   {\HCode{<sup><u>o</u></sup>}}
\Configure{@TITLE}{%
   \Configure{spanish"a}{\HCode{&\#170;}}%
   \Configure{spanish"o}{\HCode{&\#176;}}%
}
>>>


\<configure html-speech swedish\><<<
\def\A:charset{charset=iso-8859-1}
>>>
\<configure html-speech turkish\><<<
\def\A:charset{charset=iso-8859-9}
>>>
\<configure html-speech ukraineb\><<<
\def\A:charset{charset=iso-8859-5}
>>>
\<configure html-speech usorbian\><<<
\def\A:charset{charset=iso-8859-2}
>>>
\<configure html-speech welsh\><<<
\def\A:charset{charset=iso-8859-1}
>>>


%%%%%%%%%%%%%%%%%%%%%%%%%  
\section{right to left babel}
%%%%%%%%%%%%%%%%%%%%%%%%%  


tex4ht.sty indert  Rregion  and Lregion end hooks within
\verb+\beginL/R+ and \verb+\endL/R+, mainly to void the 
inverse produced by the elatex compiler.

\<configure html-speech rlbabel\><<<
\Configure{TITLE+}{\HCode{\jobname}}
\Configure{Rregion} {\beginL} {\endL}
\Configure{!P}{\a:LRdir} 
\Configure{!BODY}{\a:LRdir} 
\Configure{LRdir}{ |<dir ltr/rtl|> } 
>>>

\<dir ltr/rtl\><<<
dir="\if@rl rtl\else ltr\fi"
>>>


\<configure html-speech rlbabel\><<<
\Configure{moreL}
  {\ifvmode \let\end:moreRL=\empty
   \else\HCode{<span dir="ltr" >}\def\end:moreRL{\HCode{</span>}}\fi}
  {\end:moreRL}
\Configure{moreR}
  {\ifvmode \let\end:moreRL=\empty 
   \else\HCode{<span dir="rtl" >}\def\end:moreRL{\HCode{</span>}}\fi}
  {\end:moreRL}
>>>


\<configure html-speech-math rlbabel\><<<
\:CheckOption{pic-m} \if:Option
\else
   \Configure{$}
      {\HCode{<span |<dir ltr/rtl|>>}}
      {\HCode{</span>}}{}
\fi
>>>



% \def\HCode{<#1>}{\HCode{<#1 |<dir ltr/rtl|>>}}

\<configure html-speech-math rlbabel\><<<
\Configure{[]} 
   {\bgroup
       \protect\nested:math
       \PicDisplay 
       $$\everymath{}\everydisplay{}}
   {$$\EndPicDisplay \egroup
    |<try inline par|>\if@rl \beginL\fi \beginR }
>>>

Test data

\begin{verbatim}
\def\providehyphenmins#1#2{}
\documentclass[english,hebrew]{article}
\usepackage[T1]{fontenc}

\makeatletter
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% LyX specific LaTeX commands.
%% Bold symbol macro for standard LaTeX users
\newcommand{\boldsymbol}[1]{\mbox{\boldmath $#1$}}


\usepackage{babel}
\makeatother
\begin{document}
 
 \[F=ma\quad(\textrm{\L{Newton's 2nd Law}\R{ }})\]
 \[F=ma\quad(\mbox{Newton's 2nd Law } )\]
 \R{\[F=ma\quad(\mbox{Newton's 2nd Law } )\]}
  
\end{document}

\end{verbatim}



%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Scientific Word}
%%%%%%%%%%%%%%%%%%%%%%%%%


% When \verb+\BOXEDSPECIAL+ is defined we don't want the
% following configuration, because the frame may enclose 
% a graphics-like file that we might not want to translate.
% 
% \<configure html-speech tcilatex\><<<
% \ifx \BOXEDSPECIAL\:UnDef   
%    \Configure{BOXTHEFRAME}
%      {\Picture+[PICT]{}}  {\EndPicture}
% \fi
% >>>

\<configure html-speech tcilatex\><<<
\Configure{GRAPHICSPS}
   {\Picture+[PICT]{}}  {\EndPicture}
\Configure{GRAPHICSHP}
   {\Picture+[PICT]{}}  {\EndPicture}
\Configure{DFRAME}
  {\EndP \IgnorePar\HCode{<div class="FRAME">}}
  {\HCode{</div>}\par\ShowPar}
\Configure{FFRAME}
  {\EndP \IgnorePar\HCode{<div class="FRAME">}}
  {\HCode{</div>}\par\ShowPar}
\Configure{IFRAME}
  {\ifvmode \IgnorePar \fi}  {}
\Css{div.FRAME {text-align:center;}}
\expandafter\ifx \csname @TCItagstar\endcsname\relax 
   |<tcilatex 2.5|>
\else
   |<tcilatex 3.5|>
\fi
>>>



\<configure html-speech-math tcilatex\><<<
\expandafter\ifx \csname @TCItagstar\endcsname\relax 
   |<tcilatex 2.5 math|>
\else
   |<tcilatex 3.5 math|>
   \ifx \@msidraft\:Undef
      |<tcilatex 3.5 not 4.0 math|>
\fi \fi
>>>

\<tcilatex 3.5 not 4.0 math\><<<
\Configure{dfrac}
   {\Picture+{ align="middle"}\bgroup} {}
   {} {\egroup\EndPicture}
\Configure{tfrac}
   {\Picture+{ align="middle"}\bgroup} {}
   {} {\egroup\EndPicture}
\Configure{binom}
   {\Picture+{ align="middle"}\bgroup} {}
   {} {\egroup\EndPicture}
\Configure{tbinom}
   {\Picture+{ align="middle"}\bgroup} {}
   {} {\egroup\EndPicture}
\Configure{dbinom}
   {\Picture+{ align="middle"}\bgroup} {}
   {} {\egroup\EndPicture}
>>>

\<tcilatex 3.5 math\><<<
\Configure{QATOP}
   {\Picture+{ align="middle"}\bgroup} {}
   {} {\egroup\EndPicture}
\Configure{QDATOP}
   {\Picture+{ align="middle"}\bgroup} {}
   {} {\egroup\EndPicture}
\Configure{QTATOP}
   {\Picture+{ align="middle"}\bgroup} {}
   {} {\egroup\EndPicture}
>>>







\<configure html-speech seslideb\><<<
\ConfigureEnv{center}
  {\IgnorePar \par \EndP \HCode{<div class="center"\Hnewline>}}
  {\ifvmode\IgnorePar\fi\EndP\HCode{</div>}}
  {} {}
{\Configure{Needs}{Font\string_Size: #1}%
   \expandafter\Needs\expandafter{\csname normalsize@fsize\endcsname}}
>>>

\<configure html-speech seslideb\><<<
\ConfigureToc{swSlide}
   {} {\relax  }  {}  { }
\:CheckOption{0}     
   \if:Option  \else    \:CheckOption{1} \fi
\if:Option 
   \:CheckOption{1} \if:Option
      \CutAt{swSlide} 
      \Configure{crosslinks}{}{}{}{}{}{}{}{}
   \fi
   |<seslideb toc|>
   |<seslideb page break|>
\else
   |<handle my missing sw fonts|>
   \Log:Note{pagination may be obtained
       through the option `0' or `1', at locations marked with
       \noexpand\csname PageBreak\string\endcsname}
\fi
>>>

\<handle my missing sw fonts\><<<
\Configure{swSlide}{}{}{\bgroup\bf}{\egroup}
>>>



\<seslideb toc\><<<
\def\:temp{%
   \ifOption{1}{\par\IgnorePar\EndP\HCode{<hr />}\par}{}
   \HAssign\TocN=1
   \def\swTitle{\gHAdvance\TocN by 1 \TocN}\:TableOfContents[swSlide]
   \let\swTitle=\relax 
   \ifOption{0}{\par\IgnorePar\EndP\HCode{<hr />}\par}{}
   \let\swSlide=\o:swSlide: \let\o:swSlide:=\empty \swSlide}
\HLet\swSlide=\:temp   
>>>


\<seslideb page break\><<<
\Configure{swSlide}
  {\gHAdvance\swSlideN by 1 \Link{}{s-\swSlideN}\EndLink }
  {\rightline{
       {\HAdvance\swSlideN by -1 \Link{s-\swSlideN}{}\swSlideN\EndLink}
       \Link[\jobname.html]{}{}\HCode{&lt;&gt;}\EndLink{}
       {\HAdvance\swSlideN by 1 
         \ifTag{)Qs-\swSlideN}{\Link{s-\swSlideN}{}\swSlideN\EndLink}{}}
     }
     \ifOption{0}{\par \IgnorePar\EndP\HCode{<hr />}\par}{}
   }
   {\IgnorePar\bgroup \bf }
   {\egroup \ShowPar\IgnoreIndent\par}
\HAssign\swSlideN=1
>>>





%%%%%%%%%%%%%%%%%%
\section{minitoc}

\<configure html-speech minitoc\><<<
   |<minitoc.sty Configure 4.0t|>
>>>

\<minitoc.sty Configure 4.0t\><<<
\Configure{minitoc}
   {\Configure{tableofcontents}
      {\HCode{<div class="minitoc"><hr\xml:empty>}\IgnorePar}{}
      {\IgnorePar\HCode{<hr\xml:empty></div>}\ShowPar}
      {\HCode{<br\xml:empty>}}{}}  {}
   {\HCode{<div class="minitoc-\TocOption">}}  {\HCode{</div>}}
\Configure{minilof}
   {\Configure{tableofcontents}
      {\HCode{<div class="minilof"><hr\xml:empty>}\IgnorePar}{}
      {\IgnorePar\HCode{<hr\xml:empty></div>}\ShowPar}
      {\HCode{<br\xml:empty>}}{}}  {}
   {\HCode{<div class="minilof-\TocOption">}}  {\HCode{</div>}}
\Configure{minilot}
   {\Configure{tableofcontents}
      {\HCode{<div class="minilot"><hr\xml:empty>}\IgnorePar}{}
      {\IgnorePar\HCode{<hr\xml:empty></div>}\ShowPar}
      {\HCode{<br\xml:empty>}}{}}  {}
   {\HCode{<div class="minilot-\TocOption">}}  {\HCode{</div>}}
\Css{.minitoc-l,.minilot-l,.minilof-l
   {text-align:left;margin-left:3em;}}
\Css{.minitoc-c,.minilot-c,.minilof-c
   {text-align:center;margin-left:3em;}}
\Css{.minitoc-r,.minilot-r,.minilof-r
   {text-align:right;margin-left:3em;}}
\Css{DIV.minitoc,DIV.minilot,DIV.minilof{margin-left:3em;}}
\Css{.minitoc .sectionToc { font-weight:bold;} }
>>>

Only one of the following is needed for a given document!!!

\<minitoc.sty Configure 4.0t\><<<
\Configure{parttoc}{}{}
   {\HCode{<div class="parttoc-\TocOption">}} {\HCode{</div>}}
\Configure{partlof}{}{}
   {\HCode{<div class="partlof-\TocOption">}} {\HCode{</div>}}
\Configure{partlot}{}{}
   {\HCode{<div class="partlot-\TocOption">}} {\HCode{</div>}}
\Css{.parttoc-l,.partlof-l,.partlot-l{text-align:left;}}
\Css{.parttoc-c,.partlof-c,.partlot-c{text-align:center;}}
\Css{.parttoc-r,.partlof-r,.partlot-r{text-align:right;}}
>>>
\<minitoc.sty Configure 4.0t\><<<
\Configure{secttoc}{}{}
   {\HCode{<div class="secttoc-\TocOption">}} {\HCode{</div>}}
\Configure{sectlof}{}{}
   {\HCode{<div class="sectlof-\TocOption">}} {\HCode{</div>}}
\Configure{sectlot}{}{}
   {\HCode{<div class="sectlot-\TocOption">}} {\HCode{</div>}}
\Css{.secttoc-l,.sectlof-l,.sectlot-l{text-align:left;}}
\Css{.secttoc-c,.sectlof-c,.sectlot-c{text-align:center;}}
\Css{.secttoc-r,.sectlof-r,.sectlot-r{text-align:right;}}
>>>

%%%%%%%%%%%%%%%%%%%
\section{alltt.sty}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech alltt\><<<
\ConfigureEnv{alltt}
   {\IgnorePar\EndP\HCode{<div class="alltt">}}
   {\IgnorePar\EndP\HCode{</div>}} {}{}
\Css{.alltt P { margin-bottom : 0em; margin-top : 0em; }}
\Css{.alltt { margin-bottom : 1em; margin-top : 1em; }}
>>>

%%%%%%%%%%%%%%%%%%%
\section{url.sty}
%%%%%%%%%%%%%%%%%%%

\<configure html-speech url\><<<
\:CheckOption{url-il2-pl} \if:Option
\else \:CheckOption{url-enc} \fi
\if:Option
   \Configure{string-encoder}{url-encoder}
%   \:CheckOption{url-il2-pl} \if:Option
      |<il2-pl.tcx url encoder|>
%   \else      
      |<default url encoder WAIT|>
%      \Log:Note{for il2-pl url encoding,
%                        use the command line option 'url-il2-pl'}
%   \fi
   \Configure{url}%
     {|<:temp = url encoded string|>%
      \Link[\noexpand\the\tmp:toks \space
               class="url"]{}{}{\let\UrlBigBreaks\empty
                         \let\UrlBreaks\empty #1}\EndLink}
   |<url encoded string utilities|>
\else
   \Log:Note{for URL encoding within href
          use the command line option `url-enc'}
   \Configure{url}%
     {\tmp:toks{#1}\Link[\noexpand\the\tmp:toks\space
               class="url"]{}{}{\let\UrlBigBreaks\empty
                         \let\UrlBreaks\empty #1}\EndLink}
\fi
|<path config|>
>>>

\<:temp = url encoded string\><<<
\tmp:toks={}\set:spaces#1|<par del|>%
\edef\:temp{\tmp:toks{\csname url-encoder\expandafter\endcsname
                      \the\tmp:toks |<par del|>}}\:temp
>>>

\<url encoded string utilities\><<<
\def\set:spaces{\futurelet\:temp\set:spacesoo}
\def\set:spacesoo{%
   \expandafter\ifx \space\:temp 
      \tmp:toks\expandafter{\the\tmp:toks{ }}%
   \fi    
   \set:spaceso
} 
\def\set:spaceso#1#2|<par del|>{%
   \tmp:toks\expandafter{\the\tmp:toks #1}%
   \if :#2:\else \set:spaces#2|<par del|>\fi
}
>>>

\<default url encoder\><<<
\Configure{url-encoder}
     {%}{%25}
     {&}{%26}
     {'}{%27}
     {<}{%3C}
     {>}{%3E}
     {_}{_}
     {^}{^}
     {}{}
\Log:Note{current url encoding setting: \string\Configure{url-encoder}%
     {\%}{\%25}%
     {&}{\%26}%
     {'}{\%27}%
     {<}{\%3C}%
     {>}{\%3E}%
     {\string _}{\string _}%
     {\string ^}{\string ^}%
     {}{}}
>>>




\<il2-pl.tcx url encoder\><<<
\Configure{url-encoder}
      {%}{%25}
      {&}{%26}
      {'}{%27}
      {<}{%3C}
      {>}{%3E}
      {_}{_}
      {^}{^}
      {}{&#x0105;}
      {}{&#x0107;}
      {}{&#x0119;}
      {}{&#x0142;}
      {}{&#x00F3;}
      {}{&#x0144;}
      {}{&#x015B;}
      {}{&#x017A;}
      {}{&#x017C;}
      {}{&#x0104;}
      {}{&#x0106;}
      {}{&#x0118;}
      {}{&#x0141;}
      {}{&#x00D3;}
      {}{&#x0143;}
      {}{&#x015A;}
      {}{&#x0179;}
      {}{&#x017B;}
      {}{}
>>>


\Link[http://www.faqs.org/rfcs/rfc2396.html]{}{}http://www.faqs.org/rfcs/rfc2396.html\EndLink

See issues in:

\begin{verbatim}
\documentclass{article} 
  \usepackage{url} 
\begin{document} 
 
\url{a%b c&d} 
 
\url{a%25b+c&amp;d} 
 
\end{document} 
\end{verbatim}

\<\><<<
\expandafter\ifx\csname Url@OT1encSpecials\endcsname\relax
   |<url.sty|>  
\else
   |<url-2004.sty|>  
\fi
>>>

\<url-2004.styNO\><<<

>>>

\<url.styNO\><<<
\Configure{url}{\Link[#1 class="url"]{}{}{\let\UrlBigBreaks\empty
                   \let\UrlBreaks\empty #1}\EndLink}
>>>

%%%%%%%%%%%%%%%%%%
\section{Path.sty}
%%%%%%%%%%%%%%%%%%

\<path config\><<<
\Configure{path}
  {\HCode{<span class="path">}\bgroup
   \Configure{obeylines}{}{}{}%
  }
  {\egroup\HCode{</span>}}
>>>

\<configure html-speech path\><<<
|<path config|>
>>>


%%%%%%%%%%%%%%%%%%%%%%%%
\section{fontmath}
%%%%%%%%%%%%%%%%%%%%%%%%



\<configure html-speech latex\><<<
\:CheckOption{fonts} \if:Option
  \Configure{textbf}{\Protect\HCode{<span class="textbf">}}
                    {\Protect\HCode{</span>}}
  \Configure{textit}{\Protect\HCode{<span class="textit">}}
                    {\Protect\HCode{</span>}}
  \Configure{textrm}{\Protect\HCode{<span class="textrm">}}
                    {\Protect\HCode{</span>}}
  \Configure{textup}{\Protect\HCode{<span class="textup">}}
                    {\Protect\HCode{</span>}}  
  \Configure{textsc}{\Protect\HCode{<span class="textsc">}}
                    {\Protect\HCode{</span>}}
  \Configure{textsf}{\Protect\HCode{<span class="textsf">}}
                    {\Protect\HCode{</span>}}  
  \Configure{textsl}{\Protect\HCode{<span class="textsl">}}
                    {\Protect\HCode{</span>}}
  \Configure{texttt}{\Protect\HCode{<span class="texttt">}}
                    {\Protect\HCode{</span>}}
  \Configure{emph}{\Protect\HCode{<span class="emph">}}
                    {\Protect\HCode{</span>}}
  \Css{span.textbf { font-weight: bold; }}
  \Css{span.textit { font-style: italic; }}
  \Css{span.textrm { font-family: serif; }}
  \Css{span.textsc { font-variant: small-caps; }}
  \Css{span.textsf { font-family: sans-serif; }}
  \Css{span.texttt { font-family: monospace; }}
\else
  \Log:Note{for tracing of latex font commands, 
          use the command line option `fonts'}
\fi
>>>

\<configure html-speech-math fontmath\><<<
\:CheckOption{fonts} \if:Option
  \Configure{mathit}{\Protect\HCode{<span class="mathit">}}
                    {\Protect\HCode{</span>}}
  \Configure{mathbf}{\Protect\HCode{<span class="mathbf">}}
                    {\Protect\HCode{</span>}}
  \Configure{mathtt}{\Protect\HCode{<span class="mathtt">}}
                    {\Protect\HCode{</span>}}
  \Configure{mathsf}{\Protect\HCode{<span class="mathsf">}}
                    {\Protect\HCode{</span>}}
  \Configure{mathrm}{\Protect\HCode{<span class="mathrm">}}
                    {\Protect\HCode{</span>}}
\fi
>>>









\<configure html-speech-math amsfonts\><<<  
\:CheckOption{fonts} \if:Option
  \Configure{mathbb}{\Protect\HCode{<span class="mathbb">}}
                    {\Protect\HCode{</span>}}
  \Configure{mathfrak}{\Protect\HCode{<span class="mathfrak">}}
                    {\Protect\HCode{</span>}}
\fi
>>>






\subsection{1: Large Operators}

\begin{verbatim}
\mathchardef\coprod="1360
\mathchardef\bigvee="1357
\mathchardef\bigwedge="1356
\mathchardef\biguplus="1355
\mathchardef\bigcap="1354
\mathchardef\bigcup="1353
\mathchardef\intop="1352 \def\int{\intop\nolimits}
\mathchardef\prod="1351
\mathchardef\sum="1350
\mathchardef\bigotimes="134E
\mathchardef\bigoplus="134C
\mathchardef\bigodot="134A
\mathchardef\ointop="1348 \def\oint{\ointop\nolimits}
\mathchardef\bigsqcup="1346
\mathchardef\smallint="1273
\end{verbatim}



\<plain tex classes\><<<
\Configure{MathClass}{1}{}{}{}{
   \mathchar"1360
   \mathchar"1357
   \mathchar"1356
   \mathchar"1355
   \mathchar"1354
   \mathchar"1353
   \mathchar"1352
   \mathchar"1351
   \mathchar"1350
   \mathchar"134E
   \mathchar"134C
   \mathchar"134A
   \mathchar"1348
   \mathchar"1346
   \mathchar"1273
}
>>>
\subsection{2: Binary Operations}

\begin{verbatim}
\mathchardef\triangleleft="212F
\mathchardef\triangleright="212E
\mathchardef\bigtriangleup="2234
\mathchardef\bigtriangledown="2235
\mathchardef\wedge="225E \let\land=\wedge
\mathchardef\vee="225F \let\lor=\vee
\mathchardef\cap="225C
\mathchardef\cup="225B
\mathchardef\ddagger="227A
\mathchardef\dagger="2279
\mathchardef\sqcap="2275
\mathchardef\sqcup="2274
\mathchardef\uplus="225D
\mathchardef\amalg="2271
\mathchardef\diamond="2205
\mathchardef\bullet="220F
\mathchardef\wr="226F
\mathchardef\div="2204
\mathchardef\odot="220C
\mathchardef\oslash="220B
\mathchardef\otimes="220A
\mathchardef\ominus="2209
\mathchardef\oplus="2208
\mathchardef\mp="2207
\mathchardef\pm="2206
\mathchardef\circ="220E
\mathchardef\bigcirc="220D
\mathchardef\setminus="226E % for set difference A\setminus B
\mathchardef\cdot="2201
\mathchardef\ast="2203
\mathchardef\times="2202
\mathchardef\star="213F
\mathcode`\*="2203 % \ast
\mathcode`\+="202B
\mathcode`\-="2200
\end{verbatim}

\<plain tex classes\><<<
\Configure{MathClass}{2}{}{}{}{
*-+/
\mathchar"212F
\mathchar"212E
\mathchar"2234
\mathchar"2235
\mathchar"225E 
\mathchar"225F 
\mathchar"225C
\mathchar"225B
\mathchar"227A
\mathchar"2279
\mathchar"2275
\mathchar"2274
\mathchar"225D
\mathchar"2271
\mathchar"2205
\mathchar"220F
\mathchar"226F
\mathchar"2204
\mathchar"220C
\mathchar"220B
\mathchar"220A
\mathchar"2209
\mathchar"2208
\mathchar"2207
\mathchar"2206
\mathchar"220E
\mathchar"220D
\mathchar"226E 
\mathchar"2201
\mathchar"2203
\mathchar"2202
\mathchar"213F
}
>>>
\subsection{3: Relational Operations}

The catcode is needed because 303A is \verb':'.

\<plain tex classes\><<<
\Configure{MathClass}{3}{}{}{}{
   \mathchar"3128
   \mathchar"3129
   \mathchar"312A
   \mathchar"312B
   \mathchar"315E
   \mathchar"315F
   \mathchar"3210
   \mathchar"3211
   \mathchar"3212
   \mathchar"3213
   \mathchar"3214
   \mathchar"3215
   \mathchar"3216
   \mathchar"3217
   \mathchar"3218
   \mathchar"3219
   \mathchar"321A
   \mathchar"321B
   \mathchar"321C
   \mathchar"321D
   \mathchar"321E
   \mathchar"321F
   \mathchar"3220
   \mathchar"3221
   \mathchar"3224
   \mathchar"3227
   \mathchar"3232
   \mathchar"3233
   \mathchar"3236
   \mathchar"3237
   \mathchar"323F
   :=><
   \mathchar"322F
   \mathchar"3276
   \mathchar"3277
   \mathchar"326B
   \mathchar"326A
   \mathchar"3261
   \mathchar"3260
   \mathchar"3225
   \mathchar"3226
   \mathchar"322D
   \mathchar"322E
   \mathchar"322C
   \mathchar"3228
   \mathchar"3229
}
>>>



\begin{verbatim}
\mathcode`\>="313E
\mathcode`\<="313C
\mathcode`\=="303D
\mathcode`\:="303A
\mathchardef\leq="3214 \let\le=\leq
\mathchardef\geq="3215 \let\ge=\geq
\mathchardef\succ="321F
\mathchardef\prec="321E
\mathchardef\approx="3219
\mathchardef\succeq="3217
\mathchardef\preceq="3216
\mathchardef\supset="321B
\mathchardef\set="321A
\mathchardef\supseteq="3213
\mathchardef\seteq="3212
\mathchardef\in="3232
\mathchardef\ni="3233 \let\owns=\ni
\mathchardef\gg="321D
\mathchardef\ll="321C
\mathchardef\not="3236
\mathchardef\leftrightarrow="3224
\mathchardef\leftarrow="3220 \let\gets=\leftarrow
\mathchardef\rightarrow="3221 \let\to=\rightarrow
\mathchardef\mapstochar="3237 \def\mapsto{\mapstochar\rightarrow}
\mathchardef\sim="3218
\mathchardef\simeq="3227
\mathchardef\perp="323F
\mathchardef\equiv="3211
\mathchardef\asymp="3210
\mathchardef\smile="315E
\mathchardef\frown="315F
\mathchardef\leftharpoonup="3128
\mathchardef\leftharpoondown="3129
\mathchardef\rightharpoonup="312A
\mathchardef\rightharpoondown="312B
\mathchardef\propto="322F
\mathchardef\sqsubseteq="3276
\mathchardef\sqsupseteq="3277
\mathchardef\parallel="326B
\mathchardef\mid="326A
\mathchardef\dashv="3261
\mathchardef\vdash="3260
\mathchardef\nearrow="3225
\mathchardef\searrow="3226
\mathchardef\nwarrow="322D
\mathchardef\swarrow="322E
\mathchardef\Leftrightarrow="322C
\mathchardef\Leftarrow="3228
\mathchardef\Rightarrow="3229
\end{verbatim}
\subsection{4/5: Delimiters}

\begin{verbatim}
\mathcode`\(="4028
\mathcode`\)="5029
\mathcode`\[="405B
\mathcode`\]="505D
\mathcode`\{="4266
\mathcode`\}="5267
\delcode`\(="028300
\delcode`\)="029301
\delcode`\[="05B302
\delcode`\]="05D303
\def\lmoustache{\delimiter"437A340 } % top from (, bottom from )
\def\rmoustache{\delimiter"537B341 } % top from ), bottom from (
\def\lgroup{\delimiter"462833A } % extensible ( with sharper tips
\def\rgroup{\delimiter"562933B } % extensible ) with sharper tips
\def\backslash{\delimiter"26E30F } % for double coset G\backslash H
\def\rangle{\delimiter"526930B }
\def\langle{\delimiter"426830A }
\def\rbrace{\delimiter"5267309 } \let\}=\rbrace
\def\lbrace{\delimiter"4266308 } \let\{=\lbrace
\def\rceil{\delimiter"5265307 }
\def\lceil{\delimiter"4264306 }
\def\rfloor{\delimiter"5263305 }
\def\lfloor{\delimiter"4262304 }
\def\arrowvert{\delimiter"26A33C } % arrow without arrowheads
\def\Arrowvert{\delimiter"26B33D } % double arrow without arrowheads
\def\bracevert{\delimiter"77C33E } % the vertical bar that extends braces
\def\Vert{\delimiter"26B30D } \let\|=\Vert         How should these be treated?
\def\vert{\delimiter"26A30C }                       "   "       "    "   "
\def\uparrow{\delimiter"3222378 }
\def\downarrow{\delimiter"3223379 }
\def\updownarrow{\delimiter"326C33F }
\def\Uparrow{\delimiter"322A37E }
\def\Downarrow{\delimiter"322B37F }
\def\Updownarrow{\delimiter"326D377 }
\end{verbatim}

The comamnds \verb'\Configure{MathClass}{4}...'
and \verb'\Configure{MathClass}{5}...'
are for unmatched delimiters, and the comamnd
\verb'\Configure{MathDelimiters}{(}{)}' is for matched ones.


\<plain tex classes\><<<
\Configure{MathClass}{4}{}{}{}{}
\Configure{MathDelimiters}{(}{)}
\Configure{MathDelimiters}{[}{]}
\Configure{MathDelimiters}{\mathchar"4262}{\mathchar"5263}
\Configure{MathDelimiters}{\mathchar"4264}{\mathchar"5265}
\Configure{MathDelimiters}{\mathchar"4266}{\mathchar"5267}
\Configure{MathDelimiters}{\mathchar"4268}{\mathchar"5269}
\Configure{MathDelimiters}{\mathchar"4300}{\mathchar"5301}
\Configure{MathDelimiters}{\mathchar"4302}{\mathchar"5303}
\Configure{MathDelimiters}{\mathchar"4304}{\mathchar"5305}
\Configure{MathDelimiters}{\mathchar"4306}{\mathchar"5307}
\Configure{MathDelimiters}{\mathchar"4308}{\mathchar"5309} 
\Configure{MathDelimiters}{\mathchar"430A}{\mathchar"530B}
>>>

\begin{verbatim}
\mathcode`\?="503F
\end{verbatim}


\subsection{6: Punctuation Marks}

\begin{verbatim}
\mathchardef\ldotp="613A % ldot as a punctuation mark
\mathchardef\cdotp="6201 % cdot as a punctuation mark
\mathchardef\colon="603A % colon as a punctuation mark
\mathcode`\;="603B
\mathcode`\,="613B
\end{verbatim}



\<plain tex classes\><<<
\Configure{MathClass}{6}{}{}{}{
\mathchar"613A 
\mathchar"6201 
\mathchar"603A 
?; ,
}
>>>


\subsection{Questions}

\begin{verbatim}
\delcode`\<="26830A
\delcode`\>="26930B
\delcode`\|="26A30C
\delcode`\\="26E30F

% N.B. { and } should NOT get delcodes; otherwise parameter grouping fails!

\def\mathhexbox#1#2#3{\leavevmode
  \hbox{$\m@th \mathchar"#1#2#3$}}
\def\dag{\mathhexbox279}
\def\ddag{\mathhexbox27A}
\def\S{\mathhexbox278}
\def\P{\mathhexbox27B}
\end{verbatim}


\subsection{Type 4: Math Open}
latex.ltx, fontmath.ltx, plain.tex



\section{fleqn.sty}

\<configure html-speech-math fleqn\><<<
\Configure{equation}
  {\:xhtml{\IgnorePar\EndP}%
           \HCode{<\tbl:XV{equation}><tr><td>}\IgnorePar

  }
  {\IgnorePar\HCode{</td><td width="5\%">}}
  {\end:TTT\IgnorePar\par}
>>>
\section{emulateapj.clo}

\<configure html-speech emulateapj\><<<
\Configure{slugcomment}
   {\HCode{<div class="slugcomment">}}
   {\HCode{</div>}}
\Css{.slugcomment{text-align:center;font-size:85\%;
                  font-style: italic;}}
\Configure{subtitle}{\HCode{<div class="subtitle">}}{\HCode{</div>}}
\Configure{submitted}{}{\Tg<br\xml:empty>}
\Configure{title}{\HCode{<h1 class="title">}}{\HCode{</h1>}}
\Css{.title{text-align:center;}}
\Configure{author}
   {\IgnorePar\EndP\HCode{<div class="author">}}{\HCode{</div>}}
\Css{div.author{text-align:center;}}
\Configure{affil}{\HCode{<div class="affil"><div>}}{\HCode{</div></div>}}
\Css{.affil{text-align:center;}}
\Css{.affil div{text-align:left;
   margin-right:15pt;margin-left:15pt;}}
\Configure{keywords}
   {\IgnorePar\EndP\HCode{<div class="keywords"><div>}}
   {\HCode{</div></div>}}
\Css{.keywords{text-align:center;}}
\Css{.keywords div{text-align:left; margin-right:15pt;margin-left:30pt;
   text-indent:-15pt;}}
\Configure{subjectheadings}
   {\HCode{<div class="subjectheadings"><div>}}{\HCode{</div></div>}}
\Css{.subjectheadings{text-align:center;}}
\Css{.subjectheadings div{text-align:left;
   margin-right:15pt;margin-left:15pt;}}

\Css{.abstract {margin-right:15pt;margin-left:15pt;}}
\ConfigureMark{section}
   {\ifnum \c:secnumdepth>\c@secnumdepth  \expandafter\:gobble
    \else 
       \HCode{<span class="titlemark">}\@seccntformat{section}%
       \thesection\HCode{</span>}\fi}
\Configure{section}{}{}
   {\IgnorePar \EndP\IgnorePar\HCode{<h3 class="sectionHead"\a:LRdir>}
    \TitleMark{. \space}}
   {\HCode{</h3>}\IgnoreIndent \par}
\ConfigureEnv{references}
  {\IgnorePar\EndP\Tg<div class="references">}  
  {\IgnorePar\EndP\Tg</div>} {}{}
\Css{.references p { margin: 0.35em; text-indent:-2em;margin-left:2em;}}
>>>

%%%%%%%%%%%%%%%%%
\section{vanilla}

\<configure html-speech vanilla\><<<
|<32 amsppt, 32,4 vanilla|>
|<32,4 vanilla|>
|<config vanilla.sty 4.0t|>
>>>


\<32,4 vanilla\><<<
\Configure{matrix}
   {\EndP\HCode{<center><table\Hnewline
        border="0" cellpadding="0" cellspacing="15" class="matrix">}}
   {\HCode{</table></center>}\IgnorePar}
   {\HCode{<tr\Hnewline valign="top">}}{\HCode{</tr>}}
   {\HCode{<td>}}   {\HCode{</td>}}
\Configure{align}
   {\EndP\HCode{<center><table\Hnewline
        border="0" cellpadding="0" cellspacing="15" class="align">}}
   {\HCode{</table></center>}\IgnorePar}
   {\HCode{<tr\Hnewline valign="top">}}{\HCode{</tr>}}
   {\HCode{<td>}}   {\HCode{</td>}}
>>>
\<config vanilla.sty 4.0t\><<<
\Configure{heading}
   {}{}{\IgnorePar\EndP\HCode{<h2 class="heading">}}{\HCode{</h2>}}
\ConfigureToc{heading}
  {}{\HCode{<span class="heading">}}{}{\HCode{</span><br\xml:empty>}}
\Configure{subheading}
  {}{}{\EndP\HCode{<h3 class="subheading">}}{.\HCode{</h3>}}
\ConfigureToc{subheading}
  {}{\HCode{<span class="subheading">}}{}{\HCode{</span><br\xml:empty>}}
\Configure{demo}
    {\IgnorePar\EndP\HCode{<div class="demo"><span class="demo">}}
    {\HCode{</span>}}    {\IgnorePar\EndP\HCode{</div>}}
>>>


\<config vanilla.sty 4.0t\><<<
\Configure{aligned}
   {\EndP\HCode{<center><table\Hnewline
        border="0" cellpadding="0" cellspacing="15" class="aligned">}}
   {\HCode{</table></center>}\IgnorePar}
   {\HCode{<tr\Hnewline valign="top">}}{\HCode{</tr>}}
   {\HCode{<td>}}   {\HCode{</td>}}
>>>



%%%%%%%%%%%%%%%%%%%%%%
\section{tugboat}
%%%%%%%%%%%%%%%%%%%%%%


\<configure html-speech tugboat\><<<
\Configure{head}{}{} 
   {\NoFonts \ifvmode \IgnorePar\fi \EndP\IgnorePar 
    \HCode{<h3 class="headHead"\a:LRdir>}\HtmlParOff} 
   {\HCode{</h3>}\HtmlParOn \EndNoFonts \IgnoreIndent \ShowPar \par} 
\Configure{subhead}{}{} 
   {\NoFonts \ifvmode \IgnorePar\fi \EndP\IgnorePar 
    \HCode{<h4 class="subheadHead"\a:LRdir>}\HtmlParOff} 
   {\HCode{</h4>}\HtmlParOn \EndNoFonts \IgnoreIndent \ShowPar \par} 
\Configure{subsubhead}{}{} 
   {\NoFonts \ifvmode \IgnorePar\fi \EndP\IgnorePar 
    \HCode{<h5 class="subsubheadHead"\a:LRdir>}\HtmlParOff} 
   {\HCode{</h5>}\HtmlParOn \EndNoFonts \IgnoreIndent \ShowPar \par} 
>>>


\<configure html-speech tugboat\><<<
\Configure{figure}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="figure">}\par\ShowPar}  
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}\par}  
>>>


\<configure html-speech tugboat\><<<
\Configure{verbatim}
   {{\everypar{}\leavevmode}\EndP
    \HCode{<div class="verbatim\:ruled">}\par\ShowPar}  
   {{\everypar{}\leavevmode}\EndP \HCode{</div>}\par\ShowPar}  
\Configure{verb}
   {\HCode{<span class="verb">}}  
   {\HCode{</span>}}  
\Css{div.verbatim p, div.verbatim-ruled p {margin:0.2em}}
\Css{div.verbatim-ruled { border-top: 1px solid black; 
                          border-bottom: 1px solid black; }}
>>>


\<configure html-speech tugboat\><<<
\Configure{display-list}
   {\ifvmode \IgnorePar\fi \EndP \HCode{<div class="list"><!--cols: \the\@cols-->}\par\ShowPar}  
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}\par}  
   {\HCode{<span class="listitem">}}
   {\HCode{</span>}}
\Configure{inline-list}
   {\HCode{<span class="list"><!--cols: \the\@cols-->}\par\ShowPar}  
   {\ifvmode \IgnorePar\fi \EndP \HCode{</span>}\par}  
   {\HCode{<span class="listitem">}}
   {\HCode{</span>}}
\Css{div.list p span.listitem {text-indent:-3em; margin-right:1em;}} 
\Css{div.list { margin-left:3em;}} 
>>>

\<configure html-speech tugboat\><<<
\Configure{rtitle}
   {\ifvmode \IgnorePar \fi  \EndP  
    \HCode{<div class="rtitle">}\IgnorePar}  
   {\HCode{</div>}\ShowPar\par}
\Configure{title} 
   {\ifvmode \IgnorePar \fi  \EndP 
    \HCode{<h2 class="title">}\IgnorePar} 
   {\HCode{</h2>}\IgnoreIndent\par} 
\Configure{address} 
   {\ifx\@addressstyle\@inlinestyle
       \HCode{<span class="address">}%
    \else
       \ifvmode \IgnorePar \fi  \EndP 
       \HCode{<div class="address">}%
    \fi } 
   {\ifx\@addressstyle\@inlinestyle
       \HCode{</span>}%
    \else
       \ifvmode \IgnorePar \fi  \EndP 
       \HCode{</div>}%
    \fi } 
\Configure{netaddress} 
   {\HCode{<span class="netaddress">}} 
   {\HCode{</span>}} 
\Configure{author} 
   {\HCode{<span class="author">}} 
   {\HCode{</span>}} 
\Configure{authorlist}
   {\ifvmode \IgnorePar \fi  \EndP 
    \HCode{<div class="authorlist">}\IgnorePar} 
   {\ifvmode \IgnorePar \fi  \EndP 
    \HCode{</div>}\IgnoreIndent\par\ShowPar}    
\Css{div.authorlist {margin-left:2em;}}
|<tugboat cmn|>
>>>

\<tugboat cmn\><<<
\Configure{signature}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<div class="signature">}\par\ShowPar}  
   {\ifvmode \IgnorePar\fi \EndP \HCode{</div>}\ShowPar\par}  
\Css{div.signature p{ margin-top:0.3em; margin-bottom:0.3em;}}
\Css{div.signature { white-space:nowrap; margin-left:70\%;  }}
\Configure{signaturemark}
   {\HCode{<span class="signaturemark">} }  
   {\HCode{</span>}}  
\Css{span.signaturemark {margin-top:1.5em;}}
>>>



\<tugboat cmn\><<<
\Configure{issno}
   {\hbox{\HCode{<span class="issno">}}}
   {\hbox{\HCode{</span>}}}
\Configure{volyr}
   {\hbox{\HCode{<span class="volyr">}}}
   {\hbox{\HCode{</span>}}}
\Configure{volno}
   {\hbox{\HCode{<span class="volno">}}}
   {\hbox{\HCode{</span>}}}
>>>

%%%%%%%%%%%%%%%%%%%%%%
\section{ltug boat/proc}
%%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech ltugboat\><<<
|<quote noindent config|>
\ConfigureEnv{verbatim}
   {\par}{|<try inline par|>}{}{}
\Configure{author}
   {\hbox{\HCode{<span class="author">}}}
   {\hbox{\HCode{<br /></span>}}}
\Configure{address}
   {\hbox{\HCode{<span class="address">}}}
   {\hbox{\HCode{<br /></span>}}}
\Configure{netaddress}
   {\hbox{\HCode{<span class="netaddress">}}}
   {\hbox{\HCode{<br /></span>}}}
\Configure{PersonalURL}
   {\hbox{\HCode{<span class="PersonalURL">}}}
   {\hbox{\HCode{<br /></span>}}}
\Configure{signaturemark}
   {\hbox{\HCode{<span class="signaturemark">}}}
   {\hbox{\HCode{</span> }}}
>>>


\<configure html-speech ltugboat\><<<
\Configure{makesignature}
   {\ifvmode \IgnorePar\fi \EndP
    \HCode{<div class="makesignature">}%
    \bgroup     \Configure{HtmlPar}{}{}{}{}%
       \Configure{rightline}{}{}%
       \IgnorePar
   }
   {\egroup \ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
\Configure{signature}
   {\def\||{\HCode{<br />}}%
    \Configure{HtmlPar}
       {}{\HCode{<br />}}
       {}{\HCode{}}%
   }
\Css{.makesignature{margin-left:60\%; white-space: nowrap;}}
>>>




\<configure html-speech ltugboat\><<<
|<tug boat maketitle|>
\Configure{titlex}
   {\HCode{<div class="titlex">}}
   {\HCode{</div>}}
\Css{div.titlex p{margin-bottom:1em;}}
|<ltugboat congif|>
>>>


\<ltugboat congif\><<<
\Configure{sectitle}
   {\ifvmode \IgnorePar\fi 
    \EndP \HCode{<div class="sectitle">}%
    \SaveEndP\bgroup\everypar{}}
   {\egroup\RecallEndP \ifvmode \IgnorePar\fi \EndP \HCode{</div>}}
>>>


\<configure html-speech ltugproc\><<<
|<tug proc maketitle|>
\ConfigureEnv{abstract}
   {}{} {}{}
\Configure{abstract}
   {\bgroup
    \HCode{<div class="abstract">}\IgnoreIndent\par}
   {\ifvmode\IgnorePar\fi \EndP\HCode{</div>}\egroup}
\Css{div.abstract {margin-left:1em; margin-right:1em; 
                   text-align:left;}}
\Css{div.maketitle div.centerline {margin-top:1em;}}
>>>

\<configure html-speech ltugproc\><<<
\Configure{abstractHead}
   {\bgroup
      \Configure{centerline}{}{}
      \NoFonts
      \ifvmode \IgnorePar\fi \EndP \HCode{<h3>}%
   }
   {\ifvmode \IgnorePar\fi \EndP \HCode{</h3>}%
    \EndNoFonts \egroup}
>>>




%%%%%%%%%%%%%%%%%
\section{tex4ht}
%%%%%%%%%%%%%%%%%

\<configure html-speech tex4ht\><<<
|<config tex4ht|>
|<title for hypertext page|>
|<tex4ht doctype|>
>>>
   

\<config tex4ht\><<<
\:CheckOption{NoFonts} \if:Option
   \NoFonts
\else
   \Log:Note{to ignore CSS font decoration, use the `NoFonts'
       command line option}
\fi
>>>



\<config tex4ht\><<<
\Configure{HVerbatim+}{\z@}{\:nbsp}
\:CheckOption{jpg} \if:Option
   \Configure{Picture}{.jpg}  
\else
   \Log:Note{for jpg bitmaps, use the `jpg'
       command line option}
\fi
\:CheckOption{gif} \if:Option 
   \Configure{Picture}{.gif}  
\else
   \Log:Note{for gif bitmaps, use the `gif'
       command line option}
\fi
>>>





\<configure html-speech tex4ht\><<<
|<tex4ht HTML|>
>>>

\<configure html-speech tex4ht\><<<
\newif\ifHCond
|<global HtmlPar|>
\Css{p.noindent { text-indent: 0em }}
\Css{p.nopar { text-indent: 0em; }}
\Css{p.indent{ text-indent: 1.5em }}
\NewConfigure{!P}[1]{\expandafter\concat:config\csname a:!P\endcsname{#1}}
\expandafter\let\csname a:!P\endcsname|=\relax
\Configure{!P}{}
>>>

\<global HtmlPar\><<<
\Configure{HtmlPar}
  {\EndP\HCode{|<show input line no|><p \csname a:!P\endcsname
         class="no\ifHCond par\else indent\fi">}}
  {\EndP\HCode{|<show input line no|><p \csname a:!P\endcsname
        class="\ifdim \parindent=\z@ no\fi indent">}}
  {\:xhtml{\Tg</p>}}
  {\:xhtml{\Tg</p>}}%
>>>

\<configure html-speech tex4ht\><<<
\NewConfigure{!BODY}[1]{\expandafter\concat:config
  \csname a:!BODY\endcsname{#1}}
\expandafter\let\csname a:!BODY\endcsname|=\relax
\Configure{!BODY}{}
>>>

\<configure html-speech tex4ht\><<<
\NewConfigure{LRdir}[1]{\concat:config\a:LRdir{#1}}
\let\a:LRdir|=\relax
\Configure{LRdir}{}
>>>


\<configure html-speech tex4ht\><<<

\Css{@media print {div.crosslinks {visibility:hidden;}}}

\Configure{halignTR} 
   {\HCode{ valign="baseline"}}
\Configure{halignTBL} 
% %   {t}{\HCode{ valign="top"}}
% %   {b}{\HCode{ valign="baseline"}}
% %   {c}{\HCode{ valign="middle"}}
    {}

\Configure{halign}
   {\EndP\halignTB{halign}}   {\HCode{</table>}}
   \R:HA\r:HA\D:HA\d:HA
\Configure{pic-halign}{}
>>>

The following should be just under LaTeX.

\<configure html-speech tex4ht\><<<
\Configure{halignTD} {}{}
   {<}{\HCode{ style="white-space:nowrap; text-align:left;"}}
   {-}{\HCode{ style="white-space:nowrap; text-align:center;"}}
   {>}{\HCode{ style="white-space:nowrap; text-align:right;"}}
   {^}{\HCode{ valign="top" style="white-space:nowrap;"}}
   {=}{\HCode{ valign="baseline" style="white-space:nowrap;"}}
   {||}{\HCode{ valign="middle" style="white-space:nowrap;"}}
   {_}{\HCode{ valign="bottom" style="white-space:nowrap;"}}
   {p}{\HCode{ style="white-space:wrap; text-align:left;"}\Protect\a:HColWidth}
   {m}{\HCode{ style="white-space:nowrap; text-align:left;" valign="middle"}}
   {b}{\HCode{ style="white-space:nowrap; text-align:left;" valign="baseline"}}
   {}
\NewConfigure{HColWidth}{1}
\Configure{HColWidth}{}
>>>


The following code allows width specifications of p-columns of tables
through the command line option `p-width'.

The command line option activates a configuration similar to the
following ones.

   \Configure{HColWidth}
      {\HCode{ style="width:\HColWidth"}}

   \Configure{HColWidth}
      {\HCode{ style="width:
                      \ifnum \HCol=1 160\fi
                      \ifnum \HCol=3 500\fi
       "}}

Try the above examples with the following source under different font
sizes in the browser.

   \begin{tabular}{p{2cm}cp{3cm}}
   1 2 3 1 2 3 & x & 1 2 3 1 2 3
   \end{tabular}

The configuration provided through the command line option `p-width'
takes to some degree into account the size of fonts in use within the
HTML displays.  Yet, not all browsers react properly to the size
changes.





\<configure html-speech latex\><<<
\:CheckOption{p-width} \if:Option 
  |<10 em constant|>
  \Configure{HColWidth}
     {\tmp:dim=\HColWidth \divide\tmp:dim by \ten:Em\relax
      \tmp:dim=10\tmp:dim
      \HCode{ style="width:\expandafter\x:Em \the\tmp:dim em;"}}
\else
   \Log:Note{for width specifications of tabular p entries, use
       the `p-width' command line option or a configuration similar
       to \string\Configure{HColWidth}{\string\HCode
       { style="width:\string\HColWidth"}}}
\fi
>>>

\<configure html-speech tex4ht\><<<
|<img src dir|>
\Configure{IMG}
  {\ht:special{t4ht=<img\Hnewline src="|<a:imgdir|> }}
  {\ht:special{t4ht=" alt="}}
  {" }
  {\ht:special{t4ht=" }}
  {\ht:special{t4ht=\xml:empty>}}
\Css{a img { border-top: 0; border-left: 0; border-right: 0; }}
>>>




A change from the \verb'-' in the \verb'%' patterns of c to, say \verb'@',
requires a \verb'Font_hyphen: @' in the \verb'.lg' file for a match in the
css output of t4ht.

\<configure html-speech tex4ht\><<<
\Configure{htf}{0}{+}{<span\Hnewline
   class="}{\%s}{-\%s}{x-x-\%d}{}{">}{</span>}
|<img src dir|>
\Configure{htf}{1}{+}{<img\Hnewline
   src="|<a:imgdir|> }{" alt="}{" class="}{\%s}{-\%d}{x-x-\%x}{" />}
\Configure{htf}{3}{+}{<img\Hnewline
   src="|<a:imgdir|> }{" alt="}{" class="\%s-}{\%s}{-\%d}{x-x-\%x}%
   {" align="middle" />}
>>>


\<configure html-speech tex4ht\><<<
\Configure{htf}{4}{+}{<span\Hnewline
   class="}{}{}{}{}{small-caps">}{</span>}
\Configure{htf}{6}{+}{<u\Hnewline
   class="}{}{}{}{}{underline">}{</u>}
>>>

% \Configure{htf}{4}{+}{<span\Hnewline                               
%    class="}{}{}{}{}{small-caps">}{</span>}
% \Configure{htf}{6}{+}{<span\Hnewline                               
%    class="}{}{}{}{}{underline">}{</span>}


\<configure html-speech tex4ht\><<<
\Configure{htf}{8}{+}
   {<sup class="htf">}{}{}{}{}{}{</sup>}
\Configure{htf}{10}{+}
   {<span class="htf-cmbx">}{}{}{}{}{}{</span>}
\Configure{htf}{12}{+}
   {<span\Hnewline class="htf-calligraphy">}{}{}{}{}{}{</span>}
\Configure{htf}{14}{+}
   {<span\Hnewline class="htf-italic">}{}{}{}{}{}{</span>}
\Configure{htf}{16}{+}
   {<span\Hnewline class="htf-bold">}{}{}{}{}{}{</span>}
\Configure{htf}{18}{+}
   {<span\Hnewline class="htf-calligraphy-bold">}{}{}{}{}{}{</span>}
\Configure{htf}{20}{+}
   {<span\Hnewline class="htf-flip-hor">}{}{}{}{}{}{</span>}
\Configure{htf}{22}{+}
   {<sub class="htf">}{}{}{}{}{}{</sub>}
\Configure{htf}{24}{+}{<span\Hnewline
   class="}{}{}{}{}{small-caps">}{</span>}
\Configure{htf-css}{4}{.small-caps{font-variant: small-caps; }}  
\Configure{htf-css}{10}{.htf-cmbx {font-weight: bold; font-style:normal;}}
\Configure{htf-css}{12}{.htf-calligraphy {font-family:cursive}}   
\Configure{htf-css}{14}{.htf-italic {font-style: italic;}}
\Configure{htf-css}{16}{.htf-bold {font-weight: bold;}}   
\Configure{htf-css}{12}{.htf-calligraphy-bold {font-family:cursive ; 
   font-weight: bold; }}   
>>>



\verb'\Configure{htf}{0}{+}{<!--span  class="}{\%s}{-\%s}{--\%d}{}{"-->}{<!--/span-->}' caused netscape to
loose spaces between comments.

\<configure html-speech tex4ht\><<<
\Configure{@Picture}{\:class}
\def\:class#1{ class="#1"
       \expandafter\ifx\csname a:@#1\endcsname\relax\else
       \csname a:@#1\endcsname\fi}
>>>






\<configure html-speech tex4ht\><<<
\Css{center { margin-top:1em; margin-bottom:1em; }}
\Css{td center { margin-top:0em; margin-bottom:0em; }}
>>>

\<configure html-speech tex4ht\><<<
\NewConfigure{Canvas}[4]{\ht:special{t4ht"%
   *<span\Hnewline class="Canvas">%
   *X<span style="position:relative;\Hnewline
     width:\%.2f#4;"></span></span>%
   **<span\Hnewline style="position:absolute; left:\%.2f#4;
     top:\%.2f#4;"\Hnewline class="Canvas-xy"><span\Hnewline
     class="Canvas-char">%
   *</span></span>%
   *<span class="Canvas-HR"\Hnewline style="position:absolute;
     left:\%.2f#4;top:\%.2f#4;width:\%.2f#4;"
     ><hr\Hnewline style="height:\%.2f#4;"></span>%
   *#1*#2*#1*#2*#3}}
\Configure{Canvas}{0.00000290646}{0.0}{0.5}{ex}
\Css{.Canvas { position:relative; }}
>>>



%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Subdirectories for Images}
%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<a:imgdir\><<<
\a:imgdir >>>

\<img src dir\><<<
\ifx \a:imgdir\:UnDef
   \let\a:imgdir=\empty
   \catcode`\:=12
      \expandafter
      \def\csname :temp\endcsname#1imgdir:#2,#3|<par del|>{%
         \if !#2!\else \expandafter
                          \def\csname a:imgdir\endcsname{#2}\fi}
      \expandafter\csname :temp\expandafter\endcsname
         \Preamble ,imgdir:,|<par del|>%
   \catcode`\:=11
   \Log:Note{for addressing images in
       a subdirectory,  use the command line option `imgdir:.../'}
\fi
>>>

A = instead of \verb+->+ works well on Windows NT but unfortunately
 there's a problem with Windows 98. This OS insists on seeing = as a
 delimiter and reports an error.



\<configure html-speech tex4ht2\><<<
\ifx \a:imgdir\empty\else
   \let\GIF:NAME=\gif:name
   \def\gif:name#1{%
     \let\:temp=\GIF:NAME
     \ifx \gif:nm\cond:imgs
        \def\:next{\edef\:tempa{#1}\expandafter\I:images \:tempa/....}%
     \else
        \def\:next{\GIF:NAME{#1}}%
      \fi \:next}

   \def\cond:imgs{\edef\gif:nm}

   \def\I:images#1/#2....{%
      \edef\:next{\noexpand\:temp{\:tempa}}%
      \if .#2.\else \edef\:next{\noexpand\no:images{\:tempa}}\fi
      \:next}
   \def\no:images#1{\let\a:imgdir=\empty \:temp{#1}}
\fi
>>>

Test file:

\begin{verbatim}
\documentclass{article}
\begin{document}
\Picture{xx.png}
\Picture{http://wwww.foo.goo/xx.png}

With image: $\left( x_{n}\right) \alpha_m$.

\end{document}
\end{verbatim}







%%%%%%%%%%%%%%%%
\section{th4}
%%%%%%%%%%%%%%%%

\<configure html-speech th4\><<<
|<th4 for non-private use|>
\:CheckOption{th4}\if:Option \else \expandafter\endinput\fi
|<th4 sections|>
|<th4 tocs|>
|<th4 lists|>
|<th4 tables|>
|<th4 verbatim|>
|<th4 columns|>
|<th4 index|>
>>>


\<th4 for non-private use\><<<
\:CheckOption{javascript}
   \if:Option  \else\:CheckOption{th4}\fi
\if:Option 
   \Configure{JavaScript}
      {\HCode{<script type="text/JavaScript" ><!--\Hnewline}}
      {\HCode{//-->\Hnewline </script>}}
\fi
>>>


\<th4 for non-private use\><<<
\:CheckOption{draw} \if:Option \:CheckOption{th4} \if:Option 
   \Configure{Fig}
      {\ifx \AltFig\empty \Picture*{ \a:@Picture{Fig}}%
       \else              \Picture*[\AltFig]{ \a:@Picture{Fig}}\fi} 
      {\EndPicture}
\fi \fi
>>>


\<th4 columns\><<<
\Configure{Columns}
  {\IgnorePar\EndP
      \HCode{<table \Hnewline cellspacing="15"><tr valign="top">}}
  {\HCode{</tr></table>}}
  {\HCode{<td>}\ColMag{1.03}}
  {\IgnorePar\EndP\HCode{</td>}}
>>>

\<th4 index\><<<
\:CheckOption{index}\if:Option 
   \Configure{index}
     {\bgroup
         \Configure{Columns}
           {\IgnorePar\EndP
               \HCode{<table \Hnewline class="index" width="100\%"
                           cellspacing="15"><tr valign="top">}}
           {\HCode{</tr></table>}}
           {\HCode{<td>}\ColMag{1.1}}
           {\IgnorePar\EndP\HCode{</td>}}
        \Columns{2}\IndexFonts} 
     {\EndColumns \egroup}
     {\bgroup\IgnorePar\EndP
         \expandafter\ifx \csname prev:A\endcsname\relax
            \else \hfil\break \Tg<br />\par\IgnorePar \fi \IndexSec}
     {\egroup~~~~}
     {\bgroup\hfil\break\Tg<br />~~~}{\egroup~~~~}
     {~}{}
   \def\Idx:ch{0}
   \def\IndexSec#1{%
      \tmp:cnt=`#1\relax
      \ifnum \tmp:cnt>`Z\advance\tmp:cnt by -32 \fi
      \ifnum \tmp:cnt<`A\else \ifnum \tmp:cnt>`Z \else
          \ifnum \Idx:ch<\tmp:cnt
          \bgroup
            \Configure{centerline}
               {\HCode{<div\Hnewline class="IndexSec">}}{\HCode{</div>}}
             \leftline{\bf \char\tmp:cnt }%
             \global\let\prev:A|=\:UnDef
             \xdef\Idx:ch{\the\tmp:cnt}%
          \egroup
          \fi
      \fi \fi #1%
   }
   \Css{.IndexSec {margin-top:1em; margin-bottom:0.5em;}}
\fi
>>>


\<th4 sections\><<< 
\Configure{Part}{}{}{%
  \html:rightskip
  \bgroup
     \html:rightskip  \ht:everypar{} 
     \IgnorePar\EndP\HCode{<h1 class="PartHead">}\HtmlParOff}
  {\HCode{</h1>}\HtmlParOn\IgnoreIndent \egroup\par\ShowPar   \IgnoreIndent}
\Configure{LikeSection}{}{}
  {\IgnorePar  \EndP\HCode{<h3 class="LikeSectionHead">}}
  {\HCode{</h3>}\IgnoreIndent
    |<addr for Tag and Ref of Sec|>%
    \par \IgnoreIndent
  }
\ConfigureMark{Section}
  {\theSection}
\Configure{Section}
  {}{}
  {\IgnorePar\EndP\HCode{<h3 class="SectionHead">}%
   \gHAdvance\SectionCounter |by 1 \TitleMark\space
  }{\HCode{</h3>}\IgnoreIndent
     |<addr for Tag and Ref of Sec|>%
     \par \IgnoreIndent
  }
\Configure{SubSection}
  {}{}
  {\par \IgnorePar\EndP\HCode{<h3 class="SubSectionHead">}}
  {\HCode{</h3>}\IgnoreIndent \ShowPar}
>>>



\<th4 sections\><<<
\ConfigureMark{Chapter}
   {Chapter  \theChapterCounter}
\Configure{Chapter}
   {}{}   
   {\IgnorePar\EndP\HCode{<h2 class="ChapterHead"\a:LRdir>}%
      \TitleMark{\HCode{<br />}}}
   {\HCode{</h2>}\IgnoreIndent\IgnorePar}
\ConfigureMark{Appendix}{Appendix  \theChapterCounter}
\Configure{Appendix}
   {}{}   
   {\IgnorePar\EndP\HCode{<h2 class="AppendixHead"\a:LRdir>}%
         \TitleMark {\HCode{<br />}}}
   {\HCode{</h2>}\IgnoreIndent\IgnorePar}
\Configure{LikeChapter}
   {}{}   
   {\IgnorePar\EndP\HCode{<h2 class="LikeChapterHead"\a:LRdir>}\noindent
     \bgroup \def\uppercase##1{##1}}
   {\egroup \HCode{</h2>}\IgnoreIndent\IgnorePar }
>>>

\<th4 sections\><<< 
\Configure{+CutAt}{Chapter}{[}{] }
\Configure{+CutAt}{Section}{[}{] }
\Configure{+CutAt}{LikeSection}{[}{] }
\Configure{+CutAt}{SubSection}{[}{] }
>>>


\<th4 tocs\><<< 
\ConfigureToc{Chapter}
  {\HCode{<span class="ChapterToc">}}
  {~}
  {}
  {\HCode{</span><br\xml:empty>}}
\ConfigureToc{Section}
  {\HCode{<span class="SectionToc">}~~~}
  {~}
  {}
  {\HCode{</span><br\xml:empty>}}
\ConfigureToc{LikeSection}
  {}
  {\HCode{<span class="LikeSectionToc">}~~~}
  {}
  {\HCode{</span><br\xml:empty>}}
\ConfigureToc{SubSection}
  {}
  {\HCode{<span class="SubSectionToc">}~~~~~~}
  {}
  {\HCode{</span><br\xml:empty>}}
>>>


\<th4 verbatim\><<<
\Configure{Verbatim}
   {\ifvmode \IgnorePar\fi
    \HAssign\Verb:N = 0
    \EndP\HCode{<div class="Verbatim">}}
   {\IgnorePar\HCode{</div>}\par\ShowPar}
   {\HAdvance\Verb:N by 1 \ifnum \Verb:N>1 \HCode{<br />}\fi}
   {\:nbsp}
\Css{div.Verbatim { font-family: monospace; white-space: nowrap; }}  
\Css{body .Verbatim { margin: 1em; }}
>>>

\<th4 lists\><<<
\Configure{buttonList+}
    {\ifnum \ListCounter>1 \IgnorePar\EndP\HCode{<hr\xml:empty>}\fi
     \ShowPar\par\IgnoreIndent
    }
    {. #1\ShowPar} {\IgnorePar\EndP}  {\ListCounter}
>>>

\<th4 lists\><<<
\Configure{UList}
  {\IgnorePar\EndP\def\:tempB{disc}%
   \ifx\:tempA\:tempB \else \def\:tempB{square}\fi
   \ifx\:tempA\:tempB \else \def\:tempB{circle}\fi
   \hbox{\IgnorePar\EndP\HCode{<ul
   \ifx\:tempA\:tempB type="\:tempA" \fi \:UL:>}}}
  {\ht:everypar{}\EndP\HCode{</li></ul>}\ShowPar\par}
  {\ifnum \ListCounter>1  \EndP\HCode{</li>}\fi \hfil\break \HCode{<li>}}
\Configure{OList}
  {\IgnorePar\EndP\hbox{\HCode{<ol 
   \ifx \:temp\empty \else  type="\:temp" \fi 
   \:OL:>}}}
  {\ht:everypar{}\EndP
   \HCode{\ifnum \ListCounter=0<li>\fi </li></ol>}\ShowPar\par}
  {\ifnum \ListCounter>1  \EndP\HCode{</li>}\fi \hfil\break \HCode{<li>}}
>>>


\<th4 lists\><<< 
\Configure{Item}{}{\par}%
\Configure{DList}
   {\IgnorePar\EndP\HCode{<dl \:DL:>}}
   {\ht:everypar{}\EndP\HCode{\End:dd</dl>}%
    \ShowPar\par }
   {\IgnorePar\EndP\ifnum \ListCounter>1  \HCode{</dd>}\fi
    \HCode{<dt>}}
   {\HCode{</dt><dd>}\ShowPar \def\End:dd{</dd>}\hfil\break}
\Configure{buttonList}{}{}
  {}{.\ #1 }{\ListCounter}
>>>



\<th4 tables\><<< 
\HAssign\TableNo=0
\Configure{HTable}
  {\gHAdvance\TableNo by 1
   \ht:everypar{}\EndP\HCode{<table id="TBL-\TableNo"
       \Hnewline\TABLE:\:HTable:>}%
       \def\BR{\HCode{<br\xml:empty>}}}
  {\HCode{</table>}}
  {\HCode{<tr \:TR>}}{\HCode{</tr>}}
  {\ht:everypar{}\HCode{<\TD:typ\TD:more\Hnewline>}}
  {\ht:everypar{}\HCode{</\TD:typ>}}
\let\:HTable:|=\empty
\Configure{HTable+}
   {B}{ cellspacing="0" cellpadding="3pt" frame="border" border="1" }
   {<}{ align="left" }
   {>}{ align="right" }
   {-}{ align="center" }
   {^}{ valign="top" }
   {||}{ valign="middle" }
   {_}{ valign="bottom" }
   {=}{ valign="baseline" }
   {}{}
>>>










%%%%%%%%%%%%%%%%%%%%%%%
\section{nicefrac}
%%%%%%%%%%%%%%%%%%%%%%%

\<configure html-speech nicefrac\><<<
\Configure{nicefrac}
  {\HCode{<sup class="nicefrac">}}
  {\HCode{</sup>}/\HCode{<sub class="nicefrac">}}
  {\HCode{</sub>}}
>>>


\<configure html-speech bibtopic\><<<
\ConfigureEnv{btSect}
   {\ifvmode \IgnorePar\fi \EndP\HCode{<div class="btSect">}} 
   {\ifvmode \IgnorePar\fi \EndP\HCode{</div>}} 
   {}{}
>>>








\section{ntheorem}

\<configure html-speech ntheorem\><<<
|<32,4 ntheorem|>
>>>

\<32,4 ntheorem\><<<
\ConfigureEnv{Anmerkung}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="Anmerkung">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{Beispiel}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="Beispiel">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{Bemerkung}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="Bemerkung">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{Beweis}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="Beweis">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{Corollary}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="Corollary">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{Definition}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="Definition">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{Example}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="Example">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{Korollar}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="Korollar">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{Lemma}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="Lemma">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{Proof}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="Proof">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{Proposition}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="Proposition">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{Remark}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="Remark">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{Satz}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="Satz">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{Theorem}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="Theorem">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{anmerkung}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="anmerkung">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{beispiel}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="beispiel">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{bemerkung}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="bemerkung">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{beweis}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="beweis">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{corollary}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="corollary">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{definition}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="definition">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{example}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="example">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{korollar}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="korollar">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{lemma}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="lemma">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{proof}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="proof">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{proposition}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="proposition">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{remark}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="remark">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{satz}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="satz">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
\ConfigureEnv{theorem}
   {\ifvmode\IgnorePar\fi \EndP 
    \HCode{<div class="theorem">}} 
   {\ifvmode\IgnorePar\fi \EndP \HCode{</div>}} {}{}
>>>

\section{hyperref}

\<config hyperref form 4\><<<
\Configure{Form}
   {\IgnorePar\EndP\leavevmode \Tg<form \Hnewline \Attributes>}
   {\IgnorePar\EndP\Tg</form>}
>>>

\<configure html-speech hyperref\><<<
|<config hyperref form 4|>
|<hyperref shared|>
|<hyperref TextField|>
|<hyperref multiline|>
|<hyperref password|>
|<hyperref radio|>
|<hyperref on...|>
\NewConfigure{::action}{1}
\Configure{::action}
   {\edef\Attributes{\Attributes\space action="\AttributeVal"}}
\NewConfigure{::method}{1}
\Configure{::method}
   {\edef\Attributes{\Attributes\space method="\AttributeVal"}}
\NewConfigure{PushButton::}{1}
\Configure{PushButton::}
   {\leavevmode\Tg<input type="button" \Attributes\space/>}
\NewConfigure{Reset::}{1}
\Configure{Reset::}
  {\leavevmode\Tg<input type="reset" \Attributes\space/>}
\NewConfigure{Submit::}{1}
\Configure{Submit::}
  {\leavevmode\Tg<input type="submit" \Attributes\space/>}
\NewConfigure{CheckBox::}{2}
\Configure{CheckBox::}
  {\leavevmode\Tg<input type="checkbox" \Attributes\space/>}{}
\NewConfigure{CheckBox::checked}{2}
\Configure{CheckBox::checked}
  {\leavevmode\Tg<input type="checkbox" checked="checked"
      \Attributes\space/>}{}
\HAssign\form:id=0
>>>

\<hyperref shared\><<<
\NewConfigure{::value}{1}
\Configure{::value}
   {\edef\Attributes{\Attributes\space value="\AttributeVal"}}
\NewConfigure{::name}{1}
\Configure{::name}
   {\edef\Attributes{\Attributes\space name="\AttributeVal"}}
\NewConfigure{::default}{1}
\Configure{::default}
   {\let\::default=\AttributeVal}
\def\get:int#1.#2//{\tmp:cnt=#1 }
>>>

\<\><<<
\NewConfigure{::borderwidth}{1}
\Configure{::borderwidth}
   {\Css{div\#form-\form:id {border-width: \AttributeVal;
                              border-style:solid;}}}
\NewConfigure{::bordercolor}{1}
\Configure{::bordercolor}
   {\expandafter\get:colors\AttributeVal//%
      \Css{div\#form-\form:id {border-color:\AttributeVal}}}
\def\get:colors#1 #2 #3//{%
   \get:color{#1}\edef\AttributeVal{\the\tmp:cnt\%}%
   \get:color{#2}\edef\AttributeVal{\AttributeVal,
        \the\tmp:cnt\%}%
   \get:color{#3}\edef\AttributeVal{rgb(\AttributeVal,
        \the\tmp:cnt\%)}%
}
\def\get:color#1{%
   \tmp:dim=#1pt \multiply\tmp:dim by 100
   \expandafter\get:int\the\tmp:dim//}
>>>



\<hyperref on...\><<<
\def\:tempc#1{%
  \NewConfigure{::#1}{1}%
  \Configure{::#1}%
    {\edef\Attributes{\Attributes\space #1="\AttributeVal"}}}
\:tempc{onclick}
\:tempc{onblur}
\:tempc{onchange}
\:tempc{onclick}
\:tempc{ondblclick}
\:tempc{onfocus}
\:tempc{onkeydown}
\:tempc{onkeypress}
\:tempc{onkeyup}
\:tempc{onmousedown}
\:tempc{onmousemove}
\:tempc{onmouseout}
\:tempc{onmouseover}
\:tempc{onmouseup}
\:tempc{onselect}
>>>

\<hyperref TextField\><<<
\NewConfigure{TextField::}{2}
\Configure{TextField::}{}{ \Tg<input type="text" \Attributes />}
\NewConfigure{TextField::width}{1}
\Configure{TextField::width}
   {\tmp:dim=\AttributeVal   \divide\tmp:dim by 6
    \expandafter\get:int\the\tmp:dim//%
    \edef\Attributes{\Attributes\space size="\the\tmp:cnt"}}
\NewConfigure{TextField::default}{1}
\Configure{TextField::default}
   {\edef\Attributes{\Attributes\space value="\AttributeVal"}}
>>>
\<hyperref multiline\><<<
\NewConfigure{TextField::multiline}{2}
\Configure{TextField::multiline}
  {}
  { \Tg<textarea
        \Attributes>\expandafter\set:ln\multiline:value,|<par del|>%
  \global\let\multiline:value=\empty \Tg</textarea>}

\let\multiline:value=\empty
\def\set:ln#1,#2|<par del|>{#1%
  \def\:temp{#2}\ifx \:temp\empty \else
     \hfil\break  \def\:temp{\set:ln#2|<par del|>}%
  \fi \:temp}

\NewConfigure{multiline::value}{1}
\Configure{multiline::value}
  {\let\multiline:value=\AttributeVal}

\NewConfigure{multiline::width}{1}
\Configure{multiline::width}
   {\tmp:dim=\AttributeVal   \divide\tmp:dim by 6
    \expandafter\get:int\the\tmp:dim//%
    \edef\Attributes{\Attributes\space cols="\the\tmp:cnt"}}

\NewConfigure{multiline::height}{1}
\Configure{multiline::height}
   {\tmp:dim=\AttributeVal   \divide\tmp:dim by 6
    \expandafter\get:int\the\tmp:dim//%
    \edef\Attributes{\Attributes\space rows="\the\tmp:cnt"}}
>>>

\<hyperref password\><<<
\NewConfigure{TextField::password}{2}
\Configure{TextField::password}
  {}{\Tg<input type="password" \Attributes />}
>>>

\<hyperref shared\><<<
\def\Default:Checked#1{%
   \ifx #1\Un:Def \let\:temp=\empty \else
      \let\:temp=\relax
      \let\:tempa=\relax
      \edef\:temp{\def\:temp####1#1#1####2//{\def\:temp{####2}}%
                      \:temp \AttributeVal #1=#1#1//%
          \def\:tempa####1=####2//{\def\noexpand\AttributeVal{####1}}%
              \:tempa\AttributeVal=//}%
      \:temp
   \fi
}
>>>

\<hyperref radio\><<<
\NewConfigure{ChoiceMenu::radio}{5}
\Configure{ChoiceMenu::radio}
   {\IgnorePar\EndP\leavevmode
      \Tg<div id="form-\form:id">\gHAdvance\form:id by 1 }
   { }{\IgnorePar\EndP\Tg</div>}
   {\Default:Checked\radio::default
    \Tg<input\Hnewline type="radio" 
            \ifx \:temp\empty\else checked="checked" \fi
            \Attributes\space />}
   {}
\NewConfigure{radio::default}{1}
\Configure{radio::default}
   {\let\radio::default=\AttributeVal}
>>>

\<hyperref radio\><<<
\NewConfigure{ChoiceMenu::combo}{5}
\Configure{ChoiceMenu::combo}
   {}
   {~\Tg<select\Hnewline \Attributes \Hnewline size="1">}
   {\Tg</select>}
   {\Tg<option \ifx\::default\AttributeVal selected="selected"\fi
        \Hnewline>} 
   {\Tg</option>}
\NewConfigure{combo::default}{1}
\Configure{combo::default}
   {\let\combo::default=\AttributeVal}
>>>

\<hyperref radio\><<<
\NewConfigure{ChoiceMenu::popdown}{5}
\Configure{ChoiceMenu::popdown}
   {}{\HCode{\Hnewline <select \Attributes \Hnewline size="1">}}
   {\Tg</select>}
   {\Tg<option \ifx\::default\AttributeVal selected="selected"\fi
        \Hnewline>} {\Tg</option>}
>>>

The \verb'size="1"' makes the select a popout memnu
\<hyperref radio\><<<
\NewConfigure{ChoiceMenu::}{5}
\Configure{ChoiceMenu::}
   {}{\HCode{\Hnewline <select\Hnewline \Attributes>}}{\Tg</select>}
   {\Tg<option \ifx\::default\AttributeVal selected="selected"\fi
        \Hnewline>}  {\Tg</option>}
\NewConfigure{::menulength}{1}
\Configure{::menulength}
   {\edef\Attributes{\Attributes\space size="\AttributeVal"}}
>>>


\<configure html-speech hyperref\><<<
\ifx \@baseurl\@empty \else
   \Configure{@HEAD}
      {\HCode{<base href="\:baseurl" />}}
   \let\:baseurl\@baseurl
   \let\@baseurl=\@empty
\fi
>>>


%%%%%%%%%%%%%%%%%%%%
\section{web}
%%%%%%%%%%%%%%%%%%%%

\<configure html-speech web\><<<
\Configure{webversion} {\\} {}
\Configure{webuniversity}
   {\Tg<div class="webuniversity">} {\Tg</div>}
\Css{div div.webuniversity {color : rgb(0\%,0\%,80\%); 
        margin-bottom: 1em; text-align: center;}}

\Configure{maketitle}
   {\IgnorePar\EndP\par\Tg<div class="maketitle">}
   {\IgnorePar\EndP\par\Tg</div>}
\Css{div.maketitle {text-align: center;
      margin-left: 3em;   margin-right: 3em; }}

\Configure{HColor}{webgreen}{rgb(0\%,50\%,0\%)}
\Configure{HColor}{webbrown}{rgb(60\%,0\%,0\%)}
\Configure{HColor}{webyellow}{rgb(98\%,92\%,73\%)}
\Configure{HColor}{webgray}{rgb(75.3\%,75.3\%,75.3\%)}
\Configure{HColor}{webblue}{rgb(0\%,0\%,80\%)}
>>>

\section{exerquiz}

\<configure html-speech exerquiz\><<<
|<32,4 exerquiz|>
|<4 exerquiz|>
>>>

\<32,4 exerquiz\><<<
\Configure{Form}{}{}
\Configure{@HEAD}{\input exerqz.4ht }
\Css{.onClick {color:green;}}
\Configure{TextField::}{}{%
   \IgnorePar \EndP
   \HCode{<form action="." name="form\quiz@total"><input
       type="text"\Hnewline  \Attributes /></form>}%
}
\Configure{javascript}{JavaScript:}
>>>

\<32,4 exerquiz\><<<
\ifx \eq@sqrtmsg\:UnDef
   \def\eq@sqrtmsg{"Right!"}
\fi
\ifx \eq@sqwgmsg\:UnDef
   \def\eq@sqwgmsg{"Wrong!"}
\fi
\Configure{shortquiz}
   {(\alph{quizno})}
   {alert(\eq@sqrtmsg,3);}
   {alert(\eq@sqwgmsg,3);}
\Configure{quiz}
   {(\alph{quizno})}
   {qthis=this;
     ProcessQuestion (\ANS,"\alph{quizno}",\thequestionno,
      1,"\eq@bqlabel",\Quiz:N)}
   {InitializeQuiz("\quiz@total",
      \ifeq@nocorrections0\else1\fi,\Quiz:N,\LikeRef{ans-\Quiz:N},
      "(",")")}
   {QuizEnd("\:bqlabel",\thequestionno,"\quiz@total",\Quiz:N)}
   {Corrections("\eq@RC","\eq@AC",\Quiz:N)}
\Configure{quiz*}
   {[]}
   {qthis=this;
     ProcessQuestion (\ANS,"[]",\thequestionno,
      0,"\eq@bqlabel",\Quiz:N)}
   {InitializeQuiz("\quiz@total",
      \ifeq@nocorrections0\else1\fi,\Quiz:N,
      \LikeRef{ans-\Quiz:N},"","")}
>>>

\<-NOPE\><<<
\Configure{quiz*}
   {qthis=this;
    ProcessQuestion(\ANS,"\alph{quizno}",\thequestionno,
      0,"\eq@bqlabel",\Quiz:N)}
>>>
 

\<32,4 exerquiz\><<<
\ConfigureEnv{shortquiz}
   {\IgnorePar\EndP\leavevmode} {} {}{}
\Configure{ReturnTo}{\begin{flushright}}{\end{flushright}}
>>>

\<4 exerquiz\><<<
\ConfigureList{questions}%
   {\EndP\HCode{<ol type="1" class="questions"\Hnewline
        >}|<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\EndP\HCode{</li></ol>}\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</li>}\DeleteMark}
   {\HCode{<li class="questions">}\AnchorLabel}
>>>



\<4 exerquiz\><<<
\def\a:temp#1#2{%
   \ifOption{#2}{\def\a:charset{#2}}{}
   \def\:tempa{#1}\ifx \eqOutOf\:tempa
      \def\A:charset{#2}\ifx \A:charset\empty\else
          \def\A:charset{#2}%
   \fi\fi}
\a:temp{sur}{charset=iso-8859-2}
\a:temp{von}{charset=iso-8859-2}
>>>



\<exerqz\><<<
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  
% exerqz.4ht                            |version %
% Copyright (C) |CopyYear.1999.                          %
%                      Donald P. Story & Eitan M. Gurari %
|<TeX4ht copyright|>
|<exerqz's vars|>
|<predefined exerquiz javascript|>
>>>

\<predefined exerquiz javascript\><<<
\JavaScript-$
var QuizInitialized;
var EndQuizPushed;
var CurrentQuizNo;
var Responses;
var ResponsesAddr;
var Cor;
var CorAddr;
var qthis;
var prev_notify;
function InitializeQuiz(qtfield,mark,quizN,ansN,lbrc,rbrc) {
  Score=0;
  QuizInitialized=1;
  CurrentQuizNo=quizN;
  eval( 'document.form'+qtfield+'.'+qtfield+'.value="$eqScore";' )  
  RightWrong=new Array();
  |<hide sol|>
  Responses=new Array();
  ResponsesAddr=new Array();
  |<hide cor|>  
  Cor=new Array();
  CorAddr=new Array();
  EndQuizPushed=0;
  for(var i=1; i<=ansN; i++){
     RightWrong[i]=0;
  }
}
\EndJavaScript
>>>

\<show sol\><<<
if( ResponsesAddr[probno] != null ){
  if (notify == 0 ) {
    ResponsesAddr[probno].value=Responses[probno];
  } else {
    ResponsesAddr[probno].value="("+Responses[probno]+")";
} }
qthis.value = "#";  ResponsesAddr[probno]=qthis;
>>>

\<hide sol\><<<
for(var i in Responses){
  if (prev_notify == 0 ) {
    ResponsesAddr[i].value=Responses[i];
  } else {
    ResponsesAddr[i].value="("+Responses[i]+")"; 
} }
>>>

% if( Responses != null ){
\<record cor\><<<
var k=Cor.length;
eval('Cor[k]=thisform'+quizN+'.ans'+quizN+'x'+i+'.value');
eval('CorAddr[k]=thisform'+quizN+'.ans'+quizN+'x'+i);
>>>
\<hide cor\><<<
for(var i in Cor){
  CorAddr[i].value=Cor[i];
} 
>>>

% if( Cor != null ){

\<predefined exerquiz javascript\><<<
\JavaScript
function href(addr) { top.location.href=addr; }
\EndJavaScript
>>>

% function href(addr) { window.navigate(addr); }


\<predefined exerquiz javascript\><<<
\JavaScript
function Corrections(lbl1,lbl2,quizN) {
  if ( (EndQuizPushed == 1) && ( CurrentQuizNo == quizN ) ){
    for(var i in RightWrong){
      if( (RightWrong[i]==0) ){
        |<record cor|>
        eval('thisform'+quizN+'.ans'+quizN+'x'+i+'.value= "*"');
  } }
} } 
\EndJavaScript
>>>

\<32,4 exerquiz\><<<
\immediate\write16{%
***********************************************************\Hnewline
The `\eq@CA' button fails under Netscape, \Hnewline
due to a code of the following form.\Hnewline
\Hnewline
<html><head><title>?</title>\Hnewline
<script\space type="text/JavaScript"\space ><!--\space \Hnewline
\space \space \space function\space f()\space {\Hnewline
\space \space \space \space \space formxx.inputxx.value="BBB";\Hnewline
\space \space \space}\Hnewline
//-->\space \Hnewline
</script>\space \space </head>\space <body>\Hnewline
\Hnewline
<form\space id="formxx">\space \space \Hnewline
\space \space \space <input\space type="text"\space 
\space name="foo"\space id="inputxx"\space 
\space value="AAA"\space />\Hnewline
\space \space \space <input\space value="\eq@CA"\space 
type="button"\space \space \space onClick="f()"\space />\Hnewline
\space \space \space <input\space value="CLEAR"\space 
type="reset"\space \space \space onClick="clear()"\space />\Hnewline
</form>\Hnewline
    \Hnewline
</body> \Hnewline
</html> \Hnewline
\Hnewline
If you know how to fix the function f() above for Netscape,\Hnewline
without changing the id attribute names, please consider\Hnewline
emailing the fix to gurari@cse.ohio-state.edu. Thanks\Hnewline
***********************************************************}
>>>
\<predefined exerquiz javascript\><<<
\JavaScript
function LinkTo(addr) {
}
\EndJavaScript
>>>

\<exerqz's vars\><<<
\def\eqXInitQuizMsg{\hbox{%
   \let\noexpand|=\string
   \csname eq@InitQuizMsg\endcsname}}
\expandafter\ifx \csname eq@InitQuizMsg\endcsname\relax
    \expandafter\def\csname eq@InitQuizMsg\endcsname{
        "You must initialize the Quiz! Click on "+bqlabel}
\fi
\def\eqXQuizTotalMsg{\hbox{%
   \let\noexpand|=\string
   \def\thequestionno{"+thequestionno+"}%
   \csname eq@QuizTotalMsg\endcsname}}
\expandafter\ifx \csname eq@QuizTotalMsg\endcsname\relax
    \expandafter\def\csname eq@QuizTotalMsg\endcsname{"Score: '
         +Score +' out of '+thequestionno+'"}
\fi
\def\eqXMadeChoice{\hbox{%
   \let\noexpand|=\string
   \csname eq@MadeChoice\endcsname}}
\expandafter\ifx \csname eq@MadeChoice\endcsname\relax
    \expandafter\def\csname eq@MadeChoice\endcsname{
            "You have already made a choice. Your choice was ("
            +Responses[probno]+")."
            +" Do you want to change it?"}
\fi
\expandafter\ifx \csname eqScore\endcsname\relax
    \def\eqScore{Score:}
\fi
>>>

The \verb'Wollen Sie dies \noexpand\344ndern?' is a problem because it
takes the \verb'\344' into \verb'44'. A \verb'\string' will properly 
produce \verb'\344'; hence, the above dirty trick.

\begin{verbatim}
Doesn't IE escape in the way that Acrobat JavaScript does?

Another possibility is to use String.fromCharCode()

Convert Octal \344 to decimal 228, then use
String.fromCharCode(228)

   
          How to deliver browser specific content using JavaScript
                                      

<SCRIPT LANGUAGE="JavaScript">
<!--
  if( -1 != navigator.userAgent.
      indexOf ("AOL") )
  {
    // load America Online version
    location.href="aol.htm";
  }
  else
  if( -1 != navigator.userAgent.
      indexOf ("MSIE") )
  {
    // load Microsoft Internet
    // Explorer version
    location.href="msie.htm";
  }
  else
  if( -1 != navigator.userAgent.
      indexOf ("Mozilla") )
  {
    // load Netscape version
    location.href="netscape.htm";
  }
  else
  {
    // load other version
    location.href="other.htm";
  }
-->
</SCRIPT>

\end{verbatim}

\<predefined exerquiz javascript\><<<
\JavaScript-$
function QuizEnd(bqlabel,thequestionno,quiztotal,quizN){
  if ((QuizInitialized !=1) |||| ( CurrentQuizNo!= quizN )){   
     alert($eqXInitQuizMsg,3);
  } else {
     eval( 'document.form'+quiztotal+'.'+quiztotal+
       '.value=$eqXQuizTotalMsg');
         QuizInitialized=-1;
         EndQuizPushed=1; 
} }
\EndJavaScript

\JavaScript-$
function  ProcessQuestion
  (key,letterresp,probno,notify,bqlabel,quizN) {
    if ((QuizInitialized !=1) |||| ( CurrentQuizNo!= quizN )){   
      alert($eqXInitQuizMsg,3);
    } else {
      |<function ProcUserResp(key,letterresp,probno,notify)|> 
      prev_notify = notify;
}   }
\EndJavaScript
>>>

\<function ProcUserResp(key,letterresp,probno,notify)\><<<
if (Responses[probno] == null) {
   if (key==1) {
      Score++;
      RightWrong[probno]=1;
   }
   else
      RightWrong[probno]=0;
   |<show sol|>
   Responses[probno]=letterresp;
}
else {
   if (notify==0)
      User=true;
   else
      User=confirm($eqXMadeChoice);
   if (User) {
      if (RightWrong[probno]==1) {
          if (key==0) {
            Score -= 1;
            RightWrong[probno]=0;
            |<show sol|>
            Responses[probno]=letterresp;
         }
      }
      else {
          if (key==1) {
            Score++;
            RightWrong[probno]=1;
            |<show sol|>
            Responses[probno]=letterresp;
         }
         else {
            RightWrong[probno]=0;
            |<show sol|>
            Responses[probno]=letterresp;
         }
      }
   }
}
>>>











\section{tex4ht}

\<title for hypertext page\><<<
\Configure{TITLE+}{\HCode{\jobname.\:html}}
>>>

\<0,32,4 latex\><<<
\ifTag{TITLE+}{\Configure{TITLE+}{\LikeRef{TITLE+}}}{}
>>>

Was \verb'\ifTag{TITLE+}{\Configure{TITLE+}{\HCode{\LikeRef{TITLE+}}}}{}',
but the \verb'\HCode' leaves \verb'\Protect' in for the latter comamnds which arrive
to the title--the original motivation for the \verb'\HCode' was to
protect the title from undesirable tags. Something like \verb+H\`ello+ can
send it.  It now sems to be more trouble than help.




\<config tex4ht\><<<
|<0,32,4 preambles|>
\ifx \a:FontCss:\:UnDef
   \Configure{FontCss}{Font\string_Css##1}
                   {Font\string_Css\string_Plus\space##1}
\fi
\expandafter\ifx \csname aa:Css\endcsname\relax
   \Configure{Css}{Css: ##1}
\fi
\:CheckOption{edit} \if:Option 
   \Configure{edit}{\HCode{<strong>&lt;}}{\HCode{&gt;</strong>}}
                {<strong>&lt;}{&gt;</strong>}
\fi
\:CheckOption{hooks++} \if:Option
\else \:CheckOption{hooks+}  \if:Option
\else \:CheckOption{hooks}  \if:Option
\fi\fi\fi
\if:Option
   \Configure{hooks}
      {\HCode{<strong class="hooks">&lt;}}{\HCode{&gt;</strong>}}{}{}  
\fi
\Configure{ExitHPage}{exit}{exit }{}
\Configure{TocLink}{\Link{#2}{#3}#4\ifvmode\IgnorePar\fi\EndLink}
\Configure{MiniHalign}{\hlg:a}{\hlg:b}\hlg:c\hlg:d{\hlg:e}\hlg:f
\:CheckOption{no-halign} \if:Option \else
  \Configure{noalign-}{}{}
\fi
\Configure{PictureAlt*+}
   {\let\sv:HtmlPar|=\HtmlPar   \let\HtmlPar|=\empty
     |<postscript for /Picture|>%
     |<tex halign and cr/crcr|>%
     \NoFonts\csname PauseMathClass\endcsname \SUBOff \SUPOff
     \let\HCode|=\:gobble     |%\offinterlineskip|%
     \let\EndPicture|=\empty}
   {\let\HCode|=\:HCode
     \let\EndPicture|=\:UnDef \let\HtmlPar|=\sv:HtmlPar \SUBOn \SUPOn
     \csname EndPauseMathClass\endcsname \EndNoFonts
     |<tex4ht halign and cr/crcr|>%
     |<delay postscript|>}
>>>


Was \verb+\SUBOff \SUPOff+. Any problems?

\<postscript for /Picture\><<<
\def\PsCode##1{{\ht:special{\PsCodeSpecial##1}}}%
>>>

\<tex halign and cr/crcr\><<<
\iffalse{\fi   
\let\sv:halign|=\halign
\let\sv:cr|=\cr
\let\sv:crcr|=\crcr
\iffalse}\fi 
\RecallTeXcr \let\halign |=\TeXhalign
>>>

\<tex4ht halign and cr/crcr\><<<
\iffalse{\fi   
\let\halign|=\sv:halign
\let\cr|=\sv:cr
\let\crcr|=\sv:crcr
\iffalse}\fi 
>>>

\<delay postscript\><<<
\let\PsCode|=\relax
>>>

\<config tex4ht\><<<
  \Configure{writetoc}{}
>>>

\<config tex4ht\><<<
\Configure{CutAtTITLE+}{}
\Configure{HPageTITLE+}{}
\Configure{AtBeginDocument} 
  {\edef\recallcatcodes{%
      \catcode`\noexpand\_|=\the\catcode`\_
      \catcode`\noexpand\^|=\the\catcode`\^ }%
   \catcode`\_=8\catcode`\^=7}
  {\recallcatcodes}
>>>

\<config tex4ht\><<<


\Configure{halignTB}{\HCode{<table }}{\HCode{>}}
\def\R:HA{\HCode{<tr \Hnewline}\halignTR\HCode{>}}
\def\r:HA{\HCode{</tr>}}
\def\D:HA{|<td save EndP|> \HCode{<td \ifnum \HMultispan>1 colspan="\HMultispan"\fi}%
   \halignTD \HCode{\Hnewline>}\ShowPar\par}
\def\d:HA{\ifvmode \IgnorePar \fi \EndP\HCode{</td>}|<td recall EndP|>}
\Configure{HVerbatim+}{\z@}{\:nbsp}
\Configure{CssFile}{\jobname.css}
  {/* \aa:CssFile\space from \jobname.tex (TeX4ht, \:today) */}
\Configure{Picture+}{}{}
\Configure{Picture*}{}{}
\Configure{Picture-alt}{[Picture]}
\Configure{Needs}{l. 
   \the\inputlineno\space--- needs --- #1 ---}
\Configure{Needs-}{l.
   \the\inputlineno\space--- needs --- #1 ---}
|<yes css|>
>>>


\<td save EndP\><<<
\SaveEndP 
>>>

\<td recall EndP\><<<
\RecallEndP 
>>>



\<config tex4ht\><<<
\Configure{moveright}{\leavevmode\endgraf }
\Configure{HChar}{x}
>>>


\<yes css\><<<
   \def\SPAN:#1{\HCode{<span class="#1">}}
   \def\EndSPAN:{\HCode{</span>}} 
   \def\DIV:#1{\HCode{<div class="#1">}}
   \def\EndDIV:{\HCode{</div>}} 
>>>



\section{Interpretation for the Entries}




Use \verb'\ ', and not \verb'~', in style files, because some
users redefine the latter macro.

\<html latex tocs\><<<
\def\:SPAN#1#2{\HCode{<span class="#1">}#2\HCode{</span>}} 
>>>


\section{latin1.def}


\<configure html-speech latin1\><<<
\def\HTitleText#1{%
   \bgroup
      \uccode`\~#1%
      \uppercase{%
   \egroup
      \edef~{\string~}%
   }%
}
\Configure{@TITLE}
  {\DeclareInputText{168}{"}%
   \HTitleText{209}%
    \HTitleText{194}%
    \HTitleText{210}%
    \HTitleText{195}%
    \HTitleText{211}%
    \HTitleText{196}%
    \HTitleText{212}%
    \HTitleText{197}%
    \HTitleText{213}%
    \HTitleText{198}%
    \HTitleText{214}%
    \HTitleText{199}%
    \HTitleText{215}%
    \HTitleText{200}%
    \HTitleText{216}%
    \HTitleText{201}%
    \HTitleText{217}%
    \HTitleText{202}%
    \HTitleText{218}%
    \HTitleText{203}%
    \HTitleText{219}%
    \HTitleText{204}%
    \HTitleText{220}%
    \HTitleText{205}%
    \HTitleText{221}%
    \HTitleText{206}%
    \HTitleText{222}%
    \HTitleText{207}%
    \HTitleText{223}%
    \HTitleText{224}%
    \HTitleText{240}%
    \HTitleText{225}%
    \HTitleText{241}%
    \HTitleText{226}%
    \HTitleText{242}%
    \HTitleText{227}%
    \HTitleText{243}%
    \HTitleText{228}%
    \HTitleText{244}%
    \HTitleText{229}%
    \HTitleText{245}%
    \HTitleText{230}%
    \HTitleText{246}%
    \HTitleText{231}%
    \HTitleText{247}%
    \HTitleText{232}%
    \HTitleText{248}%
    \HTitleText{233}%
    \HTitleText{249}%
    \HTitleText{234}%
    \HTitleText{250}%
    \HTitleText{235}%
    \HTitleText{251}%
    \HTitleText{236}%
    \HTitleText{252}%
    \HTitleText{237}%
    \HTitleText{253}%
    \HTitleText{238}%
    \HTitleText{254}%
    \HTitleText{239}%
    \HTitleText{255}%
}

>>>



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{syntax}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<configure html-speech syntax\><<<
\ConfigureEnv{grammar}
   {\Picture*{}}  {\EndPicture}
   {}{}
>>>



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{???????????}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\<article,report,book\><<<
|<quotations|>
\Configure{listof}{}{}{}{\HCode{<br\xml:empty>}}{}{}
>>>

\<quotations\><<<
\ConfigureEnv{quotation}
   {}{}
   {\IgnorePar\EndP\HCode{<div class="quotation">}}
   {\IgnorePar\EndP\HCode{</div>}\ShowPar}
\Css{.quotation  {margin-bottom:0.25em;
           margin-top:0.25em; margin-left:1em; }}
>>>
















\<PICT dot tabbing\><<<
\:CheckOption{pic-tabbing'} \if:Option
  \edef\:temp{\LikeRef{|<tabbing tag|>.}}%
  \def\:tempa{.}\ifx \:temp\:tempa 
      \ConfigureEnv{tabbing}{\Picture*{}}{\EndPicture}{}{}
  \fi
\fi 
>>>


   























   


%%%%%%%%%%%%%%%%%%%%%
\section{titlesec}
%%%%%%%%%%%%%%%%%%%%%


\<configure html-speech titlesec\><<<
\ifx \ttl@assign@ii\:Undef  
  |<pre 2005 titlesec|>
\fi
>>>


\<pre 2005 titlesec\><<<
\ConfigureMark{section}
   {\ifnum \c:secnumdepth>\c@secnumdepth  \expandafter\:gobble
    \else  \csname thetitlesection\endcsname\fi}
\Configure{section}{}{}
   {\IgnorePar \EndP\IgnorePar\HCode{<h3 class="sectionHead"\a:LRdir>}
    \TitleMark\space}
   {\HCode{</h3>}\IgnoreIndent\par}
\Configure{likesection}{}{}
   {\IgnorePar \EndP\IgnorePar\HCode{<h3 class="likesectionHead"\a:LRdir>}}
   {\HCode{</h3>}\IgnoreIndent\par}
>>>







\section{fontmath.ltx}


\<configure html-speech-math fontmath\><<<

|<html-speech-math plain,fontmath|>
>>>
































\section{tex4ht}


\<configure html-speech-math tex4ht\><<<

\Css{img.math{vertical-align:middle;}}

>>>


% \Configure{$$}
%    {\:xhtml{\IgnorePar\EndP}%
%     \HCode{<div class="displaymath">}} 
%    {\HCode{</div>}|<try env inline par|>} {}
% \Css{div.displaymath{text-align:center;}}





\verb'\endgraf' is safer than \verb'\par', because the latter may be redefined.
For instance, see p 262 in texbook.

\<configure html-speech-math tex4ht\><<<
\let\MathPar|=\empty 
\Configure{PicDisplay}
  {\edef\MathPar{\ifvmode par-\fi}\IgnorePar\endgraf\EndP
   \HCode{<center class="\MathPar math-display" \a:LRdir >}}
  {\HCode{</center>}}  {}  {class="\MathPar math-display" } 
>>>

% \Css{img.mathdisplay, div.displaymath, img.par-mathdisplay,
%      div.par-displaymath { margin-top: 1em; 
%                            margin-bottom: 1em; }}
% \Css{center img.mathdisplay, td img.mathdisplay,
%      center img.par-mathdisplay,
%      td img.par-mathdisplay { margin-top: 0; 
%                              margin-bottom:0 ; }}
% 








\<xmlns\><<<
xmlns="http://www.w3.org/1999/xhtml"
>>>






\subsection{TeX Engine}


The \verb'\trap:base' is to catch empty bases of exponents like, e.g.,
in \verb'$a^{^b}$'.




\<?\><<<
\def\MathRow#1{%
   \Configure{\expandafter\:gobble\string#1*}{*}%
      {<|.mrow\Hnewline 
         class="\expandafter\:gobble\string#1">}{</|.mrow>}%
      {\Configure{\expandafter\:gobble\string#1}{}{}{}{}}#1}%
>>>
\<recall dvimath par\><<<
\sv:ignore
>>>

\<sv dvimath par\><<<
\edef\sv:ignore{\if:nopar  
    \noexpand\IgnorePar\else \noexpand\ShowPar\fi}%
>>>


The \verb'\MathRow' requests a \verb'<|.mrow\Hnewline>...</|.mrow>', instead of the contributions
of \verb'\mathop', \verb'\mathrel',...., for the next parameter.






\subsection{latex.ltx}





Definitions like \verb'\def\mathbf#1{\a:mathbf#1\b:mathbf}'
can't be done on a global level, because \verb'\mathbf' is just
a name of a font. So, for instance, \verb'\bf' expands to \verb'\mathbf',
and so  \verb'$\bf R$' indirectly brings up the latter command.





\subsection{Palin + LaTeX}

The default \verb'\left' and \verb'\right' in their default definition
with tex produce multi-part delimiters, from cmex, on large
subformulas. Hence, the `'.' below is needed.



%    \def\:tempa{\{}\ifx \:tempa\:DEL  \let\:DEL\lbrc: \else
%    \def\:tempa{\}}\ifx \:tempa\:DEL  \let\:DEL\rbrc: \else
%    \def\:tempa{<}\ifx \:tempa\:DEL  \def\:DEL{\string&lt;}\else
%    \def\:tempa{>}\ifx \:tempa\:DEL  \def\:DEL{\string&gt;}%
%    \fi\fi\fi\fi }
% \edef\lbrc:{\string{}     \edef\rbrc:{\string}}

% \HCode{\string&#2#1;}%

\section{Eqnarray}

Had `BASELINE' before `MIDDLE', but changed to conform with math
in page 252-- in intro to theory book.



\section{Big, BIG, ....}

The 
\verb'\special{t4ht@[}...\special{t4ht@]}' gobble the enclosed stuff.
The external pair is provided as grouping mechanism for
sub/super-scripts cases like \verb'\bigl(...\bigr)^x' within dvimath
mode. The \verb'{\HCode{}}' is neded for creating content delimiters
\verb'.' delimiters like in \verb'$\bigl. a_b \bigr)$'; without that mathml 
gets something wrong there. 
\verb+\bigl{.}+ et al produce empty para,etr , hence the \verb+\:EMPTY+ is a ompensation for such cases.





\section{Exams}



\<configure html-speech exam\><<<
\ifx \ps@examheadings\:unDef \else
   |<Meers' exam|>
\fi
\ifx \@checkqueslevel\:unDef  \else
   |<Hirschhorns' exam|>
\fi
\ifx \@OneKeyHook\:unDef \else
   |<Alexanders' exam|>
\fi
>>>


\<Hirschhorns' exam\><<<
\Configure{uplevel}
   {\ifvmode \IgnorePar \fi \EndP \HCode{<div class="uplevel">}}
   {\ifvmode \IgnorePar \fi \EndP \HCode{</div>}}
\Configure{fullwidth}
   {\ifvmode \IgnorePar \fi \EndP \HCode{<div class="fullwidth">}}
   {\ifvmode \IgnorePar \fi \EndP \HCode{</div>}}
\Css{dl .uplevel, .fullwidth{margin-left:-2.5em;}}
\Css{dl dl .fullwidth {margin-left:-5em;}}
\Css{dl dl dl .fullwidth {margin-left:-7.5em;}}
>>>

\<Hirschhorns' exam\><<<
\ConfigureEnv{questions}
   {\ifvmode \IgnorePar \fi \EndP \HCode{<div class="questions">}}
   {\ifvmode \IgnorePar \fi \EndP \HCode{</div>}}
   {}{}
\ConfigureEnv{parts}
   {\ifvmode \IgnorePar \fi \EndP \HCode{<div class="parts">}}
   {\ifvmode \IgnorePar \fi \EndP \HCode{</div>}}
   {}{}
\ConfigureEnv{subparts}
   {\ifvmode \IgnorePar \fi \EndP \HCode{<div class="subparts">}}
   {\ifvmode \IgnorePar \fi \EndP \HCode{</div>}}
   {}{}
>>>


\<Hirschhorns' exam\><<<
\Configure{setpoints}
   {\HCode{<span class="setpoints">}}   {\HCode{</span>}}
>>>




\<Meers' exam\><<<
\ConfigureEnv{exam}
   {\ifvmode \IgnorePar \fi \EndP \HCode{<div class="exam">}}
   {\ifvmode \IgnorePar \fi \EndP \HCode{</div>}}
   {}{}
\ConfigureEnv{problem}
   {\ifvmode \IgnorePar \fi \EndP \HCode{<div class="problem">}}
   {\ifvmode \IgnorePar \fi \EndP \HCode{</div>}}
   {}{}
\Css{.problem{border-bottom: 1px solid black;}}
\Configure{scorebox}
   {\ifvmode \IgnorePar \fi \EndP \HCode{<div class="scorebox">}
    \bgroup\Configure{fbox}{\leavevmode}{}}
   {\egroup\ifvmode \IgnorePar \fi \EndP \HCode{</div>}}
\Css{.scorebox{margin-left:90\%; border: 1px solid black;}}
>>>


\<Alexanders' exam\><<<
\Configure{sectiontitle}
   {\ifvmode\IgnorePar\fi
      \EndP \HCode{<h4 class="sectiontitle">}\IgnorePar}
   {\ifvmode \IgnorePar \fi \EndP \HCode{</h4>}}
>>>

\<Alexanders' exam\><<<
\Configure{answer}
     {\HCode{<span class="answer">}}    {\HCode{</span>}}
\Css{.answer {text-decoration:underline;}}
\Configure{question}
    {\HCode{<span class="question">}}    {\HCode{</span>}}
>>>

\<Alexanders' exam\><<<
\Configure{instructions}
   {\ifvmode \IgnorePar \fi \EndP \HCode{<div class="instructions">}}
   {\IgnorePar\EndP \HCode{</div>}}
>>>


\<Alexanders' exam\><<<
\ConfigureEnv{examtop} 
   {\ifvmode \IgnorePar \fi \EndP \HCode{<table class="examtop"><tr><td>}}
   {\ifvmode \IgnorePar \fi \EndP \HCode{</td></tr></table>}}
   {}{}
\Configure{namedata} 
   {\ifvmode \IgnorePar \fi \EndP 
    \Configure{newline}{\HCode{</td><td
          class="namedata-rule"><hr /></td></tr><tr><td>}}%
    \HCode{</td><td><div class="namedata"><table><tr><td>}}
   {\ifvmode \IgnorePar \fi \EndP 
       \HCode{</td><td
           class="namedata-rule"><hr /></td></tr></table></div>}}
\Css{td.namedata-rule {width:10em; vertical-align:bottom; }}
\Css{div.namedata{text-align:right;}}
\Configure{classdata} 
   {\ifvmode \IgnorePar \fi \EndP \HCode{<h3 class="classdata">}}
   {\ifvmode \IgnorePar \fi \EndP \HCode{</h3>}}
>>>



\<Alexanders' exam\><<<
\ConfigureEnv{keytop} 
   {\ifvmode \IgnorePar \fi \EndP \HCode{<div class="keytop">}}
   {\ifvmode \IgnorePar \fi \EndP \HCode{</div>}}
   {}{}
>>>


\<Alexanders' exam\><<<
\Configure{frontmatter} 
   {\ifvmode \IgnorePar \fi \EndP \HCode{<div class="frontmatter">}}
   {\ifvmode \IgnorePar \fi \EndP \HCode{</div>}}
>>>
















%%%%%%%%%%%%%%%%%%
\section{Etc}
%%%%%%%%%%%%%%%%%%


\<configure html-speech rotating\><<<
\ConfigureEnv{turn}
   {\Picture+{}} {\EndPicture}
   {}{}
>>>


\<configure html-speech manju\><<<
\Configure{@TITLE}{\let\@title=\empty}
>>>




\<configure html-speech mls\><<<
\Configure{@TITLE}{\let\@title=\empty}
>>>










\<configure html-speech ulem\><<<
\Configure{uline}
   {\HCode{<span class="underline">}} {\HCode{</span>}}
\Configure{uuline}
   {\HCode{<span class="underline">}} {\HCode{</span>}}
\Configure{sout}
   {\HCode{<span class="sout">}} {\HCode{</span>}}
\Css{span.sout {text-decoration: line-through }}
\Configure{xout}
   {\HCode{<span class="xout"><span class="underline">}} 
   {\HCode{</span></span>}}
\Css{span.xout {text-decoration: line-through }}
\Configure{uwave}
   {\HCode{<span class="underline">}} 
   {\HCode{</span>}}
\Css{span.uwave {text-decoration: line-through }}
>>>



\<configure html-speech go\><<<
\Configure{showdiagram}
    {\Picture*[go]{}}  {\EndPicture}
>>>






\<configure html-speech pifont\><<<
\ConfigureList{dingautolist}
   {\EndP\HCode{<dl \a:LRdir class="dingautolist\expandafter\the
         \csname @listdepth\endcsname">}%
      |<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\EndP\HCode{</dd></dl>}\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</dd>}\HCode{<dt
        class="dingautolist">}}
   {\HCode{</dt><dd\Hnewline class="dingautolist">}}
\ConfigureList{Piautolist}
   {\EndP\HCode{<dl \a:LRdir class="Piautolist\expandafter\the
         \csname @listdepth\endcsname">}%
      |<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\EndP\HCode{</dd></dl>}\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</dd>}\HCode{<dt
        class="Piautolist">}}
   {\HCode{</dt><dd\Hnewline class="Piautolist">}}
\ConfigureList{Pilist}
   {\EndP\HCode{<dl \a:LRdir class="Pilist\expandafter\the
         \csname @listdepth\endcsname">}%
      |<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\EndP\HCode{</dd></dl>}\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</dd>}\HCode{<dt
        class="Pilist">}}
   {\HCode{</dt><dd\Hnewline class="Pilist">}}
>>>


\<configure html-speech paralist\><<<
\ConfigureList{asparaitem}%
   {\EndP\HCode{<div class="asparaitem">}\ShowPar\ShowIndent}
   {\EndP\HCode{</div>}\ShowPar}
   {\par\ShowPar{\parindent=10pt\leavevmode}}
   {}
\ConfigureList{asparaenum}%
   {\EndP\HCode{<div class="asparaenum">}\ShowPar\ShowIndent}
   {\EndP\HCode{</div>}\ShowPar}
   {\par\ShowPar{\parindent=10pt\leavevmode}}
   {}
\ConfigureList{asparadesc}%
   {\EndP\HCode{<div class="asparadesc">}\ShowPar\ShowIndent}
   {\EndP\HCode{</div>}\ShowPar}
   {\par\ShowPar{\parindent=10pt\leavevmode}}
   {}
\ConfigureList{compactdesc}%
   {\EndP\HCode{<dl \a:LRdir class="compactdesc">}%
      |<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\EndP\HCode{</dd></dl>}\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</dd>}\HCode{<dt
        class="compactdesc">}\bgroup \bf}
   {\egroup\EndP\HCode{</dt><dd\Hnewline class="compactdesc">}}
\ConfigureList{compactitem}%
   {\EndP\HCode{<ul>}%
      |<save end:itm|>\global\let\end:itm=\empty}
   {|<recall end:itm|>\EndP\HCode{</li></ul>}\ShowPar}
   {\end:itm \global\def\end:itm{\EndP\Tg</li>}\DeleteMark}
   {\HCode{<li class="compactitem">}}
\ConfigureEnv{enumerate}
   {}{|<try env inline par|>}{}{}
\ConfigureList{enumerate}%
   {\if@plalwaysadjust
        \EndP \HCode{<dl \a:LRdir class="enumerate">}%
           |<save end:itm|>\global\let\end:itm=\empty
       \def\para:enumII{|<recall end:itm|>\EndP
                        \HCode{</dd></dl>}\ShowPar}%
       \def\para:enumIII{\end:itm \global
          \def\end:itm{\EndP
                       \Tg</dd>}\HCode{<dt class="enumerate">}}%
       \def\para:enumIV{\EndP
                  \HCode{</dt><dd\Hnewline class="enumerate">}}%
    \else
       |<enumerate I|>%
       \def\para:enumII{|<enumerate II|>}%
       \def\para:enumIII{|<enumerate III|>}%
       \def\para:enumIV{|<enumerate IV|>}%
    \fi
    }
    {\para:enumII}    {\para:enumIII}    {\para:enumIV}
>>>





\<configure html-speech alphanum\><<<
\def\:tempc#1#2#3#4{%
   \ConfigureMark{toclvl#1}
      {\HCode{<span class="titlemark">}\csname thelvl#1\endcsname
       \HCode{</span>}}%
   \Configure{toclvl#1}
      {}{}
      {\ifvmode \IgnorePar\fi \EndP\IgnorePar
       \HCode{<#4 class="toclvl#1Head"\a:LRdir>}\TitleMark\space\HtmlParOff}
      {\HCode{</#4>}\HtmlParOn \IgnoreIndent \par}%
   \ConfigureToc{toclvl#1}
      {|<alphanum toc spaces|>\def\:temp{\J@INumberRoot{#2}{\tmp:cnt}}%
       \afterassignment\:temp \tmp:cnt}
      {#3 \HCode{<span class="toclvl#1">}}{}
      {\HCode{</span><br\xml:empty>}}%
   \ConfigureToc{liketoclvl#1}
      {} {|<alphanum toc spaces|>\HCode{<span class="liketoclvl#1">}}{}
      {\HCode{</span><br\xml:empty>}}%
}
\:tempc a1{.}{h3}
\:tempc b2{.}{h4}
\:tempc c3{.}{h5}
\:tempc d4{)}{h5}
\:tempc e5{)}{h5}
\:tempc f6{)}{h5}
\:tempc g7{)}{h5}
\:tempc h8{)}{h5}
\:tempc i9{)}{h5}
\:tempc j{10}{)}{h5}
\:tempc k{11}{)}{h5}
\:tempc l{12}{)}{h5}
>>>

\<alphanum toc spaces\><<<
\tmp:cnt=0 \loop \advance\tmp:cnt by 1
                  \ifnum \tmp:cnt<#2 ~~\repeat
>>>

\<\><<<
\ConfigureMark{toc}
   {\HCode{<span class="titlemark">}\csname thelvl\alph{tiefe}\endcsname
    \HCode{</span>}}
\Configure{toc}
   {}{}
   {\ifvmode \IgnorePar\fi \EndP\IgnorePar  
    \HCode{<h5 class="tocHead"\a:LRdir>}\TitleMark\space\HtmlParOff}
   {\HCode{</h5>}\HtmlParOn \IgnoreIndent \par}
>>>







\<configure html-speech alphanum\><<<
\bgroup
   \let\ifx=\relax
   \let\:temp=\relax
   \let\:tempa=\expandafter
   \let\expandafter=\relax
   \let\:TableOfContents=\relax
   \let\else=\relax
   \let\if=\relax
   \let\fi=\relax
   \def\Auto:ent#1{\noexpand\Auto:ent{#1,toclvla,liketoclvla,toclvlb,%
      liketoclvlb,toclvlc,liketoclvlc,toclvld,liketoclvld,toclvle,%
      liketoclvle,toclvlf,liketoclvlf,toclvlg,liketoclvlg,toclvlh,%
      liketoclvlh,toclvli,liketoclvli,toclvlj,%
      liketoclvlj,toclvlk,liketoclvlk,toclvll,liketoclvll}}
   \edef\:TOC{\def\noexpand\:TOC{\:TOC}}
   \:tempa 
\egroup \:TOC
>>>













  \<configure html-speech gloss\><<<
\ConfigureList{glosslist}{}{}{}{}
\Configure{gloss}  {\Link{\gls@b}{}}  {\EndLink}
\Configure{glosslist}%
   {\IgnorePar\EndP
    \HCode{<dl \a:LRdir class="glosslist">}\global\let\end:glitm=\empty}
   {\IgnorePar\EndP\HCode{</dd></dl>}\ShowPar}
   {\end:glitm\gdef\end:glitm{\EndP\Tg</dd>}\HCode{<dt
        class="glosslist">}\Link{}{\GlossLabel}\EndLink }
   {\HCode{</dt><dd\Hnewline class="glosslist">}}
\Css{dl.glosslist {margin-left:2em;}}
>>>





\<configure html-speech booktabs\><<<
\Configure{toprule}
   {|<booktabs rule mag|>%
    \Css{tr\#TBL-\TableNo-\ifnum \HRow=0 
          1- td{border-top:|<booktabs rule height|> solid}
     \else
          \HRow- td{border-bottom:|<booktabs rule height|> solid}
     \fi
   }}
\Configure{bottomrule}
   {|<booktabs rule mag|>%
    \Css{tr\#TBL-\TableNo-\HRow-
            td{border-bottom:|<booktabs rule height|> solid}}}
\Configure{midrule}
   {|<booktabs rule mag|>%
    \Css{tr\#TBL-\TableNo-\HRow- 
            td{border-bottom:|<booktabs rule height|> solid}}}
\Configure{cmidrule}
   {|<booktabs rule mag|>%
    \Css{tr\#TBL-\TableNo-\HRow- 
            td{border-bottom:|<booktabs rule height|> solid}}%
    \HCode{<!--cmidrule-->}}
>>>



The cmidrule introduces ruler segments at different rows, instead of all of
them in the same row.

\<booktabs rule height\><<<
\expandafter\x:Em \the\@thisrulewidth em 
>>>

\<booktabs rule mag\><<<
\@thisrulewidth=\csname a:rule-mag\endcsname\@thisrulewidth    
>>>

\<configure html-speech booktabs\><<<
\NewConfigure{rule-mag}{1}
\Configure{rule-mag}{0.14}
{
  \def\x:Em{%
    \catcode`\p=12
    \catcode`\t=12
    \gdef\x:Em}
  \x:Em#1pt{#1}
}
>>>




%%%%%%%%%%%%%%%%%%
\section{Endnotes.sty}
%%%%%%%%%%%%%%%%%%





\<configure html-speech endnotes\><<<
\Configure{makeenmark}
   {\Link{ennote-\endnoteN}{enmark-\endnoteN}} {\EndLink}
\Configure{enoteformat}
   {\Link{enmark-\endnoteN}{ennote-\endnoteN}} {\EndLink}
>>>





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Shared}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%






 \OutputCode[4ht]\<exerqz\>
 \OutputCodE\<onmouseover.4ht\>         

\endinput




